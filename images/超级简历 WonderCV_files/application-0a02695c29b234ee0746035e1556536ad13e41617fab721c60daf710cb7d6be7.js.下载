/* ========================================================================
 * Bootstrap: dropdown.js v3.3.7
 * http://getbootstrap.com/javascript/#dropdowns
 * ========================================================================
 * Copyright 2011-2016 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
function connectWebViewJavascriptBridge(t){window.WebViewJavascriptBridge?t(WebViewJavascriptBridge):document.addEventListener("WebViewJavascriptBridgeReady",function(){t(WebViewJavascriptBridge)},!1)}function initAndroidBridge(t){is_init||(is_init=!0,t.init(function(t,e){e(data)}))}function callAndroidBridge(t,e,n){connectWebViewJavascriptBridge(function(e){is_init||(is_init=!0,e.init(function(t,e){e(data)})),e.callHandler(t,{message:n},function(){})})}function callAndroidBridgeJson(t,e){connectWebViewJavascriptBridge(function(n){is_init||(is_init=!0,n.init(function(t,e){e(data)})),n.callHandler(t,e,function(){})})}function addNewStyle(t){var e=document.getElementById("styles_js");e||((e=document.createElement("style")).type="text/css",e.id="styles_js",document.getElementsByTagName("head")[0].appendChild(e)),e.appendChild(document.createTextNode(t))}function getStr(t,e){t.split(e)[0],t.split(e)[1]}function versionCompare(t,e){if(typeof t+typeof e!="stringstring")return!1;for(var n=t.split("."),i=e.split("."),o=0,r=Math.max(n.length,i.length);o<r;o++){if(n[o]&&!i[o]&&parseInt(n[o])>0||parseInt(n[o])>parseInt(i[o]))return 1;if(i[o]&&!n[o]&&parseInt(i[o])>0||parseInt(n[o])<parseInt(i[o]))return-1}return 0}function setHeaderRelative(){$(".browser-tip").removeClass("hide"),$(".header").css("position","relative"),$(".header").css("margin-bottom","-56px")}function setHeaderNormal(){$(".browser-tip").addClass("hide"),$(".header").css("position","fixed"),$(".header").css("margin-bottom","0")}function isMobileDevice(){return"undefined"!=typeof window.orientation||-1!==navigator.userAgent.indexOf("IEMobile")}function showBindOfficalAccount(t){const e=$("#bind-wx-pub-modal"),n=JSON.parse(e.data("offical-account-status"));setTimeout(function(){"ios"===client||isMobileDevice()||n||e.modal("show")},t)}function cvEditorReloadDataTime(){const t=$("#cv-lang").text(),e=$("#cv-date-format").text();$("input.time-picker").datepicker({startView:1,language:t,format:e,minViewMode:1,autoclose:!0,forceParse:!1})}function presentEndAtUpdateState(t,e,n){const i=t.find(".to-date-dot-inline"),o=t.prev().prev(),r=t.prev();if(i.hasClass("active")?(i.removeClass("active"),r.val(""),o.attr("type","text"),r.attr("type","hidden"),$("[data-field-display="+r.data("cv-field")+"]").hide(),$("[data-field-display="+o.data("cv-field")+"]").show()):(i.addClass("active"),o.val(""),o.attr("type","hidden"),r.attr("type","text"),$("[data-field-display="+r.data("cv-field")+"]").show(),$("[data-field-display="+o.data("cv-field")+"]").hide(),isCvCN()?r.val("\u81f3\u4eca"):r.val("Present")),e==undefined||n==undefined)var a=o.val();else a=getStrftime(e,n);syncCvFormDisplay(o,a),syncCvFormDisplay(r,r.val()),t.hide()}function submitCvEditorForm(t){$("#cvs-show").on("click",function(e){var n=$(e.target);(0===n.closest(t).length&&0===$("#mce-modal-block").length&&0===n.closest(".unfold-container").length||n.closest("#cv-check").length>0||n.closest("#cv-score").length>0)&&$(t).find('input[name="commit"]').click(),$("#one-page-line").removeClass("hide")})}function setSectionPosition(){if(($("#cvs-show").length>0||$("#cvs-share").length>0||$("#jianlimubans-show").length>0)&&($("#section-position-hash").val()||"").length>0){var t=JSON.parse($("#section-position-hash").val());$.each(t,function(t,e){$("#"+t).data("position",e)}),$("#cv-body").append($("#cv-body").find(".resume-editor-plate").get().sort(function(t,e){return $(t).data("position")-$(e).data("position")}))}}function setOtherPosition(){if(($("#cvs-show").length>0||$("#cvs-share").length>0||$("#jianlimubans-show").length>0)&&($("#other-position-hash").val()||"").length>0){var t=JSON.parse($("#other-position-hash").val());$.each(t,function(t,e){$("#"+t).attr("data-position",e)}),$(".other-content").each(function(){var t=$(this);t.append(t.find(".resume-editor-plate-item").get().sort(function(t,e){return $(t).data("position")-$(e).data("position")}))})}}function appSharePost(t){t.callHandler("sharePost",{name:"\u3010\u8d85\u7ea7\u7b80\u5386\u3011\u7b80\u5386\u4fee\u6539\u4e92\u52a9\u5c0f\u7ec4",desc:"2019 \u6c42\u804c\u7ecf\u9a8c\u5206\u4eab\uff0c\u56f4\u89c2\u9ad8\u85aa\u540d\u4f01\u5927\u5382\u7b80\u5386",img:"https://files.wondercv.com/%E8%AE%BA%E5%9D%9B%E5%88%86%E4%BA%AB%E5%9B%BE.png"},function(){})}function loadWechatQr(t){if(0===t.length)throw TypeError("arguments missing");{const e=t.data("url");$.post(e).done(function(e){function n(){if(o.complete){const e=i.toDataURL("image/png");t.find("img.red-bag-logo").removeClass("hide"),t.find("img").not(".red-bag-logo").addClass("hide"),t.find(".qr-content").append("<img src="+e+" alt='qr code' width='150' height='150'>"),clearInterval(r)}}const i=new AraleQRCode({text:e.url,size:200,pdground:"#404040",imageSize:40}),o=(i.getContext("2d"),new Image);o.crossOrigin="anonymous",o.onload=function(){},o.src="https://files.wondercv.com/Icon_60@3x-min.png";const r=setInterval(n,1e3)})}}function click_contact_primary_img(t){$(t.target).addClass("hide"),$(t.target).hasClass("primary")?($(t.target).parent().parent().find("#contact_is_primary").val("false"),$("img.unprimary").removeClass("hide")):($(t.target).parent().parent().find("#contact_is_primary").val("true"),$("img.primary").removeClass("hide"))}function hide_part_rule_content(){$(".resume-advice .resume-advice-item.not-show").each(function(){for(var t=Math.round(40*Math.random()),e="",n=0;n<t;n++)e+="*";$(this).find(".advice-item-content p span.second-hide-part").text(e)})}function downloadFile(t,e,n,i){const o={};o[n]=i,$.ajax({url:t,type:"PUT",data:o,success:function(){window.location.href=e,"ios"!=client&&$.notify("\u4e0b\u8f7dPDF\u4e2d...","success"),showBindAccountModal(6e3)}})}function getMiniProgramQRcode(t,e,n){$.ajax({url:t,type:"GET",data:{file_type:n,token:e},success:function(t){$(".qr-code").attr("src","data:image/jpeg;base64,"+t.image)}})}function cvOnePage(t){$("#one-page-line").css("top",299-1.45*parseInt(t)+"mm"),addNewStyle(".right-panel-resume-editor{min-height:"+(304-1.45*parseInt(t))+"mm !important;}")}function emailSender(t,e,n){$.ajax({url:t,type:n,data:{email_to:e},beforeSend:function(){"ios"==client?setupWebViewJavascriptBridge(function(t){t.callHandler("sendingEmail",{info:"\u6b63\u5728\u53d1\u9001...\u8bf7\u8010\u5fc3\u7b49\u5f85"},function(){})}):$.notify("\u6b63\u5728\u53d1\u9001.....\u8bf7\u8010\u5fc3\u7b49\u5f85",{className:"success",autoHide:!1})},success:function(){$(".notifyjs-wrapper").remove(),$("#js-cv-download-modal").modal("hide"),"ios"==client?setupWebViewJavascriptBridge(function(t){t.callHandler("sendEmail",{info:"\u53d1\u9001\u6210\u529f\uff0c\u8bf7\u5230\u90ae\u7bb1\u4e2d\u67e5\u6536"},function(){})}):$.notify("\u53d1\u9001\u6210\u529f\uff0c\u8bf7\u5230\u90ae\u7bb1\u4e2d\u67e5\u6536","success")}})}function showUndoDeleteModal(){null==localStorage.getItem("already-delete")&&($("#cv-undo-delete-modal").modal("show"),localStorage.setItem("already-delete","yes"))}function mobileTimeStyle(){!$("#cv-content").hasClass("file-mode")&&isMobileDevice()&&$(".plate-item-tag .plate-item-tag-title").each(function(){$(this).addClass("mobile-plate-item-tag-title")})}var client,is_init;if(function(t){"use strict";function e(e){var n=e.attr("data-target");n||(n=(n=e.attr("href"))&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var i=n&&t(n);return i&&i.length?i:e.parent()}function n(n){n&&3===n.which||(t(o).remove(),t(r).each(function(){var i=t(this),o=e(i),r={relatedTarget:this};o.hasClass("open")&&(n&&"click"==n.type&&/input|textarea/i.test(n.target.tagName)&&t.contains(o[0],n.target)||(o.trigger(n=t.Event("hide.bs.dropdown",r)),n.isDefaultPrevented()||(i.attr("aria-expanded","false"),o.removeClass("open").trigger(t.Event("hidden.bs.dropdown",r)))))}))}function i(e){return this.each(function(){var n=t(this),i=n.data("bs.dropdown");i||n.data("bs.dropdown",i=new a(this)),"string"==typeof e&&i[e].call(n)})}var o=".dropdown-backdrop",r='[data-toggle="dropdown"]',a=function(e){t(e).on("click.bs.dropdown",this.toggle)};a.VERSION="3.3.7",a.prototype.toggle=function(i){var o=t(this);if(!o.is(".disabled, :disabled")){var r=e(o),a=r.hasClass("open");if(n(),!a){"ontouchstart"in document.documentElement&&!r.closest(".navbar-nav").length&&t(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(t(this)).on("click",n);var s={relatedTarget:this};if(r.trigger(i=t.Event("show.bs.dropdown",s)),i.isDefaultPrevented())return;o.trigger("focus").attr("aria-expanded","true"),r.toggleClass("open").trigger(t.Event("shown.bs.dropdown",s))}return!1}},a.prototype.keydown=function(n){if(/(38|40|27|32)/.test(n.which)&&!/input|textarea/i.test(n.target.tagName)){var i=t(this);if(n.preventDefault(),n.stopPropagation(),!i.is(".disabled, :disabled")){var o=e(i),a=o.hasClass("open");if(!a&&27!=n.which||a&&27==n.which)return 27==n.which&&o.find(r).trigger("focus"),i.trigger("click");var s=" li:not(.disabled):visible a",l=o.find(".dropdown-menu"+s);if(l.length){var c=l.index(n.target);38==n.which&&c>0&&c--,40==n.which&&c<l.length-1&&c++,~c||(c=0),l.eq(c).trigger("focus")}}}};var s=t.fn.dropdown;t.fn.dropdown=i,t.fn.dropdown.Constructor=a,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=s,this},t(document).on("click.bs.dropdown.data-api",n).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",r,a.prototype.toggle).on("keydown.bs.dropdown.data-api",r,a.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",a.prototype.keydown)}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var i=t(this),o=i.data("bs.tooltip"),r="object"==typeof e&&e;!o&&/destroy|hide/.test(e)||(o||i.data("bs.tooltip",o=new n(this,r)),"string"==typeof e&&o[e]())})}var n=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",t,e)};n.VERSION="3.3.7",n.TRANSITION_DURATION=150,n.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(e,n,i){if(this.enabled=!0,this.type=e,this.$element=t(n),this.options=this.getOptions(i),this.$viewport=this.options.viewport&&t(t.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var o=this.options.trigger.split(" "),r=o.length;r--;){var a=o[r];if("click"==a)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=a){var s="hover"==a?"mouseenter":"focusin",l="hover"==a?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(e){return(e=t.extend({},this.getDefaults(),this.$element.data(),e)).delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},n.prototype.getDelegateOptions=function(){var e={},n=this.getDefaults();return this._options&&t.each(this._options,function(t,i){n[t]!=i&&(e[t]=i)}),e},n.prototype.enter=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);if(n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),e instanceof t.Event&&(n.inState["focusin"==e.type?"focus":"hover"]=!0),n.tip().hasClass("in")||"in"==n.hoverState)n.hoverState="in";else{if(clearTimeout(n.timeout),n.hoverState="in",!n.options.delay||!n.options.delay.show)return n.show();n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)}},n.prototype.isInStateTrue=function(){for(var t in this.inState)if(this.inState[t])return!0;return!1},n.prototype.leave=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);if(n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),e instanceof t.Event&&(n.inState["focusout"==e.type?"focus":"hover"]=!1),!n.isInStateTrue()){if(clearTimeout(n.timeout),n.hoverState="out",!n.options.delay||!n.options.delay.hide)return n.hide();n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)}},n.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var i=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!i)return;var o=this,r=this.tip(),a=this.getUID(this.type);this.setContent(),r.attr("id",a),this.$element.attr("aria-describedby",a),this.options.animation&&r.addClass("fade");var s="function"==typeof this.options.placement?this.options.placement.call(this,r[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,c=l.test(s);c&&(s=s.replace(l,"")||"top"),r.detach().css({top:0,left:0,display:"block"}).addClass(s).data("bs."+this.type,this),this.options.container?r.appendTo(this.options.container):r.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var u=this.getPosition(),d=r[0].offsetWidth,p=r[0].offsetHeight;if(c){var h=s,f=this.getPosition(this.$viewport);s="bottom"==s&&u.bottom+p>f.bottom?"top":"top"==s&&u.top-p<f.top?"bottom":"right"==s&&u.right+d>f.width?"left":"left"==s&&u.left-d<f.left?"right":s,r.removeClass(h).addClass(s)}var m=this.getCalculatedOffset(s,u,d,p);this.applyPlacement(m,s);var g=function(){var t=o.hoverState;o.$element.trigger("shown.bs."+o.type),o.hoverState=null,"out"==t&&o.leave(o)};t.support.transition&&this.$tip.hasClass("fade")?r.one("bsTransitionEnd",g).emulateTransitionEnd(n.TRANSITION_DURATION):g()}},n.prototype.applyPlacement=function(e,n){var i=this.tip(),o=i[0].offsetWidth,r=i[0].offsetHeight,a=parseInt(i.css("margin-top"),10),s=parseInt(i.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(s)&&(s=0),e.top+=a,e.left+=s,t.offset.setOffset(i[0],t.extend({using:function(t){i.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),i.addClass("in");var l=i[0].offsetWidth,c=i[0].offsetHeight;"top"==n&&c!=r&&(e.top=e.top+r-c);var u=this.getViewportAdjustedDelta(n,e,l,c);u.left?e.left+=u.left:e.top+=u.top;var d=/top|bottom/.test(n),p=d?2*u.left-o+l:2*u.top-r+c,h=d?"offsetWidth":"offsetHeight";i.offset(e),this.replaceArrow(p,i[0][h],d)},n.prototype.replaceArrow=function(t,e,n){this.arrow().css(n?"left":"top",50*(1-t/e)+"%").css(n?"top":"left","")},n.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},n.prototype.hide=function(e){function i(){"in"!=o.hoverState&&r.detach(),o.$element&&o.$element.removeAttr("aria-describedby").trigger("hidden.bs."+o.type),e&&e()}var o=this,r=t(this.$tip),a=t.Event("hide.bs."+this.type);if(this.$element.trigger(a),!a.isDefaultPrevented())return r.removeClass("in"),t.support.transition&&r.hasClass("fade")?r.one("bsTransitionEnd",i).emulateTransitionEnd(n.TRANSITION_DURATION):i(),this.hoverState=null,this},n.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()},n.prototype.getPosition=function(e){var n=(e=e||this.$element)[0],i="BODY"==n.tagName,o=n.getBoundingClientRect();null==o.width&&(o=t.extend({},o,{width:o.right-o.left,height:o.bottom-o.top}));var r=window.SVGElement&&n instanceof window.SVGElement,a=i?{top:0,left:0}:r?null:e.offset(),s={scroll:i?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},l=i?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},o,s,l,a)},n.prototype.getCalculatedOffset=function(t,e,n,i){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-n/2}:"top"==t?{top:e.top-i,left:e.left+e.width/2-n/2}:"left"==t?{top:e.top+e.height/2-i/2,left:e.left-n}:{top:e.top+e.height/2-i/2,left:e.left+e.width}},n.prototype.getViewportAdjustedDelta=function(t,e,n,i){var o={top:0,left:0};if(!this.$viewport)return o;var r=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(t)){var s=e.top-r-a.scroll,l=e.top+r-a.scroll+i;s<a.top?o.top=a.top-s:l>a.top+a.height&&(o.top=a.top+a.height-l)}else{var c=e.left-r,u=e.left+r+n;c<a.left?o.left=a.left-c:u>a.right&&(o.left=a.left+a.width-u)}return o},n.prototype.getTitle=function(){var t=this.$element,e=this.options;return t.attr("data-original-title")||("function"==typeof e.title?e.title.call(t[0]):e.title)},n.prototype.getUID=function(t){do{t+=~~(1e6*Math.random())}while(document.getElementById(t));return t},n.prototype.tip=function(){if(!this.$tip&&(this.$tip=t(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(e){var n=this;e&&((n=t(e.currentTarget).data("bs."+this.type))||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n))),e?(n.inState.click=!n.inState.click,n.isInStateTrue()?n.enter(n):n.leave(n)):n.tip().hasClass("in")?n.leave(n):n.enter(n)},n.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type),t.$tip&&t.$tip.detach(),t.$tip=null,t.$arrow=null,t.$viewport=null,t.$element=null})};var i=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=n,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=i,this}}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var i=t(this),o=i.data("bs.popover"),r="object"==typeof e&&e;!o&&/destroy|hide/.test(e)||(o||i.data("bs.popover",o=new n(this,r)),"string"==typeof e&&o[e]())})}var n=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");n.VERSION="3.3.7",n.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),n.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),n.prototype.constructor=n,n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),n=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},n.prototype.hasContent=function(){return this.getTitle()||this.getContent()},n.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var i=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=n,t.fn.popover.noConflict=function(){return t.fn.popover=i,this}}(jQuery),function(t){"use strict";function e(e,i){return this.each(function(){var o=t(this),r=o.data("bs.modal"),a=t.extend({},n.DEFAULTS,o.data(),"object"==typeof e&&e);r||o.data("bs.modal",r=new n(this,a)),"string"==typeof e?r[e](i):a.show&&r.show(i)})}var n=function(e,n){this.options=n,this.$body=t(document.body),this.$element=t(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};n.VERSION="3.3.7",n.TRANSITION_DURATION=300,n.BACKDROP_TRANSITION_DURATION=150,n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},n.prototype.show=function(e){var i=this,o=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(o),this.isShown||o.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){i.$element.one("mouseup.dismiss.bs.modal",function(e){t(e.target).is(i.$element)&&(i.ignoreBackdropClick=!0)})}),this.backdrop(function(){var o=t.support.transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(i.$body),i.$element.show().scrollTop(0),i.adjustDialog(),o&&i.$element[0].offsetWidth,i.$element.addClass("in"),i.enforceFocus();var r=t.Event("shown.bs.modal",{relatedTarget:e});o?i.$dialog.one("bsTransitionEnd",function(){i.$element.trigger("focus").trigger(r)}).emulateTransitionEnd(n.TRANSITION_DURATION):i.$element.trigger("focus").trigger(r)}))},n.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(n.TRANSITION_DURATION):this.hideModal())},n.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){document===t.target||this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},n.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},n.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},n.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(e){var i=this,o=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var r=t.support.transition&&o;if(this.$backdrop=t(document.createElement("div")).addClass("modal-backdrop "+o).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){this.ignoreBackdropClick?this.ignoreBackdropClick=!1:t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide())},this)),r&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;r?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var a=function(){i.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):a()}else e&&e()},n.prototype.handleUpdate=function(){this.adjustDialog()},n.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},n.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},n.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},n.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},n.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var i=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=n,t.fn.modal.noConflict=function(){return t.fn.modal=i,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(n){var i=t(this),o=i.attr("href"),r=t(i.attr("data-target")||o&&o.replace(/.*(?=#[^\s]+$)/,"")),a=r.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(o)&&o},r.data(),i.data());i.is("a")&&n.preventDefault(),r.one("show.bs.modal",function(t){t.isDefaultPrevented()||r.one("hidden.bs.modal",function(){i.is(":visible")&&i.trigger("focus")})}),e.call(r,a,this)})}(jQuery),
/** Notify.js - v0.3.1 - 2013/07/05
 * http://notifyjs.com/
 * Copyright (c) 2013 Jaime Pillora - MIT
 */
function(t,e,n,i){"use strict";var o,r,a,s,l,c,u,d,p,h,f,m,g,v,y,b,w,$,C,_,x,k,A,S,T,D,E,O=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};a=(x="notify")+"!blank",A={t:"top",m:"middle",b:"bottom",l:"left",c:"center",r:"right"},g=["l","c","r"],E=["t","m","b"],w=["t","b","l","r"],$={t:"b",m:null,b:"t",l:"r",c:null,r:"l"},C=function(t){var e;return e=[],n.each(t.split(/\W+/),function(t,n){var o;return o=n.toLowerCase().charAt(0),A[o]?e.push(o):i}),e},D={},s={name:"core",html:'<div class="'+(_=x+"js")+'-wrapper">\n  <div class="'+_+'-arrow"></div>\n  <div class="'+_+'-container"></div>\n</div>',css:"."+_+"-corner {\n  position: fixed;\n  margin: 5px;\n  z-index: 1050;\n}\n\n."+_+"-corner ."+_+"-wrapper,\n."+_+"-corner ."+_+"-container {\n  position: relative;\n  display: block;\n  height: inherit;\n  width: inherit;\n  margin: 3px;\n}\n\n."+_+"-wrapper {\n  z-index: 1;\n  position: absolute;\n  display: inline-block;\n  height: 0;\n  width: 0;\n}\n\n."+_+"-container {\n  display: none;\n  z-index: 1;\n  position: absolute;\n  cursor: pointer;\n}\n\n[data-notify-text],[data-notify-html] {\n  position: relative;\n}\n\n."+_+"-arrow {\n  position: absolute;\n  z-index: 2;\n  width: 0;\n  height: 0;\n}"},T={"border-radius":["-webkit-","-moz-"]},f=function(t){return D[t]},r=function(e,i){var o,r,a,s;if(!e)throw"Missing Style name";if(!i)throw"Missing Style definition";if(!i.html)throw"Missing Style HTML";return(null!=(s=D[e])?s.cssElem:void 0)&&(t.console&&console.warn(x+": overwriting style '"+e+"'"),D[e].cssElem.remove()),i.name=e,D[e]=i,o="",i.classes&&n.each(i.classes,function(t,e){return o+="."+_+"-"+i.name+"-"+t+" {\n",n.each(e,function(t,e){return T[t]&&n.each(T[t],function(n,i){return o+="  "+i+t+": "+e+";\n"}),o+="  "+t+": "+e+";\n"}),o+="}\n"}),i.css&&(o+="/* styles for "+i.name+" */\n"+i.css),o&&(i.cssElem=b(o),i.cssElem.attr("id","notify-"+i.name)),a={},r=n(i.html),p("html",r,a),p("text",r,a),i.fields=a},b=function(t){var e;(e=l("style")).attr("type","text/css"),n("head").append(e);try{e.html(t)}catch(i){e[0].styleSheet.cssText=t}return e},p=function(t,e,i){var o;return"html"!==t&&(t="text"),d(e,"["+(o="data-notify-"+t)+"]").each(function(){var e;return(e=n(this).attr(o))||(e=a),i[e]=t})},d=function(t,e){return t.is(e)?t:t.find(e)},k={clickToHide:!0,autoHide:!0,autoHideDelay:5e3,arrowShow:!0,arrowSize:5,breakNewLines:!0,elementPosition:"bottom",globalPosition:"top right",style:"bootstrap",className:"error",showAnimation:"slideDown",showDuration:400,hideAnimation:"slideUp",hideDuration:200,gap:5},y=function(t,e){var i;return(i=function(){}).prototype=t,n.extend(!0,new i,e)},c=function(t){return n.extend(k,t)},l=function(t){return n("<"+t+"></"+t+">")},m={},h=function(t){var e;return t.is("[type=radio]")&&(e=t.parents("form:first").find("[type=radio]").filter(function(e,i){return n(i).attr("name")===t.attr("name")}),t=e.first()),t},v=function(t,e,n){var o;if("string"==typeof n)n=parseInt(n,10);else if("number"!=typeof n)return;if(!isNaN(n))return e,t[o=A[$[e.charAt(0)]]]!==i&&(e=A[o.charAt(0)],n=-n),t[e]===i?t[e]=n:t[e]+=n,null},S=function(t,e,n){if("l"===t||"t"===t)return 0;if("c"===t||"m"===t)return n/2-e/2;if("r"===t||"b"===t)return n-e;throw"Invalid alignment"},u=function(t){return u.e=u.e||l("div"),u.e.text(t).html()},o=function(){function t(t,e,i){"string"==typeof i&&(i={className:i}),this.options=y(k,n.isPlainObject(i)?i:{}),this.loadHTML(),this.wrapper=n(s.html),this.wrapper.data(_,this),this.arrow=this.wrapper.find("."+_+"-arrow"),this.container=this.wrapper.find("."+_+"-container"),this.container.append(this.userContainer),t&&t.length&&(this.elementType=t.attr("type"),this.originalElement=t,this.elem=h(t),this.elem.data(_,this),this.elem.before(this.wrapper)),this.container.hide(),this.run(e)}return t.prototype.loadHTML=function(){var t;return t=this.getStyle(),this.userContainer=n(t.html),this.userFields=t.fields},t.prototype.show=function(t,e){var n,o,r,a,s,l=this;if(o=function(){return t||l.elem||l.destroy(),e?e():i},s=this.container.parent().parents(":hidden").length>0,r=this.container.add(this.arrow),n=[],s&&t)a="show";else if(s&&!t)a="hide";else if(!s&&t)a=this.options.showAnimation,n.push(this.options.showDuration);else{if(s||t)return o();a=this.options.hideAnimation,n.push(this.options.hideDuration)}return n.push(o),r[a].apply(r,n)},t.prototype.setGlobalPosition=function(){var t,e,i,o,r,a,s,c;return s=(c=this.getPosition())[0],a=c[1],r=A[s],t=A[a],(e=m[o=s+"|"+a])||(e=m[o]=l("div"),(i={})[r]=0,"middle"===t?i.top="45%":"center"===t?i.left="45%":i[t]=0,e.css(i).addClass(_+"-corner"),n("body").append(e)),e.prepend(this.wrapper)},t.prototype.setElementPosition=function(){var t,e,o,r,a,s,l,c,u,d,p,h,f,m,y,b,C,_,x,k,T,D,M,L,I,P,R,N;for(x=(D=this.getPosition())[0],_=D[1],D[2],p=this.elem.position(),c=this.elem.outerHeight(),h=this.elem.outerWidth(),u=this.elem.innerHeight(),d=this.elem.innerWidth(),M=this.wrapper.position(),a=this.container.height(),s=this.container.width(),m=A[x],b=$[x],(l={})[C=A[b]]="b"===x?c:"r"===x?h:0,v(l,"top",p.top-M.top),v(l,"left",p.left-M.left),L=0,P=(N=["top","left"]).length;P>L;L++)k=N[L],(y=parseInt(this.elem.css("margin-"+k),10))&&v(l,k,y);if(f=Math.max(0,this.options.gap-(this.options.arrowShow?o:0)),v(l,C,f),this.options.arrowShow){for(o=this.options.arrowSize,e=n.extend({},l),t=this.userContainer.css("border-color")||this.userContainer.css("background-color")||"white",I=0,R=w.length;R>I;I++)k=w[I],T=A[k],k!==b&&(r=T===m?t:"transparent",e["border-"+T]=o+"px solid "+r);v(l,A[b],o),O.call(w,_)>=0&&v(e,A[_],2*o)}else this.arrow.hide();return O.call(E,x)>=0?(v(l,"left",S(_,s,h)),e&&v(e,"left",S(_,o,d))):O.call(g,x)>=0&&(v(l,"top",S(_,a,c)),e&&v(e,"top",S(_,o,u))),this.container.is(":visible")&&(l.display="block"),this.container.removeAttr("style").css(l),e?this.arrow.removeAttr("style").css(e):i},t.prototype.getPosition=function(){var t,e,n,i,o,r,a,s;if(e=this.options.position||(this.elem?this.options.elementPosition:this.options.globalPosition),0===(t=C(e)).length&&(t[0]="b"),n=t[0],0>O.call(w,n))throw"Must be one of ["+w+"]";return(1===t.length||(i=t[0],O.call(E,i)>=0&&(o=t[1],0>O.call(g,o)))||(r=t[0],O.call(g,r)>=0&&(a=t[1],0>O.call(E,a))))&&(t[1]=(s=t[0],O.call(g,s)>=0?"m":"l")),2===t.length&&(t[2]=t[1]),t},t.prototype.getStyle=function(t){var e;if(t||(t=this.options.style),t||(t="default"),!(e=D[t]))throw"Missing style: "+t;return e},t.prototype.updateClasses=function(){var t,e;return t=["base"],n.isArray(this.options.className)?t=t.concat(this.options.className):this.options.className&&t.push(this.options.className),e=this.getStyle(),t=n.map(t,function(t){return _+"-"+e.name+"-"+t}).join(" "),this.userContainer.attr("class",t)},t.prototype.run=function(t,e){var o,r,s,l,c,p=this;if(n.isPlainObject(e)?n.extend(this.options,e):"string"===n.type(e)&&(this.options.color=e),this.container&&!t)return this.show(!1),i;if(this.container||t){for(s in r={},n.isPlainObject(t)?r=t:r[a]=t,r)o=r[s],(l=this.userFields[s])&&("text"===l&&(o=u(o),this.options.breakNewLines&&(o=o.replace(/\n/g,"<br/>"))),c=s===a?"":"="+s,d(this.userContainer,"[data-notify-"+l+c+"]").html(o));return this.updateClasses(),this.elem?this.setElementPosition():this.setGlobalPosition(),this.show(!0),this.options.autoHide?(clearTimeout(this.autohideTimer),this.autohideTimer=setTimeout(function(){return p.show(!1)},this.options.autoHideDelay)):i}},t.prototype.destroy=function(){return this.wrapper.remove()},t}(),n[x]=function(t,e,i){return t&&t.nodeName||t.jquery?n(t)[x](e,i):(i=e,new o(null,e=t,i)),t},n.fn[x]=function(t,e){return n(this).each(function(){var i;return(i=h(n(this)).data(_))?i.run(t,e):new o(n(this),t,e)}),this},n.extend(n[x],{defaults:c,addStyle:r,pluginOptions:k,getStyle:f,insertCSS:b}),n(function(){return b(s.css).attr("id","core-notify"),n(e).on("click notify-hide","."+_+"-wrapper",function(t){var e;return(e=n(this).data(_))&&(e.options.clickToHide||"notify-hide"===t.type)?e.show(!1):i})})}(window,document,jQuery),$.notify.addStyle("bootstrap",{html:"<div>\n<span data-notify-text></span>\n</div>",classes:{base:{"font-weight":"bold",padding:"8px 15px 8px 14px","text-shadow":"0 1px 0 rgba(255, 255, 255, 0.5)","background-color":"#fcf8e3",border:"1px solid #fbeed5","border-radius":"4px","white-space":"nowrap","padding-left":"25px","background-repeat":"no-repeat","background-position":"3px 7px"},error:{color:"#B94A48","background-color":"#F2DEDE","border-color":"#EED3D7","background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAtRJREFUeNqkVc1u00AQHq+dOD+0poIQfkIjalW0SEGqRMuRnHos3DjwAH0ArlyQeANOOSMeAA5VjyBxKBQhgSpVUKKQNGloFdw4cWw2jtfMOna6JOUArDTazXi/b3dm55socPqQhFka++aHBsI8GsopRJERNFlY88FCEk9Yiwf8RhgRyaHFQpPHCDmZG5oX2ui2yilkcTT1AcDsbYC1NMAyOi7zTX2Agx7A9luAl88BauiiQ/cJaZQfIpAlngDcvZZMrl8vFPK5+XktrWlx3/ehZ5r9+t6e+WVnp1pxnNIjgBe4/6dAysQc8dsmHwPcW9C0h3fW1hans1ltwJhy0GxK7XZbUlMp5Ww2eyan6+ft/f2FAqXGK4CvQk5HueFz7D6GOZtIrK+srupdx1GRBBqNBtzc2AiMr7nPplRdKhb1q6q6zjFhrklEFOUutoQ50xcX86ZlqaZpQrfbBdu2R6/G19zX6XSgh6RX5ubyHCM8nqSID6ICrGiZjGYYxojEsiw4PDwMSL5VKsC8Yf4VRYFzMzMaxwjlJSlCyAQ9l0CW44PBADzXhe7xMdi9HtTrdYjFYkDQL0cn4Xdq2/EAE+InCnvADTf2eah4Sx9vExQjkqXT6aAERICMewd/UAp/IeYANM2joxt+q5VI+ieq2i0Wg3l6DNzHwTERPgo1ko7XBXj3vdlsT2F+UuhIhYkp7u7CarkcrFOCtR3H5JiwbAIeImjT/YQKKBtGjRFCU5IUgFRe7fF4cCNVIPMYo3VKqxwjyNAXNepuopyqnld602qVsfRpEkkz+GFL1wPj6ySXBpJtWVa5xlhpcyhBNwpZHmtX8AGgfIExo0ZpzkWVTBGiXCSEaHh62/PoR0p/vHaczxXGnj4bSo+G78lELU80h1uogBwWLf5YlsPmgDEd4M236xjm+8nm4IuE/9u+/PH2JXZfbwz4zw1WbO+SQPpXfwG/BBgAhCNZiSb/pOQAAAAASUVORK5CYII=)"},success:{color:"#468847","background-color":"#DFF0D8","border-color":"#D6E9C6","background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAutJREFUeNq0lctPE0Ecx38zu/RFS1EryqtgJFA08YCiMZIAQQ4eRG8eDGdPJiYeTIwHTfwPiAcvXIwXLwoXPaDxkWgQ6islKlJLSQWLUraPLTv7Gme32zoF9KSTfLO7v53vZ3d/M7/fIth+IO6INt2jjoA7bjHCJoAlzCRw59YwHYjBnfMPqAKWQYKjGkfCJqAF0xwZjipQtA3MxeSG87VhOOYegVrUCy7UZM9S6TLIdAamySTclZdYhFhRHloGYg7mgZv1Zzztvgud7V1tbQ2twYA34LJmF4p5dXF1KTufnE+SxeJtuCZNsLDCQU0+RyKTF27Unw101l8e6hns3u0PBalORVVVkcaEKBJDgV3+cGM4tKKmI+ohlIGnygKX00rSBfszz/n2uXv81wd6+rt1orsZCHRdr1Imk2F2Kob3hutSxW8thsd8AXNaln9D7CTfA6O+0UgkMuwVvEFFUbbAcrkcTA8+AtOk8E6KiQiDmMFSDqZItAzEVQviRkdDdaFgPp8HSZKAEAL5Qh7Sq2lIJBJwv2scUqkUnKoZgNhcDKhKg5aH+1IkcouCAdFGAQsuWZYhOjwFHQ96oagWgRoUov1T9kRBEODAwxM2QtEUl+Wp+Ln9VRo6BcMw4ErHRYjH4/B26AlQoQQTRdHWwcd9AH57+UAXddvDD37DmrBBV34WfqiXPl61g+vr6xA9zsGeM9gOdsNXkgpEtTwVvwOklXLKm6+/p5ezwk4B+j6droBs2CsGa/gNs6RIxazl4Tc25mpTgw/apPR1LYlNRFAzgsOxkyXYLIM1V8NMwyAkJSctD1eGVKiq5wWjSPdjmeTkiKvVW4f2YPHWl3GAVq6ymcyCTgovM3FzyRiDe2TaKcEKsLpJvNHjZgPNqEtyi6mZIm4SRFyLMUsONSSdkPeFtY1n0mczoY3BHTLhwPRy9/lzcziCw9ACI+yql0VLzcGAZbYSM5CCSZg1/9oc/nn7+i8N9p/8An4JMADxhH+xHfuiKwAAAABJRU5ErkJggg==)"},info:{color:"#3A87AD","background-color":"#D9EDF7","border-color":"#BCE8F1","background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3QYFAhkSsdes/QAAA8dJREFUOMvVlGtMW2UYx//POaWHXg6lLaW0ypAtw1UCgbniNOLcVOLmAjHZolOYlxmTGXVZdAnRfXQm+7SoU4mXaOaiZsEpC9FkiQs6Z6bdCnNYruM6KNBw6YWewzl9z+sHImEWv+vz7XmT95f/+3/+7wP814v+efDOV3/SoX3lHAA+6ODeUFfMfjOWMADgdk+eEKz0pF7aQdMAcOKLLjrcVMVX3xdWN29/GhYP7SvnP0cWfS8caSkfHZsPE9Fgnt02JNutQ0QYHB2dDz9/pKX8QjjuO9xUxd/66HdxTeCHZ3rojQObGQBcuNjfplkD3b19Y/6MrimSaKgSMmpGU5WevmE/swa6Oy73tQHA0Rdr2Mmv/6A1n9w9suQ7097Z9lM4FlTgTDrzZTu4StXVfpiI48rVcUDM5cmEksrFnHxfpTtU/3BFQzCQF/2bYVoNbH7zmItbSoMj40JSzmMyX5qDvriA7QdrIIpA+3cdsMpu0nXI8cV0MtKXCPZev+gCEM1S2NHPvWfP/hL+7FSr3+0p5RBEyhEN5JCKYr8XnASMT0xBNyzQGQeI8fjsGD39RMPk7se2bd5ZtTyoFYXftF6y37gx7NeUtJJOTFlAHDZLDuILU3j3+H5oOrD3yWbIztugaAzgnBKJuBLpGfQrS8wO4FZgV+c1IxaLgWVU0tMLEETCos4xMzEIv9cJXQcyagIwigDGwJgOAtHAwAhisQUjy0ORGERiELgG4iakkzo4MYAxcM5hAMi1WWG1yYCJIcMUaBkVRLdGeSU2995TLWzcUAzONJ7J6FBVBYIggMzmFbvdBV44Corg8vjhzC+EJEl8U1kJtgYrhCzgc/vvTwXKSib1paRFVRVORDAJAsw5FuTaJEhWM2SHB3mOAlhkNxwuLzeJsGwqWzf5TFNdKgtY5qHp6ZFf67Y/sAVadCaVY5YACDDb3Oi4NIjLnWMw2QthCBIsVhsUTU9tvXsjeq9+X1d75/KEs4LNOfcdf/+HthMnvwxOD0wmHaXr7ZItn2wuH2SnBzbZAbPJwpPx+VQuzcm7dgRCB57a1uBzUDRL4bfnI0RE0eaXd9W89mpjqHZnUI5Hh2l2dkZZUhOqpi2qSmpOmZ64Tuu9qlz/SEXo6MEHa3wOip46F1n7633eekV8ds8Wxjn37Wl63VVa+ej5oeEZ/82ZBETJjpJ1Rbij2D3Z/1trXUvLsblCK0XfOx0SX2kMsn9dX+d+7Kf6h8o4AIykuffjT8L20LU+w4AZd5VvEPY+XpWqLV327HR7DzXuDnD8r+ovkBehJ8i+y8YAAAAASUVORK5CYII=)"},warn:{color:"#C09853","background-color":"#FCF8E3","border-color":"#FBEED5","background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAABJlBMVEXr6eb/2oD/wi7/xjr/0mP/ykf/tQD/vBj/3o7/uQ//vyL/twebhgD/4pzX1K3z8e349vK6tHCilCWbiQymn0jGworr6dXQza3HxcKkn1vWvV/5uRfk4dXZ1bD18+/52YebiAmyr5S9mhCzrWq5t6ufjRH54aLs0oS+qD751XqPhAybhwXsujG3sm+Zk0PTwG6Shg+PhhObhwOPgQL4zV2nlyrf27uLfgCPhRHu7OmLgAafkyiWkD3l49ibiAfTs0C+lgCniwD4sgDJxqOilzDWowWFfAH08uebig6qpFHBvH/aw26FfQTQzsvy8OyEfz20r3jAvaKbhgG9q0nc2LbZxXanoUu/u5WSggCtp1anpJKdmFz/zlX/1nGJiYmuq5Dx7+sAAADoPUZSAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfdBgUBGhh4aah5AAAAlklEQVQY02NgoBIIE8EUcwn1FkIXM1Tj5dDUQhPU502Mi7XXQxGz5uVIjGOJUUUW81HnYEyMi2HVcUOICQZzMMYmxrEyMylJwgUt5BljWRLjmJm4pI1hYp5SQLGYxDgmLnZOVxuooClIDKgXKMbN5ggV1ACLJcaBxNgcoiGCBiZwdWxOETBDrTyEFey0jYJ4eHjMGWgEAIpRFRCUt08qAAAAAElFTkSuQmCC)"}}}),$(function(){client=$('input[name="client"]').val(),is_init=!1}),-1!=navigator.userAgent.toLowerCase().indexOf("wondercv_ios"))function setupWebViewJavascriptBridge(t){if(window.WebViewJavascriptBridge)return t(WebViewJavascriptBridge);if(window.WVJBCallbacks)return window.WVJBCallbacks.push(t);window.WVJBCallbacks=[t];var e=document.createElement("iframe");e.style.display="none",e.src="https://__bridge_loaded__",document.documentElement.appendChild(e),setTimeout(function(){document.documentElement.removeChild(e)},0)}$(".native-share-cv").click(function(){var t=$(this).data("url"),e=$(this).data("name");console.log(t),"ios"==client?setupWebViewJavascriptBridge(function(n){n.callHandler("shareCvMiniprogram",{url:t,name:e},function(){})}):"android"==client&&connectWebViewJavascriptBridge(function(n){initAndroidBridge(n),n.callHandler("shareCvMiniprogram",{shareUrl:t,name:e},function(){})})}),addEventListener("trix-attachment-add",function(t){t.attachment.remove()}),-1!=navigator.userAgent.toLowerCase().indexOf("wondercv_ios")&&addEventListener("trix-focus",function(){$("html, body").animate({scrollTop:$("trix-editor").offset().top-100})}),navigator.userAgent.indexOf("android_wondercv_app")>-1&&$(".modal").on("shown.bs.modal",function(){$("html, body").animate({scrollTop:0},1e3)}),null==localStorage.getItem("close-browser-tip")?(console.log(navigator.userAgent),$(".browser-tip").length>0&&(-1==navigator.userAgent.indexOf("Chrome")||-1!=navigator.userAgent.indexOf("WindowsWechat"))?setHeaderRelative():-1!=navigator.userAgent.indexOf("Chrome")&&-1==navigator.userAgent.indexOf("WindowsWechat")&&$(".browser-tip").remove()):$(".browser-tip").remove(),$(".close-browser-tip").on("click",function(){setHeaderNormal(),localStorage.setItem("close-browser-tip","yes")}),$(document).ready(function(){$('[data-toggle="popover"]').popover()}),navigator.userAgent.indexOf("android_wondercv_app")>-1&&$(".nav-return-btn").length>0&&!$(".nav-return-btn").hasClass("android-nav-return")&&$(".nav-return-btn").addClass("android-nav-return"),$(".android-nav-return").on("click",function(t){t.preventDefault(),connectWebViewJavascriptBridge(function(t){initAndroidBridge(t),t.callHandler("goBack",{},function(){})})});var resumeTplHover=function(){$('input[name="is_mobile"]').val()?($("#cvs-index .tpl-content, #cover_letters-index .tpl-content, #emails-index .tpl-content").on("mouseenter",function(){$(this).addClass("hidden"),$(this).siblings(".tpl-choose-lan").removeClass("hidden")}),$("#cvs-index .tpl-content, #cover_letters-index .tpl-content, #emails-index .tpl-content").on("mouseleave",function(){$(this).addClass("hidden"),$(this).siblings(".tpl-content").removeClass("hidden"),$(".modal-background").addClass("hidden")}),$("#choose-resume-tpl-modal .tpl-content").on("mouseenter",function(){$("#choose-resume-tpl-modal .tpl-content").each(function(){$(this).addClass("hide"),$(this).parent().css("background-color","transparent")}),$(this).siblings(".tpl-choose-lan").removeClass("hide")}),$("#choose-resume-tpl-modal .tpl-choose-lan").on("mouseleave",function(){$(this).addClass("hide"),$("#choose-resume-tpl-modal .tpl-content").each(function(){$(this).removeClass("hide"),$(this).parent().css("background-color","#fff"),$(this).parent().css("border-radius","50%"),$(this).css("border-radius","50%")})}),$("#resumes-index .close-tpl-choose-lan").on("click",function(){$(this).parent().addClass("hide"),$(this).parent().siblings(".tpl-content").removeClass("hide"),$(".modal-background").addClass("hide"),$(this).parent().siblings(".mobile-tpl-content").removeClass("hide"),$("#choose-resume-tpl-modal .tpl-content").each(function(){$(this).removeClass("hide"),$(this).parent().css("background-color","#fff"),$(this).parent().css("border-radius","50%"),$(this).css("border-radius","50%")})}),$(".mobile-tpl-content .template-content").on("mouseenter",function(){$(this).addClass("hidden"),$(this).siblings(".mobile-tpl-content .template-choose-lan").removeClass("hidden"),$(".modal-background").removeClass("hide")}),$(".mobile-tpl-content .template_choose-lan").on("mouseleave",function(){$(this).addClass("hidden"),$(this).siblings(".mobile-tpl-content .template-content").removeClass("hidden"),$(".modal-background").addClass("hide")}),$("#welcome-index .close-tpl-choose-lan").on("click",function(){$(this).parent().addClass("hidden"),$(this).parent().siblings(".template-content").removeClass("hidden"),$(".modal-background").addClass("hide")})):($(".template-content").on("mouseenter",function(){$(this).addClass("hidden"),$(this).siblings(".template-choose-lan").removeClass("hidden"),$(".modal-background").removeClass("hide")}),$(".template-choose-lan").on("mouseleave",function(){$(this).addClass("hidden"),$(this).siblings(".template-content").removeClass("hidden"),$(".modal-background").addClass("hide")}));var t=function(){$(".nav-send-type-list").on("click",function(){$(".choose-send-type").hasClass("hide")?$(".choose-send-type").removeClass("hide"):$(".choose-send-type").addClass("hide")}),$("body").click(function(t){0===$(t.target).closest(".choose-send-type").length&&0===$(t.target).closest(".new-interview-btn").length&&0===$(t.target).closest(".cannot-download-btn").length&&$(".choose-send-type").addClass("hide")})};(function(){$(".nav-create-new-file-list").on("click",function(){$(this).hasClass("rotated")?($(this).removeClass("rotated"),$(".header ul.choose-file-type").addClass("hide")):($(this).addClass("rotated"),$(".header ul.choose-file-type").removeClass("hide"))}),$("body").click(function(t){0===$(t.target).closest(".choose-file-type").length&&0===$(t.target).closest(".new-interview-btn").length&&$(".nav-create-new-file-list").hasClass("rotated")&&($(".nav-create-new-file-list").removeClass("rotated"),$(".header ul.choose-file-type").addClass("hide"))})})(),t()};resumeTplHover(),
/*!
 * Select2 4.0.3
 * https://select2.github.io
 *
 * Released under the MIT license
 * https://github.com/select2/select2/blob/master/LICENSE.md
 */
function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?t(require("jquery")):t(jQuery)}(function(t){var e=function(){if(t&&t.fn&&t.fn.select2&&t.fn.select2.amd)var e=t.fn.select2.amd;var n,i,o,r;return e&&e.requirejs||(e?i=e:e={},function(t){function e(t,e){return w.call(t,e)}function r(t,e){var n,i,o,r,a,s,l,c,u,d,p,h=e&&e.split("/"),f=y.map,m=f&&f["*"]||{};if(t&&"."===t.charAt(0))if(e){for(a=(t=t.split("/")).length-1,y.nodeIdCompat&&C.test(t[a])&&(t[a]=t[a].replace(C,"")),t=h.slice(0,h.length-1).concat(t),u=0;u<t.length;u+=1)if("."===(p=t[u]))t.splice(u,1),u-=1;else if(".."===p){if(1===u&&(".."===t[2]||".."===t[0]))break;u>0&&(t.splice(u-1,2),u-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((h||m)&&f){for(u=(n=t.split("/")).length;u>0;u-=1){if(i=n.slice(0,u).join("/"),h)for(d=h.length;d>0;d-=1)if((o=f[h.slice(0,d).join("/")])&&(o=o[i])){r=o,s=u;break}if(r)break;!l&&m&&m[i]&&(l=m[i],c=u)}!r&&l&&(r=l,s=c),r&&(n.splice(0,s,r),t=n.join("/"))}return t}function a(e,n){return function(){var i=$.call(arguments,0);return"string"!=typeof i[0]&&1===i.length&&i.push(null),h.apply(t,i.concat([e,n]))}}function s(t){return function(e){return r(e,t)}}function l(t){return function(e){g[t]=e}}function c(n){if(e(v,n)){var i=v[n];delete v[n],b[n]=!0,p.apply(t,i)}if(!e(g,n)&&!e(b,n))throw new Error("No "+n);return g[n]}function u(t){var e,n=t?t.indexOf("!"):-1;return n>-1&&(e=t.substring(0,n),t=t.substring(n+1,t.length)),[e,t]}function d(t){return function(){return y&&y.config&&y.config[t]||{}}}var p,h,f,m,g={},v={},y={},b={},w=Object.prototype.hasOwnProperty,$=[].slice,C=/\.js$/;f=function(t,e){var n,i=u(t),o=i[0];return t=i[1],o&&(n=c(o=r(o,e))),o?t=n&&n.normalize?n.normalize(t,s(e)):r(t,e):(o=(i=u(t=r(t,e)))[0],t=i[1],o&&(n=c(o))),{f:o?o+"!"+t:t,n:t,pr:o,p:n}},m={require:function(t){return a(t)},exports:function(t){var e=g[t];return void 0!==e?e:g[t]={}},module:function(t){return{id:t,uri:"",exports:g[t],config:d(t)}}},p=function(n,i,o,r){var s,u,d,p,h,y,w=[],$=typeof o;if(r=r||n,"undefined"===$||"function"===$){for(i=!i.length&&o.length?["require","exports","module"]:i,h=0;h<i.length;h+=1)if("require"===(u=(p=f(i[h],r)).f))w[h]=m.require(n);else if("exports"===u)w[h]=m.exports(n),y=!0;else if("module"===u)s=w[h]=m.module(n);else if(e(g,u)||e(v,u)||e(b,u))w[h]=c(u);else{if(!p.p)throw new Error(n+" missing "+u);p.p.load(p.n,a(r,!0),l(u),{}),w[h]=g[u]}d=o?o.apply(g[n],w):undefined,n&&(s&&s.exports!==t&&s.exports!==g[n]?g[n]=s.exports:d===t&&y||(g[n]=d))}else n&&(g[n]=o)},n=i=h=function(e,n,i,o,r){if("string"==typeof e)return m[e]?m[e](n):c(f(e,n).f);if(!e.splice){if((y=e).deps&&h(y.deps,y.callback),!n)return;n.splice?(e=n,n=i,i=null):e=t}return n=n||function(){},"function"==typeof i&&(i=o,o=r),o?p(t,e,n,i):setTimeout(function(){p(t,e,n,i)},4),h},h.config=function(t){return h(t)},n._defined=g,(o=function(t,n,i){if("string"!=typeof t)throw new Error("See almond README: incorrect module build, no module name");n.splice||(i=n,n=[]),e(g,t)||e(v,t)||(v[t]=[t,n,i])}).amd={jQuery:!0}}(),e.requirejs=n,e.require=i,e.define=o),e.define("almond",function(){}),e.define("jquery",[],function(){var e=t||$;return null==e&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),e}),e.define("select2/utils",["jquery"],function(t){function e(t){var e=t.prototype,n=[];for(var i in e){"function"==typeof e[i]&&("constructor"!==i&&n.push(i))}return n}var n={Extend:function(t,e){function n(){this.constructor=t}var i={}.hasOwnProperty;for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},Decorate:function(t,n){function i(){var e=Array.prototype.unshift,i=n.prototype.constructor.length,o=t.prototype.constructor;i>0&&(e.call(arguments,t.prototype.constructor),o=n.prototype.constructor),o.apply(this,arguments)}function o(){this.constructor=i}var r=e(n),a=e(t);n.displayName=t.displayName,i.prototype=new o;for(var s=0;s<a.length;s++){var l=a[s];i.prototype[l]=t.prototype[l]}for(var c=function(t){var e=function(){};t in i.prototype&&(e=i.prototype[t]);var o=n.prototype[t];return function(){return Array.prototype.unshift.call(arguments,e),o.apply(this,arguments)}},u=0;u<r.length;u++){var d=r[u];i.prototype[d]=c(d)}return i}},i=function(){this.listeners={}};return i.prototype.on=function(t,e){this.listeners=this.listeners||{},t in this.listeners?this.listeners[t].push(e):this.listeners[t]=[e]},i.prototype.trigger=function(t){var e=Array.prototype.slice,n=e.call(arguments,1);this.listeners=this.listeners||{},null==n&&(n=[]),0===n.length&&n.push({}),n[0]._type=t,t in this.listeners&&this.invoke(this.listeners[t],e.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},i.prototype.invoke=function(t,e){for(var n=0,i=t.length;n<i;n++)t[n].apply(this,e)},n.Observable=i,n.generateChars=function(t){for(var e="",n=0;n<t;n++){e+=Math.floor(36*Math.random()).toString(36)}return e},n.bind=function(t,e){return function(){t.apply(e,arguments)}},n._convertData=function(t){for(var e in t){var n=e.split("-"),i=t;if(1!==n.length){for(var o=0;o<n.length;o++){var r=n[o];(r=r.substring(0,1).toLowerCase()+r.substring(1))in i||(i[r]={}),o==n.length-1&&(i[r]=t[e]),i=i[r]}delete t[e]}}return t},n.hasScroll=function(e,n){var i=t(n),o=n.style.overflowX,r=n.style.overflowY;return(o!==r||"hidden"!==r&&"visible"!==r)&&("scroll"===o||"scroll"===r||(i.innerHeight()<n.scrollHeight||i.innerWidth()<n.scrollWidth))},n.escapeMarkup=function(t){var e={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof t?t:String(t).replace(/[&<>"'\/\\]/g,function(t){return e[t]})},n.appendMany=function(e,n){if("1.7"===t.fn.jquery.substr(0,3)){var i=t();t.map(n,function(t){i=i.add(t)}),n=i}e.append(n)},n}),e.define("select2/results",["jquery","./utils"],function(t,e){function n(t,e,i){this.$element=t,this.data=i,this.options=e,n.__super__.constructor.call(this)}return e.Extend(n,e.Observable),n.prototype.render=function(){var e=t('<ul class="select2-results__options" role="tree"></ul>');return this.options.get("multiple")&&e.attr("aria-multiselectable","true"),this.$results=e,e},n.prototype.clear=function(){this.$results.empty()},n.prototype.displayMessage=function(e){var n=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var i=t('<li role="treeitem" aria-live="assertive" class="select2-results__option"></li>'),o=this.options.get("translations").get(e.message);i.append(n(o(e.args))),i[0].className+=" select2-results__message",this.$results.append(i)},n.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},n.prototype.append=function(t){this.hideLoading();var e=[];if(null!=t.results&&0!==t.results.length){t.results=this.sort(t.results);for(var n=0;n<t.results.length;n++){var i=t.results[n],o=this.option(i);e.push(o)}this.$results.append(e)}else 0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"})},n.prototype.position=function(t,e){e.find(".select2-results").append(t)},n.prototype.sort=function(t){return this.options.get("sorter")(t)},n.prototype.highlightFirstItem=function(){var t=this.$results.find(".select2-results__option[aria-selected]"),e=t.filter("[aria-selected=true]");e.length>0?e.first().trigger("mouseenter"):t.first().trigger("mouseenter"),this.ensureHighlightVisible()},n.prototype.setClasses=function(){var e=this;this.data.current(function(n){var i=t.map(n,function(t){return t.id.toString()});e.$results.find(".select2-results__option[aria-selected]").each(function(){var e=t(this),n=t.data(this,"data"),o=""+n.id;null!=n.element&&n.element.selected||null==n.element&&t.inArray(o,i)>-1?e.attr("aria-selected","true"):e.attr("aria-selected","false")})})},n.prototype.showLoading=function(t){this.hideLoading();var e={disabled:!0,loading:!0,text:this.options.get("translations").get("searching")(t)},n=this.option(e);n.className+=" loading-results",this.$results.prepend(n)},n.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},n.prototype.option=function(e){var n=document.createElement("li");n.className="select2-results__option";var i={role:"treeitem","aria-selected":"false"};for(var o in e.disabled&&(delete i["aria-selected"],i["aria-disabled"]="true"),null==e.id&&delete i["aria-selected"],null!=e._resultId&&(n.id=e._resultId),e.title&&(n.title=e.title),e.children&&(i.role="group",i["aria-label"]=e.text,delete i["aria-selected"]),i){var r=i[o];n.setAttribute(o,r)}if(e.children){var a=t(n),s=document.createElement("strong");s.className="select2-results__group";t(s);this.template(e,s);for(var l=[],c=0;c<e.children.length;c++){var u=e.children[c],d=this.option(u);l.push(d)}var p=t("<ul></ul>",{"class":"select2-results__options select2-results__options--nested"});p.append(l),a.append(s),a.append(p)}else this.template(e,n);return t.data(n,"data",e),n},n.prototype.bind=function(e){var n=this,i=e.id+"-results";this.$results.attr("id",i),e.on("results:all",function(t){n.clear(),n.append(t.data),e.isOpen()&&(n.setClasses(),n.highlightFirstItem())}),e.on("results:append",function(t){n.append(t.data),e.isOpen()&&n.setClasses()}),e.on("query",function(t){n.hideMessages(),n.showLoading(t)}),e.on("select",function(){e.isOpen()&&(n.setClasses(),n.highlightFirstItem())}),e.on("unselect",function(){e.isOpen()&&(n.setClasses(),n.highlightFirstItem())}),e.on("open",function(){n.$results.attr("aria-expanded","true"),n.$results.attr("aria-hidden","false"),n.setClasses(),n.ensureHighlightVisible()}),e.on("close",function(){n.$results.attr("aria-expanded","false"),n.$results.attr("aria-hidden","true"),n.$results.removeAttr("aria-activedescendant")}),e.on("results:toggle",function(){var t=n.getHighlightedResults();0!==t.length&&t.trigger("mouseup")}),e.on("results:select",function(){var t=n.getHighlightedResults();if(0!==t.length){var e=t.data("data");"true"==t.attr("aria-selected")?n.trigger("close",{}):n.trigger("select",{data:e})}}),e.on("results:previous",function(){var t=n.getHighlightedResults(),e=n.$results.find("[aria-selected]"),i=e.index(t);if(0!==i){var o=i-1;0===t.length&&(o=0);var r=e.eq(o);r.trigger("mouseenter");var a=n.$results.offset().top,s=r.offset().top,l=n.$results.scrollTop()+(s-a);0===o?n.$results.scrollTop(0):s-a<0&&n.$results.scrollTop(l)}}),e.on("results:next",function(){var t=n.getHighlightedResults(),e=n.$results.find("[aria-selected]"),i=e.index(t)+1;if(!(i>=e.length)){var o=e.eq(i);o.trigger("mouseenter");var r=n.$results.offset().top+n.$results.outerHeight(!1),a=o.offset().top+o.outerHeight(!1),s=n.$results.scrollTop()+a-r;0===i?n.$results.scrollTop(0):a>r&&n.$results.scrollTop(s)}}),e.on("results:focus",function(t){t.element.addClass("select2-results__option--highlighted")}),e.on("results:message",function(t){n.displayMessage(t)}),t.fn.mousewheel&&this.$results.on("mousewheel",function(t){var e=n.$results.scrollTop(),i=n.$results.get(0).scrollHeight-e+t.deltaY,o=t.deltaY>0&&e-t.deltaY<=0,r=t.deltaY<0&&i<=n.$results.height();o?(n.$results.scrollTop(0),t.preventDefault(),t.stopPropagation()):r&&(n.$results.scrollTop(n.$results.get(0).scrollHeight-n.$results.height()),t.preventDefault(),t.stopPropagation())}),this.$results.on("mouseup",".select2-results__option[aria-selected]",function(e){var i=t(this),o=i.data("data");"true"!==i.attr("aria-selected")?n.trigger("select",{originalEvent:e,data:o}):n.options.get("multiple")?n.trigger("unselect",{originalEvent:e,data:o}):n.trigger("close",{})}),this.$results.on("mouseenter",".select2-results__option[aria-selected]",function(){var e=t(this).data("data");n.getHighlightedResults().removeClass("select2-results__option--highlighted"),n.trigger("results:focus",{data:e,element:t(this)})})},n.prototype.getHighlightedResults=function(){return this.$results.find(".select2-results__option--highlighted")},n.prototype.destroy=function(){this.$results.remove()},n.prototype.ensureHighlightVisible=function(){var t=this.getHighlightedResults();if(0!==t.length){var e=this.$results.find("[aria-selected]").index(t),n=this.$results.offset().top,i=t.offset().top,o=this.$results.scrollTop()+(i-n),r=i-n;o-=2*t.outerHeight(!1),e<=2?this.$results.scrollTop(0):(r>this.$results.outerHeight()||r<0)&&this.$results.scrollTop(o)}},n.prototype.template=function(e,n){var i=this.options.get("templateResult"),o=this.options.get("escapeMarkup"),r=i(e,n);null==r?n.style.display="none":"string"==typeof r?n.innerHTML=o(r):t(n).append(r)},n}),e.define("select2/keys",[],function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}}),e.define("select2/selection/base",["jquery","../utils","../keys"],function(t,e,n){function i(t,e){this.$element=t,this.options=e,i.__super__.constructor.call(this)}return e.Extend(i,e.Observable),i.prototype.render=function(){var e=t('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=this.$element.data("old-tabindex")?this._tabindex=this.$element.data("old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),e.attr("title",this.$element.attr("title")),e.attr("tabindex",this._tabindex),this.$selection=e,e},i.prototype.bind=function(t){var e=this,i=(t.id,t.id+"-results");this.container=t,this.$selection.on("focus",function(t){e.trigger("focus",t)}),this.$selection.on("blur",function(t){e._handleBlur(t)}),this.$selection.on("keydown",function(t){e.trigger("keypress",t),t.which===n.SPACE&&t.preventDefault()}),t.on("results:focus",function(t){e.$selection.attr("aria-activedescendant",t.data._resultId)}),t.on("selection:update",function(t){e.update(t.data)}),t.on("open",function(){e.$selection.attr("aria-expanded","true"),e.$selection.attr("aria-owns",i),e._attachCloseHandler(t)}),t.on("close",function(){e.$selection.attr("aria-expanded","false"),e.$selection.removeAttr("aria-activedescendant"),e.$selection.removeAttr("aria-owns"),e.$selection.focus(),e._detachCloseHandler(t)}),t.on("enable",function(){e.$selection.attr("tabindex",e._tabindex)}),t.on("disable",function(){e.$selection.attr("tabindex","-1")})},i.prototype._handleBlur=function(e){var n=this;window.setTimeout(function(){document.activeElement==n.$selection[0]||t.contains(n.$selection[0],document.activeElement)||n.trigger("blur",e)},1)},i.prototype._attachCloseHandler=function(e){t(document.body).on("mousedown.select2."+e.id,function(e){var n=t(e.target).closest(".select2");t(".select2.select2-container--open").each(function(){var e=t(this);this!=n[0]&&e.data("element").select2("close")})})},i.prototype._detachCloseHandler=function(e){t(document.body).off("mousedown.select2."+e.id)},i.prototype.position=function(t,e){e.find(".selection").append(t)},i.prototype.destroy=function(){this._detachCloseHandler(this.container)},i.prototype.update=function(){throw new Error("The `update` method must be defined in child classes.")},i}),e.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(t,e,n){function i(){i.__super__.constructor.apply(this,arguments)}return n.Extend(i,e),i.prototype.render=function(){var t=i.__super__.render.call(this);return t.addClass("select2-selection--single"),t.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),t},i.prototype.bind=function(t){var e=this;i.__super__.bind.apply(this,arguments);var n=t.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",n),this.$selection.attr("aria-labelledby",n),this.$selection.on("mousedown",function(t){1===t.which&&e.trigger("toggle",{originalEvent:t})}),this.$selection.on("focus",function(){}),this.$selection.on("blur",function(){}),t.on("focus",function(){t.isOpen()||e.$selection.focus()}),t.on("selection:update",function(t){e.update(t.data)})},i.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},i.prototype.display=function(t,e){var n=this.options.get("templateSelection");return this.options.get("escapeMarkup")(n(t,e))},i.prototype.selectionContainer=function(){return t("<span></span>")},i.prototype.update=function(t){if(0!==t.length){var e=t[0],n=this.$selection.find(".select2-selection__rendered"),i=this.display(e,n);n.empty().append(i),n.prop("title",e.title||e.text)}else this.clear()},i}),e.define("select2/selection/multiple",["jquery","./base","../utils"],function(t,e,n){function i(){i.__super__.constructor.apply(this,arguments)}return n.Extend(i,e),i.prototype.render=function(){var t=i.__super__.render.call(this);return t.addClass("select2-selection--multiple"),t.html('<ul class="select2-selection__rendered"></ul>'),t},i.prototype.bind=function(){var e=this;i.__super__.bind.apply(this,arguments),this.$selection.on("click",function(t){e.trigger("toggle",{originalEvent:t})}),this.$selection.on("click",".select2-selection__choice__remove",function(n){if(!e.options.get("disabled")){var i=t(this).parent().data("data");e.trigger("unselect",{originalEvent:n,data:i})}})},i.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},i.prototype.display=function(t,e){var n=this.options.get("templateSelection");return this.options.get("escapeMarkup")(n(t,e))},i.prototype.selectionContainer=function(){return t('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;</span></li>')},i.prototype.update=function(t){if(this.clear(),0!==t.length){for(var e=[],i=0;i<t.length;i++){var o=t[i],r=this.selectionContainer(),a=this.display(o,r);r.append(a),r.prop("title",o.title||o.text),r.data("data",o),e.push(r)}var s=this.$selection.find(".select2-selection__rendered");n.appendMany(s,e)}},i}),e.define("select2/selection/placeholder",["../utils"],function(){function t(t,e,n){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),t.call(this,e,n)}return t.prototype.normalizePlaceholder=function(t,e){return"string"==typeof e&&(e={id:"",text:e}),e},t.prototype.createPlaceholder=function(t,e){var n=this.selectionContainer();return n.html(this.display(e)),n.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),n},t.prototype.update=function(t,e){var n=1==e.length&&e[0].id!=this.placeholder.id;if(e.length>1||n)return t.call(this,e);this.clear();var i=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(i)},t}),e.define("select2/selection/allowClear",["jquery","../keys"],function(t,e){function n(){}return n.prototype.bind=function(t,e,n){var i=this;t.call(this,e,n),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",function(t){i._handleClear(t)}),e.on("keypress",function(t){i._handleKeyboardClear(t,e)})},n.prototype._handleClear=function(t,e){if(!this.options.get("disabled")){var n=this.$selection.find(".select2-selection__clear");if(0!==n.length){e.stopPropagation();for(var i=n.data("data"),o=0;o<i.length;o++){var r={data:i[o]};if(this.trigger("unselect",r),r.prevented)return}this.$element.val(this.placeholder.id).trigger("change"),this.trigger("toggle",{})}}},n.prototype._handleKeyboardClear=function(t,n,i){i.isOpen()||n.which!=e.DELETE&&n.which!=e.BACKSPACE||this._handleClear(n)},n.prototype.update=function(e,n){if(e.call(this,n),!(this.$selection.find(".select2-selection__placeholder").length>0||0===n.length)){var i=t('<span class="select2-selection__clear">&times;</span>');i.data("data",n),this.$selection.find(".select2-selection__rendered").prepend(i)}},n}),e.define("select2/selection/search",["jquery","../utils","../keys"],function(t,e,n){function i(t,e,n){t.call(this,e,n)}return i.prototype.render=function(e){var n=t('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" aria-autocomplete="list" /></li>');this.$searchContainer=n,this.$search=n.find("input");var i=e.call(this);return this._transferTabIndex(),i},i.prototype.bind=function(t,e,i){var o=this;t.call(this,e,i),e.on("open",function(){o.$search.trigger("focus")}),e.on("close",function(){o.$search.val(""),o.$search.removeAttr("aria-activedescendant"),o.$search.trigger("focus")}),e.on("enable",function(){o.$search.prop("disabled",!1),o._transferTabIndex()}),e.on("disable",function(){o.$search.prop("disabled",!0)}),e.on("focus",function(){o.$search.trigger("focus")}),e.on("results:focus",function(t){o.$search.attr("aria-activedescendant",t.id)}),this.$selection.on("focusin",".select2-search--inline",function(t){o.trigger("focus",t)}),this.$selection.on("focusout",".select2-search--inline",function(t){o._handleBlur(t)}),this.$selection.on("keydown",".select2-search--inline",function(t){if(t.stopPropagation(),o.trigger("keypress",t),o._keyUpPrevented=t.isDefaultPrevented(),t.which===n.BACKSPACE&&""===o.$search.val()){var e=o.$searchContainer.prev(".select2-selection__choice");if(e.length>0){var i=e.data("data");o.searchRemoveChoice(i),t.preventDefault()}}});var r=document.documentMode,a=r&&r<=11;this.$selection.on("input.searchcheck",".select2-search--inline",function(){a?o.$selection.off("input.search input.searchcheck"):o.$selection.off("keyup.search")}),this.$selection.on("keyup.search input.search",".select2-search--inline",function(t){if(a&&"input"===t.type)o.$selection.off("input.search input.searchcheck");else{var e=t.which;e!=n.SHIFT&&e!=n.CTRL&&e!=n.ALT&&e!=n.TAB&&o.handleSearch(t)}})},i.prototype._transferTabIndex=function(){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")},i.prototype.createPlaceholder=function(t,e){this.$search.attr("placeholder",e.text)},i.prototype.update=function(t,e){var n=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""),t.call(this,e),this.$selection.find(".select2-selection__rendered").append(this.$searchContainer),this.resizeSearch(),n&&this.$search.focus()},i.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=!1},i.prototype.searchRemoveChoice=function(t,e){this.trigger("unselect",{data:e}),this.$search.val(e.text),this.handleSearch()},i.prototype.resizeSearch=function(){this.$search.css("width","25px");var t="";""!==this.$search.attr("placeholder")?t=this.$selection.find(".select2-selection__rendered").innerWidth():t=.75*(this.$search.val().length+1)+"em";this.$search.css("width",t)},i}),e.define("select2/selection/eventRelay",["jquery"],function(t){function e(){}return e.prototype.bind=function(e,n,i){var o=this,r=["open","opening","close","closing","select","selecting","unselect","unselecting"],a=["opening","closing","selecting","unselecting"];e.call(this,n,i),n.on("*",function(e,n){if(-1!==t.inArray(e,r)){n=n||{};var i=t.Event("select2:"+e,{params:n});o.$element.trigger(i),-1!==t.inArray(e,a)&&(n.prevented=i.isDefaultPrevented())}})},e}),e.define("select2/translation",["jquery","require"],function(t,e){function n(t){this.dict=t||{}}return n.prototype.all=function(){return this.dict},n.prototype.get=function(t){return this.dict[t]},n.prototype.extend=function(e){this.dict=t.extend({},e.all(),this.dict)},n._cache={},n.loadPath=function(t){if(!(t in n._cache)){var i=e(t);n._cache[t]=i}return new n(n._cache[t])},n}),e.define("select2/diacritics",[],function(){return{"\u24b6":"A","\uff21":"A","\xc0":"A","\xc1":"A","\xc2":"A","\u1ea6":"A","\u1ea4":"A","\u1eaa":"A","\u1ea8":"A","\xc3":"A","\u0100":"A","\u0102":"A","\u1eb0":"A","\u1eae":"A","\u1eb4":"A","\u1eb2":"A","\u0226":"A","\u01e0":"A","\xc4":"A","\u01de":"A","\u1ea2":"A","\xc5":"A","\u01fa":"A","\u01cd":"A","\u0200":"A","\u0202":"A","\u1ea0":"A","\u1eac":"A","\u1eb6":"A","\u1e00":"A","\u0104":"A","\u023a":"A","\u2c6f":"A","\ua732":"AA","\xc6":"AE","\u01fc":"AE","\u01e2":"AE","\ua734":"AO","\ua736":"AU","\ua738":"AV","\ua73a":"AV","\ua73c":"AY","\u24b7":"B","\uff22":"B","\u1e02":"B","\u1e04":"B","\u1e06":"B","\u0243":"B","\u0182":"B","\u0181":"B","\u24b8":"C","\uff23":"C","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\xc7":"C","\u1e08":"C","\u0187":"C","\u023b":"C","\ua73e":"C","\u24b9":"D","\uff24":"D","\u1e0a":"D","\u010e":"D","\u1e0c":"D","\u1e10":"D","\u1e12":"D","\u1e0e":"D","\u0110":"D","\u018b":"D","\u018a":"D","\u0189":"D","\ua779":"D","\u01f1":"DZ","\u01c4":"DZ","\u01f2":"Dz","\u01c5":"Dz","\u24ba":"E","\uff25":"E","\xc8":"E","\xc9":"E","\xca":"E","\u1ec0":"E","\u1ebe":"E","\u1ec4":"E","\u1ec2":"E","\u1ebc":"E","\u0112":"E","\u1e14":"E","\u1e16":"E","\u0114":"E","\u0116":"E","\xcb":"E","\u1eba":"E","\u011a":"E","\u0204":"E","\u0206":"E","\u1eb8":"E","\u1ec6":"E","\u0228":"E","\u1e1c":"E","\u0118":"E","\u1e18":"E","\u1e1a":"E","\u0190":"E","\u018e":"E","\u24bb":"F","\uff26":"F","\u1e1e":"F","\u0191":"F","\ua77b":"F","\u24bc":"G","\uff27":"G","\u01f4":"G","\u011c":"G","\u1e20":"G","\u011e":"G","\u0120":"G","\u01e6":"G","\u0122":"G","\u01e4":"G","\u0193":"G","\ua7a0":"G","\ua77d":"G","\ua77e":"G","\u24bd":"H","\uff28":"H","\u0124":"H","\u1e22":"H","\u1e26":"H","\u021e":"H","\u1e24":"H","\u1e28":"H","\u1e2a":"H","\u0126":"H","\u2c67":"H","\u2c75":"H","\ua78d":"H","\u24be":"I","\uff29":"I","\xcc":"I","\xcd":"I","\xce":"I","\u0128":"I","\u012a":"I","\u012c":"I","\u0130":"I","\xcf":"I","\u1e2e":"I","\u1ec8":"I","\u01cf":"I","\u0208":"I","\u020a":"I","\u1eca":"I","\u012e":"I","\u1e2c":"I","\u0197":"I","\u24bf":"J","\uff2a":"J","\u0134":"J","\u0248":"J","\u24c0":"K","\uff2b":"K","\u1e30":"K","\u01e8":"K","\u1e32":"K","\u0136":"K","\u1e34":"K","\u0198":"K","\u2c69":"K","\ua740":"K","\ua742":"K","\ua744":"K","\ua7a2":"K","\u24c1":"L","\uff2c":"L","\u013f":"L","\u0139":"L","\u013d":"L","\u1e36":"L","\u1e38":"L","\u013b":"L","\u1e3c":"L","\u1e3a":"L","\u0141":"L","\u023d":"L","\u2c62":"L","\u2c60":"L","\ua748":"L","\ua746":"L","\ua780":"L","\u01c7":"LJ","\u01c8":"Lj","\u24c2":"M","\uff2d":"M","\u1e3e":"M","\u1e40":"M","\u1e42":"M","\u2c6e":"M","\u019c":"M","\u24c3":"N","\uff2e":"N","\u01f8":"N","\u0143":"N","\xd1":"N","\u1e44":"N","\u0147":"N","\u1e46":"N","\u0145":"N","\u1e4a":"N","\u1e48":"N","\u0220":"N","\u019d":"N","\ua790":"N","\ua7a4":"N","\u01ca":"NJ","\u01cb":"Nj","\u24c4":"O","\uff2f":"O","\xd2":"O","\xd3":"O","\xd4":"O","\u1ed2":"O","\u1ed0":"O","\u1ed6":"O","\u1ed4":"O","\xd5":"O","\u1e4c":"O","\u022c":"O","\u1e4e":"O","\u014c":"O","\u1e50":"O","\u1e52":"O","\u014e":"O","\u022e":"O","\u0230":"O","\xd6":"O","\u022a":"O","\u1ece":"O","\u0150":"O","\u01d1":"O","\u020c":"O","\u020e":"O","\u01a0":"O","\u1edc":"O","\u1eda":"O","\u1ee0":"O","\u1ede":"O","\u1ee2":"O","\u1ecc":"O","\u1ed8":"O","\u01ea":"O","\u01ec":"O","\xd8":"O","\u01fe":"O","\u0186":"O","\u019f":"O","\ua74a":"O","\ua74c":"O","\u01a2":"OI","\ua74e":"OO","\u0222":"OU","\u24c5":"P","\uff30":"P","\u1e54":"P","\u1e56":"P","\u01a4":"P","\u2c63":"P","\ua750":"P","\ua752":"P","\ua754":"P","\u24c6":"Q","\uff31":"Q","\ua756":"Q","\ua758":"Q","\u024a":"Q","\u24c7":"R","\uff32":"R","\u0154":"R","\u1e58":"R","\u0158":"R","\u0210":"R","\u0212":"R","\u1e5a":"R","\u1e5c":"R","\u0156":"R","\u1e5e":"R","\u024c":"R","\u2c64":"R","\ua75a":"R","\ua7a6":"R","\ua782":"R","\u24c8":"S","\uff33":"S","\u1e9e":"S","\u015a":"S","\u1e64":"S","\u015c":"S","\u1e60":"S","\u0160":"S","\u1e66":"S","\u1e62":"S","\u1e68":"S","\u0218":"S","\u015e":"S","\u2c7e":"S","\ua7a8":"S","\ua784":"S","\u24c9":"T","\uff34":"T","\u1e6a":"T","\u0164":"T","\u1e6c":"T","\u021a":"T","\u0162":"T","\u1e70":"T","\u1e6e":"T","\u0166":"T","\u01ac":"T","\u01ae":"T","\u023e":"T","\ua786":"T","\ua728":"TZ","\u24ca":"U","\uff35":"U","\xd9":"U","\xda":"U","\xdb":"U","\u0168":"U","\u1e78":"U","\u016a":"U","\u1e7a":"U","\u016c":"U","\xdc":"U","\u01db":"U","\u01d7":"U","\u01d5":"U","\u01d9":"U","\u1ee6":"U","\u016e":"U","\u0170":"U","\u01d3":"U","\u0214":"U","\u0216":"U","\u01af":"U","\u1eea":"U","\u1ee8":"U","\u1eee":"U","\u1eec":"U","\u1ef0":"U","\u1ee4":"U","\u1e72":"U","\u0172":"U","\u1e76":"U","\u1e74":"U","\u0244":"U","\u24cb":"V","\uff36":"V","\u1e7c":"V","\u1e7e":"V","\u01b2":"V","\ua75e":"V","\u0245":"V","\ua760":"VY","\u24cc":"W","\uff37":"W","\u1e80":"W","\u1e82":"W","\u0174":"W","\u1e86":"W","\u1e84":"W","\u1e88":"W","\u2c72":"W","\u24cd":"X","\uff38":"X","\u1e8a":"X","\u1e8c":"X","\u24ce":"Y","\uff39":"Y","\u1ef2":"Y","\xdd":"Y","\u0176":"Y","\u1ef8":"Y","\u0232":"Y","\u1e8e":"Y","\u0178":"Y","\u1ef6":"Y","\u1ef4":"Y","\u01b3":"Y","\u024e":"Y","\u1efe":"Y","\u24cf":"Z","\uff3a":"Z","\u0179":"Z","\u1e90":"Z","\u017b":"Z","\u017d":"Z","\u1e92":"Z","\u1e94":"Z","\u01b5":"Z","\u0224":"Z","\u2c7f":"Z","\u2c6b":"Z","\ua762":"Z","\u24d0":"a","\uff41":"a","\u1e9a":"a","\xe0":"a","\xe1":"a","\xe2":"a","\u1ea7":"a","\u1ea5":"a","\u1eab":"a","\u1ea9":"a","\xe3":"a","\u0101":"a","\u0103":"a","\u1eb1":"a","\u1eaf":"a","\u1eb5":"a","\u1eb3":"a","\u0227":"a","\u01e1":"a","\xe4":"a","\u01df":"a","\u1ea3":"a","\xe5":"a","\u01fb":"a","\u01ce":"a","\u0201":"a","\u0203":"a","\u1ea1":"a","\u1ead":"a","\u1eb7":"a","\u1e01":"a","\u0105":"a","\u2c65":"a","\u0250":"a","\ua733":"aa","\xe6":"ae","\u01fd":"ae","\u01e3":"ae","\ua735":"ao","\ua737":"au","\ua739":"av","\ua73b":"av","\ua73d":"ay","\u24d1":"b","\uff42":"b","\u1e03":"b","\u1e05":"b","\u1e07":"b","\u0180":"b","\u0183":"b","\u0253":"b","\u24d2":"c","\uff43":"c","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\xe7":"c","\u1e09":"c","\u0188":"c","\u023c":"c","\ua73f":"c","\u2184":"c","\u24d3":"d","\uff44":"d","\u1e0b":"d","\u010f":"d","\u1e0d":"d","\u1e11":"d","\u1e13":"d","\u1e0f":"d","\u0111":"d","\u018c":"d","\u0256":"d","\u0257":"d","\ua77a":"d","\u01f3":"dz","\u01c6":"dz","\u24d4":"e","\uff45":"e","\xe8":"e","\xe9":"e","\xea":"e","\u1ec1":"e","\u1ebf":"e","\u1ec5":"e","\u1ec3":"e","\u1ebd":"e","\u0113":"e","\u1e15":"e","\u1e17":"e","\u0115":"e","\u0117":"e","\xeb":"e","\u1ebb":"e","\u011b":"e","\u0205":"e","\u0207":"e","\u1eb9":"e","\u1ec7":"e","\u0229":"e","\u1e1d":"e","\u0119":"e","\u1e19":"e","\u1e1b":"e","\u0247":"e","\u025b":"e","\u01dd":"e","\u24d5":"f","\uff46":"f","\u1e1f":"f","\u0192":"f","\ua77c":"f","\u24d6":"g","\uff47":"g","\u01f5":"g","\u011d":"g","\u1e21":"g","\u011f":"g","\u0121":"g","\u01e7":"g","\u0123":"g","\u01e5":"g","\u0260":"g","\ua7a1":"g","\u1d79":"g","\ua77f":"g","\u24d7":"h","\uff48":"h","\u0125":"h","\u1e23":"h","\u1e27":"h","\u021f":"h","\u1e25":"h","\u1e29":"h","\u1e2b":"h","\u1e96":"h","\u0127":"h","\u2c68":"h","\u2c76":"h","\u0265":"h","\u0195":"hv","\u24d8":"i","\uff49":"i","\xec":"i","\xed":"i","\xee":"i","\u0129":"i","\u012b":"i","\u012d":"i","\xef":"i","\u1e2f":"i","\u1ec9":"i","\u01d0":"i","\u0209":"i","\u020b":"i","\u1ecb":"i","\u012f":"i","\u1e2d":"i","\u0268":"i","\u0131":"i","\u24d9":"j","\uff4a":"j","\u0135":"j","\u01f0":"j","\u0249":"j","\u24da":"k","\uff4b":"k","\u1e31":"k","\u01e9":"k","\u1e33":"k","\u0137":"k","\u1e35":"k","\u0199":"k","\u2c6a":"k","\ua741":"k","\ua743":"k","\ua745":"k","\ua7a3":"k","\u24db":"l","\uff4c":"l","\u0140":"l","\u013a":"l","\u013e":"l","\u1e37":"l","\u1e39":"l","\u013c":"l","\u1e3d":"l","\u1e3b":"l","\u017f":"l","\u0142":"l","\u019a":"l","\u026b":"l","\u2c61":"l","\ua749":"l","\ua781":"l","\ua747":"l","\u01c9":"lj","\u24dc":"m","\uff4d":"m","\u1e3f":"m","\u1e41":"m","\u1e43":"m","\u0271":"m","\u026f":"m","\u24dd":"n","\uff4e":"n","\u01f9":"n","\u0144":"n","\xf1":"n","\u1e45":"n","\u0148":"n","\u1e47":"n","\u0146":"n","\u1e4b":"n","\u1e49":"n","\u019e":"n","\u0272":"n","\u0149":"n","\ua791":"n","\ua7a5":"n","\u01cc":"nj","\u24de":"o","\uff4f":"o","\xf2":"o","\xf3":"o","\xf4":"o","\u1ed3":"o","\u1ed1":"o","\u1ed7":"o","\u1ed5":"o","\xf5":"o","\u1e4d":"o","\u022d":"o","\u1e4f":"o","\u014d":"o","\u1e51":"o","\u1e53":"o","\u014f":"o","\u022f":"o","\u0231":"o","\xf6":"o","\u022b":"o","\u1ecf":"o","\u0151":"o","\u01d2":"o","\u020d":"o","\u020f":"o","\u01a1":"o","\u1edd":"o","\u1edb":"o","\u1ee1":"o","\u1edf":"o","\u1ee3":"o","\u1ecd":"o","\u1ed9":"o","\u01eb":"o","\u01ed":"o","\xf8":"o","\u01ff":"o","\u0254":"o","\ua74b":"o","\ua74d":"o","\u0275":"o","\u01a3":"oi","\u0223":"ou","\ua74f":"oo","\u24df":"p","\uff50":"p","\u1e55":"p","\u1e57":"p","\u01a5":"p","\u1d7d":"p","\ua751":"p","\ua753":"p","\ua755":"p","\u24e0":"q","\uff51":"q","\u024b":"q","\ua757":"q",
"\ua759":"q","\u24e1":"r","\uff52":"r","\u0155":"r","\u1e59":"r","\u0159":"r","\u0211":"r","\u0213":"r","\u1e5b":"r","\u1e5d":"r","\u0157":"r","\u1e5f":"r","\u024d":"r","\u027d":"r","\ua75b":"r","\ua7a7":"r","\ua783":"r","\u24e2":"s","\uff53":"s","\xdf":"s","\u015b":"s","\u1e65":"s","\u015d":"s","\u1e61":"s","\u0161":"s","\u1e67":"s","\u1e63":"s","\u1e69":"s","\u0219":"s","\u015f":"s","\u023f":"s","\ua7a9":"s","\ua785":"s","\u1e9b":"s","\u24e3":"t","\uff54":"t","\u1e6b":"t","\u1e97":"t","\u0165":"t","\u1e6d":"t","\u021b":"t","\u0163":"t","\u1e71":"t","\u1e6f":"t","\u0167":"t","\u01ad":"t","\u0288":"t","\u2c66":"t","\ua787":"t","\ua729":"tz","\u24e4":"u","\uff55":"u","\xf9":"u","\xfa":"u","\xfb":"u","\u0169":"u","\u1e79":"u","\u016b":"u","\u1e7b":"u","\u016d":"u","\xfc":"u","\u01dc":"u","\u01d8":"u","\u01d6":"u","\u01da":"u","\u1ee7":"u","\u016f":"u","\u0171":"u","\u01d4":"u","\u0215":"u","\u0217":"u","\u01b0":"u","\u1eeb":"u","\u1ee9":"u","\u1eef":"u","\u1eed":"u","\u1ef1":"u","\u1ee5":"u","\u1e73":"u","\u0173":"u","\u1e77":"u","\u1e75":"u","\u0289":"u","\u24e5":"v","\uff56":"v","\u1e7d":"v","\u1e7f":"v","\u028b":"v","\ua75f":"v","\u028c":"v","\ua761":"vy","\u24e6":"w","\uff57":"w","\u1e81":"w","\u1e83":"w","\u0175":"w","\u1e87":"w","\u1e85":"w","\u1e98":"w","\u1e89":"w","\u2c73":"w","\u24e7":"x","\uff58":"x","\u1e8b":"x","\u1e8d":"x","\u24e8":"y","\uff59":"y","\u1ef3":"y","\xfd":"y","\u0177":"y","\u1ef9":"y","\u0233":"y","\u1e8f":"y","\xff":"y","\u1ef7":"y","\u1e99":"y","\u1ef5":"y","\u01b4":"y","\u024f":"y","\u1eff":"y","\u24e9":"z","\uff5a":"z","\u017a":"z","\u1e91":"z","\u017c":"z","\u017e":"z","\u1e93":"z","\u1e95":"z","\u01b6":"z","\u0225":"z","\u0240":"z","\u2c6c":"z","\ua763":"z","\u0386":"\u0391","\u0388":"\u0395","\u0389":"\u0397","\u038a":"\u0399","\u03aa":"\u0399","\u038c":"\u039f","\u038e":"\u03a5","\u03ab":"\u03a5","\u038f":"\u03a9","\u03ac":"\u03b1","\u03ad":"\u03b5","\u03ae":"\u03b7","\u03af":"\u03b9","\u03ca":"\u03b9","\u0390":"\u03b9","\u03cc":"\u03bf","\u03cd":"\u03c5","\u03cb":"\u03c5","\u03b0":"\u03c5","\u03c9":"\u03c9","\u03c2":"\u03c3"}}),e.define("select2/data/base",["../utils"],function(t){function e(){e.__super__.constructor.call(this)}return t.Extend(e,t.Observable),e.prototype.current=function(){throw new Error("The `current` method must be defined in child classes.")},e.prototype.query=function(){throw new Error("The `query` method must be defined in child classes.")},e.prototype.bind=function(){},e.prototype.destroy=function(){},e.prototype.generateResultId=function(e,n){var i=e.id+"-result-";return i+=t.generateChars(4),null!=n.id?i+="-"+n.id.toString():i+="-"+t.generateChars(4),i},e}),e.define("select2/data/select",["./base","../utils","jquery"],function(t,e,n){function i(t,e){this.$element=t,this.options=e,i.__super__.constructor.call(this)}return e.Extend(i,t),i.prototype.current=function(t){var e=[],i=this;this.$element.find(":selected").each(function(){var t=n(this),o=i.item(t);e.push(o)}),t(e)},i.prototype.select=function(t){var e=this;if(t.selected=!0,n(t.element).is("option"))return t.element.selected=!0,void this.$element.trigger("change");if(this.$element.prop("multiple"))this.current(function(i){var o=[];(t=[t]).push.apply(t,i);for(var r=0;r<t.length;r++){var a=t[r].id;-1===n.inArray(a,o)&&o.push(a)}e.$element.val(o),e.$element.trigger("change")});else{var i=t.id;this.$element.val(i),this.$element.trigger("change")}},i.prototype.unselect=function(t){var e=this;if(this.$element.prop("multiple")){if(t.selected=!1,n(t.element).is("option"))return t.element.selected=!1,void this.$element.trigger("change");this.current(function(i){for(var o=[],r=0;r<i.length;r++){var a=i[r].id;a!==t.id&&-1===n.inArray(a,o)&&o.push(a)}e.$element.val(o),e.$element.trigger("change")})}},i.prototype.bind=function(t){var e=this;this.container=t,t.on("select",function(t){e.select(t.data)}),t.on("unselect",function(t){e.unselect(t.data)})},i.prototype.destroy=function(){this.$element.find("*").each(function(){n.removeData(this,"data")})},i.prototype.query=function(t,e){var i=[],o=this;this.$element.children().each(function(){var e=n(this);if(e.is("option")||e.is("optgroup")){var r=o.item(e),a=o.matches(t,r);null!==a&&i.push(a)}}),e({results:i})},i.prototype.addOptions=function(t){e.appendMany(this.$element,t)},i.prototype.option=function(t){var e;t.children?(e=document.createElement("optgroup")).label=t.text:(e=document.createElement("option")).textContent!==undefined?e.textContent=t.text:e.innerText=t.text,t.id&&(e.value=t.id),t.disabled&&(e.disabled=!0),t.selected&&(e.selected=!0),t.title&&(e.title=t.title);var i=n(e),o=this._normalizeItem(t);return o.element=e,n.data(e,"data",o),i},i.prototype.item=function(t){var e={};if(null!=(e=n.data(t[0],"data")))return e;if(t.is("option"))e={id:t.val(),text:t.text(),disabled:t.prop("disabled"),selected:t.prop("selected"),title:t.prop("title")};else if(t.is("optgroup")){e={text:t.prop("label"),children:[],title:t.prop("title")};for(var i=t.children("option"),o=[],r=0;r<i.length;r++){var a=n(i[r]),s=this.item(a);o.push(s)}e.children=o}return(e=this._normalizeItem(e)).element=t[0],n.data(t[0],"data",e),e},i.prototype._normalizeItem=function(t){n.isPlainObject(t)||(t={id:t,text:t});var e={selected:!1,disabled:!1};return null!=(t=n.extend({},{text:""},t)).id&&(t.id=t.id.toString()),null!=t.text&&(t.text=t.text.toString()),null==t._resultId&&t.id&&null!=this.container&&(t._resultId=this.generateResultId(this.container,t)),n.extend({},e,t)},i.prototype.matches=function(t,e){return this.options.get("matcher")(t,e)},i}),e.define("select2/data/array",["./select","../utils","jquery"],function(t,e,n){function i(t,e){var n=e.get("data")||[];i.__super__.constructor.call(this,t,e),this.addOptions(this.convertToOptions(n))}return e.Extend(i,t),i.prototype.select=function(t){var e=this.$element.find("option").filter(function(e,n){return n.value==t.id.toString()});0===e.length&&(e=this.option(t),this.addOptions(e)),i.__super__.select.call(this,t)},i.prototype.convertToOptions=function(t){function i(t){return function(){return n(this).val()==t.id}}for(var o=this,r=this.$element.find("option"),a=r.map(function(){return o.item(n(this)).id}).get(),s=[],l=0;l<t.length;l++){var c=this._normalizeItem(t[l]);if(n.inArray(c.id,a)>=0){var u=r.filter(i(c)),d=this.item(u),p=n.extend(!0,{},c,d),h=this.option(p);u.replaceWith(h)}else{var f=this.option(c);if(c.children){var m=this.convertToOptions(c.children);e.appendMany(f,m)}s.push(f)}}return s},i}),e.define("select2/data/ajax",["./array","../utils","jquery"],function(t,e,n){function i(t,e){this.ajaxOptions=this._applyDefaults(e.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),i.__super__.constructor.call(this,t,e)}return e.Extend(i,t),i.prototype._applyDefaults=function(t){var e={data:function(t){return n.extend({},t,{q:t.term})},transport:function(t,e,i){var o=n.ajax(t);return o.then(e),o.fail(i),o}};return n.extend({},e,t,!0)},i.prototype.processResults=function(t){return t},i.prototype.query=function(t,e){function i(){var i=r.transport(r,function(i){var r=o.processResults(i,t);o.options.get("debug")&&window.console&&console.error&&(r&&r.results&&n.isArray(r.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),e(r)},function(){i.status&&"0"===i.status||o.trigger("results:message",{message:"errorLoading"})});o._request=i}var o=this;null!=this._request&&(n.isFunction(this._request.abort)&&this._request.abort(),this._request=null);var r=n.extend({type:"GET"},this.ajaxOptions);"function"==typeof r.url&&(r.url=r.url.call(this.$element,t)),"function"==typeof r.data&&(r.data=r.data.call(this.$element,t)),this.ajaxOptions.delay&&null!=t.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(i,this.ajaxOptions.delay)):i()},i}),e.define("select2/data/tags",["jquery"],function(t){function e(e,n,i){var o=i.get("tags"),r=i.get("createTag");r!==undefined&&(this.createTag=r);var a=i.get("insertTag");if(a!==undefined&&(this.insertTag=a),e.call(this,n,i),t.isArray(o))for(var s=0;s<o.length;s++){var l=o[s],c=this._normalizeItem(l),u=this.option(c);this.$element.append(u)}}return e.prototype.query=function(t,e,n){function i(t,r){for(var a=t.results,s=0;s<a.length;s++){var l=a[s],c=null!=l.children&&!i({results:l.children},!0);if(l.text===e.term||c)return!r&&(t.data=a,void n(t))}if(r)return!0;var u=o.createTag(e);if(null!=u){var d=o.option(u);d.attr("data-select2-tag",!0),o.addOptions([d]),o.insertTag(a,u)}t.results=a,n(t)}var o=this;this._removeOldTags(),null!=e.term&&null==e.page?t.call(this,e,i):t.call(this,e,n)},e.prototype.createTag=function(e,n){var i=t.trim(n.term);return""===i?null:{id:i,text:i}},e.prototype.insertTag=function(t,e,n){e.unshift(n)},e.prototype._removeOldTags=function(){this._lastTag;this.$element.find("option[data-select2-tag]").each(function(){this.selected||t(this).remove()})},e}),e.define("select2/data/tokenizer",["jquery"],function(t){function e(t,e,n){var i=n.get("tokenizer");i!==undefined&&(this.tokenizer=i),t.call(this,e,n)}return e.prototype.bind=function(t,e,n){t.call(this,e,n),this.$search=e.dropdown.$search||e.selection.$search||n.find(".select2-search__field")},e.prototype.query=function(e,n,i){function o(e){var n=a._normalizeItem(e);if(!a.$element.find("option").filter(function(){return t(this).val()===n.id}).length){var i=a.option(n);i.attr("data-select2-tag",!0),a._removeOldTags(),a.addOptions([i])}r(n)}function r(t){a.trigger("select",{data:t})}var a=this;n.term=n.term||"";var s=this.tokenizer(n,this.options,o);s.term!==n.term&&(this.$search.length&&(this.$search.val(s.term),this.$search.focus()),n.term=s.term),e.call(this,n,i)},e.prototype.tokenizer=function(e,n,i,o){for(var r=i.get("tokenSeparators")||[],a=n.term,s=0,l=this.createTag||function(t){return{id:t.term,text:t.term}};s<a.length;){var c=a[s];if(-1!==t.inArray(c,r)){var u=a.substr(0,s),d=l(t.extend({},n,{term:u}));null!=d?(o(d),a=a.substr(s+1)||"",s=0):s++}else s++}return{term:a}},e}),e.define("select2/data/minimumInputLength",[],function(){function t(t,e,n){this.minimumInputLength=n.get("minimumInputLength"),t.call(this,e,n)}return t.prototype.query=function(t,e,n){e.term=e.term||"",e.term.length<this.minimumInputLength?this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:e.term,params:e}}):t.call(this,e,n)},t}),e.define("select2/data/maximumInputLength",[],function(){function t(t,e,n){this.maximumInputLength=n.get("maximumInputLength"),t.call(this,e,n)}return t.prototype.query=function(t,e,n){e.term=e.term||"",this.maximumInputLength>0&&e.term.length>this.maximumInputLength?this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:e.term,params:e}}):t.call(this,e,n)},t}),e.define("select2/data/maximumSelectionLength",[],function(){function t(t,e,n){this.maximumSelectionLength=n.get("maximumSelectionLength"),t.call(this,e,n)}return t.prototype.query=function(t,e,n){var i=this;this.current(function(o){var r=null!=o?o.length:0;i.maximumSelectionLength>0&&r>=i.maximumSelectionLength?i.trigger("results:message",{message:"maximumSelected",args:{maximum:i.maximumSelectionLength}}):t.call(i,e,n)})},t}),e.define("select2/dropdown",["jquery","./utils"],function(t,e){function n(t,e){this.$element=t,this.options=e,n.__super__.constructor.call(this)}return e.Extend(n,e.Observable),n.prototype.render=function(){var e=t('<span class="select2-dropdown"><span class="select2-results"></span></span>');return e.attr("dir",this.options.get("dir")),this.$dropdown=e,e},n.prototype.bind=function(){},n.prototype.position=function(){},n.prototype.destroy=function(){this.$dropdown.remove()},n}),e.define("select2/dropdown/search",["jquery","../utils"],function(t){function e(){}return e.prototype.render=function(e){var n=e.call(this),i=t('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" /></span>');return this.$searchContainer=i,this.$search=i.find("input"),n.prepend(i),n},e.prototype.bind=function(e,n,i){var o=this;e.call(this,n,i),this.$search.on("keydown",function(t){o.trigger("keypress",t),o._keyUpPrevented=t.isDefaultPrevented()}),this.$search.on("input",function(){t(this).off("keyup")}),this.$search.on("keyup input",function(t){o.handleSearch(t)}),n.on("open",function(){o.$search.attr("tabindex",0),o.$search.focus(),window.setTimeout(function(){o.$search.focus()},0)}),n.on("close",function(){o.$search.attr("tabindex",-1),o.$search.val("")}),n.on("focus",function(){n.isOpen()&&o.$search.focus()}),n.on("results:all",function(t){null!=t.query.term&&""!==t.query.term||(o.showSearch(t)?o.$searchContainer.removeClass("select2-search--hide"):o.$searchContainer.addClass("select2-search--hide"))})},e.prototype.handleSearch=function(){if(!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=!1},e.prototype.showSearch=function(){return!0},e}),e.define("select2/dropdown/hidePlaceholder",[],function(){function t(t,e,n,i){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),t.call(this,e,n,i)}return t.prototype.append=function(t,e){e.results=this.removePlaceholder(e.results),t.call(this,e)},t.prototype.normalizePlaceholder=function(t,e){return"string"==typeof e&&(e={id:"",text:e}),e},t.prototype.removePlaceholder=function(t,e){for(var n=e.slice(0),i=e.length-1;i>=0;i--){var o=e[i];this.placeholder.id===o.id&&n.splice(i,1)}return n},t}),e.define("select2/dropdown/infiniteScroll",["jquery"],function(t){function e(t,e,n,i){this.lastParams={},t.call(this,e,n,i),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return e.prototype.append=function(t,e){this.$loadingMore.remove(),this.loading=!1,t.call(this,e),this.showLoadingMore(e)&&this.$results.append(this.$loadingMore)},e.prototype.bind=function(e,n,i){var o=this;e.call(this,n,i),n.on("query",function(t){o.lastParams=t,o.loading=!0}),n.on("query:append",function(t){o.lastParams=t,o.loading=!0}),this.$results.on("scroll",function(){var e=t.contains(document.documentElement,o.$loadingMore[0]);!o.loading&&e&&(o.$results.offset().top+o.$results.outerHeight(!1)+50>=o.$loadingMore.offset().top+o.$loadingMore.outerHeight(!1)&&o.loadMore())})},e.prototype.loadMore=function(){this.loading=!0;var e=t.extend({},{page:1},this.lastParams);e.page++,this.trigger("query:append",e)},e.prototype.showLoadingMore=function(t,e){return e.pagination&&e.pagination.more},e.prototype.createLoadingMore=function(){var e=t('<li class="select2-results__option select2-results__option--load-more"role="treeitem" aria-disabled="true"></li>'),n=this.options.get("translations").get("loadingMore");return e.html(n(this.lastParams)),e},e}),e.define("select2/dropdown/attachBody",["jquery","../utils"],function(t,e){function n(e,n,i){this.$dropdownParent=i.get("dropdownParent")||t(document.body),e.call(this,n,i)}return n.prototype.bind=function(t,e,n){var i=this,o=!1;t.call(this,e,n),e.on("open",function(){i._showDropdown(),i._attachPositioningHandler(e),o||(o=!0,e.on("results:all",function(){i._positionDropdown(),i._resizeDropdown()}),e.on("results:append",function(){i._positionDropdown(),i._resizeDropdown()}))}),e.on("close",function(){i._hideDropdown(),i._detachPositioningHandler(e)}),this.$dropdownContainer.on("mousedown",function(t){t.stopPropagation()})},n.prototype.destroy=function(t){t.call(this),this.$dropdownContainer.remove()},n.prototype.position=function(t,e,n){e.attr("class",n.attr("class")),e.removeClass("select2"),e.addClass("select2-container--open"),e.css({position:"absolute",top:-999999}),this.$container=n},n.prototype.render=function(e){var n=t("<span></span>"),i=e.call(this);return n.append(i),this.$dropdownContainer=n,n},n.prototype._hideDropdown=function(){this.$dropdownContainer.detach()},n.prototype._attachPositioningHandler=function(n,i){var o=this,r="scroll.select2."+i.id,a="resize.select2."+i.id,s="orientationchange.select2."+i.id,l=this.$container.parents().filter(e.hasScroll);l.each(function(){t(this).data("select2-scroll-position",{x:t(this).scrollLeft(),y:t(this).scrollTop()})}),l.on(r,function(){var e=t(this).data("select2-scroll-position");t(this).scrollTop(e.y)}),t(window).on(r+" "+a+" "+s,function(){o._positionDropdown(),o._resizeDropdown()})},n.prototype._detachPositioningHandler=function(n,i){var o="scroll.select2."+i.id,r="resize.select2."+i.id,a="orientationchange.select2."+i.id;this.$container.parents().filter(e.hasScroll).off(o),t(window).off(o+" "+r+" "+a)},n.prototype._positionDropdown=function(){var e=t(window),n=this.$dropdown.hasClass("select2-dropdown--above"),i=this.$dropdown.hasClass("select2-dropdown--below"),o=null,r=this.$container.offset();r.bottom=r.top+this.$container.outerHeight(!1);var a={height:this.$container.outerHeight(!1)};a.top=r.top,a.bottom=r.top+a.height;var s={height:this.$dropdown.outerHeight(!1)},l={top:e.scrollTop(),bottom:e.scrollTop()+e.height()},c=l.top<r.top-s.height,u=l.bottom>r.bottom+s.height,d={left:r.left,top:a.bottom},p=this.$dropdownParent;"static"===p.css("position")&&(p=p.offsetParent());var h=p.offset();d.top-=h.top,d.left-=h.left,n||i||(o="below"),u||!c||n?!c&&u&&n&&(o="below"):o="above",("above"==o||n&&"below"!==o)&&(d.top=a.top-h.top-s.height),null!=o&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+o),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+o)),this.$dropdownContainer.css(d)},n.prototype._resizeDropdown=function(){var t={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(t.minWidth=t.width,t.position="relative",t.width="auto"),this.$dropdown.css(t)},n.prototype._showDropdown=function(){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},n}),e.define("select2/dropdown/minimumResultsForSearch",[],function(){function t(e){for(var n=0,i=0;i<e.length;i++){var o=e[i];o.children?n+=t(o.children):n++}return n}function e(t,e,n,i){this.minimumResultsForSearch=n.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=Infinity),t.call(this,e,n,i)}return e.prototype.showSearch=function(e,n){return!(t(n.data.results)<this.minimumResultsForSearch)&&e.call(this,n)},e}),e.define("select2/dropdown/selectOnClose",[],function(){function t(){}return t.prototype.bind=function(t,e,n){var i=this;t.call(this,e,n),e.on("close",function(t){i._handleSelectOnClose(t)})},t.prototype._handleSelectOnClose=function(t,e){if(e&&null!=e.originalSelect2Event){var n=e.originalSelect2Event;if("select"===n._type||"unselect"===n._type)return}var i=this.getHighlightedResults();if(!(i.length<1)){var o=i.data("data");null!=o.element&&o.element.selected||null==o.element&&o.selected||this.trigger("select",{data:o})}},t}),e.define("select2/dropdown/closeOnSelect",[],function(){function t(){}return t.prototype.bind=function(t,e,n){var i=this;t.call(this,e,n),e.on("select",function(t){i._selectTriggered(t)}),e.on("unselect",function(t){i._selectTriggered(t)})},t.prototype._selectTriggered=function(t,e){var n=e.originalEvent;n&&n.ctrlKey||this.trigger("close",{originalEvent:n,originalSelect2Event:e})},t}),e.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(t){var e=t.input.length-t.maximum,n="Please delete "+e+" character";return 1!=e&&(n+="s"),n},inputTooShort:function(t){return"Please enter "+(t.minimum-t.input.length)+" or more characters"},loadingMore:function(){return"Loading more results\u2026"},maximumSelected:function(t){var e="You can only select "+t.maximum+" item";return 1!=t.maximum&&(e+="s"),e},noResults:function(){return"No results found"},searching:function(){return"Searching\u2026"}}}),e.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],function(t,e,n,i,o,r,a,s,l,c,u,d,p,h,f,m,g,v,y,b,w,$,C,_,x,k,A,S,T){function D(){this.reset()}return D.prototype.apply=function(d){if(null==(d=t.extend(!0,{},this.defaults,d)).dataAdapter){if(null!=d.ajax?d.dataAdapter=f:null!=d.data?d.dataAdapter=h:d.dataAdapter=p,d.minimumInputLength>0&&(d.dataAdapter=c.Decorate(d.dataAdapter,v)),d.maximumInputLength>0&&(d.dataAdapter=c.Decorate(d.dataAdapter,y)),d.maximumSelectionLength>0&&(d.dataAdapter=c.Decorate(d.dataAdapter,b)),d.tags&&(d.dataAdapter=c.Decorate(d.dataAdapter,m)),null==d.tokenSeparators&&null==d.tokenizer||(d.dataAdapter=c.Decorate(d.dataAdapter,g)),null!=d.query){var T=e(d.amdBase+"compat/query");d.dataAdapter=c.Decorate(d.dataAdapter,T)}if(null!=d.initSelection){var D=e(d.amdBase+"compat/initSelection");d.dataAdapter=c.Decorate(d.dataAdapter,D)}}if(null==d.resultsAdapter&&(d.resultsAdapter=n,null!=d.ajax&&(d.resultsAdapter=c.Decorate(d.resultsAdapter,_)),null!=d.placeholder&&(d.resultsAdapter=c.Decorate(d.resultsAdapter,C)),d.selectOnClose&&(d.resultsAdapter=c.Decorate(d.resultsAdapter,A))),null==d.dropdownAdapter){if(d.multiple)d.dropdownAdapter=w;else{var E=c.Decorate(w,$);d.dropdownAdapter=E}if(0!==d.minimumResultsForSearch&&(d.dropdownAdapter=c.Decorate(d.dropdownAdapter,k)),d.closeOnSelect&&(d.dropdownAdapter=c.Decorate(d.dropdownAdapter,S)),null!=d.dropdownCssClass||null!=d.dropdownCss||null!=d.adaptDropdownCssClass){var O=e(d.amdBase+"compat/dropdownCss");d.dropdownAdapter=c.Decorate(d.dropdownAdapter,O)}d.dropdownAdapter=c.Decorate(d.dropdownAdapter,x)}if(null==d.selectionAdapter){if(d.multiple?d.selectionAdapter=o:d.selectionAdapter=i,null!=d.placeholder&&(d.selectionAdapter=c.Decorate(d.selectionAdapter,r)),d.allowClear&&(d.selectionAdapter=c.Decorate(d.selectionAdapter,a)),d.multiple&&(d.selectionAdapter=c.Decorate(d.selectionAdapter,s)),null!=d.containerCssClass||null!=d.containerCss||null!=d.adaptContainerCssClass){var M=e(d.amdBase+"compat/containerCss");d.selectionAdapter=c.Decorate(d.selectionAdapter,M)}d.selectionAdapter=c.Decorate(d.selectionAdapter,l)}if("string"==typeof d.language)if(d.language.indexOf("-")>0){var L=d.language.split("-")[0];d.language=[d.language,L]}else d.language=[d.language];if(t.isArray(d.language)){var I=new u;d.language.push("en");for(var P=d.language,R=0;R<P.length;R++){var N=P[R],B={};try{B=u.loadPath(N)}catch(z){try{N=this.defaults.amdLanguageBase+N,B=u.loadPath(N)}catch(H){d.debug&&window.console&&console.warn&&console.warn('Select2: The language file for "'+N+'" could not be automatically loaded. A fallback will be used instead.');continue}}I.extend(B)}d.translations=I}else{var j=u.loadPath(this.defaults.amdLanguageBase+"en"),F=new u(d.language);F.extend(j),d.translations=F}return d},D.prototype.reset=function(){function e(t){function e(t){return d[t]||t}return t.replace(/[^\u0000-\u007E]/g,e)}function n(i,o){if(""===t.trim(i.term))return o;if(o.children&&o.children.length>0){for(var r=t.extend(!0,{},o),a=o.children.length-1;a>=0;a--){null==n(i,o.children[a])&&r.children.splice(a,1)}return r.children.length>0?r:n(i,r)}var s=e(o.text).toUpperCase(),l=e(i.term).toUpperCase();return s.indexOf(l)>-1?o:null}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:c.escapeMarkup,language:T,matcher:n,minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,sorter:function(t){return t},templateResult:function(t){return t.text},templateSelection:function(t){return t.text},theme:"default",width:"resolve"}},D.prototype.set=function(e,n){var i={};i[t.camelCase(e)]=n;var o=c._convertData(i);t.extend(this.defaults,o)},new D}),e.define("select2/options",["require","jquery","./defaults","./utils"],function(t,e,n,i){function o(e,o){if(this.options=e,null!=o&&this.fromElement(o),this.options=n.apply(this.options),o&&o.is("input")){var r=t(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=i.Decorate(this.options.dataAdapter,r)}}return o.prototype.fromElement=function(t){var n=["select2"];null==this.options.multiple&&(this.options.multiple=t.prop("multiple")),null==this.options.disabled&&(this.options.disabled=t.prop("disabled")),null==this.options.language&&(t.prop("lang")?this.options.language=t.prop("lang").toLowerCase():t.closest("[lang]").prop("lang")&&(this.options.language=t.closest("[lang]").prop("lang"))),null==this.options.dir&&(t.prop("dir")?this.options.dir=t.prop("dir"):t.closest("[dir]").prop("dir")?this.options.dir=t.closest("[dir]").prop("dir"):this.options.dir="ltr"),t.prop("disabled",this.options.disabled),t.prop("multiple",this.options.multiple),t.data("select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),t.data("data",t.data("select2Tags")),t.data("tags",!0)),t.data("ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),t.attr("ajax--url",t.data("ajaxUrl")),t.data("ajax--url",t.data("ajaxUrl")));var o={};o=e.fn.jquery&&"1."==e.fn.jquery.substr(0,2)&&t[0].dataset?e.extend(!0,{},t[0].dataset,t.data()):t.data();var r=e.extend(!0,{},o);for(var a in r=i._convertData(r))e.inArray(a,n)>-1||(e.isPlainObject(this.options[a])?e.extend(this.options[a],r[a]):this.options[a]=r[a]);return this},o.prototype.get=function(t){return this.options[t]},o.prototype.set=function(t,e){this.options[t]=e},o}),e.define("select2/core",["jquery","./options","./utils","./keys"],function(t,e,n,i){var o=function(t,n){null!=t.data("select2")&&t.data("select2").destroy(),this.$element=t,this.id=this._generateId(t),n=n||{},this.options=new e(n,t),o.__super__.constructor.call(this);var i=t.attr("tabindex")||0;t.data("old-tabindex",i),t.attr("tabindex","-1");var r=this.options.get("dataAdapter");this.dataAdapter=new r(t,this.options);var a=this.render();this._placeContainer(a);var s=this.options.get("selectionAdapter");this.selection=new s(t,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,a);var l=this.options.get("dropdownAdapter");this.dropdown=new l(t,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,a);var c=this.options.get("resultsAdapter");this.results=new c(t,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var u=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current(function(t){u.trigger("selection:update",{data:t})}),t.addClass("select2-hidden-accessible"),t.attr("aria-hidden","true"),this._syncAttributes(),t.data("select2",this)};return n.Extend(o,n.Observable),o.prototype._generateId=function(t){return"select2-"+(null!=t.attr("id")?t.attr("id"):null!=t.attr("name")?t.attr("name")+"-"+n.generateChars(2):n.generateChars(4)).replace(/(:|\.|\[|\]|,)/g,"")},o.prototype._placeContainer=function(t){t.insertAfter(this.$element);var e=this._resolveWidth(this.$element,this.options.get("width"));null!=e&&t.css("width",e)},o.prototype._resolveWidth=function(t,e){var n=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==e){var i=this._resolveWidth(t,"style");return null!=i?i:this._resolveWidth(t,"element")}if("element"==e){var o=t.outerWidth(!1);return o<=0?"auto":o+"px"}if("style"==e){var r=t.attr("style");if("string"!=typeof r)return null;for(var a=r.split(";"),s=0,l=a.length;s<l;s+=1){var c=a[s].replace(/\s/g,"").match(n);if(null!==c&&c.length>=1)return c[1]}return null}return e},o.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},o.prototype._registerDomEvents=function(){var e=this;this.$element.on("change.select2",function(){e.dataAdapter.current(function(t){e.trigger("selection:update",{data:t})})}),this.$element.on("focus.select2",function(t){e.trigger("focus",t)}),this._syncA=n.bind(this._syncAttributes,this),this._syncS=n.bind(this._syncSubtree,this),this.$element[0].attachEvent&&this.$element[0].attachEvent("onpropertychange",this._syncA);var i=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;null!=i?(this._observer=new i(function(n){t.each(n,e._syncA),t.each(n,e._syncS)}),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})):this.$element[0].addEventListener&&(this.$element[0].addEventListener("DOMAttrModified",e._syncA,!1),this.$element[0].addEventListener("DOMNodeInserted",e._syncS,!1),this.$element[0].addEventListener("DOMNodeRemoved",e._syncS,!1))},o.prototype._registerDataEvents=function(){var t=this;this.dataAdapter.on("*",function(e,n){t.trigger(e,n)})},o.prototype._registerSelectionEvents=function(){var e=this,n=["toggle","focus"];this.selection.on("toggle",function(){e.toggleDropdown()}),this.selection.on("focus",function(t){e.focus(t)}),this.selection.on("*",function(i,o){-1===t.inArray(i,n)&&e.trigger(i,o)})},o.prototype._registerDropdownEvents=function(){var t=this;this.dropdown.on("*",function(e,n){t.trigger(e,n)})},o.prototype._registerResultsEvents=function(){var t=this;this.results.on("*",function(e,n){t.trigger(e,n)})},o.prototype._registerEvents=function(){var t=this;this.on("open",function(){t.$container.addClass("select2-container--open")}),this.on("close",function(){t.$container.removeClass("select2-container--open")}),this.on("enable",function(){t.$container.removeClass("select2-container--disabled")}),this.on("disable",function(){t.$container.addClass("select2-container--disabled")}),this.on("blur",function(){t.$container.removeClass("select2-container--focus")}),this.on("query",function(e){t.isOpen()||t.trigger("open",{}),this.dataAdapter.query(e,function(n){t.trigger("results:all",{data:n,query:e})})}),this.on("query:append",function(e){this.dataAdapter.query(e,function(n){t.trigger("results:append",{data:n,query:e})})}),this.on("keypress",function(e){var n=e.which;t.isOpen()?n===i.ESC||n===i.TAB||n===i.UP&&e.altKey?(t.close(),e.preventDefault()):n===i.ENTER?(t.trigger("results:select",{}),e.preventDefault()):n===i.SPACE&&e.ctrlKey?(t.trigger("results:toggle",{}),e.preventDefault()):n===i.UP?(t.trigger("results:previous",{}),e.preventDefault()):n===i.DOWN&&(t.trigger("results:next",{}),e.preventDefault()):(n===i.ENTER||n===i.SPACE||n===i.DOWN&&e.altKey)&&(t.open(),e.preventDefault())})},o.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.options.get("disabled")?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},o.prototype._syncSubtree=function(t,e){var n=!1,i=this;if(!t||!t.target||"OPTION"===t.target.nodeName||"OPTGROUP"===t.target.nodeName){if(e)if(e.addedNodes&&e.addedNodes.length>0)for(var o=0;o<e.addedNodes.length;o++){e.addedNodes[o].selected&&(n=!0)}else e.removedNodes&&e.removedNodes.length>0&&(n=!0);else n=!0;n&&this.dataAdapter.current(function(t){i.trigger("selection:update",{data:t})})}},o.prototype.trigger=function(t,e){var n=o.__super__.trigger,i={open:"opening",close:"closing",select:"selecting",unselect:"unselecting"};if(e===undefined&&(e={}),t in i){var r=i[t],a={prevented:!1,name:t,args:e};if(n.call(this,r,a),a.prevented)return void(e.prevented=!0)}n.call(this,t,e)},o.prototype.toggleDropdown=function(){this.options.get("disabled")||(this.isOpen()?this.close():this.open())},o.prototype.open=function(){this.isOpen()||this.trigger("query",{})},o.prototype.close=function(){this.isOpen()&&this.trigger("close",{})},o.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")
},o.prototype.hasFocus=function(){return this.$container.hasClass("select2-container--focus")},o.prototype.focus=function(){this.hasFocus()||(this.$container.addClass("select2-container--focus"),this.trigger("focus",{}))},o.prototype.enable=function(t){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'),null!=t&&0!==t.length||(t=[!0]);var e=!t[0];this.$element.prop("disabled",e)},o.prototype.data=function(){this.options.get("debug")&&arguments.length>0&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var t=[];return this.dataAdapter.current(function(e){t=e}),t},o.prototype.val=function(e){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==e||0===e.length)return this.$element.val();var n=e[0];t.isArray(n)&&(n=t.map(n,function(t){return t.toString()})),this.$element.val(n).trigger("change")},o.prototype.destroy=function(){this.$container.remove(),this.$element[0].detachEvent&&this.$element[0].detachEvent("onpropertychange",this._syncA),null!=this._observer?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&(this.$element[0].removeEventListener("DOMAttrModified",this._syncA,!1),this.$element[0].removeEventListener("DOMNodeInserted",this._syncS,!1),this.$element[0].removeEventListener("DOMNodeRemoved",this._syncS,!1)),this._syncA=null,this._syncS=null,this.$element.off(".select2"),this.$element.attr("tabindex",this.$element.data("old-tabindex")),this.$element.removeClass("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},o.prototype.render=function(){var e=t('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return e.attr("dir",this.options.get("dir")),this.$container=e,this.$container.addClass("select2-container--"+this.options.get("theme")),e.data("element",this.$element),e},o}),e.define("select2/compat/utils",["jquery"],function(t){function e(e,n,i){var o,r,a=[];(o=t.trim(e.attr("class")))&&t((o=""+o).split(/\s+/)).each(function(){0===this.indexOf("select2-")&&a.push(this)}),(o=t.trim(n.attr("class")))&&t((o=""+o).split(/\s+/)).each(function(){0!==this.indexOf("select2-")&&null!=(r=i(this))&&a.push(r)}),e.attr("class",a.join(" "))}return{syncCssClasses:e}}),e.define("select2/compat/containerCss",["jquery","./utils"],function(t,e){function n(){return null}function i(){}return i.prototype.render=function(i){var o=i.call(this),r=this.options.get("containerCssClass")||"";t.isFunction(r)&&(r=r(this.$element));var a=this.options.get("adaptContainerCssClass");if(a=a||n,-1!==r.indexOf(":all:")){r=r.replace(":all:","");var s=a;a=function(t){var e=s(t);return null!=e?e+" "+t:t}}var l=this.options.get("containerCss")||{};return t.isFunction(l)&&(l=l(this.$element)),e.syncCssClasses(o,this.$element,a),o.css(l),o.addClass(r),o},i}),e.define("select2/compat/dropdownCss",["jquery","./utils"],function(t,e){function n(){return null}function i(){}return i.prototype.render=function(i){var o=i.call(this),r=this.options.get("dropdownCssClass")||"";t.isFunction(r)&&(r=r(this.$element));var a=this.options.get("adaptDropdownCssClass");if(a=a||n,-1!==r.indexOf(":all:")){r=r.replace(":all:","");var s=a;a=function(t){var e=s(t);return null!=e?e+" "+t:t}}var l=this.options.get("dropdownCss")||{};return t.isFunction(l)&&(l=l(this.$element)),e.syncCssClasses(o,this.$element,a),o.css(l),o.addClass(r),o},i}),e.define("select2/compat/initSelection",["jquery"],function(t){function e(t,e,n){n.get("debug")&&window.console&&console.warn&&console.warn("Select2: The `initSelection` option has been deprecated in favor of a custom data adapter that overrides the `current` method. This method is now called multiple times instead of a single time when the instance is initialized. Support will be removed for the `initSelection` option in future versions of Select2"),this.initSelection=n.get("initSelection"),this._isInitialized=!1,t.call(this,e,n)}return e.prototype.current=function(e,n){var i=this;this._isInitialized?e.call(this,n):this.initSelection.call(null,this.$element,function(e){i._isInitialized=!0,t.isArray(e)||(e=[e]),n(e)})},e}),e.define("select2/compat/inputData",["jquery"],function(t){function e(t,e,n){this._currentData=[],this._valueSeparator=n.get("valueSeparator")||",","hidden"===e.prop("type")&&n.get("debug")&&console&&console.warn&&console.warn("Select2: Using a hidden input with Select2 is no longer supported and may stop working in the future. It is recommended to use a `<select>` element instead."),t.call(this,e,n)}return e.prototype.current=function(e,n){function i(e,n){var o=[];return e.selected||-1!==t.inArray(e.id,n)?(e.selected=!0,o.push(e)):e.selected=!1,e.children&&o.push.apply(o,i(e.children,n)),o}for(var o=[],r=0;r<this._currentData.length;r++){var a=this._currentData[r];o.push.apply(o,i(a,this.$element.val().split(this._valueSeparator)))}n(o)},e.prototype.select=function(e,n){if(this.options.get("multiple")){var i=this.$element.val();i+=this._valueSeparator+n.id,this.$element.val(i),this.$element.trigger("change")}else this.current(function(e){t.map(e,function(t){t.selected=!1})}),this.$element.val(n.id),this.$element.trigger("change")},e.prototype.unselect=function(t,e){var n=this;e.selected=!1,this.current(function(t){for(var i=[],o=0;o<t.length;o++){var r=t[o];e.id!=r.id&&i.push(r.id)}n.$element.val(i.join(n._valueSeparator)),n.$element.trigger("change")})},e.prototype.query=function(t,e,n){for(var i=[],o=0;o<this._currentData.length;o++){var r=this._currentData[o],a=this.matches(e,r);null!==a&&i.push(a)}n({results:i})},e.prototype.addOptions=function(e,n){var i=t.map(n,function(e){return t.data(e[0],"data")});this._currentData.push.apply(this._currentData,i)},e}),e.define("select2/compat/matcher",["jquery"],function(t){function e(e){function n(n,i){var o=t.extend(!0,{},i);if(null==n.term||""===t.trim(n.term))return o;if(i.children){for(var r=i.children.length-1;r>=0;r--){var a=i.children[r];e(n.term,a.text,a)||o.children.splice(r,1)}if(o.children.length>0)return o}return e(n.term,i.text,i)?o:null}return n}return e}),e.define("select2/compat/query",[],function(){function t(t,e,n){n.get("debug")&&window.console&&console.warn&&console.warn("Select2: The `query` option has been deprecated in favor of a custom data adapter that overrides the `query` method. Support will be removed for the `query` option in future versions of Select2."),t.call(this,e,n)}return t.prototype.query=function(t,e,n){e.callback=n,this.options.get("query").call(null,e)},t}),e.define("select2/dropdown/attachContainer",[],function(){function t(t,e,n){t.call(this,e,n)}return t.prototype.position=function(t,e,n){n.find(".dropdown-wrapper").append(e),e.addClass("select2-dropdown--below"),n.addClass("select2-container--below")},t}),e.define("select2/dropdown/stopPropagation",[],function(){function t(){}return t.prototype.bind=function(t,e,n){t.call(this,e,n);var i=["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"];this.$dropdown.on(i.join(" "),function(t){t.stopPropagation()})},t}),e.define("select2/selection/stopPropagation",[],function(){function t(){}return t.prototype.bind=function(t,e,n){t.call(this,e,n);var i=["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"];this.$selection.on(i.join(" "),function(t){t.stopPropagation()})},t}),
/*!
 * jQuery Mousewheel 3.1.13
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 */
r=function(t){function e(e){var a=e||window.event,s=l.call(arguments,1),c=0,d=0,p=0,h=0,f=0,m=0;if((e=t.event.fix(a)).type="mousewheel","detail"in a&&(p=-1*a.detail),"wheelDelta"in a&&(p=a.wheelDelta),"wheelDeltaY"in a&&(p=a.wheelDeltaY),"wheelDeltaX"in a&&(d=-1*a.wheelDeltaX),"axis"in a&&a.axis===a.HORIZONTAL_AXIS&&(d=-1*p,p=0),c=0===p?d:p,"deltaY"in a&&(c=p=-1*a.deltaY),"deltaX"in a&&(d=a.deltaX,0===p&&(c=-1*d)),0!==p||0!==d){if(1===a.deltaMode){var g=t.data(this,"mousewheel-line-height");c*=g,p*=g,d*=g}else if(2===a.deltaMode){var v=t.data(this,"mousewheel-page-height");c*=v,p*=v,d*=v}if(h=Math.max(Math.abs(p),Math.abs(d)),(!r||h<r)&&(r=h,i(a,h)&&(r/=40)),i(a,h)&&(c/=40,d/=40,p/=40),c=Math[c>=1?"floor":"ceil"](c/r),d=Math[d>=1?"floor":"ceil"](d/r),p=Math[p>=1?"floor":"ceil"](p/r),u.settings.normalizeOffset&&this.getBoundingClientRect){var y=this.getBoundingClientRect();f=e.clientX-y.left,m=e.clientY-y.top}return e.deltaX=d,e.deltaY=p,e.deltaFactor=r,e.offsetX=f,e.offsetY=m,e.deltaMode=0,s.unshift(e,c,d,p),o&&clearTimeout(o),o=setTimeout(n,200),(t.event.dispatch||t.event.handle).apply(this,s)}}function n(){r=null}function i(t,e){return u.settings.adjustOldDeltas&&"mousewheel"===t.type&&e%120==0}var o,r,a=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],s="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],l=Array.prototype.slice;if(t.event.fixHooks)for(var c=a.length;c;)t.event.fixHooks[a[--c]]=t.event.mouseHooks;var u=t.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var n=s.length;n;)this.addEventListener(s[--n],e,!1);else this.onmousewheel=e;t.data(this,"mousewheel-line-height",u.getLineHeight(this)),t.data(this,"mousewheel-page-height",u.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var n=s.length;n;)this.removeEventListener(s[--n],e,!1);else this.onmousewheel=null;t.removeData(this,"mousewheel-line-height"),t.removeData(this,"mousewheel-page-height")},getLineHeight:function(e){var n=t(e),i=n["offsetParent"in t.fn?"offsetParent":"parent"]();return i.length||(i=t("body")),parseInt(i.css("fontSize"),10)||parseInt(n.css("fontSize"),10)||16},getPageHeight:function(e){return t(e).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})},"function"==typeof e.define&&e.define.amd?e.define("jquery-mousewheel",["jquery"],r):"object"==typeof exports?module.exports=r:r(t),e.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults"],function(t,e,n,i){if(null==t.fn.select2){var o=["open","close","destroy"];t.fn.select2=function(e){if("object"==typeof(e=e||{}))return this.each(function(){var i=t.extend(!0,{},e);new n(t(this),i)}),this;if("string"==typeof e){var i,r=Array.prototype.slice.call(arguments,1);return this.each(function(){var n=t(this).data("select2");null==n&&window.console&&console.error&&console.error("The select2('"+e+"') method was called on an element that is not using Select2."),i=n[e].apply(n,r)}),t.inArray(e,o)>-1?this:i}throw new Error("Invalid arguments for Select2: "+e)}}return null==t.fn.select2.defaults&&(t.fn.select2.defaults=i),n}),{define:e.define,require:e.require}}(),n=e.require("jquery.select2");return t.fn.select2.amd=e,n}),function(t){var e=t.fn.select2.amd.require("select2/defaults");t.extend(e.defaults,{dropdownPosition:"auto"});var n=t.fn.select2.amd.require("select2/dropdown/attachBody");n.prototype._positionDropdown;n.prototype._positionDropdown=function(){var e=t(window),n=this.$dropdown.hasClass("select2-dropdown--above"),i=this.$dropdown.hasClass("select2-dropdown--below"),o=null,r=this.$container.offset();r.bottom=r.top+this.$container.outerHeight(!1);var a={height:this.$container.outerHeight(!1)};a.top=r.top,a.bottom=r.top+a.height;var s={height:this.$dropdown.outerHeight(!1)},l={top:e.scrollTop(),bottom:e.scrollTop()+e.height()},c=l.top<r.top-s.height,u=l.bottom>r.bottom+s.height,d={left:r.left,top:a.bottom},p=this.$dropdownParent;"static"===p.css("position")&&(p=p.offsetParent());var h=p.offset();d.top-=h.top,d.left-=h.left;var f=this.options.get("dropdownPosition");"above"===f||"below"===f?o=f:(n||i||(o="below"),u||!c||n?!c&&u&&n&&(o="below"):o="above"),("above"==o||n&&"below"!==o)&&(d.top=a.top-h.top-s.height),null!=o&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+o),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+o)),this.$dropdownContainer.css(d)}}(window.jQuery),function(t){var e=0,n=function(){return(new Date).getTime()+e++},i=function(t){return"["+t+"]$1"},o=function(t){return"_"+t+"_$1"},r=function(e,n,i){return e?"function"==typeof e?(n&&console.warn("association-insertion-traversal is ignored, because association-insertion-node is given as a function."),e(i)):"string"==typeof e?n?i[n](e):"this"==e?i:t(e):void 0:i.parent()};t(document).on("click",".add_fields",function(e){e.preventDefault();var a=t(this),s=a.data("association"),l=a.data("associations"),c=a.data("association-insertion-template"),u=a.data("association-insertion-method")||a.data("association-insertion-position")||"before",d=a.data("association-insertion-node"),p=a.data("association-insertion-traversal"),h=parseInt(a.data("count"),10),f=new RegExp("\\[new_"+s+"\\](.*?\\s)","g"),m=new RegExp("_new_"+s+"_(\\w*)","g"),g=n(),v=c.replace(f,i(g)),y=[];for(v==c&&(f=new RegExp("\\[new_"+l+"\\](.*?\\s)","g"),m=new RegExp("_new_"+l+"_(\\w*)","g"),v=c.replace(f,i(g))),y=[v=v.replace(m,o(g))],h=isNaN(h)?1:Math.max(h,1),h-=1;h;)g=n(),v=(v=c.replace(f,i(g))).replace(m,o(g)),y.push(v),h-=1;var b=r(d,p,a);b&&0!=b.length||console.warn("Couldn't find the element to insert the template. Make sure your `data-association-insertion-*` on `link_to_add_association` is correct."),t.each(y,function(e,n){var i=t(n),o=jQuery.Event("cocoon:before-insert");if(b.trigger(o,[i]),!o.isDefaultPrevented()){b[u](i);b.trigger("cocoon:after-insert",[i])}})}),t(document).on("click",".remove_fields.dynamic, .remove_fields.existing",function(e){var n=t(this),i=n.data("wrapper-class")||"nested-fields",o=n.closest("."+i),r=o.parent();e.preventDefault();var a=jQuery.Event("cocoon:before-remove");if(r.trigger(a,[o]),!a.isDefaultPrevented()){var s=r.data("remove-timeout")||0;setTimeout(function(){n.hasClass("dynamic")?o.remove():(n.prev("input[type=hidden]").val("1"),o.hide()),r.trigger("cocoon:after-remove",[o])},s)}}),t(document).on("ready page:load turbolinks:load",function(){t(".remove_fields.existing.destroyed").each(function(){var e=t(this),n=e.data("wrapper-class")||"nested-fields";e.closest("."+n).hide()})})}(jQuery),
/*!
 * Datepicker for Bootstrap v1.8.0 (https://github.com/uxsolutions/bootstrap-datepicker)
 *
 * Licensed under the Apache License v2.0 (http://www.apache.org/licenses/LICENSE-2.0)
 */
function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?t(require("jquery")):t(jQuery)}(function(t,e){function n(){return new Date(Date.UTC.apply(Date,arguments))}function i(){var t=new Date;return n(t.getFullYear(),t.getMonth(),t.getDate())}function o(t,e){return t.getUTCFullYear()===e.getUTCFullYear()&&t.getUTCMonth()===e.getUTCMonth()&&t.getUTCDate()===e.getUTCDate()}function r(n,i){return function(){return i!==e&&t.fn.datepicker.deprecated(i),this[n].apply(this,arguments)}}function a(t){return t&&!isNaN(t.getTime())}function s(e,n){function i(t,e){return e.toLowerCase()}var o=t(e).data(),r={},a=new RegExp("^"+n.toLowerCase()+"([A-Z])");for(var s in n=new RegExp("^"+n.toLowerCase()),o)n.test(s)&&(r[s.replace(a,i)]=o[s]);return r}function l(e){var n={};if(v[e]||(e=e.split("-")[0],v[e])){var i=v[e];return t.each(g,function(t,e){e in i&&(n[e]=i[e])}),n}}var c,u=(c={get:function(t){return this.slice(t)[0]},contains:function(t){for(var e=t&&t.valueOf(),n=0,i=this.length;n<i;n++)if(0<=this[n].valueOf()-e&&this[n].valueOf()-e<864e5)return n;return-1},remove:function(t){this.splice(t,1)},replace:function(e){e&&(t.isArray(e)||(e=[e]),this.clear(),this.push.apply(this,e))},clear:function(){this.length=0},copy:function(){var t=new u;return t.replace(this),t}},function(){var e=[];return e.push.apply(e,arguments),t.extend(e,c),e}),d=function(e,n){t.data(e,"datepicker",this),this._process_options(n),this.dates=new u,this.viewDate=this.o.defaultViewDate,this.focusDate=null,this.element=t(e),this.isInput=this.element.is("input"),this.inputField=this.isInput?this.element:this.element.find("input"),this.component=!!this.element.hasClass("date")&&this.element.find(".add-on, .input-group-addon, .btn"),this.component&&0===this.component.length&&(this.component=!1),this.isInline=!this.component&&this.element.is("div"),this.picker=t(y.template),this._check_template(this.o.templates.leftArrow)&&this.picker.find(".prev").html(this.o.templates.leftArrow),this._check_template(this.o.templates.rightArrow)&&this.picker.find(".next").html(this.o.templates.rightArrow),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&this.picker.addClass("datepicker-rtl"),this.o.calendarWeeks&&this.picker.find(".datepicker-days .datepicker-switch, thead .datepicker-title, tfoot .today, tfoot .clear").attr("colspan",function(t,e){return Number(e)+1}),this._process_options({startDate:this._o.startDate,endDate:this._o.endDate,daysOfWeekDisabled:this.o.daysOfWeekDisabled,daysOfWeekHighlighted:this.o.daysOfWeekHighlighted,datesDisabled:this.o.datesDisabled}),this._allow_update=!1,this.setViewMode(this.o.startView),this._allow_update=!0,this.fillDow(),this.fillMonths(),this.update(),this.isInline&&this.show()};d.prototype={constructor:d,_resolveViewName:function(e){return t.each(y.viewModes,function(n,i){if(e===n||-1!==t.inArray(e,i.names))return e=n,!1}),e},_resolveDaysOfWeek:function(e){return t.isArray(e)||(e=e.split(/[,\s]*/)),t.map(e,Number)},_check_template:function(n){try{return n!==e&&""!==n&&((n.match(/[<>]/g)||[]).length<=0||t(n).length>0)}catch(i){return!1}},_process_options:function(e){this._o=t.extend({},this._o,e);var o=this.o=t.extend({},this._o),r=o.language;v[r]||(r=r.split("-")[0],v[r]||(r=m.language)),o.language=r,o.startView=this._resolveViewName(o.startView),o.minViewMode=this._resolveViewName(o.minViewMode),o.maxViewMode=this._resolveViewName(o.maxViewMode),o.startView=Math.max(this.o.minViewMode,Math.min(this.o.maxViewMode,o.startView)),!0!==o.multidate&&(o.multidate=Number(o.multidate)||!1,!1!==o.multidate&&(o.multidate=Math.max(0,o.multidate))),o.multidateSeparator=String(o.multidateSeparator),o.weekStart%=7,o.weekEnd=(o.weekStart+6)%7;var a=y.parseFormat(o.format);o.startDate!==-Infinity&&(o.startDate?o.startDate instanceof Date?o.startDate=this._local_to_utc(this._zero_time(o.startDate)):o.startDate=y.parseDate(o.startDate,a,o.language,o.assumeNearbyYear):o.startDate=-Infinity),o.endDate!==Infinity&&(o.endDate?o.endDate instanceof Date?o.endDate=this._local_to_utc(this._zero_time(o.endDate)):o.endDate=y.parseDate(o.endDate,a,o.language,o.assumeNearbyYear):o.endDate=Infinity),o.daysOfWeekDisabled=this._resolveDaysOfWeek(o.daysOfWeekDisabled||[]),o.daysOfWeekHighlighted=this._resolveDaysOfWeek(o.daysOfWeekHighlighted||[]),o.datesDisabled=o.datesDisabled||[],t.isArray(o.datesDisabled)||(o.datesDisabled=o.datesDisabled.split(",")),o.datesDisabled=t.map(o.datesDisabled,function(t){return y.parseDate(t,a,o.language,o.assumeNearbyYear)});var s=String(o.orientation).toLowerCase().split(/\s+/g),l=o.orientation.toLowerCase();if(s=t.grep(s,function(t){return/^auto|left|right|top|bottom$/.test(t)}),o.orientation={x:"auto",y:"auto"},l&&"auto"!==l)if(1===s.length)switch(s[0]){case"top":case"bottom":o.orientation.y=s[0];break;case"left":case"right":o.orientation.x=s[0]}else l=t.grep(s,function(t){return/^left|right$/.test(t)}),o.orientation.x=l[0]||"auto",l=t.grep(s,function(t){return/^top|bottom$/.test(t)}),o.orientation.y=l[0]||"auto";else;if(o.defaultViewDate instanceof Date||"string"==typeof o.defaultViewDate)o.defaultViewDate=y.parseDate(o.defaultViewDate,a,o.language,o.assumeNearbyYear);else if(o.defaultViewDate){var c=o.defaultViewDate.year||(new Date).getFullYear(),u=o.defaultViewDate.month||0,d=o.defaultViewDate.day||1;o.defaultViewDate=n(c,u,d)}else o.defaultViewDate=i()},_events:[],_secondaryEvents:[],_applyEvents:function(t){for(var n,i,o,r=0;r<t.length;r++)n=t[r][0],2===t[r].length?(i=e,o=t[r][1]):3===t[r].length&&(i=t[r][1],o=t[r][2]),n.on(o,i)},_unapplyEvents:function(t){for(var n,i,o,r=0;r<t.length;r++)n=t[r][0],2===t[r].length?(o=e,i=t[r][1]):3===t[r].length&&(o=t[r][1],i=t[r][2]),n.off(i,o)},_buildEvents:function(){var e={keyup:t.proxy(function(e){-1===t.inArray(e.keyCode,[27,37,39,38,40,32,13,9])&&this.update()},this),keydown:t.proxy(this.keydown,this),paste:t.proxy(this.paste,this)};!0===this.o.showOnFocus&&(e.focus=t.proxy(this.show,this)),this.isInput?this._events=[[this.element,e]]:this.component&&this.inputField.length?this._events=[[this.inputField,e],[this.component,{click:t.proxy(this.show,this)}]]:this._events=[[this.element,{click:t.proxy(this.show,this),keydown:t.proxy(this.keydown,this)}]],this._events.push([this.element,"*",{blur:t.proxy(function(t){this._focused_from=t.target},this)}],[this.element,{blur:t.proxy(function(t){this._focused_from=t.target},this)}]),this.o.immediateUpdates&&this._events.push([this.element,{"changeYear changeMonth":t.proxy(function(t){this.update(t.date)},this)}]),this._secondaryEvents=[[this.picker,{click:t.proxy(this.click,this)}],[this.picker,".prev, .next",{click:t.proxy(this.navArrowsClick,this)}],[this.picker,".day:not(.disabled)",{click:t.proxy(this.dayCellClick,this)}],[t(window),{resize:t.proxy(this.place,this)}],[t(document),{"mousedown touchstart":t.proxy(function(t){this.element.is(t.target)||this.element.find(t.target).length||this.picker.is(t.target)||this.picker.find(t.target).length||this.isInline||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(e,n){var i=n||this.dates.get(-1),o=this._utc_to_local(i);this.element.trigger({type:e,date:o,viewMode:this.viewMode,dates:t.map(this.dates,this._utc_to_local),format:t.proxy(function(t,e){0===arguments.length?(t=this.dates.length-1,e=this.o.format):"string"==typeof t&&(e=t,t=this.dates.length-1),e=e||this.o.format;var n=this.dates.get(t);return y.formatDate(n,e,this.o.language)},this)})},show:function(){if(!(this.inputField.prop("disabled")||this.inputField.prop("readonly")&&!1===this.o.enableOnReadonly))return this.isInline||this.picker.appendTo(this.o.container),this.place(),this.picker.show(),this._attachSecondaryEvents(),this._trigger("show"),(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&this.o.disableTouchKeyboard&&t(this.element).blur(),this},hide:function(){return this.isInline||!this.picker.is(":visible")?this:(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.setViewMode(this.o.startView),this.o.forceParse&&this.inputField.val()&&this.setValue(),this._trigger("hide"),this)},destroy:function(){return this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date,this},paste:function(e){var n;if(e.originalEvent.clipboardData&&e.originalEvent.clipboardData.types&&-1!==t.inArray("text/plain",e.originalEvent.clipboardData.types))n=e.originalEvent.clipboardData.getData("text/plain");else{if(!window.clipboardData)return;n=window.clipboardData.getData("Text")}this.setDate(n),this.update(),e.preventDefault()},_utc_to_local:function(t){if(!t)return t;var e=new Date(t.getTime()+6e4*t.getTimezoneOffset());return e.getTimezoneOffset()!==t.getTimezoneOffset()&&(e=new Date(t.getTime()+6e4*e.getTimezoneOffset())),e},_local_to_utc:function(t){return t&&new Date(t.getTime()-6e4*t.getTimezoneOffset())},_zero_time:function(t){return t&&new Date(t.getFullYear(),t.getMonth(),t.getDate())},_zero_utc_time:function(t){return t&&n(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate())},getDates:function(){return t.map(this.dates,this._utc_to_local)},getUTCDates:function(){return t.map(this.dates,function(t){return new Date(t)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){var t=this.dates.get(-1);return t!==e?new Date(t):null},clearDates:function(){this.inputField.val(""),this.update(),this._trigger("changeDate"),this.o.autoclose&&this.hide()},setDates:function(){var e=t.isArray(arguments[0])?arguments[0]:arguments;return this.update.apply(this,e),this._trigger("changeDate"),this.setValue(),this},setUTCDates:function(){var e=t.isArray(arguments[0])?arguments[0]:arguments;return this.setDates.apply(this,t.map(e,this._utc_to_local)),this},setDate:r("setDates"),setUTCDate:r("setUTCDates"),remove:r("destroy","Method `remove` is deprecated and will be removed in version 2.0. Use `destroy` instead"),setValue:function(){var t=this.getFormattedDate();return this.inputField.val(t),this},getFormattedDate:function(n){n===e&&(n=this.o.format);var i=this.o.language;return t.map(this.dates,function(t){return y.formatDate(t,n,i)}).join(this.o.multidateSeparator)},getStartDate:function(){return this.o.startDate},setStartDate:function(t){return this._process_options({startDate:t}),this.update(),this.updateNavArrows(),this},getEndDate:function(){return this.o.endDate},setEndDate:function(t){return this._process_options({endDate:t}),this.update(),this.updateNavArrows(),this},setDaysOfWeekDisabled:function(t){return this._process_options({daysOfWeekDisabled:t}),this.update(),this},setDaysOfWeekHighlighted:function(t){return this._process_options({daysOfWeekHighlighted:t}),this.update(),this},setDatesDisabled:function(t){return this._process_options({datesDisabled:t}),this.update(),this},place:function(){if(this.isInline)return this;var e=this.picker.outerWidth(),n=this.picker.outerHeight(),i=10,o=t(this.o.container),r=o.width(),a="body"===this.o.container?t(document).scrollTop():o.scrollTop(),s=o.offset(),l=[0];this.element.parents().each(function(){var e=t(this).css("z-index");"auto"!==e&&0!==Number(e)&&l.push(Number(e))});var c=Math.max.apply(Math,l)+this.o.zIndexOffset,u=this.component?this.component.parent().offset():this.element.offset(),d=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),p=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),h=u.left-s.left,f=u.top-s.top;"body"!==this.o.container&&(f+=a),this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(h-=e-p)):u.left<0?(this.picker.addClass("datepicker-orient-left"),h-=u.left-i):h+e>r?(this.picker.addClass("datepicker-orient-right"),h+=p-e):this.o.rtl?this.picker.addClass("datepicker-orient-right"):this.picker.addClass("datepicker-orient-left");var m=this.o.orientation.y;if("auto"===m&&(m=-a+f-n<0?"bottom":"top"),this.picker.addClass("datepicker-orient-"+m),"top"===m?f-=n+parseInt(this.picker.css("padding-top")):f+=d,this.o.rtl){var g=r-(h+p);this.picker.css({top:f,right:g,zIndex:c})}else this.picker.css({top:f,left:h,zIndex:c});return this},_allow_update:!0,update:function(){if(!this._allow_update)return this;var e=this.dates.copy(),n=[],i=!1;return arguments.length?(t.each(arguments,t.proxy(function(t,e){e instanceof Date&&(e=this._local_to_utc(e)),n.push(e)},this)),i=!0):(n=(n=this.isInput?this.element.val():this.element.data("date")||this.inputField.val())&&this.o.multidate?n.split(this.o.multidateSeparator):[n],delete this.element.data().date),n=t.map(n,t.proxy(function(t){return y.parseDate(t,this.o.format,this.o.language,this.o.assumeNearbyYear)},this)),n=t.grep(n,t.proxy(function(t){return!this.dateWithinRange(t)||!t},this),!0),this.dates.replace(n),this.o.updateViewDate&&(this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate?this.viewDate=new Date(this.o.endDate):this.viewDate=this.o.defaultViewDate),i?(this.setValue(),this.element.change()):this.dates.length&&String(e)!==String(this.dates)&&i&&(this._trigger("changeDate"),this.element.change()),!this.dates.length&&e.length&&(this._trigger("clearDate"),this.element.change()),this.fill(),this},fillDow:function(){if(this.o.showWeekDays){var e=this.o.weekStart,n="<tr>";for(this.o.calendarWeeks&&(n+='<th class="cw">&#160;</th>');e<this.o.weekStart+7;)n+='<th class="dow',-1!==t.inArray(e,this.o.daysOfWeekDisabled)&&(n+=" disabled"),n+='">'+v[this.o.language].daysMin[e++%7]+"</th>";n+="</tr>",this.picker.find(".datepicker-days thead").append(n)}},fillMonths:function(){for(var t=this._utc_to_local(this.viewDate),e="",n=0;n<12;n++)e+='<span class="month'+(t&&t.getMonth()===n?" focused":"")+'">'+v[this.o.language].monthsShort[n]+"</span>";this.picker.find(".datepicker-months td").html(e)},setRange:function(e){e&&e.length?this.range=t.map(e,function(t){return t.valueOf()}):delete this.range,this.fill()},getClassNames:function(e){var n=[],r=this.viewDate.getUTCFullYear(),a=this.viewDate.getUTCMonth(),s=i();return e.getUTCFullYear()<r||e.getUTCFullYear()===r&&e.getUTCMonth()<a?n.push("old"):(e.getUTCFullYear()>r||e.getUTCFullYear()===r&&e.getUTCMonth()>a)&&n.push("new"),this.focusDate&&e.valueOf()===this.focusDate.valueOf()&&n.push("focused"),this.o.todayHighlight&&o(e,s)&&n.push("today"),-1!==this.dates.contains(e)&&n.push("active"),this.dateWithinRange(e)||n.push("disabled"),this.dateIsDisabled(e)&&n.push("disabled","disabled-date"),-1!==t.inArray(e.getUTCDay(),this.o.daysOfWeekHighlighted)&&n.push("highlighted"),this.range&&(e>this.range[0]&&e<this.range[this.range.length-1]&&n.push("range"),-1!==t.inArray(e.valueOf(),this.range)&&n.push("selected"),e.valueOf()===this.range[0]&&n.push("range-start"),e.valueOf()===this.range[this.range.length-1]&&n.push("range-end")),n},_fill_yearsView:function(n,i,o,r,a,s,l){for(var c,u,d,p="",h=o/10,f=this.picker.find(n),m=Math.floor(r/o)*o,g=m+9*h,v=Math.floor(this.viewDate.getFullYear()/h)*h,y=t.map(this.dates,function(t){return Math.floor(t.getUTCFullYear()/h)*h}),b=m-h;b<=g+h;b+=h)c=[i],u=null,b===m-h?c.push("old"):b===g+h&&c.push("new"),-1!==t.inArray(b,y)&&c.push("active"),(b<a||b>s)&&c.push("disabled"),b===v&&c.push("focused"),l!==t.noop&&((d=l(new Date(b,0,1)))===e?d={}:"boolean"==typeof d?d={enabled:d}:"string"==typeof d&&(d={classes:d}),!1===d.enabled&&c.push("disabled"),d.classes&&(c=c.concat(d.classes.split(/\s+/))),d.tooltip&&(u=d.tooltip)),p+='<span class="'+c.join(" ")+'"'+(u?' title="'+u+'"':"")+">"+b+"</span>";f.find(".datepicker-switch").text(m+"-"+g),f.find("td").html(p)},fill:function(){var i,o,r=new Date(this.viewDate),a=r.getUTCFullYear(),s=r.getUTCMonth(),l=this.o.startDate!==-Infinity?this.o.startDate.getUTCFullYear():-Infinity,c=this.o.startDate!==-Infinity?this.o.startDate.getUTCMonth():-Infinity,u=this.o.endDate!==Infinity?this.o.endDate.getUTCFullYear():Infinity,d=this.o.endDate!==Infinity?this.o.endDate.getUTCMonth():Infinity,p=v[this.o.language].today||v.en.today||"",h=v[this.o.language].clear||v.en.clear||"",f=v[this.o.language].titleFormat||v.en.titleFormat;if(!isNaN(a)&&!isNaN(s)){this.picker.find(".datepicker-days .datepicker-switch").text(y.formatDate(r,f,this.o.language)),this.picker.find("tfoot .today").text(p).css("display",!0===this.o.todayBtn||"linked"===this.o.todayBtn?"table-cell":"none"),this.picker.find("tfoot .clear").text(h).css("display",!0===this.o.clearBtn?"table-cell":"none"),this.picker.find("thead .datepicker-title").text(this.o.title).css("display","string"==typeof this.o.title&&""!==this.o.title?"table-cell":"none"),this.updateNavArrows(),this.fillMonths();var m=n(a,s,0),g=m.getUTCDate();m.setUTCDate(g-(m.getUTCDay()-this.o.weekStart+7)%7);var b=new Date(m);m.getUTCFullYear()<100&&b.setUTCFullYear(m.getUTCFullYear()),b.setUTCDate(b.getUTCDate()+42),b=b.valueOf();for(var w,$,C=[];m.valueOf()<b;){if((w=m.getUTCDay())===this.o.weekStart&&(C.push("<tr>"),this.o.calendarWeeks)){var _=new Date(+m+(this.o.weekStart-w-7)%7*864e5),x=new Date(Number(_)+(11-_.getUTCDay())%7*864e5),k=new Date(Number(k=n(x.getUTCFullYear(),0,1))+(11-k.getUTCDay())%7*864e5),A=(x-k)/864e5/7+1;C.push('<td class="cw">'+A+"</td>")}($=this.getClassNames(m)).push("day");var S=m.getUTCDate();this.o.beforeShowDay!==t.noop&&((o=this.o.beforeShowDay(this._utc_to_local(m)))===e?o={}:"boolean"==typeof o?o={enabled:o}:"string"==typeof o&&(o={classes:o}),!1===o.enabled&&$.push("disabled"),o.classes&&($=$.concat(o.classes.split(/\s+/))),o.tooltip&&(i=o.tooltip),o.content&&(S=o.content)),$=t.isFunction(t.uniqueSort)?t.uniqueSort($):t.unique($),C.push('<td class="'+$.join(" ")+'"'+(i?' title="'+i+'"':"")+' data-date="'+m.getTime().toString()+'">'+S+"</td>"),i=null,w===this.o.weekEnd&&C.push("</tr>"),m.setUTCDate(m.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").html(C.join(""));var T=v[this.o.language].monthsTitle||v.en.monthsTitle||"Months",D=this.picker.find(".datepicker-months").find(".datepicker-switch").text(this.o.maxViewMode<2?T:a).end().find("tbody span").removeClass("active");if(t.each(this.dates,function(t,e){e.getUTCFullYear()===a&&D.eq(e.getUTCMonth()).addClass("active")}),(a<l||a>u)&&D.addClass("disabled"),a===l&&D.slice(0,c).addClass("disabled"),a===u&&D.slice(d+1).addClass("disabled"),this.o.beforeShowMonth!==t.noop){var E=this;t.each(D,function(n,i){var o=new Date(a,n,1),r=E.o.beforeShowMonth(o);r===e?r={}:"boolean"==typeof r?r={enabled:r}:"string"==typeof r&&(r={classes:r}),!1!==r.enabled||t(i).hasClass("disabled")||t(i).addClass("disabled"),r.classes&&t(i).addClass(r.classes),r.tooltip&&t(i).prop("title",r.tooltip)})}this._fill_yearsView(".datepicker-years","year",10,a,l,u,this.o.beforeShowYear),this._fill_yearsView(".datepicker-decades","decade",100,a,l,u,this.o.beforeShowDecade),this._fill_yearsView(".datepicker-centuries","century",1e3,a,l,u,this.o.beforeShowCentury)}},updateNavArrows:function(){if(this._allow_update){var t,e,n=new Date(this.viewDate),i=n.getUTCFullYear(),o=n.getUTCMonth(),r=this.o.startDate!==-Infinity?this.o.startDate.getUTCFullYear():-Infinity,a=this.o.startDate!==-Infinity?this.o.startDate.getUTCMonth():-Infinity,s=this.o.endDate!==Infinity?this.o.endDate.getUTCFullYear():Infinity,l=this.o.endDate!==Infinity?this.o.endDate.getUTCMonth():Infinity,c=1;switch(this.viewMode){case 4:c*=10;case 3:c*=10;case 2:c*=10;case 1:t=Math.floor(i/c)*c<r,e=Math.floor(i/c)*c+c>s;break;case 0:t=i<=r&&o<a,e=i>=s&&o>l}this.picker.find(".prev").toggleClass("disabled",t),this.picker.find(".next").toggleClass("disabled",e)}},click:function(e){var o,r,a,s;e.preventDefault(),e.stopPropagation(),(o=t(e.target)).hasClass("datepicker-switch")&&this.viewMode!==this.o.maxViewMode&&this.setViewMode(this.viewMode+1),o.hasClass("today")&&!o.hasClass("day")&&(this.setViewMode(0),this._setDate(i(),"linked"===this.o.todayBtn?null:"view")),o.hasClass("clear")&&this.clearDates(),o.hasClass("disabled")||(o.hasClass("month")||o.hasClass("year")||o.hasClass("decade")||o.hasClass("century"))&&(this.viewDate.setUTCDate(1),r=1,1===this.viewMode?(s=o.parent().find("span").index(o),a=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(s)):(s=0,a=Number(o.text()),this.viewDate.setUTCFullYear(a)),this._trigger(y.viewModes[this.viewMode-1].e,this.viewDate),this.viewMode===this.o.minViewMode?this._setDate(n(a,s,r)):(this.setViewMode(this.viewMode-1),this.fill())),this.picker.is(":visible")&&this._focused_from&&this._focused_from.focus(),delete this._focused_from},dayCellClick:function(e){var n=t(e.currentTarget).data("date"),i=new Date(n);this.o.updateViewDate&&(i.getUTCFullYear()!==this.viewDate.getUTCFullYear()&&this._trigger("changeYear",this.viewDate),i.getUTCMonth()!==this.viewDate.getUTCMonth()&&this._trigger("changeMonth",this.viewDate)),this._setDate(i)},navArrowsClick:function(e){var n=t(e.currentTarget).hasClass("prev")?-1:1;0!==this.viewMode&&(n*=12*y.viewModes[this.viewMode].navStep),this.viewDate=this.moveMonth(this.viewDate,n),this._trigger(y.viewModes[this.viewMode].e,this.viewDate),this.fill()},_toggle_multidate:function(t){var e=this.dates.contains(t);if(t||this.dates.clear(),-1!==e?(!0===this.o.multidate||this.o.multidate>1||this.o.toggleActive)&&this.dates.remove(e):!1===this.o.multidate?(this.dates.clear(),this.dates.push(t)):this.dates.push(t),"number"==typeof this.o.multidate)for(;this.dates.length>this.o.multidate;)this.dates.remove(0)},_setDate:function(t,e){e&&"date"!==e||this._toggle_multidate(t&&new Date(t)),(!e&&this.o.updateViewDate||"view"===e)&&(this.viewDate=t&&new Date(t)),this.fill(),this.setValue(),e&&"view"===e||this._trigger("changeDate"),this.inputField.trigger("change"),!this.o.autoclose||e&&"date"!==e||this.hide()},moveDay:function(t,e){var n=new Date(t);return n.setUTCDate(t.getUTCDate()+e),n},moveWeek:function(t,e){return this.moveDay(t,7*e)},moveMonth:function(t,e){if(!a(t))return this.o.defaultViewDate;if(!e)return t;var n,i,o=new Date(t.valueOf()),r=o.getUTCDate(),s=o.getUTCMonth(),l=Math.abs(e);if(e=e>0?1:-1,1===l)i=-1===e?function(){return o.getUTCMonth()===s}:function(){return o.getUTCMonth()!==n},n=s+e,o.setUTCMonth(n),n=(n+12)%12;else{for(var c=0;c<l;c++)o=this.moveMonth(o,e);n=o.getUTCMonth(),o.setUTCDate(r),i=function(){return n!==o.getUTCMonth()}}for(;i();)o.setUTCDate(--r),o.setUTCMonth(n);return o},moveYear:function(t,e){return this.moveMonth(t,12*e)},moveAvailableDate:function(t,e,n){do{if(t=this[n](t,e),!this.dateWithinRange(t))return!1;n="moveDay"}while(this.dateIsDisabled(t));return t},weekOfDateIsDisabled:function(e){return-1!==t.inArray(e.getUTCDay(),this.o.daysOfWeekDisabled)},dateIsDisabled:function(e){return this.weekOfDateIsDisabled(e)||t.grep(this.o.datesDisabled,function(t){return o(e,t)}).length>0},dateWithinRange:function(t){return t>=this.o.startDate&&t<=this.o.endDate},keydown:function(t){if(this.picker.is(":visible")){var e,n,i=!1,o=this.focusDate||this.viewDate;switch(t.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide(),t.preventDefault(),t.stopPropagation();break;case 37:case 38:case 39:case 40:if(!this.o.keyboardNavigation||7===this.o.daysOfWeekDisabled.length)break;e=37===t.keyCode||38===t.keyCode?-1:1,0===this.viewMode?t.ctrlKey?(n=this.moveAvailableDate(o,e,"moveYear"))&&this._trigger("changeYear",this.viewDate):t.shiftKey?(n=this.moveAvailableDate(o,e,"moveMonth"))&&this._trigger("changeMonth",this.viewDate):37===t.keyCode||39===t.keyCode?n=this.moveAvailableDate(o,e,"moveDay"):this.weekOfDateIsDisabled(o)||(n=this.moveAvailableDate(o,e,"moveWeek")):1===this.viewMode?(38!==t.keyCode&&40!==t.keyCode||(e*=4),n=this.moveAvailableDate(o,e,"moveMonth")):2===this.viewMode&&(38!==t.keyCode&&40!==t.keyCode||(e*=4),n=this.moveAvailableDate(o,e,"moveYear")),n&&(this.focusDate=this.viewDate=n,this.setValue(),this.fill(),t.preventDefault());break;case 13:if(!this.o.forceParse)break;o=this.focusDate||this.dates.get(-1)||this.viewDate,this.o.keyboardNavigation&&(this._toggle_multidate(o),i=!0),this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.setValue(),this.fill(),this.picker.is(":visible")&&(t.preventDefault(),t.stopPropagation(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}i&&(this.dates.length?this._trigger("changeDate"):this._trigger("clearDate"),this.inputField.trigger("change"))}else 40!==t.keyCode&&27!==t.keyCode||(this.show(),t.stopPropagation())},setViewMode:function(t){this.viewMode=t,this.picker.children("div").hide().filter(".datepicker-"+y.viewModes[this.viewMode].clsName).show(),this.updateNavArrows(),this._trigger("changeViewMode",new Date(this.viewDate))}};var p=function(e,n){t.data(e,"datepicker",this),this.element=t(e),this.inputs=t.map(n.inputs,function(t){return t.jquery?t[0]:t}),delete n.inputs,this.keepEmptyValues=n.keepEmptyValues,delete n.keepEmptyValues,f.call(t(this.inputs),n).on("changeDate",t.proxy(this.dateUpdated,this)),this.pickers=t.map(this.inputs,function(e){return t.data(e,"datepicker")}),this.updateDates()};p.prototype={updateDates:function(){this.dates=t.map(this.pickers,function(t){return t.getUTCDate()}),this.updateRanges()},updateRanges:function(){var e=t.map(this.dates,function(t){return t.valueOf()});t.each(this.pickers,function(t,n){n.setRange(e)})},clearDates:function(){t.each(this.pickers,function(t,e){e.clearDates()})},dateUpdated:function(n){if(!this.updating){this.updating=!0;var i=t.data(n.target,"datepicker");if(i!==e){var o=i.getUTCDate(),r=this.keepEmptyValues,a=t.inArray(n.target,this.inputs),s=a-1,l=a+1,c=this.inputs.length;if(-1!==a){if(t.each(this.pickers,function(t,e){e.getUTCDate()||e!==i&&r||e.setUTCDate(o)}),o<this.dates[s])for(;s>=0&&o<this.dates[s];)this.pickers[s--].setUTCDate(o);else if(o>this.dates[l])for(;l<c&&o>this.dates[l];)this.pickers[l++].setUTCDate(o);this.updateDates(),delete this.updating}}}},destroy:function(){t.map(this.pickers,function(t){t.destroy()}),t(this.inputs).off("changeDate",this.dateUpdated),delete this.element.data().datepicker},remove:r("destroy","Method `remove` is deprecated and will be removed in version 2.0. Use `destroy` instead")};var h=t.fn.datepicker,f=function(n){var i,o=Array.apply(null,arguments);if(o.shift(),this.each(function(){var e=t(this),r=e.data("datepicker"),a="object"==typeof n&&n;if(!r){var c=s(this,"date"),u=l(t.extend({},m,c,a).language),h=t.extend({},m,u,c,a);e.hasClass("input-daterange")||h.inputs?(t.extend(h,{inputs:h.inputs||e.find("input").toArray()}),r=new p(this,h)):r=new d(this,h),e.data("datepicker",r)}"string"==typeof n&&"function"==typeof r[n]&&(i=r[n].apply(r,o))}),i===e||i instanceof d||i instanceof p)return this;if(this.length>1)throw new Error("Using only allowed for the collection of a single element ("+n+" function)");return i};t.fn.datepicker=f;var m=t.fn.datepicker.defaults={assumeNearbyYear:!1,autoclose:!1,beforeShowDay:t.noop,beforeShowMonth:t.noop,beforeShowYear:t.noop,beforeShowDecade:t.noop,beforeShowCentury:t.noop,calendarWeeks:!1,clearBtn:!1,toggleActive:!1,daysOfWeekDisabled:[],daysOfWeekHighlighted:[],datesDisabled:[],endDate:Infinity,forceParse:!0,format:"mm/dd/yyyy",keepEmptyValues:!1,keyboardNavigation:!0,language:"en",minViewMode:0,maxViewMode:4,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-Infinity,startView:0,todayBtn:!1,todayHighlight:!1,updateViewDate:!0,weekStart:0,disableTouchKeyboard:!1,enableOnReadonly:!0,showOnFocus:!0,zIndexOffset:10,container:"body",immediateUpdates:!1,title:"",templates:{leftArrow:"&#x00AB;",rightArrow:"&#x00BB;"},showWeekDays:!0},g=t.fn.datepicker.locale_opts=["format","rtl","weekStart"];t.fn.datepicker.Constructor=d;var v=t.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",titleFormat:"MM yyyy"}},y={viewModes:[{names:["days","month"],clsName:"days",e:"changeMonth"},{names:["months","year"],clsName:"months",e:"changeYear",navStep:1},{names:["years","decade"],clsName:"years",e:"changeDecade",navStep:10},{names:["decades","century"],clsName:"decades",e:"changeCentury",navStep:100},{names:["centuries","millennium"],clsName:"centuries",e:"changeMillennium",navStep:1e3}],validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\u5e74\u6708\u65e5\[-`{-~\t\n\r]+/g,parseFormat:function(t){if("function"==typeof t.toValue&&"function"==typeof t.toDisplay)return t;var e=t.replace(this.validParts,"\0").split("\0"),n=t.match(this.validParts);if(!e||!e.length||!n||0===n.length)throw new Error("Invalid date format.");return{separators:e,parts:n}},parseDate:function(n,o,r,a){function s(t,e){return!0===e&&(e=10),t<100&&(t+=2e3)>(new Date).getFullYear()+e&&(t-=100),t}function l(){var t=this.slice(0,c[h].length),e=c[h].slice(0,t.length);return t.toLowerCase()===e.toLowerCase()}if(!n)return e;if(n instanceof Date)return n;if("string"==typeof o&&(o=y.parseFormat(o)),o.toValue)return o.toValue(n,o,r);var c,u,p,h,f,m={d:"moveDay",m:"moveMonth",w:"moveWeek",y:"moveYear"},g={yesterday:"-1d",today:"+0d",tomorrow:"+1d"};if(n in g&&(n=g[n]),/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/i.test(n)){for(c=n.match(/([\-+]\d+)([dmwy])/gi),n=new Date,h=0;h<c.length;h++)u=c[h].match(/([\-+]\d+)([dmwy])/i),p=Number(u[1]),f=m[u[2].toLowerCase()],n=d.prototype[f](n,p);return d.prototype._zero_utc_time(n)}c=n&&n.match(this.nonpunctuation)||[];var b,w,$={},C=["yyyy","yy","M","MM","m","mm","d","dd"],_={yyyy:function(t,e){return t.setUTCFullYear(a?s(e,a):e)},m:function(t,e){if(isNaN(t))return t;for(e-=1;e<0;)e+=12;for(e%=12,t.setUTCMonth(e);t.getUTCMonth()!==e;)t.setUTCDate(t.getUTCDate()-1);return t},d:function(t,e){return t.setUTCDate(e)}};_.yy=_.yyyy,_.M=_.MM=_.mm=_.m,_.dd=_.d,n=i();var x=o.parts.slice();if(c.length!==x.length&&(x=t(x).filter(function(e,n){return-1!==t.inArray(n,C)}).toArray()),c.length===x.length){var k,A,S;for(h=0,k=x.length;h<k;h++){if(b=parseInt(c[h],10),u=x[h],isNaN(b))switch(u){case"MM":w=t(v[r].months).filter(l),b=t.inArray(w[0],v[r].months)+1;break;case"M":w=t(v[r].monthsShort).filter(l),b=t.inArray(w[0],v[r].monthsShort)+1}$[u]=b}for(h=0;h<C.length;h++)(S=C[h])in $&&!isNaN($[S])&&(A=new Date(n),_[S](A,$[S]),isNaN(A)||(n=A))}return n},formatDate:function(e,n,i){if(!e)return"";if("string"==typeof n&&(n=y.parseFormat(n)),n.toDisplay)return n.toDisplay(e,n,i);var o={d:e.getUTCDate(),D:v[i].daysShort[e.getUTCDay()],DD:v[i].days[e.getUTCDay()],m:e.getUTCMonth()+1,M:v[i].monthsShort[e.getUTCMonth()],MM:v[i].months[e.getUTCMonth()],yy:e.getUTCFullYear().toString().substring(2),yyyy:e.getUTCFullYear()};o.dd=(o.d<10?"0":"")+o.d,o.mm=(o.m<10?"0":"")+o.m,e=[];for(var r=t.extend([],n.separators),a=0,s=n.parts.length;a<=s;a++)r.length&&e.push(r.shift()),e.push(o[n.parts[a]]);return e.join("")},headTemplate:'<thead><tr><th colspan="7" class="datepicker-title"></th></tr><tr><th class="prev">'+m.templates.leftArrow+'</th><th colspan="5" class="datepicker-switch"></th><th class="next">'+m.templates.rightArrow+"</th></tr></thead>",contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'}
;y.template='<div class="datepicker"><div class="datepicker-days"><table class="table-condensed">'+y.headTemplate+"<tbody></tbody>"+y.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+y.headTemplate+y.contTemplate+y.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+y.headTemplate+y.contTemplate+y.footTemplate+'</table></div><div class="datepicker-decades"><table class="table-condensed">'+y.headTemplate+y.contTemplate+y.footTemplate+'</table></div><div class="datepicker-centuries"><table class="table-condensed">'+y.headTemplate+y.contTemplate+y.footTemplate+"</table></div></div>",t.fn.datepicker.DPGlobal=y,t.fn.datepicker.noConflict=function(){return t.fn.datepicker=h,this},t.fn.datepicker.version="1.8.0",t.fn.datepicker.deprecated=function(t){var e=window.console;e&&e.warn&&e.warn("DEPRECATED: "+t)},t(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(e){var n=t(this);n.data("datepicker")||(e.preventDefault(),f.call(n,"show"))}),t(function(){f.call(t('[data-provide="datepicker-inline"]'))})}),jQuery.fn.datepicker.dates["zh-CN"]={days:["\u661f\u671f\u65e5","\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d"],daysShort:["\u5468\u65e5","\u5468\u4e00","\u5468\u4e8c","\u5468\u4e09","\u5468\u56db","\u5468\u4e94","\u5468\u516d"],daysMin:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"],months:["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"],monthsShort:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],today:"\u4eca\u65e5",clear:"\u6e05\u9664",format:"yyyy\u5e74mm\u6708dd\u65e5",titleFormat:"yyyy\u5e74mm\u6708",weekStart:1},function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){"use strict";function e(t){if(t instanceof Date)return t;if(String(t).match(a))return String(t).match(/^[0-9]*$/)&&(t=Number(t)),String(t).match(/\-/)&&(t=String(t).replace(/\-/g,"/")),new Date(t);throw new Error("Couldn't cast `"+t+"` to a date object.")}function n(t){var e=t.toString().replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");return new RegExp(e)}function i(t){return function(e){var i=e.match(/%(-|!)?[A-Z]{1}(:[^;]+;)?/gi);if(i)for(var r=0,a=i.length;r<a;++r){var s=i[r].match(/%(-|!)?([a-zA-Z]{1})(:[^;]+;)?/),c=n(s[0]),u=s[1]||"",d=s[3]||"",p=null;s=s[2],l.hasOwnProperty(s)&&(p=l[s],p=Number(t[p])),null!==p&&("!"===u&&(p=o(d,p)),""===u&&p<10&&(p="0"+p.toString()),e=e.replace(c,p.toString()))}return e.replace(/%%/,"%")}}function o(t,e){var n="s",i="";return t&&(1===(t=t.replace(/(:|;|\s)/gi,"").split(/\,/)).length?n=t[0]:(i=t[0],n=t[1])),Math.abs(e)>1?n:i}var r=[],a=[],s={precision:100,elapse:!1,defer:!1};a.push(/^[0-9]*$/.source),a.push(/([0-9]{1,2}\/){2}[0-9]{4}( [0-9]{1,2}(:[0-9]{2}){2})?/.source),a.push(/[0-9]{4}([\/\-][0-9]{1,2}){2}( [0-9]{1,2}(:[0-9]{2}){2})?/.source),a=new RegExp(a.join("|"));var l={Y:"years",m:"months",n:"daysToMonth",d:"daysToWeek",w:"weeks",W:"weeksToMonth",H:"hours",M:"minutes",S:"seconds",D:"totalDays",I:"totalHours",N:"totalMinutes",T:"totalSeconds"},c=function(e,n,i){this.el=e,this.$el=t(e),this.interval=null,this.offset={},this.options=t.extend({},s),this.instanceNumber=r.length,r.push(this),this.$el.data("countdown-instance",this.instanceNumber),i&&("function"==typeof i?(this.$el.on("update.countdown",i),this.$el.on("stoped.countdown",i),this.$el.on("finish.countdown",i)):this.options=t.extend({},s,i)),this.setFinalDate(n),!1===this.options.defer&&this.start()};t.extend(c.prototype,{start:function(){null!==this.interval&&clearInterval(this.interval);var t=this;this.update(),this.interval=setInterval(function(){t.update.call(t)},this.options.precision)},stop:function(){clearInterval(this.interval),this.interval=null,this.dispatchEvent("stoped")},toggle:function(){this.interval?this.stop():this.start()},pause:function(){this.stop()},resume:function(){this.start()},remove:function(){this.stop.call(this),r[this.instanceNumber]=null,delete this.$el.data().countdownInstance},setFinalDate:function(t){this.finalDate=e(t)},update:function(){if(0!==this.$el.closest("html").length){var e,n=void 0!==t._data(this.el,"events"),i=new Date;e=this.finalDate.getTime()-i.getTime(),e=Math.ceil(e/1e3),e=!this.options.elapse&&e<0?0:Math.abs(e),this.totalSecsLeft!==e&&n&&(this.totalSecsLeft=e,this.elapsed=i>=this.finalDate,this.offset={seconds:this.totalSecsLeft%60,minutes:Math.floor(this.totalSecsLeft/60)%60,hours:Math.floor(this.totalSecsLeft/60/60)%24,days:Math.floor(this.totalSecsLeft/60/60/24)%7,daysToWeek:Math.floor(this.totalSecsLeft/60/60/24)%7,daysToMonth:Math.floor(this.totalSecsLeft/60/60/24%30.4368),weeks:Math.floor(this.totalSecsLeft/60/60/24/7),weeksToMonth:Math.floor(this.totalSecsLeft/60/60/24/7)%4,months:Math.floor(this.totalSecsLeft/60/60/24/30.4368),years:Math.abs(this.finalDate.getFullYear()-i.getFullYear()),totalDays:Math.floor(this.totalSecsLeft/60/60/24),totalHours:Math.floor(this.totalSecsLeft/60/60),totalMinutes:Math.floor(this.totalSecsLeft/60),totalSeconds:this.totalSecsLeft},this.options.elapse||0!==this.totalSecsLeft?this.dispatchEvent("update"):(this.stop(),this.dispatchEvent("finish")))}else this.remove()},dispatchEvent:function(e){var n=t.Event(e+".countdown");n.finalDate=this.finalDate,n.elapsed=this.elapsed,n.offset=t.extend({},this.offset),n.strftime=i(this.offset),this.$el.trigger(n)}}),t.fn.countdown=function(){var e=Array.prototype.slice.call(arguments,0);return this.each(function(){var n=t(this).data("countdown-instance");if(void 0!==n){var i=r[n],o=e[0];c.prototype.hasOwnProperty(o)?i[o].apply(i,e.slice(1)):null===String(o).match(/^[$A-Z_][0-9A-Z_$]*$/i)?(i.setFinalDate.call(i,o),i.start()):t.error("Method %s does not exist on jQuery.countdown".replace(/\%s/gi,o))}else new c(this,e[0],e[1])})}}),this.AraleQRCode=function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return t[i].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){"use strict";t.exports=n(2)},function(t,e,n){"use strict";var i=n(4),o=[],r=n(3),a=function(t){var e=t.options;return e.pdground&&(t.row>1&&t.row<5&&t.col>1&&t.col<5||t.row>t.count-6&&t.row<t.count-2&&t.col>1&&t.col<5||t.row>1&&t.row<5&&t.col>t.count-6&&t.col<t.count-2)?e.pdground:e.foreground},s=function(t){var e=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/e},l=function(t){"string"==typeof t&&(t={text:t}),this.options=i({},{text:"",render:"",size:256,correctLevel:3,background:"#ffffff",foreground:"#000000",image:"",imageSize:30},t);for(var e=null,n=0,a=o.length;a>n;n++)if(o[n].text==this.options.text&&o[n].text.correctLevel==this.options.correctLevel){e=o[n].obj;break}if(n==a&&(e=new r(this.options.text,this.options.correctLevel),o.push({text:this.options.text,correctLevel:this.options.correctLevel,obj:e})),this.options.render)switch(this.options.render){case"canvas":return this.createCanvas(e);case"table":return this.createTable(e);case"svg":return this.createSVG(e);default:return this.createDefault(e)}return this.createDefault(e)};i(l.prototype,{createDefault:function(t){if(document.createElement("canvas").getContext)return this.createCanvas(t);var e="http://www.w3.org/2000/svg";return document.createElementNS&&document.createElementNS(e,"svg").createSVGRect?this.createSVG(t):this.createTable(t)},createCanvas:function(t){var e=this.options,n=document.createElement("canvas"),i=n.getContext("2d"),o=t.getModuleCount(),r=s(i),l=e.size,c=l*r,u=e.imageSize*r,d=function(t,e){var n=new Image;n.src=t,n.onload=function(){e(this),n.onload=null}},p=(c/o).toPrecision(4),h=(c/o).toPrecision(4);n.width=c,n.height=c;for(var f=0;o>f;f++)for(var m=0;o>m;m++){var g=Math.ceil((m+1)*p)-Math.floor(m*p),v=Math.ceil((f+1)*p)-Math.floor(f*p),y=a({row:f,col:m,count:o,options:e});i.fillStyle=t.modules[f][m]?y:e.background,i.fillRect(Math.round(m*p),Math.round(f*h),g,v)}return e.image&&d(e.image,function(t){var e=((c-u)/2).toFixed(2),n=((c-u)/2).toFixed(2);i.drawImage(t,e,n,u,u)}),n.style.width=l+"px",n.style.height=l+"px",n},createTable:function(t){var e=this.options,n=t.getModuleCount(),i=Math.floor(e.size/n),o=Math.floor(e.size/n);0>=i&&(i=80>n?2:1),0>=o&&(o=80>n?2:1);var r=[];r.push('<table style="border:0px; margin:0px; padding:0px; border-collapse:collapse; background-color:'+e.background+';">');for(var s=0;n>s;s++){r.push('<tr style="border:0px; margin:0px; padding:0px; height:'+o+'px">');for(var l=0;n>l;l++){var c=a({row:s,col:l,count:n,options:e});t.modules[s][l]?r.push('<td style="border:0px; margin:0px; padding:0px; width:'+i+"px; background-color:"+c+'"></td>'):r.push('<td style="border:0px; margin:0px; padding:0px; width:'+i+"px; background-color:"+e.background+'"></td>')}r.push("</tr>")}if(r.push("</table>"),e.image){var u=i*n,d=o*n,p=((u-e.imageSize)/2).toFixed(2),h=((d-e.imageSize)/2).toFixed(2);r.unshift("<div style='position:relative;\n                        width:"+u+"px;\n                        height:"+d+"px;'>"),r.push("<img src='"+e.image+"'\n                        width='"+e.imageSize+"'\n                        height='"+e.imageSize+"'\n                        style='position:absolute;left:"+p+"px; top:"+h+"px;'>"),r.push("</div>")}var f=document.createElement("span");return f.innerHTML=r.join(""),f.firstChild},createSVG:function(t){var e=this.options,n=t.getModuleCount(),i=n/e.size,o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.setAttribute("width",e.size),o.setAttribute("height",e.size),o.setAttribute("viewBox","0 0 "+n+" "+n);for(var r=0;n>r;r++)for(var s=0;n>s;s++){var l=document.createElementNS("http://www.w3.org/2000/svg","rect"),c=a({row:r,col:s,count:n,options:e});l.setAttribute("x",s),l.setAttribute("y",r),l.setAttribute("width",1),l.setAttribute("height",1),l.setAttribute("stroke-width",0),t.modules[r][s]?l.setAttribute("fill",c):l.setAttribute("fill",e.background),o.appendChild(l)}if(e.image){var u=document.createElementNS("http://www.w3.org/2000/svg","image");u.setAttributeNS("http://www.w3.org/1999/xlink","href",e.image),u.setAttribute("x",((n-e.imageSize*i)/2).toFixed(2)),u.setAttribute("y",((n-e.imageSize*i)/2).toFixed(2)),u.setAttribute("width",e.imageSize*i),u.setAttribute("height",e.imageSize*i),o.appendChild(u)}return o}}),t.exports=l},function(t){"use strict";function e(t){return 128>t?[t]:2048>t?[192+(t>>6),128+(63&t)]:[224+(t>>12),128+(t>>6&63),128+(63&t)]}function n(t){for(var n=[],i=0;i<t.length;i++)for(var o=e(t.charCodeAt(i)),r=0;r<o.length;r++)n.push(o[r]);return n}function i(t,e){this.typeNumber=-1,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.rsBlocks=null,this.totalDataCount=-1,this.data=t,this.utf8bytes=n(t),this.make()}function o(t,e){if(null==t.length)throw new Error(t.length+"/"+e);for(var n=0;n<t.length&&0==t[n];)n++;this.num=new Array(t.length-n+e);for(var i=0;i<t.length-n;i++)this.num[i]=t[i+n]}function r(){this.buffer=new Array,this.length=0}i.prototype={constructor:i,getModuleCount:function(){return this.moduleCount},make:function(){this.getRightType(),this.dataCache=this.createData(),this.createQrcode()},makeImpl:function(t){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var e=0;e<this.moduleCount;e++)this.modules[e]=new Array(this.moduleCount);this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(!0,t),this.typeNumber>=7&&this.setupTypeNumber(!0),this.mapData(this.dataCache,t)},setupPositionProbePattern:function(t,e){for(var n=-1;7>=n;n++)if(!(-1>=t+n||this.moduleCount<=t+n))for(var i=-1;7>=i;i++)-1>=e+i||this.moduleCount<=e+i||(this.modules[t+n][e+i]=n>=0&&6>=n&&(0==i||6==i)||i>=0&&6>=i&&(0==n||6==n)||n>=2&&4>=n&&i>=2&&4>=i)},createQrcode:function(){for(var t=0,e=0,n=null,i=0;8>i;i++){this.makeImpl(i);var o=l.getLostPoint(this);(0==i||t>o)&&(t=o,e=i,n=this.modules)}this.modules=n,this.setupTypeInfo(!1,e),this.typeNumber>=7&&this.setupTypeNumber(!1)},setupTimingPattern:function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=t%2==0,null==this.modules[6][t]&&(this.modules[6][t]=t%2==0))},setupPositionAdjustPattern:function(){for(var t=l.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var n=0;n<t.length;n++){var i=t[e],o=t[n];if(null==this.modules[i][o])for(var r=-2;2>=r;r++)for(var a=-2;2>=a;a++)this.modules[i+r][o+a]=-2==r||2==r||-2==a||2==a||0==r&&0==a}},setupTypeNumber:function(t){for(var e=l.getBCHTypeNumber(this.typeNumber),n=0;18>n;n++){var i=!t&&1==(e>>n&1);this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=i,this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=i}},setupTypeInfo:function(t,e){for(var n=a[this.errorCorrectLevel]<<3|e,i=l.getBCHTypeInfo(n),o=0;15>o;o++){var r=!t&&1==(i>>o&1);6>o?this.modules[o][8]=r:8>o?this.modules[o+1][8]=r:this.modules[this.moduleCount-15+o][8]=r;r=!t&&1==(i>>o&1);8>o?this.modules[8][this.moduleCount-o-1]=r:9>o?this.modules[8][15-o-1+1]=r:this.modules[8][15-o-1]=r}this.modules[this.moduleCount-8][8]=!t},createData:function(){var t=new r,e=this.typeNumber>9?16:8;t.put(4,4),t.put(this.utf8bytes.length,e);for(var n=0,o=this.utf8bytes.length;o>n;n++)t.put(this.utf8bytes[n],8);for(t.length+4<=8*this.totalDataCount&&t.put(0,4);t.length%8!=0;)t.putBit(!1);for(;!(t.length>=8*this.totalDataCount)&&(t.put(i.PAD0,8),!(t.length>=8*this.totalDataCount));)t.put(i.PAD1,8);return this.createBytes(t)},createBytes:function(t){for(var e=0,n=0,i=0,r=this.rsBlock.length/3,a=new Array,s=0;r>s;s++)for(var c=this.rsBlock[3*s+0],u=this.rsBlock[3*s+1],d=this.rsBlock[3*s+2],p=0;c>p;p++)a.push([d,u]);for(var h=new Array(a.length),f=new Array(a.length),m=0;m<a.length;m++){var g=a[m][0],v=a[m][1]-g;n=Math.max(n,g),i=Math.max(i,v),h[m]=new Array(g);for(s=0;s<h[m].length;s++)h[m][s]=255&t.buffer[s+e];e+=g;var y=l.getErrorCorrectPolynomial(v),b=new o(h[m],y.getLength()-1).mod(y);f[m]=new Array(y.getLength()-1);for(s=0;s<f[m].length;s++){var w=s+b.getLength()-f[m].length;f[m][s]=w>=0?b.get(w):0}}var $=new Array(this.totalDataCount),C=0;for(s=0;n>s;s++)for(m=0;m<a.length;m++)s<h[m].length&&($[C++]=h[m][s]);for(s=0;i>s;s++)for(m=0;m<a.length;m++)s<f[m].length&&($[C++]=f[m][s]);return $},mapData:function(t,e){for(var n=-1,i=this.moduleCount-1,o=7,r=0,a=this.moduleCount-1;a>0;a-=2)for(6==a&&a--;;){for(var s=0;2>s;s++)if(null==this.modules[i][a-s]){var c=!1;r<t.length&&(c=1==(t[r]>>>o&1)),l.getMask(e,i,a-s)&&(c=!c),this.modules[i][a-s]=c,-1==--o&&(r++,o=7)}if(0>(i+=n)||this.moduleCount<=i){i-=n,n=-n;break}}}},i.PAD0=236,i.PAD1=17;for(var a=[1,0,3,2],s={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},l={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){for(var e=t<<10;l.getBCHDigit(e)-l.getBCHDigit(l.G15)>=0;)e^=l.G15<<l.getBCHDigit(e)-l.getBCHDigit(l.G15);return(t<<10|e)^l.G15_MASK},getBCHTypeNumber:function(t){for(var e=t<<12;l.getBCHDigit(e)-l.getBCHDigit(l.G18)>=0;)e^=l.G18<<l.getBCHDigit(e)-l.getBCHDigit(l.G18);return t<<12|e},getBCHDigit:function(t){for(var e=0;0!=t;)e++,t>>>=1;return e},getPatternPosition:function(t){return l.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,n){switch(t){case s.PATTERN000:return(e+n)%2==0;case s.PATTERN001:return e%2==0;case s.PATTERN010:return n%3==0;case s.PATTERN011:return(e+n)%3==0;case s.PATTERN100:return(Math.floor(e/2)+Math.floor(n/3))%2==0;case s.PATTERN101:return e*n%2+e*n%3==0;case s.PATTERN110:return(e*n%2+e*n%3)%2==0;case s.PATTERN111:return(e*n%3+(e+n)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new o([1],0),n=0;t>n;n++)e=e.multiply(new o([1,c.gexp(n)],0));return e},getLostPoint:function(t){for(var e=t.getModuleCount(),n=0,i=0,o=0;e>o;o++)for(var r=0,a=t.modules[o][0],s=0;e>s;s++){var l=t.modules[o][s];if(e-6>s&&l&&!t.modules[o][s+1]&&t.modules[o][s+2]&&t.modules[o][s+3]&&t.modules[o][s+4]&&!t.modules[o][s+5]&&t.modules[o][s+6]&&(e-10>s?t.modules[o][s+7]&&t.modules[o][s+8]&&t.modules[o][s+9]&&t.modules[o][s+10]&&(n+=40):s>3&&t.modules[o][s-1]&&t.modules[o][s-2]&&t.modules[o][s-3]&&t.modules[o][s-4]&&(n+=40)),e-1>o&&e-1>s){var c=0;l&&c++,t.modules[o+1][s]&&c++,t.modules[o][s+1]&&c++,t.modules[o+1][s+1]&&c++,(0==c||4==c)&&(n+=3)}a^l?r++:(a=l,r>=5&&(n+=3+r-5),r=1),l&&i++}for(s=0;e>s;s++)for(r=0,a=t.modules[0][s],o=0;e>o;o++){l=t.modules[o][s];e-6>o&&l&&!t.modules[o+1][s]&&t.modules[o+2][s]&&t.modules[o+3][s]&&t.modules[o+4][s]&&!t.modules[o+5][s]&&t.modules[o+6][s]&&(e-10>o?t.modules[o+7][s]&&t.modules[o+8][s]&&t.modules[o+9][s]&&t.modules[o+10][s]&&(n+=40):o>3&&t.modules[o-1][s]&&t.modules[o-2][s]&&t.modules[o-3][s]&&t.modules[o-4][s]&&(n+=40)),a^l?r++:(a=l,r>=5&&(n+=3+r-5),r=1)}return n+10*(Math.abs(100*i/e/e-50)/5)}},c={glog:function(t){if(1>t)throw new Error("glog("+t+")");return c.LOG_TABLE[t]},gexp:function(t){for(;0>t;)t+=255;for(;t>=256;)t-=255;return c.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},u=0;8>u;u++)c.EXP_TABLE[u]=1<<u;for(u=8;256>u;u++)c.EXP_TABLE[u]=c.EXP_TABLE[u-4]^c.EXP_TABLE[u-5]^c.EXP_TABLE[u-6]^c.EXP_TABLE[u-8];for(u=0;255>u;u++)c.LOG_TABLE[c.EXP_TABLE[u]]=u;o.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1),n=0;n<this.getLength();n++)for(var i=0;i<t.getLength();i++)e[n+i]^=c.gexp(c.glog(this.get(n))+c.glog(t.get(i)));return new o(e,0)},mod:function(t){var e=this.getLength(),n=t.getLength();if(0>e-n)return this;for(var i=new Array(e),r=0;e>r;r++)i[r]=this.get(r);for(;i.length>=n;){var a=c.glog(i[0])-c.glog(t.get(0));for(r=0;r<t.getLength();r++)i[r]^=c.gexp(c.glog(t.get(r))+a);for(;0==i[0];)i.shift()}return new o(i,0)}};var d=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];i.prototype.getRightType=function(){for(var t=1;41>t;t++){var e=d[4*(t-1)+this.errorCorrectLevel];if(null==e)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+this.errorCorrectLevel);for(var n=e.length/3,i=0,o=0;n>o;o++){var r=e[3*o+0];i+=e[3*o+2]*r}var a=t>9?2:1;if(this.utf8bytes.length+a<i||40==t){this.typeNumber=t,this.rsBlock=e,this.totalDataCount=i;break}}},r.prototype={get:function(t){var e=Math.floor(t/8);return this.buffer[e]>>>7-t%8&1},put:function(t,e){for(var n=0;e>n;n++)this.putBit(t>>>e-n-1&1)},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}},t.exports=i},function(t){t.exports=function(t){for(var e,n=Array.prototype.slice.call(arguments,1),i=0;e=n[i];i++)if(e)for(var o in e)t[o]=e[o];return t}}]),
/*
Trix 1.1.0
Copyright  2019 Basecamp, LLC
http://trix-editor.org/
 */
function(){}.call(this),function(){null==window.Set&&(window.Set=function(){function t(){this.clear()}return t.prototype.clear=function(){return this.values=[]},t.prototype.has=function(t){return-1!==this.values.indexOf(t)},t.prototype.add=function(t){return this.has(t)||this.values.push(t),this},t.prototype["delete"]=function(t){var e;return-1!==(e=this.values.indexOf(t))&&(this.values.splice(e,1),!0)},t.prototype.forEach=function(){var t;return(t=this.values).forEach.apply(t,arguments)},t}())}.call(this),function(t){function e(){}function n(t,e){return function(){t.apply(e,arguments)}}function i(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],c(t,this)}function o(t,e){for(;3===t._state;)t=t._value;return 0===t._state?void t._deferreds.push(e):(t._handled=!0,void d(function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var i;try{i=n(t._value)}catch(o){return void a(e.promise,o)}r(e.promise,i)}else(1===t._state?r:a)(e.promise,t._value)}))}function r(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var o=e.then;if(e instanceof i)return t._state=3,t._value=e,void s(t);if("function"==typeof o)return void c(n(o,e),t)}t._state=1,t._value=e,s(t)}catch(r){a(t,r)}}function a(t,e){t._state=2,t._value=e,s(t)}function s(t){2===t._state&&0===t._deferreds.length&&setTimeout(function(){t._handled||p(t._value)},1);for(var e=0,n=t._deferreds.length;n>e;e++)o(t,t._deferreds[e]);t._deferreds=null}function l(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function c(t,e){var n=!1;try{t(function(t){n||(n=!0,r(e,t))},function(t){n||(n=!0,a(e,t))})}catch(i){if(n)return;n=!0,a(e,i)}}var u=setTimeout,d="function"==typeof setImmediate&&setImmediate||function(t){u(t,1)},p=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};i.prototype["catch"]=function(t){return this.then(null,t)},i.prototype.then=function(t,n){var r=new i(e);return o(this,new l(t,n,r)),r},i.all=function(t){var e=Array.prototype.slice.call(t);return new i(function(t,n){function i(r,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(t){i(r,t)},n)}e[r]=a,0==--o&&t(e)}catch(l){n(l)}}if(0===e.length)return t([]);for(var o=e.length,r=0;r<e.length;r++)i(r,e[r])})},i.resolve=function(t){return t&&"object"==typeof t&&t.constructor===i?t:new i(function(e){e(t)})},i.reject=function(t){return new i(function(e,n){n(t)})},i.race=function(t){return new i(function(e,n){for(var i=0,o=t.length;o>i;i++)t[i].then(e,n)})},i._setImmediateFn=function(t){d=t},i._setUnhandledRejectionFn=function(t){p=t},"undefined"!=typeof module&&module.exports?module.exports=i:t.Promise||(t.Promise=i)}(this),function(){var t="object"==typeof window.customElements,e="function"==typeof document.registerElement;t||e||(
/**
 * @license
 * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
 */
"undefined"==typeof WeakMap&&function(){var t=Object.defineProperty,e=Date.now()%1e9,n=function(){this.name="__st"+(1e9*Math.random()>>>0)+e+++"__"};n.prototype={set:function(e,n){var i=e[this.name];return i&&i[0]===e?i[1]=n:t(e,this.name,{value:[e,n],writable:!0}),this},get:function(t){var e;return(e=t[this.name])&&e[0]===t?e[1]:void 0},"delete":function(t){var e=t[this.name];return!(!e||e[0]!==t)&&(e[0]=e[1]=void 0,!0)},has:function(t){var e=t[this.name];return!!e&&e[0]===t}},window.WeakMap=n}(),function(t){function e(t){C.push(t),$||($=!0,m(i))}function n(t){return window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(t)||t}function i(){$=!1;var t=C;C=[],t.sort(function(t,e){return t.uid_-e.uid_});var e=!1;t.forEach(function(t){var n=t.takeRecords();o(t),n.length&&(t.callback_(n,t),e=!0)}),e&&i()}function o(t){t.nodes_.forEach(function(e){var n=g.get(e);n&&n.forEach(function(e){e.observer===t&&e.removeTransientObservers()})})}function r(t,e){for(var n=t;n;n=n.parentNode){var i=g.get(n);if(i)for(var o=0;o<i.length;o++){var r=i[o],a=r.options;if(n===t||a.subtree){var s=e(a);s&&r.enqueue(s)}}}}function a(t){this.callback_=t,this.nodes_=[],this.records_=[],this.uid_=++_}function s(t,e){this.type=t,this.target=e,this.addedNodes=[],this.removedNodes=[],this.previousSibling=null,this.nextSibling=null,this.attributeName=null,this.attributeNamespace=null,this.oldValue=null}function l(t){var e=new s(t.type,t.target);return e.addedNodes=t.addedNodes.slice(),e.removedNodes=t.removedNodes.slice(),e.previousSibling=t.previousSibling,e.nextSibling=t.nextSibling,e.attributeName=t.attributeName,e.attributeNamespace=t.attributeNamespace,e.oldValue=t.oldValue,e}function c(t,e){return b=new s(t,e)}function u(t){return w||((w=l(b)).oldValue=t,w)}function d(){b=w=void 0}function p(t){return t===w||t===b}function h(t,e){return t===e?t:w&&p(t)?w:null}function f(t,e,n){this.observer=t,this.target=e,this.options=n,this.transientObservedNodes=[]}if(!t.JsMutationObserver){var m,g=new WeakMap;if(/Trident|Edge/.test(navigator.userAgent))m=setTimeout;else if(window.setImmediate)m=window.setImmediate;else{var v=[],y=String(Math.random());window.addEventListener("message",function(t){if(t.data===y){var e=v;v=[],e.forEach(function(t){t()})}}),m=function(t){v.push(t),window.postMessage(y,"*")}}var b,w,$=!1,C=[],_=0;a.prototype={observe:function(t,e){if(t=n(t),!e.childList&&!e.attributes&&!e.characterData||e.attributeOldValue&&!e.attributes||e.attributeFilter&&e.attributeFilter.length&&!e.attributes||e.characterDataOldValue&&!e.characterData)throw new SyntaxError;var i=g.get(t);i||g.set(t,i=[]);for(var o,r=0;r<i.length;r++)if(i[r].observer===this){(o=i[r]).removeListeners(),o.options=e;break}o||(o=new f(this,t,e),i.push(o),this.nodes_.push(t)),o.addListeners()},disconnect:function(){this.nodes_.forEach(function(t){for(var e=g.get(t),n=0;n<e.length;n++){var i=e[n];if(i.observer===this){i.removeListeners(),e.splice(n,1);break}}},this),this.records_=[]},takeRecords:function(){var t=this.records_;return this.records_=[],t}},f.prototype={enqueue:function(t){var n=this.observer.records_,i=n.length;if(n.length>0){var o=h(n[i-1],t);if(o)return void(n[i-1]=o)}else e(this.observer);n[i]=t},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(t){var e=this.options;e.attributes&&t.addEventListener("DOMAttrModified",this,!0),e.characterData&&t.addEventListener("DOMCharacterDataModified",this,!0),e.childList&&t.addEventListener("DOMNodeInserted",this,!0),(e.childList||e.subtree)&&t.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(t){var e=this.options;e.attributes&&t.removeEventListener("DOMAttrModified",this,!0),e.characterData&&t.removeEventListener("DOMCharacterDataModified",this,!0),e.childList&&t.removeEventListener("DOMNodeInserted",this,!0),(e.childList||e.subtree)&&t.removeEventListener("DOMNodeRemoved",this,!0)},addTransientObserver:function(t){if(t!==this.target){this.addListeners_(t),this.transientObservedNodes.push(t);var e=g.get(t);e||g.set(t,e=[]),e.push(this)}},removeTransientObservers:function(){var t=this.transientObservedNodes;this.transientObservedNodes=[],t.forEach(function(t){this.removeListeners_(t);for(var e=g.get(t),n=0;n<e.length;n++)if(e[n]===this){e.splice(n,1);break}},this)},handleEvent:function(t){switch(t.stopImmediatePropagation(),t.type){case"DOMAttrModified":var e=t.attrName,n=t.relatedNode.namespaceURI,i=t.target;(a=new c("attributes",i)).attributeName=e,a.attributeNamespace=n;var o=t.attrChange===MutationEvent.ADDITION?null:t.prevValue;r(i,function(t){return!t.attributes||t.attributeFilter&&t.attributeFilter.length&&-1===t.attributeFilter.indexOf(e)&&-1===t.attributeFilter.indexOf(n)?void 0:t.attributeOldValue?u(o):a});break;case"DOMCharacterDataModified":var a=c("characterData",i=t.target);o=t.prevValue;r(i,function(t){return t.characterData?t.characterDataOldValue?u(o):a:void 0});break;case"DOMNodeRemoved":this.addTransientObserver(t.target);case"DOMNodeInserted":var s,l,p=t.target;"DOMNodeInserted"===t.type?(s=[p],l=[]):(s=[],l=[p]);var h=p.previousSibling,f=p.nextSibling;(a=c("childList",t.target.parentNode)).addedNodes=s,a.removedNodes=l,a.previousSibling=h,a.nextSibling=f,r(t.relatedNode,function(t){return t.childList?a:void 0})}d()}},t.JsMutationObserver=a,t.MutationObserver||(t.MutationObserver=a,a._isPolyfilled=!0)}}(self),function(){"use strict";if(!window.performance||!window.performance.now){var t=Date.now();window.performance={now:function(){return Date.now()-t}}}if(window.requestAnimationFrame||(window.requestAnimationFrame=function(){var t=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame;return t?function(e){return t(function(){e(performance.now())})}:function(t){return window.setTimeout(t,1e3/60)}}()),window.cancelAnimationFrame||(window.cancelAnimationFrame=window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(t){clearTimeout(t)}),!function(){var t=document.createEvent("Event");return t.initEvent("foo",!0,!0),t.preventDefault(),t.defaultPrevented}()){var e=Event.prototype.preventDefault;Event.prototype.preventDefault=function(){this.cancelable&&(e.call(this),Object.defineProperty(this,"defaultPrevented",{get:function(){return!0},configurable:!0}))}}var n=/Trident/.test(navigator.userAgent);if((!window.CustomEvent||n&&"function"!=typeof window.CustomEvent)&&(window.CustomEvent=function(t,e){e=e||{};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,Boolean(e.bubbles),Boolean(e.cancelable),e.detail),n},window.CustomEvent.prototype=window.Event.prototype),!window.Event||n&&"function"!=typeof window.Event){var i=window.Event;window.Event=function(t,e){e=e||{};var n=document.createEvent("Event");return n.initEvent(t,Boolean(e.bubbles),Boolean(e.cancelable)),n},window.Event.prototype=i.prototype}}(window.WebComponents),window.CustomElements=window.CustomElements||{flags:{}},function(t){var e=t.flags,n=[],i=function(t){n.push(t)},o=function(){n.forEach(function(e){e(t)})};t.addModule=i,t.initializeModules=o,t.hasNative=Boolean(document.registerElement),t.isIE=/Trident/.test(navigator.userAgent),t.useNative=!e.register&&t.hasNative&&!window.ShadowDOMPolyfill&&(!window.HTMLImports||window.HTMLImports.useNative)}(window.CustomElements),window.CustomElements.addModule(function(t){function e(t,e){n(t,function(t){return!!e(t)||void i(t,e)}),i(t,e)}function n(t,e,i){var o=t.firstElementChild;if(!o)for(o=t.firstChild;o&&o.nodeType!==Node.ELEMENT_NODE;)o=o.nextSibling;for(;o;)!0!==e(o,i)&&n(o,e,i),o=o.nextElementSibling;return null}function i(t,n){for(var i=t.shadowRoot;i;)e(i,n),i=i.olderShadowRoot}function o(t,e){r(t,e,[])}function r(t,e,n){if(t=window.wrap(t),!(n.indexOf(t)>=0)){n.push(t);for(var i,o=t.querySelectorAll("link[rel="+a+"]"),s=0,l=o.length;l>s&&(i=o[s]);s++)i["import"]&&r(i["import"],e,n);e(t)}}var a=window.HTMLImports?window.HTMLImports.IMPORT_LINK_TYPE:"none";t.forDocumentTree=o,t.forSubtree=e}),window.CustomElements.addModule(function(t){function e(t,e){return n(t,e)||i(t,e)}function n(e,n){return!!t.upgrade(e,n)||void(n&&a(e))}function i(t,e){b(t,function(t){return!!n(t,e)||void 0})}function o(t){_.push(t),C||(C=!0,setTimeout(r))}function r(){C=!1;for(var t,e=_,n=0,i=e.length;i>n&&(t=e[n]);n++)t();_=[]}function a(t){$?o(function(){s(t)}):s(t)}function s(t){t.__upgraded__&&!t.__attached&&(t.__attached=!0,t.attachedCallback&&t.attachedCallback())}function l(t){c(t),b(t,function(t){c(t)})}function c(t){$?o(function(){u(t)}):u(t)}function u(t){t.__upgraded__&&t.__attached&&(t.__attached=!1,t.detachedCallback&&t.detachedCallback())}function d(t){for(var e=t,n=window.wrap(document);e;){if(e==n)return!0;e=e.parentNode||e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.host}}function p(t){if(t.shadowRoot&&!t.shadowRoot.__watched){y.dom&&console.log("watching shadow-root for: ",t.localName);for(var e=t.shadowRoot;e;)m(e),e=e.olderShadowRoot}}function h(t,n){if(y.dom){var i=n[0];if(i&&"childList"===i.type&&i.addedNodes&&i.addedNodes){for(var o=i.addedNodes[0];o&&o!==document&&!o.host;)o=o.parentNode;var r=o&&(o.URL||o._URL||o.host&&o.host.localName)||"";r=r.split("/?").shift().split("/").pop()}console.group("mutations (%d) [%s]",n.length,r||"")}var a=d(t);n.forEach(function(t){"childList"===t.type&&(x(t.addedNodes,function(t){t.localName&&e(t,a)}),x(t.removedNodes,function(t){t.localName&&l(t)}))}),y.dom&&console.groupEnd()}function f(t){for((t=window.wrap(t))||(t=window.wrap(document));t.parentNode;)t=t.parentNode;var e=t.__observer;e&&(h(t,e.takeRecords()),r())}function m(t){if(!t.__observer){var e=new MutationObserver(h.bind(this,t));e.observe(t,{childList:!0,subtree:!0}),t.__observer=e}}function g(t){t=window.wrap(t),y.dom&&console.group("upgradeDocument: ",t.baseURI.split("/").pop()),e(t,t===window.wrap(document)),m(t),y.dom&&console.groupEnd()}function v(t){w(t,g)}var y=t.flags,b=t.forSubtree,w=t.forDocumentTree,$=window.MutationObserver._isPolyfilled&&y["throttle-attached"];t.hasPolyfillMutations=$,t.hasThrottledAttached=$;var C=!1,_=[],x=Array.prototype.forEach.call.bind(Array.prototype.forEach),k=Element.prototype.createShadowRoot;k&&(Element.prototype.createShadowRoot=function(){var t=k.call(this);return window.CustomElements.watchShadow(this),t}),t.watchShadow=p,t.upgradeDocumentTree=v,t.upgradeDocument=g,t.upgradeSubtree=i,t.upgradeAll=e,t.attached=a,t.takeRecords=f}),window.CustomElements.addModule(function(t){function e(e,i){if("template"===e.localName&&window.HTMLTemplateElement&&HTMLTemplateElement.decorate&&HTMLTemplateElement.decorate(e),!e.__upgraded__&&e.nodeType===Node.ELEMENT_NODE){var o=e.getAttribute("is"),r=t.getRegisteredDefinition(e.localName)||t.getRegisteredDefinition(o);if(r&&(o&&r.tag==e.localName||!o&&!r["extends"]))return n(e,r,i)}}function n(e,n,o){return a.upgrade&&console.group("upgrade:",e.localName),n.is&&e.setAttribute("is",n.is),i(e,n),e.__upgraded__=!0,r(e),o&&t.attached(e),t.upgradeSubtree(e,o),a.upgrade&&console.groupEnd(),e}function i(t,e){Object.__proto__?t.__proto__=e.prototype:(o(t,e.prototype,e.native),t.__proto__=e.prototype)}function o(t,e,n){for(var i={},o=e;o!==n&&o!==HTMLElement.prototype;){for(var r,a=Object.getOwnPropertyNames(o),s=0;r=a[s];s++)i[r]||(Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(o,r)),i[r]=1);o=Object.getPrototypeOf(o)}}function r(t){t.createdCallback&&t.createdCallback()}var a=t.flags;t.upgrade=e,t.upgradeWithDefinition=n,t.implementPrototype=i}),window.CustomElements.addModule(function(t){function e(e,i){var l=i||{};if(!e)throw new Error("document.registerElement: first argument `name` must not be empty");if(e.indexOf("-")<0)throw new Error("document.registerElement: first argument ('name') must contain a dash ('-'). Argument provided was '"+String(e)+"'.");if(o(e))throw new Error("Failed to execute 'registerElement' on 'Document': Registration failed for type '"+String(e)+"'. The type name is invalid.");if(c(e))throw new Error("DuplicateDefinitionError: a type with name '"+String(e)+"' is already registered");return l.prototype||(l.prototype=Object.create(HTMLElement.prototype)),l.__name=e.toLowerCase(),l["extends"]&&(l["extends"]=l["extends"].toLowerCase()),l.lifecycle=l.lifecycle||{},l.ancestry=r(l["extends"]),a(l),s(l),n(l.prototype),u(l.__name,l),l.ctor=d(l),l.ctor.prototype=l.prototype,l.prototype.constructor=l.ctor,t.ready&&g(document),l.ctor}function n(t){if(!t.setAttribute._polyfilled){var e=t.setAttribute;t.setAttribute=function(t,n){i.call(this,t,n,e)};var n=t.removeAttribute;t.removeAttribute=function(t){i.call(this,t,null,n)},t.setAttribute._polyfilled=!0}}function i(t,e,n){t=t.toLowerCase();var i=this.getAttribute(t);n.apply(this,arguments);var o=this.getAttribute(t);this.attributeChangedCallback&&o!==i&&this.attributeChangedCallback(t,i,o)}function o(t){for(var e=0;e<$.length;e++)if(t===$[e])return!0}function r(t){var e=c(t);return e?r(e["extends"]).concat([e]):[]}function a(t){for(var e,n=t["extends"],i=0;e=t.ancestry[i];i++)n=e.is&&e.tag;t.tag=n||t.__name,n&&(t.is=t.__name)}function s(t){if(!Object.__proto__){var e=HTMLElement.prototype;if(t.is){var n=document.createElement(t.tag);e=Object.getPrototypeOf(n)}for(var i,o=t.prototype,r=!1;o;)o==e&&(r=!0),(i=Object.getPrototypeOf(o))&&(o.__proto__=i),o=i;r||console.warn(t.tag+" prototype not found in prototype chain for "+t.is),t.native=e}}function l(t){return y(x(t.tag),t)}function c(t){return t?C[t.toLowerCase()]:void 0}function u(t,e){C[t]=e}function d(t){return function(){return l(t)}}function p(t,e,n){return t===_?h(e,n):k(t,e)}function h(t,e){t&&(t=t.toLowerCase()),e&&(e=e.toLowerCase());var n,i=c(e||t);if(i){if(t==i.tag&&e==i.is)return new i.ctor;if(!e&&!i.is)return new i.ctor}return e?((n=h(t)).setAttribute("is",e),n):(n=x(t),t.indexOf("-")>=0&&b(n,HTMLElement),n)}function f(t,e){var n=t[e];t[e]=function(){var t=n.apply(this,arguments);return v(t),t}}var m,g=(t.isIE,t.upgradeDocumentTree),v=t.upgradeAll,y=t.upgradeWithDefinition,b=t.implementPrototype,w=t.useNative,$=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"],C={},_="http://www.w3.org/1999/xhtml",x=document.createElement.bind(document),k=document.createElementNS.bind(document);m=Object.__proto__||w?function(t,e){return t instanceof e}:function(t,e){if(t instanceof e)return!0;for(var n=t;n;){if(n===e.prototype)return!0;n=n.__proto__}return!1},f(Node.prototype,"cloneNode"),f(document,"importNode"),document.registerElement=e,document.createElement=h,document.createElementNS=p,t.registry=C,t["instanceof"]=m,t.reservedTagList=$,t.getRegisteredDefinition=c,document.register=document.registerElement}),function(t){function e(){r(window.wrap(document)),window.CustomElements.ready=!0,(window.requestAnimationFrame||function(t){setTimeout(t,16)})(function(){setTimeout(function(){window.CustomElements.readyTime=Date.now(),window.HTMLImports&&(window.CustomElements.elapsed=window.CustomElements.readyTime-window.HTMLImports.readyTime),document.dispatchEvent(new CustomEvent("WebComponentsReady",{bubbles:!0}))})})}var n=t.useNative,i=t.initializeModules;if(t.isIE,n){var o=function(){};t.watchShadow=o,t.upgrade=o,t.upgradeAll=o,t.upgradeDocumentTree=o,t.upgradeSubtree=o,t.takeRecords=o,t["instanceof"]=function(t,e){return t instanceof e}}else i();var r=t.upgradeDocumentTree,a=t.upgradeDocument;if(window.wrap||(window.ShadowDOMPolyfill?(window.wrap=window.ShadowDOMPolyfill.wrapIfNeeded,window.unwrap=window.ShadowDOMPolyfill.unwrapIfNeeded):window.wrap=window.unwrap=function(t){return t}),window.HTMLImports&&(window.HTMLImports.__importsParsingHook=function(t){t["import"]&&a(wrap(t["import"]))}),"complete"===document.readyState||t.flags.eager)e();else if("interactive"!==document.readyState||window.attachEvent||window.HTMLImports&&!window.HTMLImports.ready){var s=window.HTMLImports&&!window.HTMLImports.ready?"HTMLImportsLoaded":"DOMContentLoaded";window.addEventListener(s,e)}else e()}(window.CustomElements))}.call(this),function(){}.call(this),function(){var t=this;(function(){(function(){this.Trix={VERSION:"1.1.0",ZERO_WIDTH_SPACE:"\ufeff",NON_BREAKING_SPACE:"\xa0",OBJECT_REPLACEMENT_CHARACTER:"\ufffc",browser:{composesExistingText:/Android.*Chrome/.test(navigator.userAgent),forcesObjectResizing:/Trident.*rv:11/.test(navigator.userAgent),supportsInputEvents:"undefined"!=typeof InputEvent&&"inputType"in InputEvent.prototype&&"data"in InputEvent.prototype},config:{}}}).call(this)}).call(t);var e=t.Trix;(function(){(function(){e.BasicObject=function(){function t(){}var e,n,i;return t.proxyMethod=function(t){var i,o,r,a,s;return r=n(t),i=r.name,a=r.toMethod,s=r.toProperty,o=r.optional,this.prototype[i]=function(){var t,n;return t=null!=a?o?"function"==typeof this[a]?this[a]():void 0:this[a]():null!=s?this[s]:void 0,o?null!=(n=null!=t?t[i]:void 0)?e.call(n,t,arguments):void 0:(n=t[i],e.call(n,t,arguments))}},n=function(t){var e,n;if(!(n=t.match(i)))throw new Error("can't parse @proxyMethod expression: "+t);return e={name:n[4]},null!=n[2]?e.toMethod=n[1]:e.toProperty=n[1],null!=n[3]&&(e.optional=!0),e},e=Function.prototype.apply,i=/^(.+?)(\(\))?(\?)?\.(.+?)$/,t}()}).call(this),function(){var t=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;e.Object=function(n){function i(){this.id=++o}var o;return t(i,n),o=0,i.fromJSONString=function(t){return this.fromJSON(JSON.parse(t))},i.prototype.hasSameConstructorAs=function(t){return this.constructor===(null!=t?t.constructor:void 0)},i.prototype.isEqualTo=function(t){return this===t},i.prototype.inspect=function(){var t,e,n;return t=function(){var t,i,o;for(e in o=[],i=null!=(t=this.contentsForInspection())?t:{})n=i[e],o.push(e+"="+n);return o}.call(this),"#<"+this.constructor.name+":"+this.id+(t.length?" "+t.join(", "):"")+">"},i.prototype.contentsForInspection=function(){},i.prototype.toJSONString=function(){return JSON.stringify(this)},i.prototype.toUTF16String=function(){return e.UTF16String.box(this)},i.prototype.getCacheKey=function(){return this.id.toString()},i}(e.BasicObject)}.call(this),function(){e.extend=function(t){var e,n;for(e in t)n=t[e],this[e]=n;return this}}.call(this),function(){e.extend({defer:function(t){return setTimeout(t,1)}})}.call(this),function(){var t,n;e.extend({normalizeSpaces:function(t){return t.replace(RegExp(""+e.ZERO_WIDTH_SPACE,"g"),"").replace(RegExp(""+e.NON_BREAKING_SPACE,"g")," ")},normalizeNewlines:function(t){return t.replace(/\r\n/g,"\n")},breakableWhitespacePattern:RegExp("[^\\S"+e.NON_BREAKING_SPACE+"]"),squishBreakableWhitespace:function(t){return t.replace(RegExp(""+e.breakableWhitespacePattern.source,"g")," ").replace(/\ {2,}/g," ")},escapeHTML:function(t){var e;return(e=document.createElement("div")).textContent=t,e.innerHTML},summarizeStringChange:function(t,i){var o,r,a,s;return t=e.UTF16String.box(t),(i=e.UTF16String.box(i)).length<t.length?(s=(r=n(t,i))[0],o=r[1]):(o=(a=n(i,t))[0],s=a[1]),{added:o,removed:s}}}),n=function(n,i){var o,r,a,s,l;return n.isEqualTo(i)?["",""]:(a=(s=(r=t(n,i)).utf16String.length)?(l=r.offset,o=n.codepoints.slice(0,l).concat(n.codepoints.slice(l+s)),t(i,e.UTF16String.fromCodepoints(o))):t(i,n),[r.utf16String.toString(),a.utf16String.toString()])},t=function(t,e){var n,i,o;for(n=0,i=t.length,o=e.length;i>n&&t.charAt(n).isEqualTo(e.charAt(n));)n++;for(;i>n+1&&t.charAt(i-1).isEqualTo(e.charAt(o-1));)i--,o--;return{utf16String:t.slice(n,i),offset:n}}}.call(this),function(){e.extend({copyObject:function(t){var e,n,i;for(e in null==t&&(t={}),n={},t)i=t[e],n[e]=i;return n},objectsAreEqual:function(t,e){var n;if(null==t&&(t={}),null==e&&(e={}),Object.keys(t).length!==Object.keys(e).length)return!1;for(n in t)if(t[n]!==e[n])return!1;return!0}})}.call(this),function(){var t=[].slice;e.extend({arraysAreEqual:function(t,e){var n,i,o;if(null==t&&(t=[]),null==e&&(e=[]),t.length!==e.length)return!1;for(i=n=0,o=t.length;o>n;i=++n)if(t[i]!==e[i])return!1;return!0},arrayStartsWith:function(t,n){return null==t&&(t=[]),null==n&&(n=[]),e.arraysAreEqual(t.slice(0,n.length),n)},spliceArray:function(){var e,n,i;return n=arguments[0],e=2<=arguments.length?t.call(arguments,1):[],(i=n.slice(0)).splice.apply(i,e),i},summarizeArrayChange:function(t,e){var n,i,o,r,a,s,l,c,u,d,p;for(null==t&&(t=[]),null==e&&(e=[]),n=[],d=[],o=new Set,r=0,l=t.length;l>r;r++)p=t[r],o.add(p);for(i=new Set,a=0,c=e.length;c>a;a++)p=e[a],i.add(p),o.has(p)||n.push(p);for(s=0,u=t.length;u>s;s++)p=t[s],i.has(p)||d.push(p);return{added:n,removed:d}}})}.call(this),function(){var t,n,i,o;t=null,n=null,o=null,i=null,e.extend({getAllAttributeNames:function(){return null!=t?t:t=e.getTextAttributeNames().concat(e.getBlockAttributeNames())},getBlockConfig:function(t){return e.config.blockAttributes[t]},getBlockAttributeNames:function(){return null!=n?n:n=Object.keys(e.config.blockAttributes)},getTextConfig:function(t){return e.config.textAttributes[t]},getTextAttributeNames:function(){return null!=o?o:o=Object.keys(e.config.textAttributes)},getListAttributeNames:function(){var t,n;return null!=i?i:i=function(){var i,o;for(t in o=[],i=e.config.blockAttributes)null!=(n=i[t].listAttribute)&&o.push(n);return o}()}})}.call(this),function(){var t,n,i,o,r,a=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};t=document.documentElement,n=null!=(i=null!=(o=null!=(r=t.matchesSelector)?r:t.webkitMatchesSelector)?o:t.msMatchesSelector)?i:t.mozMatchesSelector,e.extend({handleEvent:function(n,i){var o,r,a,s,l,c,u,d,p,h,f;return l=(u=null!=i?i:{}).onElement,s=u.matchingSelector,f=u.withCallback,a=u.inPhase,c=u.preventDefault,p=u.times,o=null!=l?l:t,d=s,f,h="capturing"===a,(r=function(t){var n;return null!=p&&0==--p&&r.destroy(),null!=(n=e.findClosestElementFromNode(t.target,{matchingSelector:d}))&&(null!=f&&f.call(n,t,n),c)?t.preventDefault():void 0}).destroy=function(){return o.removeEventListener(n,r,h)},o.addEventListener(n,r,h),r},handleEventOnce:function(t,n){return null==n&&(n={}),n.times=1,e.handleEvent(t,n)},triggerEvent:function(n,i){var o,r,a,s,l,c,u;return c=(u=null!=i?i:{}).onElement,r=u.bubbles,a=u.cancelable,o=u.attributes,s=null!=c?c:t,r=!1!==r,a=!1!==a,(l=document.createEvent("Events")).initEvent(n,r,a),null!=o&&e.extend.call(l,o),s.dispatchEvent(l)},elementMatchesSelector:function(t,e){return 1===(null!=t?t.nodeType:void 0)?n.call(t,e):void 0},findClosestElementFromNode:function(t,n){var i,o,r;for(i=(o=null!=n?n:{}).matchingSelector,r=o.untilNode;null!=t&&t.nodeType!==Node.ELEMENT_NODE;)t=t.parentNode;if(null!=t){if(null==i)return t;if(t.closest&&null==r)return t.closest(i);for(;t&&t!==r;){if(e.elementMatchesSelector(t,i))return t;t=t.parentNode}}},findInnerElement:function(t){for(;null!=t?t.firstElementChild:void 0;)t=t.firstElementChild;return t},innerElementIsActive:function(t){return document.activeElement!==t&&e.elementContainsNode(t,document.activeElement)},elementContainsNode:function(t,e){if(t&&e)for(;e;){if(e===t)return!0;e=e.parentNode}},findNodeFromContainerAndOffset:function(t,e){var n;if(t)return t.nodeType===Node.TEXT_NODE?t:0===e?null!=(n=t.firstChild)?n:t:t.childNodes.item(e-1)},findElementFromContainerAndOffset:function(t,n){var i;return i=e.findNodeFromContainerAndOffset(t,n),e.findClosestElementFromNode(i)},findChildIndexOfNode:function(t){var e;if(null!=t?t.parentNode:void 0){for(e=0;t=t.previousSibling;)e++;return e}},removeNode:function(t){var e;return null!=t&&null!=(e=t.parentNode)?e.removeChild(t):void 0},walkTree:function(t,e){var n,i,o,r,a;return i=(o=null!=e?e:{}).onlyNodesOfType,r=o.usingFilter,n=o.expandEntityReferences,a=function(){switch(i){case"element":return NodeFilter.SHOW_ELEMENT;case"text":return NodeFilter.SHOW_TEXT;case"comment":return NodeFilter.SHOW_COMMENT;default:return NodeFilter.SHOW_ALL}}(),document.createTreeWalker(t,a,null!=r?r:null,!0===n)},tagName:function(t){var e;return null!=t&&null!=(e=t.tagName)?e.toLowerCase():void 0},makeElement:function(t,e){var n,i,o,r,a,s,l,c,u,d;if(null==e&&(e={}),"object"==typeof t?t=(e=t).tagName:e={attributes:e},i=document.createElement(t),null!=e.editable&&(null==e.attributes&&(e.attributes={}),e.attributes.contenteditable=e.editable),e.attributes)for(r in s=e.attributes)d=s[r],i.setAttribute(r,d);if(e.style)for(r in l=e.style)d=l[r],i.style[r]=d;if(e.data)for(r in c=e.data)d=c[r],i.dataset[r]=d;if(e.className)for(o=0,a=(u=e.className.split(" ")).length;a>o;o++)n=u[o],i.classList.add(n);return e.textContent&&(i.textContent=e.textContent),i},getBlockTagNames:function(){var t,n;return null!=e.blockTagNames?e.blockTagNames:e.blockTagNames=function(){var i,o;for(t in o=[],i=e.config.blockAttributes)(n=i[t].tagName)&&o.push(n);return o}()},nodeIsBlockContainer:function(t){return e.nodeIsBlockStartComment(null!=t?t.firstChild:void 0)},nodeProbablyIsBlockContainer:function(t){var n,i;return n=e.tagName(t),a.call(e.getBlockTagNames(),n)>=0&&(i=e.tagName(t.firstChild),a.call(e.getBlockTagNames(),i)<0)},nodeIsBlockStart:function(t,n){return(null!=n?n:{strict:!0}).strict?e.nodeIsBlockStartComment(t):e.nodeIsBlockStartComment(t)||!e.nodeIsBlockStartComment(t.firstChild)&&e.nodeProbablyIsBlockContainer(t)},nodeIsBlockStartComment:function(t){return e.nodeIsCommentNode(t)&&"block"===(null!=t?t.data:void 0)},nodeIsCommentNode:function(t){return(null!=t?t.nodeType:void 0)===Node.COMMENT_NODE},nodeIsCursorTarget:function(t,n){var i;return i=(null!=n?n:{}).name,t?e.nodeIsTextNode(t)?t.data===e.ZERO_WIDTH_SPACE?!i||t.parentNode.dataset.trixCursorTarget===i:void 0:e.nodeIsCursorTarget(t.firstChild):void 0},nodeIsAttachmentElement:function(t){return e.elementMatchesSelector(t,e.AttachmentView.attachmentSelector)},nodeIsEmptyTextNode:function(t){return e.nodeIsTextNode(t)&&""===(null!=t?t.data:void 0)},nodeIsTextNode:function(t){return(null!=t?t.nodeType:void 0)===Node.TEXT_NODE}})}.call(this),function(){var t,n,i,o,r;t=e.copyObject,o=e.objectsAreEqual,e.extend({normalizeRange:i=function(t){var e;if(null!=t)return Array.isArray(t)||(t=[t,t]),[n(t[0]),n(null!=(e=t[1])?e:t[0])]},rangeIsCollapsed:function(t){var e,n,o;if(null!=t)return o=(n=i(t))[0],e=n[1],r(o,e)},rangesAreEqual:function(t,e){var n,o,a,s,l,c;if(null!=t&&null!=e)return o=(a=i(t))[0],n=a[1],c=(s=i(e))[0],l=s[1],r(o,c)&&r(n,l)}}),n=function(e){return"number"==typeof e?e:t(e)},r=function(t,e){return"number"==typeof t?t===e:o(t,e)}}.call(this),function(){var t,n,i,o,r;e.registerElement=function(t,e){var a,s;return null==e&&(e={}),t=t.toLowerCase(),e=r(e),(a=(s=o(e)).defaultCSS)&&(delete s.defaultCSS,n(a,t)),i(t,s)},n=function(e,n){return t(n).textContent=e.replace(/%t/g,n)},t=function(t){var e;return(e=document.createElement("style")).setAttribute("type","text/css"),e.setAttribute("data-tag-name",t.toLowerCase()),document.head.insertBefore(e,document.head.firstChild),e},o=function(t){var e,n,i;for(e in n={},t)i=t[e],n[e]="function"==typeof i?{value:i}:i;return n},r=function(){var t;return t=function(t){var e,n,i,o,r;for(e={},n=0,o=(r=["initialize","connect","disconnect"]).length;o>n;n++)e[i=r[n]]=t[i],delete t[i];return e},window.customElements?function(e){var n,i,o,r,a;return a=t(e),o=a.initialize,n=a.connect,i=a.disconnect,o&&(r=n,n=function(){return this.initialized||(this.initialized=!0,o.call(this)),null!=r?r.call(this):void 0}),n&&(e.connectedCallback=n),i&&(e.disconnectedCallback=i),e}:function(e){var n,i,o,r;return o=(r=t(e)).initialize,n=r.connect,i=r.disconnect,o&&(e.createdCallback=o),n&&(e.attachedCallback=n),i&&(e.detachedCallback=i),e}}(),i=window.customElements?function(t,e){var n;return(n=function(){return Reflect.construct(HTMLElement,[],n)}).prototype=Object.create(HTMLElement.prototype,e),window.customElements.define(t,n),n}:function(t,e){var n,i;return i=Object.create(HTMLElement.prototype,e),n=document.registerElement(t,{prototype:i}),Object.defineProperty(i,"constructor",{value:n}),n}}.call(this),function(){var t,n;e.extend({getDOMSelection:function(){var t;return(t=window.getSelection()).rangeCount>0?t:void 0},getDOMRange:function(){var n,i;return(n=null!=(i=e.getDOMSelection())?i.getRangeAt(0):void 0)&&!t(n)?n:void 0},setDOMRange:function(t){var n;return(n=window.getSelection()).removeAllRanges(),n.addRange(t),e.selectionChangeObserver.update()}}),t=function(t){return n(t.startContainer)||n(t.endContainer)},n=function(t){return!Object.getPrototypeOf(t)}}.call(this),function(){var t;t={"application/x-trix-feature-detection":"test"},e.extend({dataTransferIsPlainText:function(t){var e,n,i;return i=t.getData("text/plain"),n=t.getData("text/html"),i&&n?((e=document.createElement("div")).innerHTML=n,e.textContent===i?!e.querySelector(":not(meta)"):void 0):null!=i?i.length:void 0},dataTransferIsWritable:function(e){var n,i;if(null!=(null!=e?e.setData:void 0)){for(n in t)if(i=t[n],!function(){try{return e.setData(n,i),e.getData(n)===i}catch(t){}}())return;return!0}},keyEventIsKeyboardCommand:/Mac|^iP/.test(navigator.platform)?function(t){return t.metaKey}:function(t){return t.ctrlKey}})}.call(this),function(){}.call(this),function(){var t,n=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;t=e.arraysAreEqual,e.Hash=function(i){function o(t){null==t&&(t={}),this.values=a(t),o.__super__.constructor.apply(this,arguments)}var r,a,s,l,c;return n(o,i),o.fromCommonAttributesOfObjects=function(t){var e,n,i,o,a,s;if(null==t&&(t=[]),!t.length)return new this;for(i=(e=r(t[0])).getKeys(),n=0,o=(s=t.slice(1)).length;o>n;n++)a=s[n],i=e.getKeysCommonToHash(r(a)),e=e.slice(i);return e},o.box=function(t){return r(t)},o.prototype.add=function(t,e){return this.merge(l(t,e))},o.prototype.remove=function(t){return new e.Hash(a(this.values,t))},o.prototype.get=function(t){return this.values[t]},o.prototype.has=function(t){return t in this.values},o.prototype.merge=function(t){return new e.Hash(s(this.values,c(t)))},o.prototype.slice=function(t){var n,i,o,r;for(r={},n=0,o=t.length;o>n;n++)i=t[n],this.has(i)&&(r[i]=this.values[i]);return new e.Hash(r)},o.prototype.getKeys=function(){return Object.keys(this.values)},o.prototype.getKeysCommonToHash=function(t){var e,n,i,o,a;for(t=r(t),a=[],e=0,i=(o=this.getKeys()).length;i>e;e++)n=o[e],this.values[n]===t.values[n]&&a.push(n);return a},o.prototype.isEqualTo=function(e){return t(this.toArray(),r(e).toArray())},o.prototype.isEmpty=function(){return 0===this.getKeys().length},o.prototype.toArray=function(){var t,e,n;return(null!=this.array?this.array:this.array=function(){var i;for(t in e=[],i=this.values)n=i[t],e.push(t,n);return e}.call(this)).slice(0)},o.prototype.toObject=function(){return a(this.values)},o.prototype.toJSON=function(){return this.toObject()},o.prototype.contentsForInspection=function(){return{values:JSON.stringify(this.values)}},l=function(t,e){var n;return(n={})[t]=e,n},s=function(t,e){var n,i,o;for(n in i=a(t),e)o=e[n],i[n]=o;return i},a=function(t,e){var n,i,o,r,a;for(r={},n=0,o=(a=Object.keys(t).sort()).length;o>n;n++)(i=a[n])!==e&&(r[i]=t[i]);return r},r=function(t){return t instanceof e.Hash?t:new e.Hash(t)},c=function(t){return t instanceof e.Hash?t.values:t},o}(e.Object)}.call(this),function(){e.ObjectGroup=function(){function t(t,e){var n,i;this.objects=null!=t?t:[],i=e.depth,(n=e.asTree)&&(this.depth=i,this.objects=this.constructor.groupObjects(this.objects,{asTree:n,depth:this.depth+1}))}return t.groupObjects=function(t,e){var n,i,o,r,a,s,l,c,u;for(null==t&&(t=[]),o=(u=null!=e?e:{}).depth,(n=u.asTree)&&null==o&&(o=0),c=[],a=0,s=t.length;s>a;a++){if(l=t[a],r){if(("function"==typeof l.canBeGrouped?l.canBeGrouped(o):void 0)&&("function"==typeof(i=r[r.length-1]).canBeGroupedWith?i.canBeGroupedWith(l,o):void 0)){r.push(l);continue}c.push(new this(r,{depth:o,asTree:n})),r=null}("function"==typeof l.canBeGrouped?l.canBeGrouped(o):void 0)?r=[l]:c.push(l)}return r&&c.push(new this(r,{depth:o,asTree:n})),c},t.prototype.getObjects=function(){return this.objects},t.prototype.getDepth=function(){return this.depth},t.prototype.getCacheKey=function(){var t,e,n,i,o;for(e=["objectGroup"],t=0,n=(o=this.getObjects()).length;n>t;t++)i=o[t],e.push(i.getCacheKey());return e.join("/")},t}()}.call(this),function(){var t=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;e.ObjectMap=function(e){function n(t){var e,n,i,o,r;for(null==t&&(t=[]),this.objects={},i=0,o=t.length;o>i;i++)r=t[i],n=JSON.stringify(r),
null==(e=this.objects)[n]&&(e[n]=r)}return t(n,e),n.prototype.find=function(t){var e;return e=JSON.stringify(t),this.objects[e]},n}(e.BasicObject)}.call(this),function(){e.ElementStore=function(){function t(t){this.reset(t)}var e;return t.prototype.add=function(t){var n;return n=e(t),this.elements[n]=t},t.prototype.remove=function(t){var n,i;return n=e(t),(i=this.elements[n])?(delete this.elements[n],i):void 0},t.prototype.reset=function(t){var e,n,i;for(null==t&&(t=[]),this.elements={},n=0,i=t.length;i>n;n++)e=t[n],this.add(e);return t},e=function(t){return t.dataset.trixStoreKey},t}()}.call(this),function(){}.call(this),function(){var t=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;e.Operation=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.isPerforming=function(){return!0===this.performing},n.prototype.hasPerformed=function(){return!0===this.performed},n.prototype.hasSucceeded=function(){return this.performed&&this.succeeded},n.prototype.hasFailed=function(){return this.performed&&!this.succeeded},n.prototype.getPromise=function(){return null!=this.promise?this.promise:this.promise=new Promise((t=this,function(e,n){return t.performing=!0,t.perform(function(i,o){return t.succeeded=i,t.performing=!1,t.performed=!0,t.succeeded?e(o):n(o)})}));var t},n.prototype.perform=function(t){return t(!1)},n.prototype.release=function(){var t;return null!=(t=this.promise)&&"function"==typeof t.cancel&&t.cancel(),this.promise=null,this.performing=null,this.performed=null,this.succeeded=null},n.proxyMethod("getPromise().then"),n.proxyMethod("getPromise().catch"),n}(e.BasicObject)}.call(this),function(){var t,n,i,o,r,a=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;e.UTF16String=function(t){function e(t,e){this.ucs2String=t,this.codepoints=e,this.length=this.codepoints.length,this.ucs2Length=this.ucs2String.length}return a(e,t),e.box=function(t){return null==t&&(t=""),t instanceof this?t:this.fromUCS2String(null!=t?t.toString():void 0)},e.fromUCS2String=function(t){return new this(t,o(t))},e.fromCodepoints=function(t){return new this(r(t),t)},e.prototype.offsetToUCS2Offset=function(t){return r(this.codepoints.slice(0,Math.max(0,t))).length},e.prototype.offsetFromUCS2Offset=function(t){return o(this.ucs2String.slice(0,Math.max(0,t))).length},e.prototype.slice=function(){var t;return this.constructor.fromCodepoints((t=this.codepoints).slice.apply(t,arguments))},e.prototype.charAt=function(t){return this.slice(t,t+1)},e.prototype.isEqualTo=function(t){return this.constructor.box(t).ucs2String===this.ucs2String},e.prototype.toJSON=function(){return this.ucs2String},e.prototype.getCacheKey=function(){return this.ucs2String},e.prototype.toString=function(){return this.ucs2String},e}(e.BasicObject),t=1===("function"==typeof Array.from?Array.from("\ud83d\udc7c").length:void 0),n=null!=("function"==typeof" ".codePointAt?" ".codePointAt(0):void 0),i=" \ud83d\udc7c"===("function"==typeof String.fromCodePoint?String.fromCodePoint(32,128124):void 0),o=t&&n?function(t){return Array.from(t).map(function(t){return t.codePointAt(0)})}:function(t){var e,n,i,o,r;for(o=[],e=0,i=t.length;i>e;)(r=t.charCodeAt(e++))>=55296&&56319>=r&&i>e&&(56320==(64512&(n=t.charCodeAt(e++)))?r=((1023&r)<<10)+(1023&n)+65536:e--),o.push(r);return o},r=i?function(t){return String.fromCodePoint.apply(String,t)}:function(t){var e,n;return function(){var i,o,r;for(r=[],i=0,o=t.length;o>i;i++)n=t[i],e="",n>65535&&(n-=65536,e+=String.fromCharCode(n>>>10&1023|55296),n=56320|1023&n),r.push(e+String.fromCharCode(n));return r}().join("")}}.call(this),function(){}.call(this),function(){}.call(this),function(){e.config.lang={bold:"Bold",bullets:"Bullets",byte:"Byte",bytes:"Bytes",captionPlaceholder:"Add a caption\u2026",code:"Code",heading1:"Heading",indent:"Increase Level",italic:"Italic",link:"Link",numbers:"Numbers",outdent:"Decrease Level",quote:"Quote",redo:"Redo",remove:"Remove",strike:"Strikethrough",undo:"Undo",unlink:"Unlink",url:"URL",urlPlaceholder:"Enter a URL\u2026",GB:"GB",KB:"KB",MB:"MB",PB:"PB",TB:"TB"}}.call(this),function(){e.config.css={attachment:"attachment",attachmentCaption:"attachment__caption",attachmentCaptionEditor:"attachment__caption-editor",attachmentMetadata:"attachment__metadata",attachmentMetadataContainer:"attachment__metadata-container",attachmentName:"attachment__name",attachmentProgress:"attachment__progress",attachmentSize:"attachment__size",attachmentToolbar:"attachment__toolbar",attachmentGallery:"attachment-gallery"}}.call(this),function(){var t;e.config.blockAttributes=t={"default":{tagName:"div",parse:!1},quote:{tagName:"blockquote",nestable:!0},heading1:{tagName:"h1",terminal:!0,breakOnReturn:!0,group:!1},code:{tagName:"pre",terminal:!0,text:{plaintext:!0}},bulletList:{tagName:"ul",parse:!1},bullet:{tagName:"li",listAttribute:"bulletList",group:!1,nestable:!0,test:function(n){return e.tagName(n.parentNode)===t[this.listAttribute].tagName}},numberList:{tagName:"ol",parse:!1},number:{tagName:"li",listAttribute:"numberList",group:!1,nestable:!0,test:function(n){return e.tagName(n.parentNode)===t[this.listAttribute].tagName}},attachmentGallery:{tagName:"div",exclusive:!0,terminal:!0,parse:!1,group:!1}}}.call(this),function(){var t,n;t=e.config.lang,n=[t.bytes,t.KB,t.MB,t.GB,t.TB,t.PB],e.config.fileSize={prefix:"IEC",precision:2,formatter:function(e){var i,o;switch(e){case 0:return"0 "+t.bytes;case 1:return"1 "+t.byte;default:return i=function(){switch(this.prefix){case"SI":return 1e3;case"IEC":return 1024}}.call(this),o=Math.floor(Math.log(e)/Math.log(i)),(e/Math.pow(i,o)).toFixed(this.precision).replace(/0*$/,"").replace(/\.$/,"")+" "+n[o]}}}}.call(this),function(){e.config.textAttributes={bold:{tagName:"strong",inheritable:!0,parser:function(t){var e;return"bold"===(e=window.getComputedStyle(t)).fontWeight||e.fontWeight>=600}},italic:{tagName:"em",inheritable:!0,parser:function(t){return"italic"===window.getComputedStyle(t).fontStyle}},href:{groupTagName:"a",parser:function(t){var n,i;return i="a:not("+e.AttachmentView.attachmentSelector+")",(n=e.findClosestElementFromNode(t,{matchingSelector:i}))?n.getAttribute("href"):void 0}},strike:{tagName:"del",inheritable:!0},frozen:{style:{backgroundColor:"highlight"}}}}.call(this),function(){var t,n,i,o,r;r="[data-trix-serialize=false]",o=["contenteditable","data-trix-id","data-trix-store-key","data-trix-mutable","data-trix-placeholder","tabindex"],i="["+(n="data-trix-serialized-attributes")+"]",t=new RegExp("<!--block-->","g"),e.extend({serializers:{"application/json":function(t){var n;if(t instanceof e.Document)n=t;else{if(!(t instanceof HTMLElement))throw new Error("unserializable object");n=e.Document.fromHTML(t.innerHTML)}return n.toSerializableDocument().toJSONString()},"text/html":function(a){var s,l,c,u,d,p,h,f,m,g,v,y,b,w,$,C,_;if(a instanceof e.Document)u=e.DocumentView.render(a);else{if(!(a instanceof HTMLElement))throw new Error("unserializable object");u=a.cloneNode(!0)}for(d=0,m=(w=u.querySelectorAll(r)).length;m>d;d++)c=w[d],e.removeNode(c);for(p=0,g=o.length;g>p;p++)for(s=o[p],h=0,v=($=u.querySelectorAll("["+s+"]")).length;v>h;h++)(c=$[h]).removeAttribute(s);for(f=0,y=(C=u.querySelectorAll(i)).length;y>f;f++){c=C[f];try{for(b in l=JSON.parse(c.getAttribute(n)),c.removeAttribute(n),l)_=l[b],c.setAttribute(b,_)}catch(x){}}return u.innerHTML.replace(t,"")}},deserializers:{"application/json":function(t){return e.Document.fromJSONString(t)},"text/html":function(t){return e.Document.fromHTML(t)}},serializeToContentType:function(t,n){var i;if(i=e.serializers[n])return i(t);throw new Error("unknown content type: "+n)},deserializeFromContentType:function(t,n){var i;if(i=e.deserializers[n])return i(t);throw new Error("unknown content type: "+n)}})}.call(this),function(){var t;t=e.config.lang,e.config.toolbar={getDefaultHTML:function(){return'<div class="trix-button-row">\n  <span class="trix-button-group trix-button-group--text-tools" data-trix-button-group="text-tools">\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-bold" data-trix-attribute="bold" data-trix-key="b" title="'+t.bold+'" tabindex="-1">'+t.bold+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-italic" data-trix-attribute="italic" data-trix-key="i" title="'+t.italic+'" tabindex="-1">'+t.italic+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-strike" data-trix-attribute="strike" title="'+t.strike+'" tabindex="-1">'+t.strike+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-link" data-trix-attribute="href" data-trix-action="link" data-trix-key="k" title="'+t.link+'" tabindex="-1">'+t.link+'</button>\n  </span>\n\n  <span class="trix-button-group trix-button-group--block-tools" data-trix-button-group="block-tools">\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-heading-1" data-trix-attribute="heading1" title="'+t.heading1+'" tabindex="-1">'+t.heading1+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-quote" data-trix-attribute="quote" title="'+t.quote+'" tabindex="-1">'+t.quote+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-code" data-trix-attribute="code" title="'+t.code+'" tabindex="-1">'+t.code+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-bullet-list" data-trix-attribute="bullet" title="'+t.bullets+'" tabindex="-1">'+t.bullets+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-number-list" data-trix-attribute="number" title="'+t.numbers+'" tabindex="-1">'+t.numbers+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-decrease-nesting-level" data-trix-action="decreaseNestingLevel" title="'+t.outdent+'" tabindex="-1">'+t.outdent+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-increase-nesting-level" data-trix-action="increaseNestingLevel" title="'+t.indent+'" tabindex="-1">'+t.indent+'</button>\n  </span>\n\n  <span class="trix-button-group-spacer"></span>\n\n  <span class="trix-button-group trix-button-group--history-tools" data-trix-button-group="history-tools">\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-undo" data-trix-action="undo" data-trix-key="z" title="'+t.undo+'" tabindex="-1">'+t.undo+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-redo" data-trix-action="redo" data-trix-key="shift+z" title="'+t.redo+'" tabindex="-1">'+t.redo+'</button>\n  </span>\n</div>\n\n<div class="trix-dialogs" data-trix-dialogs>\n  <div class="trix-dialog trix-dialog--link" data-trix-dialog="href" data-trix-dialog-attribute="href">\n    <div class="trix-dialog__link-fields">\n      <input type="url" name="href" class="trix-input trix-input--dialog" placeholder="'+t.urlPlaceholder+'" aria-label="'+t.url+'" required data-trix-input>\n      <div class="trix-button-group">\n        <input type="button" class="trix-button trix-button--dialog" value="'+t.link+'" data-trix-method="setAttribute">\n        <input type="button" class="trix-button trix-button--dialog" value="'+t.unlink+'" data-trix-method="removeAttribute">\n      </div>\n    </div>\n  </div>\n</div>'}}}.call(this),function(){e.config.undoInterval=5e3}.call(this),function(){e.config.attachments={preview:{presentation:"gallery",caption:{name:!0,size:!0}},file:{caption:{size:!0}}}}.call(this),function(){e.config.keyNames={8:"backspace",9:"tab",13:"return",27:"escape",37:"left",39:"right",46:"delete",68:"d",72:"h",79:"o"}}.call(this),function(){e.config.input={level2Enabled:!0,getLevel:function(){return this.level2Enabled&&e.browser.supportsInputEvents?2:0}}}.call(this),function(){}.call(this),function(){e.registerElement("trix-toolbar",{defaultCSS:"%t {\n  display: block;\n}\n\n%t {\n  white-space: nowrap;\n}\n\n%t [data-trix-dialog] {\n  display: none;\n}\n\n%t [data-trix-dialog][data-trix-active] {\n  display: block;\n}\n\n%t [data-trix-dialog] [data-trix-validate]:invalid {\n  background-color: #ffdddd;\n}",initialize:function(){return""===this.innerHTML?this.innerHTML=e.config.toolbar.getDefaultHTML():void 0}})}.call(this),function(){var t=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty,i=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};e.ObjectView=function(n){function o(t,e){this.object=t,this.options=null!=e?e:{},this.childViews=[],this.rootView=this}return t(o,n),o.prototype.getNodes=function(){var t,e,n,i,o;for(null==this.nodes&&(this.nodes=this.createNodes()),o=[],t=0,e=(i=this.nodes).length;e>t;t++)n=i[t],o.push(n.cloneNode(!0));return o},o.prototype.invalidate=function(){var t;return this.nodes=null,null!=(t=this.parentView)?t.invalidate():void 0},o.prototype.invalidateViewForObject=function(t){var e;return null!=(e=this.findViewForObject(t))?e.invalidate():void 0},o.prototype.findOrCreateCachedChildView=function(t,e){var n;return(n=this.getCachedViewForObject(e))?this.recordChildView(n):(n=this.createChildView.apply(this,arguments),this.cacheViewForObject(n,e)),n},o.prototype.createChildView=function(t,n,i){var o;return null==i&&(i={}),n instanceof e.ObjectGroup&&(i.viewClass=t,t=e.ObjectGroupView),o=new t(n,i),this.recordChildView(o)},o.prototype.recordChildView=function(t){return t.parentView=this,t.rootView=this.rootView,i.call(this.childViews,t)<0&&this.childViews.push(t),t},o.prototype.getAllChildViews=function(){var t,e,n,i,o;for(o=[],e=0,n=(i=this.childViews).length;n>e;e++)t=i[e],o.push(t),o=o.concat(t.getAllChildViews());return o},o.prototype.findElement=function(){return this.findElementForObject(this.object)},o.prototype.findElementForObject=function(t){var e;return(e=null!=t?t.id:void 0)?this.rootView.element.querySelector("[data-trix-id='"+e+"']"):void 0},o.prototype.findViewForObject=function(t){var e,n,i,o;for(e=0,n=(i=this.getAllChildViews()).length;n>e;e++)if((o=i[e]).object===t)return o},o.prototype.getViewCache=function(){return this.rootView!==this?this.rootView.getViewCache():this.isViewCachingEnabled()?null!=this.viewCache?this.viewCache:this.viewCache={}:void 0},o.prototype.isViewCachingEnabled=function(){return!1!==this.shouldCacheViews},o.prototype.enableViewCaching=function(){return this.shouldCacheViews=!0},o.prototype.disableViewCaching=function(){return this.shouldCacheViews=!1},o.prototype.getCachedViewForObject=function(t){var e;return null!=(e=this.getViewCache())?e[t.getCacheKey()]:void 0},o.prototype.cacheViewForObject=function(t,e){var n;return null!=(n=this.getViewCache())?n[e.getCacheKey()]=t:void 0},o.prototype.garbageCollectCachedViews=function(){var t,e,n,o,r,a;if(t=this.getViewCache()){for(e in a=this.getAllChildViews().concat(this),n=function(){var t,e,n;for(n=[],t=0,e=a.length;e>t;t++)r=a[t],n.push(r.object.getCacheKey());return n}(),o=[],t)i.call(n,e)<0&&o.push(delete t[e]);return o}},o}(e.BasicObject)}.call(this),function(){var t=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;e.ObjectGroupView=function(e){function n(){n.__super__.constructor.apply(this,arguments),this.objectGroup=this.object,this.viewClass=this.options.viewClass,delete this.options.viewClass}return t(n,e),n.prototype.getChildViews=function(){var t,e,n,i;if(!this.childViews.length)for(t=0,e=(i=this.objectGroup.getObjects()).length;e>t;t++)n=i[t],this.findOrCreateCachedChildView(this.viewClass,n,this.options);return this.childViews},n.prototype.createNodes=function(){var t,e,n,i,o,r,a,s;for(t=this.createContainerElement(),e=0,i=(a=this.getChildViews()).length;i>e;e++)for(n=0,o=(s=a[e].getNodes()).length;o>n;n++)r=s[n],t.appendChild(r);return[t]},n.prototype.createContainerElement=function(t){return null==t&&(t=this.objectGroup.getDepth()),this.getChildViews()[0].createContainerElement(t)},n}(e.ObjectView)}.call(this),function(){var t=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;e.Controller=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n}(e.BasicObject)}.call(this),function(){var t,n,i,o,r,a,s=function(t,e){return function(){return t.apply(e,arguments)}},l=function(t,e){function n(){this.constructor=t}for(var i in e)c.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},c={}.hasOwnProperty,u=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};t=e.findClosestElementFromNode,i=e.nodeIsEmptyTextNode,n=e.nodeIsBlockStartComment,o=e.normalizeSpaces,r=e.summarizeStringChange,a=e.tagName,e.MutationObserver=function(e){function c(t){this.element=t,this.didMutate=s(this.didMutate,this),this.observer=new window.MutationObserver(this.didMutate),this.start()}var d,p,h,f;return l(c,e),h="["+(p="data-trix-mutable")+"]",f={attributes:!0,childList:!0,characterData:!0,characterDataOldValue:!0,subtree:!0},c.prototype.start=function(){return this.reset(),this.observer.observe(this.element,f)},c.prototype.stop=function(){return this.observer.disconnect()},c.prototype.didMutate=function(t){var e,n;return(e=this.mutations).push.apply(e,this.findSignificantMutations(t)),this.mutations.length?(null!=(n=this.delegate)&&"function"==typeof n.elementDidMutate&&n.elementDidMutate(this.getMutationSummary()),this.reset()):void 0},c.prototype.reset=function(){return this.mutations=[]},c.prototype.findSignificantMutations=function(t){var e,n,i,o;for(o=[],e=0,n=t.length;n>e;e++)i=t[e],this.mutationIsSignificant(i)&&o.push(i);return o},c.prototype.mutationIsSignificant=function(t){var e,n,i,o;if(this.nodeIsMutable(t.target))return!1;for(e=0,n=(o=this.nodesModifiedByMutation(t)).length;n>e;e++)if(i=o[e],this.nodeIsSignificant(i))return!0;return!1},c.prototype.nodeIsSignificant=function(t){return t!==this.element&&!this.nodeIsMutable(t)&&!i(t)},c.prototype.nodeIsMutable=function(e){return t(e,{matchingSelector:h})},c.prototype.nodesModifiedByMutation=function(t){var e;switch(e=[],t.type){case"attributes":t.attributeName!==p&&e.push(t.target);break;case"characterData":e.push(t.target.parentNode),e.push(t.target);break;case"childList":e.push.apply(e,t.addedNodes),e.push.apply(e,t.removedNodes)}return e},c.prototype.getMutationSummary=function(){return this.getTextMutationSummary()},c.prototype.getTextMutationSummary=function(){var t,e,n,i,o,r,a,s,l,c,d;for(n=(s=this.getTextChangesFromCharacterData()).additions,o=s.deletions,r=0,a=(l=(d=this.getTextChangesFromChildList()).additions).length;a>r;r++)e=l[r],u.call(n,e)<0&&n.push(e);return o.push.apply(o,d.deletions),c={},(t=n.join(""))&&(c.textAdded=t),(i=o.join(""))&&(c.textDeleted=i),c},c.prototype.getMutationsByType=function(t){var e,n,i,o,r;for(r=[],e=0,n=(o=this.mutations).length;n>e;e++)(i=o[e]).type===t&&r.push(i);return r},c.prototype.getTextChangesFromChildList=function(){var t,e,i,r,a,s,l,c,u,p;for(t=[],l=[],e=0,r=(s=this.getMutationsByType("childList")).length;r>e;e++)a=s[e],t.push.apply(t,a.addedNodes),l.push.apply(l,a.removedNodes);return 0===t.length&&1===l.length&&n(l[0])?(u=[],p=["\n"]):(u=d(t),p=d(l)),{additions:function(){var t,e,n;for(n=[],i=t=0,e=u.length;e>t;i=++t)(c=u[i])!==p[i]&&n.push(o(c));return n}(),deletions:function(){var t,e,n;for(n=[],i=t=0,e=p.length;e>t;i=++t)(c=p[i])!==u[i]&&n.push(o(c));return n}()}},c.prototype.getTextChangesFromCharacterData=function(){var t,e,n,i,a,s,l,c;return(e=this.getMutationsByType("characterData")).length&&(c=e[0],n=e[e.length-1],a=o(c.oldValue),i=o(n.target.data),t=(s=r(a,i)).added,l=s.removed),{additions:t?[t]:[],deletions:l?[l]:[]}},d=function(t){var e,n,i,o;for(null==t&&(t=[]),o=[],e=0,n=t.length;n>e;e++)switch(i=t[e],i.nodeType){case Node.TEXT_NODE:o.push(i.data);break;case Node.ELEMENT_NODE:"br"===a(i)?o.push("\n"):o.push.apply(o,d(i.childNodes))}return o},c}(e.BasicObject)}.call(this),function(){var t=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;e.FileVerificationOperation=function(e){function n(t){this.file=t}return t(n,e),n.prototype.perform=function(t){var e,n;return(e=new FileReader).onerror=function(){return t(!1)},e.onload=(n=this,function(){e.onerror=null;try{e.abort()}catch(i){}return t(!0,n.file)}),e.readAsArrayBuffer(this.file)},n}(e.Operation)}.call(this),function(){var t,n,i=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;t=e.handleEvent,n=e.innerElementIsActive,e.InputController=function(o){function r(n){var i;for(i in this.element=n,this.mutationObserver=new e.MutationObserver(this.element),this.mutationObserver.delegate=this,this.events)t(i,{onElement:this.element,withCallback:this.handlerFor(i)})}return i(r,o),r.prototype.events={},r.prototype.elementDidMutate=function(){},r.prototype.editorWillSyncDocumentView=function(){return this.mutationObserver.stop()},r.prototype.editorDidSyncDocumentView=function(){return this.mutationObserver.start()},r.prototype.requestRender=function(){var t;return null!=(t=this.delegate)&&"function"==typeof t.inputControllerDidRequestRender?t.inputControllerDidRequestRender():void 0},r.prototype.requestReparse=function(){var t;return null!=(t=this.delegate)&&"function"==typeof t.inputControllerDidRequestReparse&&t.inputControllerDidRequestReparse(),this.requestRender()},r.prototype.attachFiles=function(t){var n,i;return i=function(){var i,o,r;for(r=[],i=0,o=t.length;o>i;i++)n=t[i],r.push(new e.FileVerificationOperation(n));return r}(),Promise.all(i).then(function(t){return function(e){return t.handleInput(function(){var t,n;return null!=(t=this.delegate)&&t.inputControllerWillAttachFiles(),null!=(n=this.responder)&&n.insertFiles(e),this.requestRender()})}}(this))},r.prototype.handlerFor=function(t){return e=this,function(i){return i.defaultPrevented?void 0:e.handleInput(function(){return n(this.element)?void 0:(this.eventName=t,this.events[t].call(this,i))})};var e},r.prototype.handleInput=function(t){var e,n;try{return null!=(e=this.delegate)&&e.inputControllerWillHandleInput(),t.call(this)}finally{null!=(n=this.delegate)&&n.inputControllerDidHandleInput()}},r}(e.BasicObject)}.call(this),function(){var t,n,i,o,r,a,s,l,c,u,d,p,h=function(t,e){function n(){this.constructor=t}for(var i in e)f.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},f={}.hasOwnProperty,m=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};c=e.makeElement,u=e.objectsAreEqual,e.tagName,n=e.browser,s=e.keyEventIsKeyboardCommand,o=e.dataTransferIsWritable,i=e.dataTransferIsPlainText,l=e.config.keyNames,e.Level0InputController=function(n){function a(){a.__super__.constructor.apply(this,arguments),this.resetInputSummary()}var f;return h(a,n),f=0,a.prototype.setInputSummary=function(t){var e,n;for(e in null==t&&(t={}),this.inputSummary.eventName=this.eventName,t)n=t[e],this.inputSummary[e]=n;return this.inputSummary},a.prototype.resetInputSummary=function(){return this.inputSummary={}},a.prototype.reset=function(){return this.resetInputSummary(),e.selectionChangeObserver.reset()},a.prototype.elementDidMutate=function(t){var e;return this.isComposing()?null!=(e=this.delegate)&&"function"==typeof e.inputControllerDidAllowUnhandledInput?e.inputControllerDidAllowUnhandledInput():void 0:this.handleInput(function(){return this.mutationIsSignificant(t)&&(this.mutationIsExpected(t)?this.requestRender():this.requestReparse()),this.reset()})},a.prototype.mutationIsExpected=function(t){var e,n,i,o,r,a,s,l,c;return a=t.textAdded,s=t.textDeleted,!!this.inputSummary.preferDocument||(e=null!=a?a===this.inputSummary.textAdded:!this.inputSummary.textAdded,n=null!=s?this.inputSummary.didDelete:!this.inputSummary.didDelete,c="\n"===s&&!n,!!(((l=("\n"===a||" \n"===a)&&!e)&&!c||c&&!l)&&(o=this.getSelectedRange())&&(i=l?a.replace(/\n$/,"").length||-1:(null!=a?a.length:void 0)||1,null!=(r=this.responder)?r.positionIsBlockBreak(o[1]+i):void 0))||e&&n)},a.prototype.mutationIsSignificant=function(t){var e,n,i;return i=Object.keys(t).length>0,e=""===(null!=(n=this.compositionInput)?n.getEndData():void 0),i||!e},a.prototype.events={keydown:function(t){var n,i,o,r,a,c,u,d,p;if(this.isComposing()||this.resetInputSummary(),this.inputSummary.didInput=!0,r=l[t.keyCode]){for(i=this.keys,o=0,c=(d=["ctrl","alt","shift","meta"]).length;c>o;o++)u=d[o],t[u+"Key"]&&("ctrl"===u&&(u="control"),i=null!=i?i[u]:void 0);null!=(null!=i?i[r]:void 0)&&(this.setInputSummary({keyName:r}),e.selectionChangeObserver.reset(),i[r].call(this,t))}return s(t)&&(n=String.fromCharCode(t.keyCode).toLowerCase())&&((a=function(){var e,n,i,o;for(o=[],e=0,n=(i=["alt","shift"]).length;n>e;e++)u=i[e],t[u+"Key"]&&o.push(u);return o}()).push(n),null!=(p=this.delegate)?p.inputControllerDidReceiveKeyboardCommand(a):void 0)?t.preventDefault():void 0},keypress:function(t){var e,n,i;if(null==this.inputSummary.eventName&&!t.metaKey&&(!t.ctrlKey||t.altKey))return(i=p(t))?(null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),null!=(n=this.responder)&&n.insertString(i),this.setInputSummary({textAdded:i,didDelete:this.selectionIsExpanded()})):void 0},textInput:function(t){var e,n,i,o;return e=t.data,(o=this.inputSummary.textAdded)&&o!==e&&o.toUpperCase()===e?(n=this.getSelectedRange(),this.setSelectedRange([n[0],n[1]+o.length]),null!=(i=this.responder)&&i.insertString(e),this.setInputSummary({textAdded:e}),this.setSelectedRange(n)):void 0},dragenter:function(t){return t.preventDefault()},dragstart:function(t){var e;return t.target,this.serializeSelectionToDataTransfer(t.dataTransfer),this.draggedRange=this.getSelectedRange(),null!=(e=this.delegate)&&"function"==typeof e.inputControllerDidStartDrag?e.inputControllerDidStartDrag():void 0},dragover:function(t){var e,n;return!this.draggedRange&&!this.canAcceptDataTransfer(t.dataTransfer)||(t.preventDefault(),e={x:t.clientX,y:t.clientY},u(e,this.draggingPoint))?void 0:(this.draggingPoint=e,null!=(n=this.delegate)&&"function"==typeof n.inputControllerDidReceiveDragOverPoint?n.inputControllerDidReceiveDragOverPoint(this.draggingPoint):void 0)},dragend:function(){var t;return null!=(t=this.delegate)&&"function"==typeof t.inputControllerDidCancelDrag&&t.inputControllerDidCancelDrag(),this.draggedRange=null,this.draggingPoint=null},drop:function(t){var n,i,o,r,a,s,l,c,u;return t.preventDefault(),o=null!=(a=t.dataTransfer)?a.files:void 0,r={x:t.clientX,y:t.clientY},null!=(s=this.responder)&&s.setLocationRangeFromPointRange(r),(null!=o?o.length:void 0)?this.attachFiles(o):this.draggedRange?(null!=(l=this.delegate)&&l.inputControllerWillMoveText(),null!=(c=this.responder)&&c.moveTextFromRange(this.draggedRange),this.draggedRange=null,this.requestRender()):(i=t.dataTransfer.getData("application/x-trix-document"))&&(n=e.Document.fromJSONString(i),null!=(u=this.responder)&&u.insertDocument(n),this.requestRender()),this.draggedRange=null,this.draggingPoint=null},cut:function(t){var e,n;return(null!=(e=this.responder)?e.selectionIsExpanded():void 0)&&(this.serializeSelectionToDataTransfer(t.clipboardData)&&t.preventDefault(),null!=(n=this.delegate)&&n.inputControllerWillCutText(),this.deleteInDirection("backward"),t.defaultPrevented)?this.requestRender():void 0},copy:function(t){var e;return(null!=(e=this.responder)?e.selectionIsExpanded():void 0)&&this.serializeSelectionToDataTransfer(t.clipboardData)?t.preventDefault():void 0},paste:function(t){var n,o,a,s,l,c,u,p,h,g,v,y,b,w,$,C,_,x,k,A,S,T;return n=null!=(p=t.clipboardData)?p:t.testClipboardData,u={clipboard:n},null==n||d(t)?void this.getPastedHTMLUsingHiddenElement(function(t){return function(e){var n,i,o;return u.type="text/html",u.html=e,null!=(n=t.delegate)&&n.inputControllerWillPaste(u),null!=(i=t.responder)&&i.insertHTML(u.html),t.requestRender(),null!=(o=t.delegate)?o.inputControllerDidPaste(u):void 0}}(this)):((s=n.getData("URL"))?(u.type="URL",u.href=s,u.string=(c=n.getData("public.url-name"))?e.squishBreakableWhitespace(c).trim():s,null!=(h=this.delegate)&&h.inputControllerWillPaste(u),this.setInputSummary({textAdded:u.string,didDelete:this.selectionIsExpanded()}),null!=($=this.responder)&&$.insertText(e.Text.textForStringWithAttributes(u.string,{href:u.href})),this.requestRender(),null!=(C=this.delegate)&&C.inputControllerDidPaste(u)):i(n)?(u.type="text/plain",u.string=n.getData("text/plain"),null!=(_=this.delegate)&&_.inputControllerWillPaste(u),this.setInputSummary({textAdded:u.string,didDelete:this.selectionIsExpanded()}),null!=(x=this.responder)&&x.insertString(u.string),this.requestRender(),null!=(k=this.delegate)&&k.inputControllerDidPaste(u)):(l=n.getData("text/html"))?(u.type="text/html",u.html=l,null!=(A=this.delegate)&&A.inputControllerWillPaste(u),null!=(S=this.responder)&&S.insertHTML(u.html),this.requestRender(),null!=(T=this.delegate)&&T.inputControllerDidPaste(u)):m.call(n.types,"Files")>=0&&(a=null!=(g=n.items)&&null!=(v=g[0])&&"function"==typeof v.getAsFile?v.getAsFile():void 0)&&(!a.name&&(o=r(a))&&(a.name="pasted-file-"+ ++f+"."+o),u.type="File",u.file=a,null!=(y=this.delegate)&&y.inputControllerWillAttachFiles(),null!=(b=this.responder)&&b.insertFile(u.file),this.requestRender(),null!=(w=this.delegate)&&w.inputControllerDidPaste(u)),t.preventDefault())},compositionstart:function(t){return this.getCompositionInput().start(t.data)},compositionupdate:function(t){return this.getCompositionInput().update(t.data)},compositionend:function(t){return this.getCompositionInput().end(t.data)},beforeinput:function(){return this.inputSummary.didInput=!0},input:function(t){return this.inputSummary.didInput=!0,t.stopPropagation()}},a.prototype.keys={backspace:function(t){var e;return null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),this.deleteInDirection("backward",t)},"delete":function(t){var e;return null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),this.deleteInDirection("forward",t)},"return":function(){var t,e;return this.setInputSummary({preferDocument:!0}),null!=(t=this.delegate)&&t.inputControllerWillPerformTyping(),null!=(e=this.responder)?e.insertLineBreak():void 0},tab:function(t){var e,n;return(null!=(e=this.responder)?e.canIncreaseNestingLevel():void 0)?(null!=(n=this.responder)&&n.increaseNestingLevel(),this.requestRender(),t.preventDefault()):void 0},left:function(t){var e;return this.selectionIsInCursorTarget()?(t.preventDefault(),null!=(e=this.responder)?e.moveCursorInDirection("backward"):void 0):void 0},right:function(t){var e;return this.selectionIsInCursorTarget()?(t.preventDefault(),null!=(e=this.responder)?e.moveCursorInDirection("forward"):void 0):void 0},control:{d:function(t){var e;return null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),this.deleteInDirection("forward",t)},h:function(t){var e;return null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),this.deleteInDirection("backward",t)},o:function(t){var e,n;return t.preventDefault(),null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),null!=(n=this.responder)&&n.insertString("\n",{updatePosition:!1}),this.requestRender()}},shift:{"return":function(t){var e,n;return null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),null!=(n=this.responder)&&n.insertString("\n"),this.requestRender(),t.preventDefault()},tab:function(t){var e,n;return(null!=(e=this.responder)?e.canDecreaseNestingLevel():void 0)?(null!=(n=this.responder)&&n.decreaseNestingLevel(),this.requestRender(),t.preventDefault()):void 0},left:function(t){return this.selectionIsInCursorTarget()?(t.preventDefault(),this.expandSelectionInDirection("backward")):void 0},right:function(t){return this.selectionIsInCursorTarget()?(t.preventDefault(),this.expandSelectionInDirection("forward")):void 0}},alt:{backspace:function(){var t;return this.setInputSummary({
preferDocument:!1}),null!=(t=this.delegate)?t.inputControllerWillPerformTyping():void 0}},meta:{backspace:function(){var t;return this.setInputSummary({preferDocument:!1}),null!=(t=this.delegate)?t.inputControllerWillPerformTyping():void 0}}},a.prototype.getCompositionInput=function(){return this.isComposing()?this.compositionInput:this.compositionInput=new t(this)},a.prototype.isComposing=function(){return null!=this.compositionInput&&!this.compositionInput.isEnded()},a.prototype.deleteInDirection=function(t,e){var n;return!1!==(null!=(n=this.responder)?n.deleteInDirection(t):void 0)?this.setInputSummary({didDelete:!0}):e?(e.preventDefault(),this.requestRender()):void 0},a.prototype.serializeSelectionToDataTransfer=function(t){var n,i;if(o(t))return n=null!=(i=this.responder)?i.getSelectedDocument().toSerializableDocument():void 0,t.setData("application/x-trix-document",JSON.stringify(n)),t.setData("text/html",e.DocumentView.render(n).innerHTML),t.setData("text/plain",n.toString().replace(/\n$/,"")),!0},a.prototype.canAcceptDataTransfer=function(t){var e,n,i,o,r;for(r={},e=0,n=(o=null!=(i=null!=t?t.types:void 0)?i:[]).length;n>e;e++)r[o[e]]=!0;return r.Files||r["application/x-trix-document"]||r["text/html"]||r["text/plain"]},a.prototype.getPastedHTMLUsingHiddenElement=function(t){var n,i,o;return i=this.getSelectedRange(),o={position:"absolute",left:window.pageXOffset+"px",top:window.pageYOffset+"px",opacity:0},n=c({style:o,tagName:"div",editable:!0}),document.body.appendChild(n),n.focus(),requestAnimationFrame(function(o){return function(){var r;return r=n.innerHTML,e.removeNode(n),o.setSelectedRange(i),t(r)}}(this))},a.proxyMethod("responder?.getSelectedRange"),a.proxyMethod("responder?.setSelectedRange"),a.proxyMethod("responder?.expandSelectionInDirection"),a.proxyMethod("responder?.selectionIsInCursorTarget"),a.proxyMethod("responder?.selectionIsExpanded"),a}(e.InputController),r=function(t){var e,n;return null!=(e=t.type)&&null!=(n=e.match(/\/(\w+)$/))?n[1]:void 0},a=null!=("function"==typeof" ".codePointAt?" ".codePointAt(0):void 0),p=function(t){var n;return t.key&&a&&t.key.codePointAt(0)===t.keyCode?t.key:(null===t.which?n=t.keyCode:0!==t.which&&0!==t.charCode&&(n=t.charCode),null!=n&&"escape"!==l[n]?e.UTF16String.fromCodepoints([n]).toString():void 0)},d=function(t){var e,n,i,o,r,a,s,l,c;if(s=t.clipboardData){if(m.call(s.types,"text/html")>=0){for(i=0,a=(l=s.types).length;a>i;i++)if(c=l[i],e=/^CorePasteboardFlavorType/.test(c),n=/^dyn\./.test(c)&&s.getData(c),e||n)return!0;return!1}return o=m.call(s.types,"com.apple.webarchive")>=0,r=m.call(s.types,"com.apple.flat-rtfd")>=0,o||r}},t=function(t){function e(t){var e;this.inputController=t,e=this.inputController,this.responder=e.responder,this.delegate=e.delegate,this.inputSummary=e.inputSummary,this.data={}}return h(e,t),e.prototype.start=function(t){var e,n;return this.data.start=t,this.isSignificant()?("keypress"===this.inputSummary.eventName&&this.inputSummary.textAdded&&null!=(e=this.responder)&&e.deleteInDirection("left"),this.selectionIsExpanded()||(this.insertPlaceholder(),this.requestRender()),this.range=null!=(n=this.responder)?n.getSelectedRange():void 0):void 0},e.prototype.update=function(t){var e;return this.data.update=t,this.isSignificant()&&(e=this.selectPlaceholder())?(this.forgetPlaceholder(),this.range=e):void 0},e.prototype.end=function(t){var e,n,i,o;return this.data.end=t,this.isSignificant()?(this.forgetPlaceholder(),this.canApplyToDocument()?(this.setInputSummary({preferDocument:!0,didInput:!1}),null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),null!=(n=this.responder)&&n.setSelectedRange(this.range),null!=(i=this.responder)&&i.insertString(this.data.end),null!=(o=this.responder)?o.setSelectedRange(this.range[0]+this.data.end.length):void 0):null!=this.data.start||null!=this.data.update?(this.requestReparse(),this.inputController.reset()):void 0):this.inputController.reset()},e.prototype.getEndData=function(){return this.data.end},e.prototype.isEnded=function(){return null!=this.getEndData()},e.prototype.isSignificant=function(){return!n.composesExistingText||this.inputSummary.didInput},e.prototype.canApplyToDocument=function(){var t,e;return 0===(null!=(t=this.data.start)?t.length:void 0)&&(null!=(e=this.data.end)?e.length:void 0)>0&&null!=this.range},e.proxyMethod("inputController.setInputSummary"),e.proxyMethod("inputController.requestRender"),e.proxyMethod("inputController.requestReparse"),e.proxyMethod("responder?.selectionIsExpanded"),e.proxyMethod("responder?.insertPlaceholder"),e.proxyMethod("responder?.selectPlaceholder"),e.proxyMethod("responder?.forgetPlaceholder"),e}(e.BasicObject)}.call(this),function(){var t,n,i,o=function(t,e){return function(){return t.apply(e,arguments)}},r=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty,s=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};t=e.dataTransferIsPlainText,n=e.keyEventIsKeyboardCommand,i=e.objectsAreEqual,e.Level2InputController=function(a){function l(){return this.render=o(this.render,this),l.__super__.constructor.apply(this,arguments)}var c,u,d,p,h,f;return r(l,a),l.prototype.elementDidMutate=function(){var t;return this.scheduledRender?this.composing&&null!=(t=this.delegate)&&"function"==typeof t.inputControllerDidAllowUnhandledInput?t.inputControllerDidAllowUnhandledInput():void 0:this.reparse()},l.prototype.scheduleRender=function(){return null!=this.scheduledRender?this.scheduledRender:this.scheduledRender=requestAnimationFrame(this.render)},l.prototype.render=function(){var t;return cancelAnimationFrame(this.scheduledRender),this.scheduledRender=null,this.composing||null!=(t=this.delegate)&&t.render(),"function"==typeof this.afterRender&&this.afterRender(),this.afterRender=null},l.prototype.reparse=function(){var t;return null!=(t=this.delegate)?t.reparse():void 0},l.prototype.events={keydown:function(t){var e,i,o,r;if(n(t)){if(e=u(t),null!=(r=this.delegate)?r.inputControllerDidReceiveKeyboardCommand(e):void 0)return t.preventDefault()}else if(o=t.key,t.altKey&&(o+="+Alt"),t.shiftKey&&(o+="+Shift"),i=this.keys[o])return this.withEvent(t,i)},paste:function(t){var e,n,i,o;return d(t)?(t.preventDefault(),this.attachFiles(t.clipboardData.files)):p(t)?(t.preventDefault(),e={type:"text/plain",string:t.clipboardData.getData("text/plain")},null!=(n=this.delegate)&&n.inputControllerWillPaste(e),null!=(i=this.responder)&&i.insertString(e.string),this.render(),null!=(o=this.delegate)?o.inputControllerDidPaste(e):void 0):void 0},beforeinput:function(t){var e;return(e=this.inputTypes[t.inputType])?(this.withEvent(t,e),this.scheduleRender()):void 0},input:function(){return e.selectionChangeObserver.reset()},dragstart:function(t){var e,n;return(null!=(e=this.responder)?e.selectionContainsAttachments():void 0)?(t.dataTransfer.setData("application/x-trix-dragging",!0),this.dragging={range:null!=(n=this.responder)?n.getSelectedRange():void 0,point:h(t)}):void 0},dragenter:function(t){return c(t)?t.preventDefault():void 0},dragover:function(t){var e,n;return this.dragging&&(t.preventDefault(),e=h(t),!i(e,this.dragging.point))?(this.dragging.point=e,null!=(n=this.responder)?n.setLocationRangeFromPointRange(e):void 0):void 0},drop:function(t){var e,n,i,o;return this.dragging?(t.preventDefault(),null!=(n=this.delegate)&&n.inputControllerWillMoveText(),null!=(i=this.responder)&&i.moveTextFromRange(this.dragging.range),this.dragging=null,this.scheduleRender()):c(t)?(t.preventDefault(),e=h(t),null!=(o=this.responder)&&o.setLocationRangeFromPointRange(e),this.attachFiles(t.dataTransfer.files)):void 0},dragend:function(){var t;return this.dragging?(null!=(t=this.responder)&&t.setSelectedRange(this.dragging.range),this.dragging=null):void 0},compositionend:function(){return this.composing?(this.composing=!1,this.scheduleRender()):void 0}},l.prototype.keys={ArrowLeft:function(){var t,e;return(null!=(t=this.responder)?t.shouldManageMovingCursorInDirection("backward"):void 0)?(this.event.preventDefault(),null!=(e=this.responder)?e.moveCursorInDirection("backward"):void 0):void 0},ArrowRight:function(){var t,e;return(null!=(t=this.responder)?t.shouldManageMovingCursorInDirection("forward"):void 0)?(this.event.preventDefault(),null!=(e=this.responder)?e.moveCursorInDirection("forward"):void 0):void 0},Backspace:function(){var t,e,n;return(null!=(t=this.responder)?t.shouldManageDeletingInDirection("backward"):void 0)?(this.event.preventDefault(),null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),null!=(n=this.responder)&&n.deleteInDirection("backward"),this.render()):void 0},Tab:function(){var t,e;return(null!=(t=this.responder)?t.canIncreaseNestingLevel():void 0)?(this.event.preventDefault(),null!=(e=this.responder)&&e.increaseNestingLevel(),this.render()):void 0},"Tab+Shift":function(){var t,e;return(null!=(t=this.responder)?t.canDecreaseNestingLevel():void 0)?(this.event.preventDefault(),null!=(e=this.responder)&&e.decreaseNestingLevel(),this.render()):void 0}},l.prototype.inputTypes={deleteByComposition:function(){return this.deleteInDirection("backward",{recordUndoEntry:!1})},deleteByCut:function(){return this.deleteInDirection("backward")},deleteByDrag:function(){return this.event.preventDefault(),this.withTargetDOMRange(function(){var t;return this.deleteByDragRange=null!=(t=this.responder)?t.getSelectedRange():void 0})},deleteCompositionText:function(){return this.deleteInDirection("backward",{recordUndoEntry:!1})},deleteContent:function(){return this.deleteInDirection("backward")},deleteContentBackward:function(){return this.deleteInDirection("backward")},deleteContentForward:function(){return this.deleteInDirection("forward")},deleteEntireSoftLine:function(){return this.deleteInDirection("forward")},deleteHardLineBackward:function(){return this.deleteInDirection("backward")},deleteHardLineForward:function(){return this.deleteInDirection("forward")},deleteSoftLineBackward:function(){return this.deleteInDirection("backward")},deleteSoftLineForward:function(){return this.deleteInDirection("forward")},deleteWordBackward:function(){return this.deleteInDirection("backward")},deleteWordForward:function(){return this.deleteInDirection("forward")},formatBackColor:function(){return this.activateAttributeIfSupported("backgroundColor",this.event.data)},formatBold:function(){return this.toggleAttributeIfSupported("bold")},formatFontColor:function(){return this.activateAttributeIfSupported("color",this.event.data)},formatFontName:function(){return this.activateAttributeIfSupported("font",this.event.data)},formatIndent:function(){var t;return(null!=(t=this.responder)?t.canIncreaseNestingLevel():void 0)?this.withTargetDOMRange(function(){var t;return null!=(t=this.responder)?t.increaseNestingLevel():void 0}):void 0},formatItalic:function(){return this.toggleAttributeIfSupported("italic")},formatJustifyCenter:function(){return this.toggleAttributeIfSupported("justifyCenter")},formatJustifyFull:function(){return this.toggleAttributeIfSupported("justifyFull")},formatJustifyLeft:function(){return this.toggleAttributeIfSupported("justifyLeft")},formatJustifyRight:function(){return this.toggleAttributeIfSupported("justifyRight")},formatOutdent:function(){var t;return(null!=(t=this.responder)?t.canDecreaseNestingLevel():void 0)?this.withTargetDOMRange(function(){var t;return null!=(t=this.responder)?t.decreaseNestingLevel():void 0}):void 0},formatRemove:function(){return this.withTargetDOMRange(function(){var t,e,n,i;for(t in i=[],null!=(e=this.responder)?e.getCurrentAttributes():void 0)i.push(null!=(n=this.responder)?n.removeCurrentAttribute(t):void 0);return i})},formatSetBlockTextDirection:function(){return this.activateAttributeIfSupported("blockDir",this.event.data)},formatSetInlineTextDirection:function(){return this.activateAttributeIfSupported("textDir",this.event.data)},formatStrikeThrough:function(){return this.toggleAttributeIfSupported("strike")},formatSubscript:function(){return this.toggleAttributeIfSupported("sub")},formatSuperscript:function(){return this.toggleAttributeIfSupported("sup")},formatUnderline:function(){return this.toggleAttributeIfSupported("underline")},historyRedo:function(){var t;return null!=(t=this.delegate)?t.inputControllerWillPerformRedo():void 0},historyUndo:function(){var t;return null!=(t=this.delegate)?t.inputControllerWillPerformUndo():void 0},insertCompositionText:function(){return this.composing=!0,this.insertString(this.event.data)},insertFromComposition:function(){return this.composing=!1,this.insertString(this.event.data)},insertFromDrop:function(){var t,e;return(t=this.deleteByDragRange)?(this.deleteByDragRange=null,null!=(e=this.delegate)&&e.inputControllerWillMoveText(),this.withTargetDOMRange(function(){var e;return null!=(e=this.responder)?e.moveTextFromRange(t):void 0})):void 0},insertFromPaste:function(){var n,i,o,r,a,s,l,c,u,d;return n=this.event.dataTransfer,a={dataTransfer:n},(i=n.getData("URL"))?(a.type="URL",a.href=i,a.string=(r=n.getData("public.url-name"))?e.squishBreakableWhitespace(r).trim():i,null!=(s=this.delegate)&&s.inputControllerWillPaste(a),this.withTargetDOMRange(function(){var t;return null!=(t=this.responder)?t.insertText(e.Text.textForStringWithAttributes(a.string,{href:a.href})):void 0}),this.afterRender=function(t){return function(){var e;return null!=(e=t.delegate)?e.inputControllerDidPaste(a):void 0}}(this)):t(n)?(a.type="text/plain",a.string=n.getData("text/plain"),null!=(l=this.delegate)&&l.inputControllerWillPaste(a),this.withTargetDOMRange(function(){var t;return null!=(t=this.responder)?t.insertString(a.string):void 0}),this.afterRender=function(t){return function(){var e;return null!=(e=t.delegate)?e.inputControllerDidPaste(a):void 0}}(this)):(o=n.getData("text/html"))?(a.type="text/html",a.html=o,null!=(c=this.delegate)&&c.inputControllerWillPaste(a),this.withTargetDOMRange(function(){var t;return null!=(t=this.responder)?t.insertHTML(a.html):void 0}),this.afterRender=function(t){return function(){var e;return null!=(e=t.delegate)?e.inputControllerDidPaste(a):void 0}}(this)):(null!=(u=n.files)?u.length:void 0)?(a.type="File",a.file=n.files[0],null!=(d=this.delegate)&&d.inputControllerWillPaste(a),this.withTargetDOMRange(function(){var t;return null!=(t=this.responder)?t.insertFile(a.file):void 0}),this.afterRender=function(t){return function(){var e;return null!=(e=t.delegate)?e.inputControllerDidPaste(a):void 0}}(this)):void 0},insertFromYank:function(){return this.insertString(this.event.data)},insertLineBreak:function(){return this.insertString("\n")},insertLink:function(){return this.activateAttributeIfSupported("href",this.event.data)},insertOrderedList:function(){return this.toggleAttributeIfSupported("number")},insertParagraph:function(){var t;return null!=(t=this.delegate)&&t.inputControllerWillPerformTyping(),this.withTargetDOMRange(function(){var t;return null!=(t=this.responder)?t.insertLineBreak():void 0})},insertReplacementText:function(){return this.insertString(this.event.dataTransfer.getData("text/plain"),{updatePosition:!1})},insertText:function(){var t,e;return this.insertString(null!=(t=this.event.data)?t:null!=(e=this.event.dataTransfer)?e.getData("text/plain"):void 0)},insertTranspose:function(){return this.insertString(this.event.data)},insertUnorderedList:function(){return this.toggleAttributeIfSupported("bullet")}},l.prototype.insertString=function(t,e){var n;return t?(null!=(n=this.delegate)&&n.inputControllerWillPerformTyping(),this.withTargetDOMRange(function(){var n;return null!=(n=this.responder)?n.insertString(t,e):void 0})):void 0},l.prototype.toggleAttributeIfSupported=function(t){var n;return s.call(e.getAllAttributeNames(),t)>=0?(null!=(n=this.delegate)&&n.inputControllerWillPerformFormatting(),this.withTargetDOMRange(function(){var e;return null!=(e=this.responder)?e.toggleCurrentAttribute(t):void 0})):void 0},l.prototype.activateAttributeIfSupported=function(t,n){var i;return s.call(e.getAllAttributeNames(),t)>=0?(null!=(i=this.delegate)&&i.inputControllerWillPerformFormatting(),this.withTargetDOMRange(function(){var e;return null!=(e=this.responder)?e.setCurrentAttribute(t,n):void 0})):void 0},l.prototype.deleteInDirection=function(t,e){var n,i,o;return(null!=e?e:{recordUndoEntry:!0}).recordUndoEntry&&null!=(o=this.delegate)&&o.inputControllerWillPerformTyping(),i=function(e){return function(){var n;return null!=(n=e.responder)?n.deleteInDirection(t):void 0}}(this),(n=this.getTargetDOMRange({minLength:2}))?this.withTargetDOMRange(n,i):i()},l.prototype.withTargetDOMRange=function(t,n){var i;return"function"==typeof t&&(n=t,t=this.getTargetDOMRange()),t?null!=(i=this.responder)?i.withTargetDOMRange(t,n.bind(this)):void 0:(e.selectionChangeObserver.reset(),n.call(this))},l.prototype.getTargetDOMRange=function(t){var e,n,i,o;return i=(null!=t?t:{minLength:0}).minLength,(o="function"==typeof(e=this.event).getTargetRanges?e.getTargetRanges():void 0)&&o.length&&(n=f(o[0]),0===i||n.toString().length>=i)?n:void 0},f=function(t){var e;return(e=document.createRange()).setStart(t.startContainer,t.startOffset),e.setEnd(t.endContainer,t.endOffset),e},l.prototype.withEvent=function(t,e){var n;this.event=t;try{n=e.call(this)}finally{this.event=null}return n},c=function(t){var e,n;return s.call(null!=(e=null!=(n=t.dataTransfer)?n.types:void 0)?e:[],"Files")>=0},d=function(t){var e;return(e=t.clipboardData)?s.call(e.types,"Files")>=0&&1===e.types.length&&e.files.length>=1:void 0},p=function(t){var e;return(e=t.clipboardData)?s.call(e.types,"text/plain")>=0&&1===e.types.length:void 0},u=function(t){var e;return e=[],t.altKey&&e.push("alt"),t.shiftKey&&e.push("shift"),e.push(t.key),e},h=function(t){return{x:t.clientX,y:t.clientY}},l}(e.InputController)}.call(this),function(){var t,n,i,o,r,a,s,l,c,u=function(t,e){return function(){return t.apply(e,arguments)}},d=function(t,e){function n(){this.constructor=t}for(var i in e)p.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},p={}.hasOwnProperty;n=e.defer,i=e.escapeHTML,o=e.handleEvent,s=e.makeElement,c=e.tagName,l=e.config,a=l.lang,t=l.css,r=l.keyNames,e.AttachmentEditorController=function(l){function p(t,e,n,i){this.attachmentPiece=t,this.element=e,this.container=n,this.options=null!=i?i:{},this.didBlurCaption=u(this.didBlurCaption,this),this.didChangeCaption=u(this.didChangeCaption,this),this.didInputCaption=u(this.didInputCaption,this),this.didKeyDownCaption=u(this.didKeyDownCaption,this),this.didClickActionButton=u(this.didClickActionButton,this),this.didClickToolbar=u(this.didClickToolbar,this),this.attachment=this.attachmentPiece.attachment,"a"===c(this.element)&&(this.element=this.element.firstChild),this.install()}var h;return d(p,l),h=function(t){return function(){var e;return(e=t.apply(this,arguments))["do"](),null==this.undos&&(this.undos=[]),this.undos.push(e.undo)}},p.prototype.install=function(){return this.makeElementMutable(),this.addToolbar(),this.attachment.isPreviewable()?this.installCaptionEditor():void 0},p.prototype.uninstall=function(){var t,e;for(this.savePendingCaption();e=this.undos.pop();)e();return null!=(t=this.delegate)?t.didUninstallAttachmentEditor(this):void 0},p.prototype.savePendingCaption=function(){var t,e,n;return null!=this.pendingCaption?(t=this.pendingCaption,this.pendingCaption=null,t?null!=(e=this.delegate)&&"function"==typeof e.attachmentEditorDidRequestUpdatingAttributesForAttachment?e.attachmentEditorDidRequestUpdatingAttributesForAttachment({caption:t},this.attachment):void 0:null!=(n=this.delegate)&&"function"==typeof n.attachmentEditorDidRequestRemovingAttributeForAttachment?n.attachmentEditorDidRequestRemovingAttributeForAttachment("caption",this.attachment):void 0):void 0},p.prototype.makeElementMutable=h(function(){return{"do":(t=this,function(){return t.element.dataset.trixMutable=!0}),undo:function(t){return function(){return delete t.element.dataset.trixMutable}}(this)};var t}),p.prototype.addToolbar=h(function(){var n,r,l;return(n=s({tagName:"div",className:t.attachmentToolbar,data:{trixMutable:!0}})).innerHTML='<div class="trix-button-row">\n  <span class="trix-button-group trix-button-group--actions">\n    <button type="button" data-trix-action="remove" class="trix-button trix-button--remove" title="'+a.remove+'">'+a.remove+"</button>\n  </span>\n</div>",this.attachment.isPreviewable()&&(r=i(this.attachment.getFilename()),l=i(this.attachment.getFormattedFilesize()),n.innerHTML+='<div class="'+t.attachmentMetadataContainer+'">\n  <span class="'+t.attachmentMetadata+'">\n    <span class="'+t.attachmentName+'" title="'+r+'">'+r+'</span>\n    <span class="'+t.attachmentSize+'">'+l+"</span>\n  </span>\n</div>"),o("click",{onElement:n,withCallback:this.didClickToolbar}),o("click",{onElement:n,matchingSelector:"[data-trix-action]",withCallback:this.didClickActionButton}),{"do":function(t){return function(){return t.element.appendChild(n)}}(this),undo:function(){return e.removeNode(n)}}}),p.prototype.installCaptionEditor=h(function(){var i,r,l,c,u;return(c=s({tagName:"textarea",className:t.attachmentCaptionEditor,attributes:{placeholder:a.captionPlaceholder},data:{trixMutable:!0}})).value=this.attachmentPiece.getCaption(),(u=c.cloneNode()).classList.add("trix-autoresize-clone"),u.tabIndex=-1,i=function(){return u.value=c.value,c.style.height=u.scrollHeight+"px"},o("input",{onElement:c,withCallback:i}),o("input",{onElement:c,withCallback:this.didInputCaption}),o("keydown",{onElement:c,withCallback:this.didKeyDownCaption}),o("change",{onElement:c,withCallback:this.didChangeCaption}),o("blur",{onElement:c,withCallback:this.didBlurCaption}),l=this.element.querySelector("figcaption"),r=l.cloneNode(),{"do":function(e){return function(){return l.style.display="none",r.appendChild(c),r.appendChild(u),r.classList.add(t.attachmentCaption+"--editing"),l.parentElement.insertBefore(r,l),i(),e.options.editCaption?n(function(){return c.focus()}):void 0}}(this),undo:function(){return e.removeNode(r),l.style.display=null}}}),p.prototype.didClickToolbar=function(t){return t.preventDefault(),t.stopPropagation()},p.prototype.didClickActionButton=function(t){var e;switch(t.target.getAttribute("data-trix-action")){case"remove":return null!=(e=this.delegate)?e.attachmentEditorDidRequestRemovalOfAttachment(this.attachment):void 0}},p.prototype.didKeyDownCaption=function(t){var e;return"return"===r[t.keyCode]?(t.preventDefault(),this.savePendingCaption(),null!=(e=this.delegate)&&"function"==typeof e.attachmentEditorDidRequestDeselectingAttachment?e.attachmentEditorDidRequestDeselectingAttachment(this.attachment):void 0):void 0},p.prototype.didInputCaption=function(t){return this.pendingCaption=t.target.value.replace(/\s/g," ").trim()},p.prototype.didChangeCaption=function(){return this.savePendingCaption()},p.prototype.didBlurCaption=function(){return this.savePendingCaption()},p}(e.BasicObject)}.call(this),function(){var t,n,i,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;i=e.makeElement,t=e.config.css,e.AttachmentView=function(r){function a(){a.__super__.constructor.apply(this,arguments),this.attachment=this.object,this.attachment.uploadProgressDelegate=this,this.attachmentPiece=this.options.piece}var s;return o(a,r),a.attachmentSelector="[data-trix-attachment]",a.prototype.createContentNodes=function(){return[]},a.prototype.createNodes=function(){var e,n,o,r,a,l,c;if(e=r=i({tagName:"figure",className:this.getClassName(),data:this.getData(),editable:!1}),(n=this.getHref())&&(r=i({tagName:"a",editable:!1,attributes:{href:n,tabindex:-1}}),e.appendChild(r)),this.attachment.hasContent())r.innerHTML=this.attachment.getContent();else for(o=0,a=(c=this.createContentNodes()).length;a>o;o++)l=c[o],r.appendChild(l);return r.appendChild(this.createCaptionElement()),this.attachment.isPending()&&(this.progressElement=i({tagName:"progress",attributes:{"class":t.attachmentProgress,value:this.attachment.getUploadProgress(),max:100},data:{trixMutable:!0,trixStoreKey:["progressElement",this.attachment.id].join("/")}}),e.appendChild(this.progressElement)),[s("left"),e,s("right")]},a.prototype.createCaptionElement=function(){var e,n,o,r,a,s,l;return o=i({tagName:"figcaption",className:t.attachmentCaption}),(e=this.attachmentPiece.getCaption())?(o.classList.add(t.attachmentCaption+"--edited"),o.textContent=e):((n=this.getCaptionConfig()).name&&(r=this.attachment.getFilename()),n.size&&(s=this.attachment.getFormattedFilesize()),r&&(a=i({tagName:"span",className:t.attachmentName,textContent:r}),o.appendChild(a)),s&&(r&&o.appendChild(document.createTextNode(" ")),l=i({tagName:"span",className:t.attachmentSize,textContent:s}),o.appendChild(l))),o},a.prototype.getClassName=function(){var e,n;return n=[t.attachment,t.attachment+"--"+this.attachment.getType()],(e=this.attachment.getExtension())&&n.push(t.attachment+"--"+e),n.join(" ")},a.prototype.getData=function(){var t,e;return e={trixAttachment:JSON.stringify(this.attachment),trixContentType:this.attachment.getContentType(),trixId:this.attachment.id},(t=this.attachmentPiece.attributes).isEmpty()||(e.trixAttributes=JSON.stringify(t)),this.attachment.isPending()&&(e.trixSerialize=!1),e},a.prototype.getHref=function(){return n(this.attachment.getContent(),"a")?void 0:this.attachment.getHref()},a.prototype.getCaptionConfig=function(){var t,n,i;return i=this.attachment.getType(),t=e.copyObject(null!=(n=e.config.attachments[i])?n.caption:void 0),"file"===i&&(t.name=!0),t},a.prototype.findProgressElement=function(){var t;return null!=(t=this.findElement())?t.querySelector("progress"):void 0},s=function(t){return i({tagName:"span",textContent:e.ZERO_WIDTH_SPACE,data:{trixCursorTarget:t,trixSerialize:!1}})},a.prototype.attachmentDidChangeUploadProgress=function(){var t,e;return e=this.attachment.getUploadProgress(),null!=(t=this.findProgressElement())?t.value=e:void 0},a}(e.ObjectView),n=function(t,e){var n;return(n=i("div")).innerHTML=null!=t?t:"",n.querySelector(e)}}.call(this),function(){var t,n=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;t=e.makeElement,e.PreviewableAttachmentView=function(i){function o(){o.__super__.constructor.apply(this,arguments),this.attachment.previewDelegate=this}return n(o,i),o.prototype.createContentNodes=function(){return this.image=t({tagName:"img",attributes:{src:""},data:{trixMutable:!0}}),this.refresh(this.image),[this.image]},o.prototype.createCaptionElement=function(){var t;return(t=o.__super__.createCaptionElement.apply(this,arguments)).textContent||t.setAttribute("data-trix-placeholder",e.config.lang.captionPlaceholder),t},o.prototype.refresh=function(t){var e;return null==t&&(t=null!=(e=this.findElement())?e.querySelector("img"):void 0),t?this.updateAttributesForImage(t):void 0},o.prototype.updateAttributesForImage=function(t){var e,n,i,o,r,a;return r=this.attachment.getURL(),n=this.attachment.getPreviewURL(),t.src=n||r,n===r?t.removeAttribute("data-trix-serialized-attributes"):(i=JSON.stringify({src:r}),t.setAttribute("data-trix-serialized-attributes",i)),a=this.attachment.getWidth(),e=this.attachment.getHeight(),null!=a&&(t.width=a),null!=e&&(t.height=e),o=["imageElement",this.attachment.id,t.src,t.width,t.height].join("/"),t.dataset.trixStoreKey=o},o.prototype.attachmentDidChangeAttributes=function(){return this.refresh(this.image),this.refresh()},o}(e.AttachmentView)}.call(this),function(){var t,n,i,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;i=e.makeElement,t=e.findInnerElement,n=e.getTextConfig,e.PieceView=function(r){function a(){var t;a.__super__.constructor.apply(this,arguments),this.piece=this.object,this.attributes=this.piece.getAttributes(),t=this.options,this.textConfig=t.textConfig,this.context=t.context,this.piece.attachment?this.attachment=this.piece.attachment:this.string=this.piece.toString()}var s;return o(a,r),a.prototype.createNodes=function(){var e,n,i,o,r,a;if(a=this.attachment?this.createAttachmentNodes():this.createStringNodes(),e=this.createElement()){for(i=t(e),n=0,o=a.length;o>n;n++)r=a[n],i.appendChild(r);a=[e]}return a},a.prototype.createAttachmentNodes=function(){var t;return t=this.attachment.isPreviewable()?e.PreviewableAttachmentView:e.AttachmentView,this.createChildView(t,this.piece.attachment,{piece:this.piece}).getNodes()},a.prototype.createStringNodes=function(){var t,e,n,o,r,a,s,l,c;if(null!=(s=this.textConfig)?s.plaintext:void 0)return[document.createTextNode(this.string)];for(a=[],n=e=0,o=(l=this.string.split("\n")).length;o>e;n=++e)c=l[n],n>0&&(t=i("br"),a.push(t)),c.length&&(r=document.createTextNode(this.preserveSpaces(c)),a.push(r));return a},a.prototype.createElement=function(){var t,e,o,r,a,s,l,c,u;for(r in c={},s=this.attributes)if(u=s[r],(t=n(r))&&(t.tagName&&(a=i(t.tagName),o?(o.appendChild(a),o=a):e=o=a),t.styleProperty&&(c[t.styleProperty]=u),t.style))for(r in l=t.style)u=l[r],c[r]=u;if(Object.keys(c).length)for(r in null==e&&(e=i("span")),c)u=c[r],e.style[r]=u;return e},a.prototype.createContainerElement=function(){var t,e,o,r,a;for(o in r=this.attributes)if(a=r[o],(e=n(o))&&e.groupTagName)return(t={})[o]=a,i(e.groupTagName,t)},s=e.NON_BREAKING_SPACE,a.prototype.preserveSpaces=function(t){return this.context.isLast&&(t=t.replace(/\ $/,s)),t=t.replace(/(\S)\ {3}(\S)/g,"$1 "+s+" $2").replace(/\ {2}/g,s+" ").replace(/\ {2}/g," "+s),(this.context.isFirst||this.context.followsWhitespace)&&(t=t.replace(/^\ /,s)),t},a}(e.ObjectView)}.call(this),function(){var t=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;e.TextView=function(n){function i(){i.__super__.constructor.apply(this,arguments),this.text=this.object,this.textConfig=this.options.textConfig}var o;return t(i,n),i.prototype.createNodes=function(){var t,n,i,r,a,s,l,c,u,d;for(s=[],r=(c=e.ObjectGroup.groupObjects(this.getPieces())).length-1,i=n=0,a=c.length;a>n;i=++n)l=c[i],t={},0===i&&(t.isFirst=!0),i===r&&(t.isLast=!0),o(u)&&(t.followsWhitespace=!0),d=this.findOrCreateCachedChildView(e.PieceView,l,{textConfig:this.textConfig,context:t}),s.push.apply(s,d.getNodes()),u=l;return s},i.prototype.getPieces=function(){var t,e,n,i,o;for(o=[],t=0,e=(i=this.text.getPieces()).length;e>t;t++)(n=i[t]).hasAttribute("blockBreak")||o.push(n);return o},o=function(t){return/\s$/.test(null!=t?t.toString():void 0)},i}(e.ObjectView)}.call(this),function(){var t,n,i,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;i=e.makeElement,n=e.getBlockConfig,t=e.config.css,e.BlockView=function(r){function a(){a.__super__.constructor.apply(this,arguments),this.block=this.object,this.attributes=this.block.getAttributes()}return o(a,r),a.prototype.createNodes=function(){var t,o,r,a,s,l,c,u;if(s=[document.createComment("block")],this.block.isEmpty()?s.push(i("br")):(c=null!=(l=n(this.block.getLastAttribute()))?l.text:void 0,u=this.findOrCreateCachedChildView(e.TextView,this.block.text,{textConfig:c}),s.push.apply(s,u.getNodes()),this.shouldAddExtraNewlineElement()&&s.push(i("br"))),this.attributes.length)return s;for(t=i(e.config.blockAttributes["default"].tagName),o=0,r=s.length;r>o;o++)a=s[o],t.appendChild(a);return[t]},a.prototype.createContainerElement=function(e){var o,r,a;return o=this.attributes[e],r={tagName:n(o).tagName},"attachmentGallery"===o&&(a=this.block.getBlockBreakPosition(),r.className=t.attachmentGallery+" "+t.attachmentGallery+"--"+a),i(r)},a.prototype.shouldAddExtraNewlineElement=function(){return/\n\n$/.test(this.block.toString())},a}(e.ObjectView)}.call(this),function(){var t,n,i=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;t=e.defer,n=e.makeElement,e.DocumentView=function(o){function r(){r.__super__.constructor.apply(this,arguments),this.element=this.options.element,this.elementStore=new e.ElementStore,this.setDocument(this.object)}var a,s,l;return i(r,o),r.render=function(t){var e,i;return(i=new this(t,{element:e=n("div")})).render(),i.sync(),e},
r.prototype.setDocument=function(t){return t.isEqualTo(this.document)?void 0:this.document=this.object=t},r.prototype.render=function(){var t,i,o,r,a,s,l;if(this.childViews=[],this.shadowElement=n("div"),!this.document.isEmpty()){for(s=[],t=0,i=(a=e.ObjectGroup.groupObjects(this.document.getBlocks(),{asTree:!0})).length;i>t;t++)r=a[t],l=this.findOrCreateCachedChildView(e.BlockView,r),s.push(function(){var t,e,n,i;for(i=[],t=0,e=(n=l.getNodes()).length;e>t;t++)o=n[t],i.push(this.shadowElement.appendChild(o));return i}.call(this));return s}},r.prototype.isSynced=function(){return a(this.shadowElement,this.element)},r.prototype.sync=function(){var t;for(t=this.createDocumentFragmentForSync();this.element.lastChild;)this.element.removeChild(this.element.lastChild);return this.element.appendChild(t),this.didSync()},r.prototype.didSync=function(){return this.elementStore.reset(s(this.element)),t(function(t){return function(){return t.garbageCollectCachedViews()}}(this))},r.prototype.createDocumentFragmentForSync=function(){var t,e,n,i,o,r,a,l,c,u;for(e=document.createDocumentFragment(),n=0,o=(l=this.shadowElement.childNodes).length;o>n;n++)a=l[n],e.appendChild(a.cloneNode(!0));for(i=0,r=(c=s(e)).length;r>i;i++)t=c[i],(u=this.elementStore.remove(t))&&t.parentNode.replaceChild(u,t);return e},s=function(t){return t.querySelectorAll("[data-trix-store-key]")},a=function(t,e){return l(t.innerHTML)===l(e.innerHTML)},l=function(t){return t.replace(/&nbsp;(?!<)/g," ")},r}(e.ObjectView)}.call(this),function(){var t,n,i,o,r,a=function(t,e){return function(){return t.apply(e,arguments)}},s=function(t,e){function n(){this.constructor=t}for(var i in e)l.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},l={}.hasOwnProperty;i=e.findClosestElementFromNode,o=e.handleEvent,r=e.innerElementIsActive,n=e.defer,t=e.AttachmentView.attachmentSelector,e.CompositionController=function(l){function c(n,i){this.element=n,this.composition=i,this.didClickAttachment=a(this.didClickAttachment,this),this.didBlur=a(this.didBlur,this),this.didFocus=a(this.didFocus,this),this.documentView=new e.DocumentView(this.composition.document,{element:this.element}),o("focus",{onElement:this.element,withCallback:this.didFocus}),o("blur",{onElement:this.element,withCallback:this.didBlur}),o("click",{onElement:this.element,matchingSelector:"a[contenteditable=false]",preventDefault:!0}),o("mousedown",{onElement:this.element,matchingSelector:t,withCallback:this.didClickAttachment}),o("click",{onElement:this.element,matchingSelector:"a"+t,preventDefault:!0})}return s(c,l),c.prototype.didFocus=function(){var t,e,n;return t=function(t){return function(){var e;return t.focused?void 0:(t.focused=!0,null!=(e=t.delegate)&&"function"==typeof e.compositionControllerDidFocus?e.compositionControllerDidFocus():void 0)}}(this),null!=(e=null!=(n=this.blurPromise)?n.then(t):void 0)?e:t()},c.prototype.didBlur=function(){return this.blurPromise=new Promise((t=this,function(e){return n(function(){var n;return r(t.element)||(t.focused=null,null!=(n=t.delegate)&&"function"==typeof n.compositionControllerDidBlur&&n.compositionControllerDidBlur()),t.blurPromise=null,e()})}));var t},c.prototype.didClickAttachment=function(t,e){var n,o,r;return n=this.findAttachmentForElement(e),o=null!=i(t.target,{matchingSelector:"figcaption"}),null!=(r=this.delegate)&&"function"==typeof r.compositionControllerDidSelectAttachment?r.compositionControllerDidSelectAttachment(n,{editCaption:o}):void 0},c.prototype.getSerializableElement=function(){return this.isEditingAttachment()?this.documentView.shadowElement:this.element},c.prototype.render=function(){var t,e,n;return this.revision!==this.composition.revision&&(this.documentView.setDocument(this.composition.document),this.documentView.render(),this.revision=this.composition.revision),this.canSyncDocumentView()&&!this.documentView.isSynced()&&(null!=(t=this.delegate)&&"function"==typeof t.compositionControllerWillSyncDocumentView&&t.compositionControllerWillSyncDocumentView(),this.documentView.sync(),null!=(e=this.delegate)&&"function"==typeof e.compositionControllerDidSyncDocumentView&&e.compositionControllerDidSyncDocumentView()),null!=(n=this.delegate)&&"function"==typeof n.compositionControllerDidRender?n.compositionControllerDidRender():void 0},c.prototype.rerenderViewForObject=function(t){return this.invalidateViewForObject(t),this.render()},c.prototype.invalidateViewForObject=function(t){return this.documentView.invalidateViewForObject(t)},c.prototype.isViewCachingEnabled=function(){return this.documentView.isViewCachingEnabled()},c.prototype.enableViewCaching=function(){return this.documentView.enableViewCaching()},c.prototype.disableViewCaching=function(){return this.documentView.disableViewCaching()},c.prototype.refreshViewCache=function(){return this.documentView.garbageCollectCachedViews()},c.prototype.isEditingAttachment=function(){return null!=this.attachmentEditor},c.prototype.installAttachmentEditorForAttachment=function(t,n){var i,o,r;if((null!=(r=this.attachmentEditor)?r.attachment:void 0)!==t&&(o=this.documentView.findElementForObject(t)))return this.uninstallAttachmentEditor(),i=this.composition.document.getAttachmentPieceForAttachment(t),this.attachmentEditor=new e.AttachmentEditorController(i,o,this.element,n),this.attachmentEditor.delegate=this},c.prototype.uninstallAttachmentEditor=function(){var t;return null!=(t=this.attachmentEditor)?t.uninstall():void 0},c.prototype.didUninstallAttachmentEditor=function(){return this.attachmentEditor=null,this.render()},c.prototype.attachmentEditorDidRequestUpdatingAttributesForAttachment=function(t,e){var n;return null!=(n=this.delegate)&&"function"==typeof n.compositionControllerWillUpdateAttachment&&n.compositionControllerWillUpdateAttachment(e),this.composition.updateAttributesForAttachment(t,e)},c.prototype.attachmentEditorDidRequestRemovingAttributeForAttachment=function(t,e){var n;return null!=(n=this.delegate)&&"function"==typeof n.compositionControllerWillUpdateAttachment&&n.compositionControllerWillUpdateAttachment(e),this.composition.removeAttributeForAttachment(t,e)},c.prototype.attachmentEditorDidRequestRemovalOfAttachment=function(t){var e;return null!=(e=this.delegate)&&"function"==typeof e.compositionControllerDidRequestRemovalOfAttachment?e.compositionControllerDidRequestRemovalOfAttachment(t):void 0},c.prototype.attachmentEditorDidRequestDeselectingAttachment=function(t){var e;return null!=(e=this.delegate)&&"function"==typeof e.compositionControllerDidRequestDeselectingAttachment?e.compositionControllerDidRequestDeselectingAttachment(t):void 0},c.prototype.canSyncDocumentView=function(){return!this.isEditingAttachment()},c.prototype.findAttachmentForElement=function(t){return this.composition.document.getAttachmentById(parseInt(t.dataset.trixId,10))},c}(e.BasicObject)}.call(this),function(){var t,n,i,o=function(t,e){return function(){return t.apply(e,arguments)}},r=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty;n=e.handleEvent,i=e.triggerEvent,t=e.findClosestElementFromNode,e.ToolbarController=function(e){function a(t){this.element=t,this.didKeyDownDialogInput=o(this.didKeyDownDialogInput,this),this.didClickDialogButton=o(this.didClickDialogButton,this),this.didClickAttributeButton=o(this.didClickAttributeButton,this),this.didClickActionButton=o(this.didClickActionButton,this),this.attributes={},this.actions={},this.resetDialogInputs(),n("mousedown",{onElement:this.element,matchingSelector:s,withCallback:this.didClickActionButton}),n("mousedown",{onElement:this.element,matchingSelector:c,withCallback:this.didClickAttributeButton}),n("click",{onElement:this.element,matchingSelector:v,preventDefault:!0}),n("click",{onElement:this.element,matchingSelector:u,withCallback:this.didClickDialogButton}),n("keydown",{onElement:this.element,matchingSelector:d,withCallback:this.didKeyDownDialogInput})}var s,l,c,u,d,p,h,f,m,g,v;return r(a,e),v=(c="[data-trix-attribute]")+", "+(s="[data-trix-action]"),l=(p="[data-trix-dialog]")+"[data-trix-active]",u=p+" [data-trix-method]",d=p+" [data-trix-input]",a.prototype.didClickActionButton=function(t,e){var n,i,o;return null!=(i=this.delegate)&&i.toolbarDidClickButton(),t.preventDefault(),n=h(e),this.getDialog(n)?this.toggleDialog(n):null!=(o=this.delegate)?o.toolbarDidInvokeAction(n):void 0},a.prototype.didClickAttributeButton=function(t,e){var n,i,o;return null!=(i=this.delegate)&&i.toolbarDidClickButton(),t.preventDefault(),n=f(e),this.getDialog(n)?this.toggleDialog(n):null!=(o=this.delegate)&&o.toolbarDidToggleAttribute(n),this.refreshAttributeButtons()},a.prototype.didClickDialogButton=function(e,n){var i;return i=t(n,{matchingSelector:p}),this[n.getAttribute("data-trix-method")].call(this,i)},a.prototype.didKeyDownDialogInput=function(t,e){var n,i;return 13===t.keyCode&&(t.preventDefault(),n=e.getAttribute("name"),i=this.getDialog(n),this.setAttribute(i)),27===t.keyCode?(t.preventDefault(),this.hideDialog()):void 0},a.prototype.updateActions=function(t){return this.actions=t,this.refreshActionButtons()},a.prototype.refreshActionButtons=function(){return this.eachActionButton((t=this,function(e,n){return e.disabled=!1===t.actions[n]}));var t},a.prototype.eachActionButton=function(t){var e,n,i,o,r;for(r=[],n=0,i=(o=this.element.querySelectorAll(s)).length;i>n;n++)e=o[n],r.push(t(e,h(e)));return r},a.prototype.updateAttributes=function(t){return this.attributes=t,this.refreshAttributeButtons()},a.prototype.refreshAttributeButtons=function(){return this.eachAttributeButton((t=this,function(e,n){return e.disabled=!1===t.attributes[n],t.attributes[n]||t.dialogIsVisible(n)?(e.setAttribute("data-trix-active",""),e.classList.add("trix-active")):(e.removeAttribute("data-trix-active"),e.classList.remove("trix-active"))}));var t},a.prototype.eachAttributeButton=function(t){var e,n,i,o,r;for(r=[],n=0,i=(o=this.element.querySelectorAll(c)).length;i>n;n++)e=o[n],r.push(t(e,f(e)));return r},a.prototype.applyKeyboardCommand=function(t){var e,n,o,r,a,s;for(r=JSON.stringify(t.sort()),o=0,a=(s=this.element.querySelectorAll("[data-trix-key]")).length;a>o;o++)if(n=(e=s[o]).getAttribute("data-trix-key").split("+"),JSON.stringify(n.sort())===r)return i("mousedown",{onElement:e}),!0;return!1},a.prototype.dialogIsVisible=function(t){var e;return(e=this.getDialog(t))?e.hasAttribute("data-trix-active"):void 0},a.prototype.toggleDialog=function(t){return this.dialogIsVisible(t)?this.hideDialog():this.showDialog(t)},a.prototype.showDialog=function(t){var e,n,i,o,r,a,s,l,c;for(this.hideDialog(),null!=(a=this.delegate)&&a.toolbarWillShowDialog(),(n=this.getDialog(t)).setAttribute("data-trix-active",""),n.classList.add("trix-active"),i=0,r=(s=n.querySelectorAll("input[disabled]")).length;r>i;i++)s[i].removeAttribute("disabled");return(e=f(n))&&(o=g(n,t))&&(o.value=null!=(l=this.attributes[e])?l:"",o.select()),null!=(c=this.delegate)?c.toolbarDidShowDialog(t):void 0},a.prototype.setAttribute=function(t){var e,n,i;return e=f(t),(n=g(t,e)).willValidate&&!n.checkValidity()?(n.setAttribute("data-trix-validate",""),n.classList.add("trix-validate"),n.focus()):(null!=(i=this.delegate)&&i.toolbarDidUpdateAttribute(e,n.value),this.hideDialog())},a.prototype.removeAttribute=function(t){var e,n;return e=f(t),null!=(n=this.delegate)&&n.toolbarDidRemoveAttribute(e),this.hideDialog()},a.prototype.hideDialog=function(){var t,e;return(t=this.element.querySelector(l))?(t.removeAttribute("data-trix-active"),t.classList.remove("trix-active"),this.resetDialogInputs(),null!=(e=this.delegate)?e.toolbarDidHideDialog(m(t)):void 0):void 0},a.prototype.resetDialogInputs=function(){var t,e,n,i,o;for(o=[],t=0,n=(i=this.element.querySelectorAll(d)).length;n>t;t++)(e=i[t]).setAttribute("disabled","disabled"),e.removeAttribute("data-trix-validate"),o.push(e.classList.remove("trix-validate"));return o},a.prototype.getDialog=function(t){return this.element.querySelector("[data-trix-dialog="+t+"]")},g=function(t,e){return null==e&&(e=f(t)),t.querySelector("[data-trix-input][name='"+e+"']")},h=function(t){return t.getAttribute("data-trix-action")},f=function(t){var e;return null!=(e=t.getAttribute("data-trix-attribute"))?e:t.getAttribute("data-trix-dialog-attribute")},m=function(t){return t.getAttribute("data-trix-dialog")},a}(e.BasicObject)}.call(this),function(){var t=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;e.ImagePreloadOperation=function(e){function n(t){this.url=t}return t(n,e),n.prototype.perform=function(t){var e,n;return(e=new Image).onload=(n=this,function(){return e.width=n.width=e.naturalWidth,e.height=n.height=e.naturalHeight,t(!0,e)}),e.onerror=function(){return t(!1)},e.src=this.url},n}(e.Operation)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e.Attachment=function(i){function o(n){null==n&&(n={}),this.releaseFile=t(this.releaseFile,this),o.__super__.constructor.apply(this,arguments),this.attributes=e.Hash.box(n),this.didChangeAttributes()}return n(o,i),o.previewablePattern=/^image(\/(gif|png|jpe?g)|$)/,o.attachmentForFile=function(t){var e;return(e=new this(this.attributesForFile(t))).setFile(t),e},o.attributesForFile=function(t){return new e.Hash({filename:t.name,filesize:t.size,contentType:t.type})},o.fromJSON=function(t){return new this(t)},o.prototype.getAttribute=function(t){return this.attributes.get(t)},o.prototype.hasAttribute=function(t){return this.attributes.has(t)},o.prototype.getAttributes=function(){return this.attributes.toObject()},o.prototype.setAttributes=function(t){var e,n,i;return null==t&&(t={}),e=this.attributes.merge(t),this.attributes.isEqualTo(e)?void 0:(this.attributes=e,this.didChangeAttributes(),null!=(n=this.previewDelegate)&&"function"==typeof n.attachmentDidChangeAttributes&&n.attachmentDidChangeAttributes(this),null!=(i=this.delegate)&&"function"==typeof i.attachmentDidChangeAttributes?i.attachmentDidChangeAttributes(this):void 0)},o.prototype.didChangeAttributes=function(){return this.isPreviewable()?this.preloadURL():void 0},o.prototype.isPending=function(){return null!=this.file&&!(this.getURL()||this.getHref())},o.prototype.isPreviewable=function(){return this.attributes.has("previewable")?this.attributes.get("previewable"):this.constructor.previewablePattern.test(this.getContentType())},o.prototype.getType=function(){return this.hasContent()?"content":this.isPreviewable()?"preview":"file"},o.prototype.getURL=function(){return this.attributes.get("url")},o.prototype.getHref=function(){return this.attributes.get("href")},o.prototype.getFilename=function(){var t;return null!=(t=this.attributes.get("filename"))?t:""},o.prototype.getFilesize=function(){return this.attributes.get("filesize")},o.prototype.getFormattedFilesize=function(){var t;return"number"==typeof(t=this.attributes.get("filesize"))?e.config.fileSize.formatter(t):""},o.prototype.getExtension=function(){var t;return null!=(t=this.getFilename().match(/\.(\w+)$/))?t[1].toLowerCase():void 0},o.prototype.getContentType=function(){return this.attributes.get("contentType")},o.prototype.hasContent=function(){return this.attributes.has("content")},o.prototype.getContent=function(){return this.attributes.get("content")},o.prototype.getWidth=function(){return this.attributes.get("width")},o.prototype.getHeight=function(){return this.attributes.get("height")},o.prototype.getFile=function(){return this.file},o.prototype.setFile=function(t){return this.file=t,this.isPreviewable()?this.preloadFile():void 0},o.prototype.releaseFile=function(){return this.releasePreloadedFile(),this.file=null},o.prototype.getUploadProgress=function(){var t;return null!=(t=this.uploadProgress)?t:0},o.prototype.setUploadProgress=function(t){var e;return this.uploadProgress!==t?(this.uploadProgress=t,null!=(e=this.uploadProgressDelegate)&&"function"==typeof e.attachmentDidChangeUploadProgress?e.attachmentDidChangeUploadProgress(this):void 0):void 0},o.prototype.toJSON=function(){return this.getAttributes()},o.prototype.getCacheKey=function(){return[o.__super__.getCacheKey.apply(this,arguments),this.attributes.getCacheKey(),this.getPreviewURL()].join("/")},o.prototype.getPreviewURL=function(){return this.previewURL||this.preloadingURL},o.prototype.setPreviewURL=function(t){var e,n;return t!==this.getPreviewURL()?(this.previewURL=t,null!=(e=this.previewDelegate)&&"function"==typeof e.attachmentDidChangeAttributes&&e.attachmentDidChangeAttributes(this),null!=(n=this.delegate)&&"function"==typeof n.attachmentDidChangePreviewURL?n.attachmentDidChangePreviewURL(this):void 0):void 0},o.prototype.preloadURL=function(){return this.preload(this.getURL(),this.releaseFile)},o.prototype.preloadFile=function(){return this.file?(this.fileObjectURL=URL.createObjectURL(this.file),this.preload(this.fileObjectURL)):void 0},o.prototype.releasePreloadedFile=function(){return this.fileObjectURL?(URL.revokeObjectURL(this.fileObjectURL),this.fileObjectURL=null):void 0},o.prototype.preload=function(t,n){return t&&t!==this.getPreviewURL()?(this.preloadingURL=t,new e.ImagePreloadOperation(t).then(function(e){return function(i){var o,r;return r=i.width,o=i.height,e.setAttributes({width:r,height:o}),e.preloadingURL=null,e.setPreviewURL(t),"function"==typeof n?n():void 0}}(this))):void 0},o}(e.Object)}.call(this),function(){var t=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;e.Piece=function(n){function i(t,n){null==n&&(n={}),i.__super__.constructor.apply(this,arguments),this.attributes=e.Hash.box(n)}return t(i,n),i.types={},i.registerType=function(t,e){return e.type=t,this.types[t]=e},i.fromJSON=function(t){var e;return(e=this.types[t.type])?e.fromJSON(t):void 0},i.prototype.copyWithAttributes=function(t){return new this.constructor(this.getValue(),t)},i.prototype.copyWithAdditionalAttributes=function(t){return this.copyWithAttributes(this.attributes.merge(t))},i.prototype.copyWithoutAttribute=function(t){return this.copyWithAttributes(this.attributes.remove(t))},i.prototype.copy=function(){return this.copyWithAttributes(this.attributes)},i.prototype.getAttribute=function(t){return this.attributes.get(t)},i.prototype.getAttributesHash=function(){return this.attributes},i.prototype.getAttributes=function(){return this.attributes.toObject()},i.prototype.getCommonAttributes=function(){var t,e,n;return(n=pieceList.getPieceAtIndex(0))?(t=n.attributes,e=t.getKeys(),pieceList.eachPiece(function(n){return e=t.getKeysCommonToHash(n.attributes),t=t.slice(e)}),t.toObject()):{}},i.prototype.hasAttribute=function(t){return this.attributes.has(t)},i.prototype.hasSameStringValueAsPiece=function(t){return null!=t&&this.toString()===t.toString()},i.prototype.hasSameAttributesAsPiece=function(t){return null!=t&&(this.attributes===t.attributes||this.attributes.isEqualTo(t.attributes))},i.prototype.isBlockBreak=function(){return!1},i.prototype.isEqualTo=function(t){return i.__super__.isEqualTo.apply(this,arguments)||this.hasSameConstructorAs(t)&&this.hasSameStringValueAsPiece(t)&&this.hasSameAttributesAsPiece(t)},i.prototype.isEmpty=function(){return 0===this.length},i.prototype.isSerializable=function(){return!0},i.prototype.toJSON=function(){return{type:this.constructor.type,attributes:this.getAttributes()}},i.prototype.contentsForInspection=function(){return{type:this.constructor.type,attributes:this.attributes.inspect()}},i.prototype.canBeGrouped=function(){return this.hasAttribute("href")},i.prototype.canBeGroupedWith=function(t){return this.getAttribute("href")===t.getAttribute("href")},i.prototype.getLength=function(){return this.length},i.prototype.canBeConsolidatedWith=function(){return!1},i}(e.Object)}.call(this),function(){var t=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;e.Piece.registerType("attachment",e.AttachmentPiece=function(n){function i(t){this.attachment=t,i.__super__.constructor.apply(this,arguments),this.length=1,this.ensureAttachmentExclusivelyHasAttribute("href"),this.attachment.hasContent()||this.removeProhibitedAttributes()}return t(i,n),i.fromJSON=function(t){return new this(e.Attachment.fromJSON(t.attachment),t.attributes)},i.permittedAttributes=["caption","presentation"],i.prototype.ensureAttachmentExclusivelyHasAttribute=function(t){return this.hasAttribute(t)?(this.attachment.hasAttribute(t)||this.attachment.setAttributes(this.attributes.slice(t)),this.attributes=this.attributes.remove(t)):void 0},i.prototype.removeProhibitedAttributes=function(){var t;return(t=this.attributes.slice(this.constructor.permittedAttributes)).isEqualTo(this.attributes)?void 0:this.attributes=t},i.prototype.getValue=function(){return this.attachment},i.prototype.isSerializable=function(){return!this.attachment.isPending()},i.prototype.getCaption=function(){var t;return null!=(t=this.attributes.get("caption"))?t:""},i.prototype.isEqualTo=function(t){var e;return i.__super__.isEqualTo.apply(this,arguments)&&this.attachment.id===(null!=t&&null!=(e=t.attachment)?e.id:void 0)},i.prototype.toString=function(){return e.OBJECT_REPLACEMENT_CHARACTER},i.prototype.toJSON=function(){var t;return(t=i.__super__.toJSON.apply(this,arguments)).attachment=this.attachment,t},i.prototype.getCacheKey=function(){return[i.__super__.getCacheKey.apply(this,arguments),this.attachment.getCacheKey()].join("/")},i.prototype.toConsole=function(){return JSON.stringify(this.toString())},i}(e.Piece))}.call(this),function(){var t,n=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;t=e.normalizeNewlines,e.Piece.registerType("string",e.StringPiece=function(e){function i(e){i.__super__.constructor.apply(this,arguments),this.string=t(e),this.length=this.string.length}return n(i,e),i.fromJSON=function(t){return new this(t.string,t.attributes)},i.prototype.getValue=function(){return this.string},i.prototype.toString=function(){return this.string.toString()},i.prototype.isBlockBreak=function(){return"\n"===this.toString()&&!0===this.getAttribute("blockBreak")},i.prototype.toJSON=function(){var t;return(t=i.__super__.toJSON.apply(this,arguments)).string=this.string,t},i.prototype.canBeConsolidatedWith=function(t){return null!=t&&this.hasSameConstructorAs(t)&&this.hasSameAttributesAsPiece(t)},i.prototype.consolidateWith=function(t){return new this.constructor(this.toString()+t.toString(),this.attributes)},i.prototype.splitAtOffset=function(t){var e,n;return 0===t?(e=null,n=this):t===this.length?(e=this,n=null):(e=new this.constructor(this.string.slice(0,t),this.attributes),n=new this.constructor(this.string.slice(t),this.attributes)),[e,n]},i.prototype.toConsole=function(){var t;return(t=this.string).length>15&&(t=t.slice(0,14)+"\u2026"),JSON.stringify(t.toString())},i}(e.Piece))}.call(this),function(){var t,n=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty,o=[].slice;t=e.spliceArray,e.SplittableList=function(e){function i(t){null==t&&(t=[]),i.__super__.constructor.apply(this,arguments),this.objects=t.slice(0),this.length=this.objects.length}var r,a,s;return n(i,e),i.box=function(t){return t instanceof this?t:new this(t)},i.prototype.indexOf=function(t){return this.objects.indexOf(t)},i.prototype.splice=function(){var e;return e=1<=arguments.length?o.call(arguments,0):[],new this.constructor(t.apply(null,[this.objects].concat(o.call(e))))},i.prototype.eachObject=function(t){var e,n,i,o,r,a;for(a=[],n=e=0,i=(r=this.objects).length;i>e;n=++e)o=r[n],a.push(t(o,n));return a},i.prototype.insertObjectAtIndex=function(t,e){return this.splice(e,0,t)},i.prototype.insertSplittableListAtIndex=function(t,e){return this.splice.apply(this,[e,0].concat(o.call(t.objects)))},i.prototype.insertSplittableListAtPosition=function(t,e){var n,i,o;return i=(o=this.splitObjectAtPosition(e))[0],n=o[1],new this.constructor(i).insertSplittableListAtIndex(t,n)},i.prototype.editObjectAtIndex=function(t,e){return this.replaceObjectAtIndex(e(this.objects[t]),t)},i.prototype.replaceObjectAtIndex=function(t,e){return this.splice(e,1,t)},i.prototype.removeObjectAtIndex=function(t){return this.splice(t,1)},i.prototype.getObjectAtIndex=function(t){return this.objects[t]},i.prototype.getSplittableListInRange=function(t){var e,n,i,o;return n=(i=this.splitObjectsAtRange(t))[0],e=i[1],o=i[2],new this.constructor(n.slice(e,o+1))},i.prototype.selectSplittableList=function(t){var e,n;return n=function(){var n,i,o,r;for(r=[],n=0,i=(o=this.objects).length;i>n;n++)e=o[n],t(e)&&r.push(e);return r}.call(this),new this.constructor(n)},i.prototype.removeObjectsInRange=function(t){var e,n,i,o;return n=(i=this.splitObjectsAtRange(t))[0],e=i[1],o=i[2],new this.constructor(n).splice(e,o-e+1)},i.prototype.transformObjectsInRange=function(t,e){var n,i,o,r,a,s,l;return a=this.splitObjectsAtRange(t),r=a[0],i=a[1],s=a[2],l=function(){var t,a,l;for(l=[],n=t=0,a=r.length;a>t;n=++t)o=r[n],l.push(n>=i&&s>=n?e(o):o);return l}(),new this.constructor(l)},i.prototype.splitObjectsAtRange=function(t){var e,n,i,o,a;return n=(o=this.splitObjectAtPosition(s(t)))[0],e=o[1],i=o[2],[n=(a=new this.constructor(n).splitObjectAtPosition(r(t)+i))[0],e,a[1]-1]},i.prototype.getObjectAtPosition=function(t){var e,n;return e=(n=this.findIndexAndOffsetAtPosition(t)).index,n.offset,this.objects[e]},i.prototype.splitObjectAtPosition=function(t){var e,n,i,o,r,a,s,l,c;return e=(r=this.findIndexAndOffsetAtPosition(t)).index,o=r.offset,i=this.objects.slice(0),null!=e?0===o?(l=e,c=0):(n=(a=this.getObjectAtIndex(e).splitAtOffset(o))[0],s=a[1],i.splice(e,1,n,s),l=e+1,c=n.getLength()-o):(l=i.length,c=0),[i,l,c]},i.prototype.consolidate=function(){var t,e,n,i,o,r;for(i=[],o=this.objects[0],t=0,e=(r=this.objects.slice(1)).length;e>t;t++)n=r[t],("function"==typeof o.canBeConsolidatedWith?o.canBeConsolidatedWith(n):void 0)?o=o.consolidateWith(n):(i.push(o),o=n);return null!=o&&i.push(o),new this.constructor(i)},i.prototype.consolidateFromIndexToIndex=function(t,e){var n,i;return i=this.objects.slice(0).slice(t,e+1),n=new this.constructor(i).consolidate().toArray(),this.splice.apply(this,[t,i.length].concat(o.call(n)))},i.prototype.findIndexAndOffsetAtPosition=function(t){var e,n,i,o,r,a;for(e=0,i=n=0,o=(a=this.objects).length;o>n;i=++n){if(r=e+a[i].getLength(),t>=e&&r>t)return{index:i,offset:t-e};e=r}return{index:null,offset:null}},i.prototype.findPositionAtIndexAndOffset=function(t,e){var n,i,o,r,a,s;for(a=0,n=i=0,o=(s=this.objects).length;o>i;n=++i)if(r=s[n],t>n)a+=r.getLength();else if(n===t){a+=e;break}return a},i.prototype.getEndPosition=function(){var t,e;return null!=this.endPosition?this.endPosition:this.endPosition=function(){var n,i,o;for(e=0,n=0,i=(o=this.objects).length;i>n;n++)t=o[n],e+=t.getLength();return e}.call(this)},i.prototype.toString=function(){return this.objects.join("")},i.prototype.toArray=function(){return this.objects.slice(0)},i.prototype.toJSON=function(){return this.toArray()},i.prototype.isEqualTo=function(t){return i.__super__.isEqualTo.apply(this,arguments)||a(this.objects,null!=t?t.objects:void 0)},a=function(t,e){var n,i,o,r,a;if(null==e&&(e=[]),t.length!==e.length)return!1;for(a=!0,i=n=0,o=t.length;o>n;i=++n)r=t[i],a&&!r.isEqualTo(e[i])&&(a=!1);return a},i.prototype.contentsForInspection=function(){var t;return{objects:"["+function(){var e,n,i,o;for(o=[],e=0,n=(i=this.objects).length;n>e;e++)t=i[e],o.push(t.inspect());return o}.call(this).join(", ")+"]"}},s=function(t){return t[0]},r=function(t){return t[1]},i}(e.Object)}.call(this),function(){var t=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;e.Text=function(n){function i(t){var n;null==t&&(t=[]),i.__super__.constructor.apply(this,arguments),this.pieceList=new e.SplittableList(function(){var e,i,o;for(o=[],e=0,i=t.length;i>e;e++)(n=t[e]).isEmpty()||o.push(n);return o}())}return t(i,n),i.textForAttachmentWithAttributes=function(t,n){return new this([new e.AttachmentPiece(t,n)])},i.textForStringWithAttributes=function(t,n){return new this([new e.StringPiece(t,n)])},i.fromJSON=function(t){var n;return new this(function(){var i,o,r;for(r=[],i=0,o=t.length;o>i;i++)n=t[i],r.push(e.Piece.fromJSON(n));return r}())},i.prototype.copy=function(){return this.copyWithPieceList(this.pieceList)},i.prototype.copyWithPieceList=function(t){return new this.constructor(t.consolidate().toArray())},i.prototype.copyUsingObjectMap=function(t){var e,n;return n=function(){var n,i,o,r,a;for(a=[],n=0,i=(o=this.getPieces()).length;i>n;n++)e=o[n],a.push(null!=(r=t.find(e))?r:e);return a}.call(this),new this.constructor(n)},i.prototype.appendText=function(t){return this.insertTextAtPosition(t,this.getLength())},i.prototype.insertTextAtPosition=function(t,e){return this.copyWithPieceList(this.pieceList.insertSplittableListAtPosition(t.pieceList,e))},i.prototype.removeTextAtRange=function(t){return this.copyWithPieceList(this.pieceList.removeObjectsInRange(t))},i.prototype.replaceTextAtRange=function(t,e){return this.removeTextAtRange(e).insertTextAtPosition(t,e[0])},i.prototype.moveTextFromRangeToPosition=function(t,e){var n,i;if(!(t[0]<=e&&e<=t[1]))return n=(i=this.getTextAtRange(t)).getLength(),t[0]<e&&(e-=n),this.removeTextAtRange(t).insertTextAtPosition(i,e)},i.prototype.addAttributeAtRange=function(t,e,n){var i;return(i={})[t]=e,this.addAttributesAtRange(i,n)},i.prototype.addAttributesAtRange=function(t,e){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(e,function(e){return e.copyWithAdditionalAttributes(t)}))},i.prototype.removeAttributeAtRange=function(t,e){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(e,function(e){return e.copyWithoutAttribute(t)}))},i.prototype.setAttributesAtRange=function(t,e){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(e,function(e){return e.copyWithAttributes(t)}))},i.prototype.getAttributesAtPosition=function(t){var e,n;return null!=(e=null!=(n=this.pieceList.getObjectAtPosition(t))?n.getAttributes():void 0)?e:{}},i.prototype.getCommonAttributes=function(){var t,n;return t=function(){var t,e,i,o;for(o=[],t=0,e=(i=this.pieceList.toArray()).length;e>t;t++)n=i[t],o.push(n.getAttributes());return o}.call(this),e.Hash.fromCommonAttributesOfObjects(t).toObject()},i.prototype.getCommonAttributesAtRange=function(t){var e;return null!=(e=this.getTextAtRange(t).getCommonAttributes())?e:{}},i.prototype.getExpandedRangeForAttributeAtOffset=function(t,e){var n,i,o;for(n=o=e,i=this.getLength();n>0&&this.getCommonAttributesAtRange([n-1,o])[t];)n--;for(;i>o&&this.getCommonAttributesAtRange([e,o+1])[t];)o++;return[n,o]},i.prototype.getTextAtRange=function(t){return this.copyWithPieceList(this.pieceList.getSplittableListInRange(t))},i.prototype.getStringAtRange=function(t){return this.pieceList.getSplittableListInRange(t).toString()},i.prototype.getStringAtPosition=function(t){return this.getStringAtRange([t,t+1])},i.prototype.startsWithString=function(t){return this.getStringAtRange([0,t.length])===t},i.prototype.endsWithString=function(t){var e;return e=this.getLength(),this.getStringAtRange([e-t.length,e])===t},i.prototype.getAttachmentPieces=function(){var t,e,n,i,o;for(o=[],t=0,e=(i=this.pieceList.toArray()).length;e>t;t++)null!=(n=i[t]).attachment&&o.push(n);return o},i.prototype.getAttachments=function(){var t,e,n,i,o;for(o=[],t=0,e=(i=this.getAttachmentPieces()).length;e>t;t++)n=i[t],o.push(n.attachment);return o},i.prototype.getAttachmentAndPositionById=function(t){var e,n,i,o,r,a;for(o=0,e=0,n=(r=this.pieceList.toArray()).length;n>e;e++){if((null!=(a=(i=r[e]).attachment)?a.id:void 0)===t)return{attachment:i.attachment,position:o};o+=i.length}return{attachment:null,position:null}},i.prototype.getAttachmentById=function(t){var e,n;return e=(n=this.getAttachmentAndPositionById(t)).attachment,n.position,e},i.prototype.getRangeOfAttachment=function(t){var e,n
;return t=(n=this.getAttachmentAndPositionById(t.id)).attachment,e=n.position,null!=t?[e,e+1]:void 0},i.prototype.updateAttributesForAttachment=function(t,e){var n;return(n=this.getRangeOfAttachment(e))?this.addAttributesAtRange(t,n):this},i.prototype.getLength=function(){return this.pieceList.getEndPosition()},i.prototype.isEmpty=function(){return 0===this.getLength()},i.prototype.isEqualTo=function(t){var e;return i.__super__.isEqualTo.apply(this,arguments)||(null!=t&&null!=(e=t.pieceList)?e.isEqualTo(this.pieceList):void 0)},i.prototype.isBlockBreak=function(){return 1===this.getLength()&&this.pieceList.getObjectAtIndex(0).isBlockBreak()},i.prototype.eachPiece=function(t){return this.pieceList.eachObject(t)},i.prototype.getPieces=function(){return this.pieceList.toArray()},i.prototype.getPieceAtPosition=function(t){return this.pieceList.getObjectAtPosition(t)},i.prototype.contentsForInspection=function(){return{pieceList:this.pieceList.inspect()}},i.prototype.toSerializableText=function(){var t;return t=this.pieceList.selectSplittableList(function(t){return t.isSerializable()}),this.copyWithPieceList(t)},i.prototype.toString=function(){return this.pieceList.toString()},i.prototype.toJSON=function(){return this.pieceList.toJSON()},i.prototype.toConsole=function(){var t;return JSON.stringify(function(){var e,n,i,o;for(o=[],e=0,n=(i=this.pieceList.toArray()).length;n>e;e++)t=i[e],o.push(JSON.parse(t.toConsole()));return o}.call(this))},i}(e.Object)}.call(this),function(){var t,n,i,o,r=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty,s=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1},l=[].slice;t=e.arraysAreEqual,o=e.spliceArray,n=e.getBlockConfig,e.getBlockAttributeNames,i=e.getListAttributeNames,e.Block=function(a){function c(t,n){null==t&&(t=new e.Text),null==n&&(n=[]),c.__super__.constructor.apply(this,arguments),this.text=d(t),this.attributes=n}var u,d,p,h,f,m,g,v,y;return r(c,a),c.fromJSON=function(t){return new this(e.Text.fromJSON(t.text),t.attributes)},c.prototype.isEmpty=function(){return this.text.isBlockBreak()},c.prototype.isEqualTo=function(e){return c.__super__.isEqualTo.apply(this,arguments)||this.text.isEqualTo(null!=e?e.text:void 0)&&t(this.attributes,null!=e?e.attributes:void 0)},c.prototype.copyWithText=function(t){return new this.constructor(t,this.attributes)},c.prototype.copyWithoutText=function(){return this.copyWithText(null)},c.prototype.copyWithAttributes=function(t){return new this.constructor(this.text,t)},c.prototype.copyWithoutAttributes=function(){return this.copyWithAttributes(null)},c.prototype.copyUsingObjectMap=function(t){var e;return this.copyWithText((e=t.find(this.text))?e:this.text.copyUsingObjectMap(t))},c.prototype.addAttribute=function(t){var e;return e=this.attributes.concat(h(t)),this.copyWithAttributes(e)},c.prototype.removeAttribute=function(t){var e,i;return i=n(t).listAttribute,e=m(m(this.attributes,t),i),this.copyWithAttributes(e)},c.prototype.removeLastAttribute=function(){return this.removeAttribute(this.getLastAttribute())},c.prototype.getLastAttribute=function(){return f(this.attributes)},c.prototype.getAttributes=function(){return this.attributes.slice(0)},c.prototype.getAttributeLevel=function(){return this.attributes.length},c.prototype.getAttributeAtLevel=function(t){return this.attributes[t-1]},c.prototype.hasAttribute=function(t){return s.call(this.attributes,t)>=0},c.prototype.hasAttributes=function(){return this.getAttributeLevel()>0},c.prototype.getLastNestableAttribute=function(){return f(this.getNestableAttributes())},c.prototype.getNestableAttributes=function(){var t,e,i,o,r;for(r=[],e=0,i=(o=this.attributes).length;i>e;e++)t=o[e],n(t).nestable&&r.push(t);return r},c.prototype.getNestingLevel=function(){return this.getNestableAttributes().length},c.prototype.decreaseNestingLevel=function(){var t;return(t=this.getLastNestableAttribute())?this.removeAttribute(t):this},c.prototype.increaseNestingLevel=function(){var t,e,n;return(t=this.getLastNestableAttribute())?(n=this.attributes.lastIndexOf(t),e=o.apply(null,[this.attributes,n+1,0].concat(l.call(h(t)))),this.copyWithAttributes(e)):this},c.prototype.getListItemAttributes=function(){var t,e,i,o,r;for(r=[],e=0,i=(o=this.attributes).length;i>e;e++)t=o[e],n(t).listAttribute&&r.push(t);return r},c.prototype.isListItem=function(){var t;return null!=(t=n(this.getLastAttribute()))?t.listAttribute:void 0},c.prototype.isTerminalBlock=function(){var t;return null!=(t=n(this.getLastAttribute()))?t.terminal:void 0},c.prototype.breaksOnReturn=function(){var t;return null!=(t=n(this.getLastAttribute()))?t.breakOnReturn:void 0},c.prototype.findLineBreakInDirectionFromPosition=function(t,e){var n,i;return i=this.toString(),-1!==(n=function(){switch(t){case"forward":return i.indexOf("\n",e);case"backward":return i.slice(0,e).lastIndexOf("\n")}}())?n:void 0},c.prototype.contentsForInspection=function(){return{text:this.text.inspect(),attributes:this.attributes}},c.prototype.toString=function(){return this.text.toString()},c.prototype.toJSON=function(){return{text:this.text,attributes:this.attributes}},c.prototype.getLength=function(){return this.text.getLength()},c.prototype.canBeConsolidatedWith=function(t){return!this.hasAttributes()&&!t.hasAttributes()},c.prototype.consolidateWith=function(t){var n,i;return n=e.Text.textForStringWithAttributes("\n"),i=this.getTextWithoutBlockBreak().appendText(n),this.copyWithText(i.appendText(t.text))},c.prototype.splitAtOffset=function(t){var e,n;return 0===t?(e=null,n=this):t===this.getLength()?(e=this,n=null):(e=this.copyWithText(this.text.getTextAtRange([0,t])),n=this.copyWithText(this.text.getTextAtRange([t,this.getLength()]))),[e,n]},c.prototype.getBlockBreakPosition=function(){return this.text.getLength()-1},c.prototype.getTextWithoutBlockBreak=function(){return g(this.text)?this.text.getTextAtRange([0,this.getBlockBreakPosition()]):this.text.copy()},c.prototype.canBeGrouped=function(t){return this.attributes[t]},c.prototype.canBeGroupedWith=function(t,e){var o,r,a,l;return r=(a=t.getAttributes())[e],(o=this.attributes[e])===r&&!(!1===n(o).group&&(l=a[e+1],s.call(i(),l)<0))},d=function(t){return t=y(t),u(t)},y=function(t){var n,i,o,r,a,s;return r=!1,s=t.getPieces(),i=2<=s.length?l.call(s,0,n=s.length-1):(n=0,[]),null==(o=s[n++])?t:(i=function(){var t,e,n;for(n=[],t=0,e=i.length;e>t;t++)(a=i[t]).isBlockBreak()?(r=!0,n.push(v(a))):n.push(a);return n}(),r?new e.Text(l.call(i).concat([o])):t)},p=e.Text.textForStringWithAttributes("\n",{blockBreak:!0}),u=function(t){return g(t)?t:t.appendText(p)},g=function(t){var e;return 0!==(e=t.getLength())&&t.getTextAtRange([e-1,e]).isBlockBreak()},v=function(t){return t.copyWithoutAttribute("blockBreak")},h=function(t){var e;return null!=(e=n(t).listAttribute)?[e,t]:[t]},f=function(t){return t.slice(-1)[0]},m=function(t,e){var n;return-1===(n=t.lastIndexOf(e))?t:o(t,n,1)},c}(e.Object)}.call(this),function(){var t,n,i,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty,a=[].slice,s=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};n=e.tagName,i=e.walkTree,t=e.nodeIsAttachmentElement,e.HTMLSanitizer=function(r){function l(t,e){this.allowedAttributes=(null!=e?e:{}).allowedAttributes,null==this.allowedAttributes&&(this.allowedAttributes=c),this.body=u(t)}var c,u,d;return o(l,r),c="style href src width height class".split(" "),l.sanitize=function(t,e){var n;return(n=new this(t,e)).sanitize(),n},l.prototype.sanitize=function(){return this.sanitizeElements(),this.normalizeListElementNesting()},l.prototype.getHTML=function(){return this.body.innerHTML},l.prototype.getBody=function(){return this.body},l.prototype.sanitizeElements=function(){var t,n,o,r,a;for(a=i(this.body),r=[];a.nextNode();)switch(o=a.currentNode,o.nodeType){case Node.ELEMENT_NODE:d(o)?r.push(o):this.sanitizeElement(o);break;case Node.COMMENT_NODE:r.push(o)}for(t=0,n=r.length;n>t;t++)o=r[t],e.removeNode(o);return this.body},l.prototype.sanitizeElement=function(t){var e,n,i,o;for(e=0,n=(o=a.call(t.attributes)).length;n>e;e++)i=o[e].name,s.call(this.allowedAttributes,i)>=0||0===i.indexOf("data-trix")||t.removeAttribute(i);return t},l.prototype.normalizeListElementNesting=function(){var t,e,i,o,r;for(t=0,e=(r=a.call(this.body.querySelectorAll("ul,ol"))).length;e>t;t++)(o=(i=r[t]).previousElementSibling)&&"li"===n(o)&&o.appendChild(i);return this.body},d=function(e){return(null!=e?e.nodeType:void 0)!==Node.ELEMENT_NODE||t(e)?void 0:"script"===n(e)||"false"===e.getAttribute("data-trix-serialize")},u=function(t){var e,n,i,o,r;for(null==t&&(t=""),t=t.replace(/<\/html[^>]*>[^]*$/i,"</html>"),(e=document.implementation.createHTMLDocument("")).documentElement.innerHTML=t,i=0,o=(r=e.head.querySelectorAll("style")).length;o>i;i++)n=r[i],e.body.appendChild(n);return e.body},l}(e.BasicObject)}.call(this),function(){var t,n,i,o,r,a,s,l,c,u,d,p=function(t,e){function n(){this.constructor=t}for(var i in e)h.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},h={}.hasOwnProperty,f=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};t=e.arraysAreEqual,a=e.makeElement,u=e.tagName,r=e.getBlockTagNames,d=e.walkTree,o=e.findClosestElementFromNode,i=e.elementContainsNode,s=e.nodeIsAttachmentElement,l=e.normalizeSpaces,n=e.breakableWhitespacePattern,c=e.squishBreakableWhitespace,e.HTMLParser=function(h){function m(t,e){this.html=t,this.referenceElement=(null!=e?e:{}).referenceElement,this.blocks=[],this.blockElements=[],this.processedElements=[]}var g,v,y,b,w,$,C,_,x,k,A,S;return p(m,h),m.parse=function(t,e){var n;return(n=new this(t,e)).parse(),n},m.prototype.getDocument=function(){return e.Document.fromJSON(this.blocks)},m.prototype.parse=function(){var t,n;try{for(this.createHiddenContainer(),t=e.HTMLSanitizer.sanitize(this.html).getHTML(),this.containerElement.innerHTML=t,n=d(this.containerElement,{usingFilter:_});n.nextNode();)this.processNode(n.currentNode);return this.translateBlockElementMarginsToNewlines()}finally{this.removeHiddenContainer()}},m.prototype.createHiddenContainer=function(){return this.referenceElement?(this.containerElement=this.referenceElement.cloneNode(!1),this.containerElement.removeAttribute("id"),this.containerElement.setAttribute("data-trix-internal",""),this.containerElement.style.display="none",this.referenceElement.parentNode.insertBefore(this.containerElement,this.referenceElement.nextSibling)):(this.containerElement=a({tagName:"div",style:{display:"none"}}),document.body.appendChild(this.containerElement))},m.prototype.removeHiddenContainer=function(){return e.removeNode(this.containerElement)},_=function(t){return"style"===u(t)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},m.prototype.processNode=function(t){switch(t.nodeType){case Node.TEXT_NODE:return this.processTextNode(t);case Node.ELEMENT_NODE:return this.appendBlockForElement(t),this.processElement(t)}},m.prototype.appendBlockForElement=function(e){var n,o,r,a;if(r=this.isBlockElement(e),o=i(this.currentBlockElement,e),r&&!this.isBlockElement(e.firstChild)){if(!(this.isInsignificantTextNode(e.firstChild)&&this.isBlockElement(e.firstElementChild)||(n=this.getBlockAttributes(e),o&&t(n,this.currentBlock.attributes))))return this.currentBlock=this.appendBlockForAttributesWithElement(n,e),this.currentBlockElement=e}else if(this.currentBlockElement&&!o&&!r)return(a=this.findParentBlockElement(e))?this.appendBlockForElement(a):(this.currentBlock=this.appendEmptyBlock(),this.currentBlockElement=null)},m.prototype.findParentBlockElement=function(t){var e;for(e=t.parentElement;e&&e!==this.containerElement;){if(this.isBlockElement(e)&&f.call(this.blockElements,e)>=0)return e;e=e.parentElement}return null},m.prototype.processTextNode=function(t){var e,n;return this.isInsignificantTextNode(t)?void 0:(n=t.data,v(t.parentNode)||(n=c(n),A(null!=(e=t.previousSibling)?e.textContent:void 0)&&(n=$(n))),this.appendStringWithAttributes(n,this.getTextAttributes(t.parentNode)))},m.prototype.processElement=function(t){var e,n,i,o,r;if(s(t))return e=y(t),Object.keys(e).length&&(o=this.getTextAttributes(t),this.appendAttachmentWithAttributes(e,o),t.innerHTML=""),this.processedElements.push(t);switch(u(t)){case"br":return this.isExtraBR(t)||this.isBlockElement(t.nextSibling)||this.appendStringWithAttributes("\n",this.getTextAttributes(t)),this.processedElements.push(t);case"img":for(n in e={url:t.getAttribute("src"),contentType:"image"},i=w(t))r=i[n],e[n]=r;return this.appendAttachmentWithAttributes(e,this.getTextAttributes(t)),this.processedElements.push(t);case"tr":if(t.parentNode.firstChild!==t)return this.appendStringWithAttributes("\n");break;case"td":if(t.parentNode.firstChild!==t)return this.appendStringWithAttributes(" | ")}},m.prototype.appendBlockForAttributesWithElement=function(t,e){var n;return this.blockElements.push(e),n=g(t),this.blocks.push(n),n},m.prototype.appendEmptyBlock=function(){return this.appendBlockForAttributesWithElement([],null)},m.prototype.appendStringWithAttributes=function(t,e){return this.appendPiece(k(t,e))},m.prototype.appendAttachmentWithAttributes=function(t,e){return this.appendPiece(x(t,e))},m.prototype.appendPiece=function(t){return 0===this.blocks.length&&this.appendEmptyBlock(),this.blocks[this.blocks.length-1].text.push(t)},m.prototype.appendStringToTextAtIndex=function(t,e){var n,i;return"string"===(null!=(n=(i=this.blocks[e].text)[i.length-1])?n.type:void 0)?n.string+=t:i.push(k(t))},m.prototype.prependStringToTextAtIndex=function(t,e){var n,i;return"string"===(null!=(n=(i=this.blocks[e].text)[0])?n.type:void 0)?n.string=t+n.string:i.unshift(k(t))},k=function(t,e){var n;return null==e&&(e={}),n="string",{string:t=l(t),attributes:e,type:n}},x=function(t,e){return null==e&&(e={}),{attachment:t,attributes:e,type:"attachment"}},g=function(t){return null==t&&(t={}),{text:[],attributes:t}},m.prototype.getTextAttributes=function(t){var n,i,r,a,l,c,u,d,p,h,f,m,g;for(n in r={},h=e.config.textAttributes)if((l=h[n]).tagName&&o(t,{matchingSelector:l.tagName,untilNode:this.containerElement}))r[n]=!0;else if(l.parser){if(g=l.parser(t)){for(i=!1,c=0,p=(f=this.findBlockElementAncestors(t)).length;p>c;c++)if(a=f[c],l.parser(a)===g){i=!0;break}i||(r[n]=g)}}else l.styleProperty&&(g=t.style[l.styleProperty])&&(r[n]=g);if(s(t)&&(u=t.getAttribute("data-trix-attributes")))for(d in m=JSON.parse(u))g=m[d],r[d]=g;return r},m.prototype.getBlockAttributes=function(t){var n,i,o,r;for(i=[];t&&t!==this.containerElement;){for(n in r=e.config.blockAttributes)!1!==(o=r[n]).parse&&u(t)===o.tagName&&(("function"==typeof o.test?o.test(t):void 0)||!o.test)&&(i.push(n),o.listAttribute&&i.push(o.listAttribute));t=t.parentNode}return i.reverse()},m.prototype.findBlockElementAncestors=function(t){var e,n;for(e=[];t&&t!==this.containerElement;)n=u(t),f.call(r(),n)>=0&&e.push(t),t=t.parentNode;return e},y=function(t){return JSON.parse(t.getAttribute("data-trix-attachment"))},w=function(t){var e,n,i;return i=t.getAttribute("width"),n=t.getAttribute("height"),e={},i&&(e.width=parseInt(i,10)),n&&(e.height=parseInt(n,10)),e},m.prototype.isBlockElement=function(t){var e;if((null!=t?t.nodeType:void 0)===Node.ELEMENT_NODE&&!s(t)&&!o(t,{matchingSelector:"td",untilNode:this.containerElement}))return e=u(t),f.call(r(),e)>=0||"block"===window.getComputedStyle(t).display},m.prototype.isInsignificantTextNode=function(t){var e,n,i;if((null!=t?t.nodeType:void 0)===Node.TEXT_NODE&&S(t.data)&&(n=t.parentNode,i=t.previousSibling,e=t.nextSibling,(!C(n.previousSibling)||this.isBlockElement(n.previousSibling))&&!v(n)))return!i||this.isBlockElement(i)||!e||this.isBlockElement(e)},m.prototype.isExtraBR=function(t){return"br"===u(t)&&this.isBlockElement(t.parentNode)&&t.parentNode.lastChild===t},v=function(t){var e;return"pre"===(e=window.getComputedStyle(t).whiteSpace)||"pre-wrap"===e||"pre-line"===e},C=function(t){return t&&!A(t.textContent)},m.prototype.translateBlockElementMarginsToNewlines=function(){var t,e,n,i,o,r,a;for(t=this.getMarginOfDefaultBlockElement(),a=[],n=e=0,i=(r=this.blocks).length;i>e;n=++e)r[n],(o=this.getMarginOfBlockElementAtIndex(n))&&(o.top>2*t.top&&this.prependStringToTextAtIndex("\n",n),a.push(o.bottom>2*t.bottom?this.appendStringToTextAtIndex("\n",n):void 0));return a},m.prototype.getMarginOfBlockElementAtIndex=function(t){var e,n;return!(e=this.blockElements[t])||!e.textContent||(n=u(e),f.call(r(),n)>=0||f.call(this.processedElements,e)>=0)?void 0:b(e)},m.prototype.getMarginOfDefaultBlockElement=function(){var t;return t=a(e.config.blockAttributes["default"].tagName),this.containerElement.appendChild(t),b(t)},b=function(t){var e;return"block"===(e=window.getComputedStyle(t)).display?{top:parseInt(e.marginTop),bottom:parseInt(e.marginBottom)}:void 0},$=function(t){return t.replace(RegExp("^"+n.source+"+"),"")},S=function(t){return RegExp("^"+n.source+"*$").test(t)},A=function(t){return/\s$/.test(t)},m}(e.BasicObject)}.call(this),function(){var t,n,i,o,r=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty,s=[].slice,l=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};t=e.arraysAreEqual,i=e.normalizeRange,o=e.rangeIsCollapsed,n=e.getBlockConfig,e.Document=function(a){function c(t){null==t&&(t=[]),c.__super__.constructor.apply(this,arguments),0===t.length&&(t=[new e.Block]),this.blockList=e.SplittableList.box(t)}var u;return r(c,a),c.fromJSON=function(t){var n;return new this(function(){var i,o,r;for(r=[],i=0,o=t.length;o>i;i++)n=t[i],r.push(e.Block.fromJSON(n));return r}())},c.fromHTML=function(t,n){return e.HTMLParser.parse(t,n).getDocument()},c.fromString=function(t,n){var i;return i=e.Text.textForStringWithAttributes(t,n),new this([new e.Block(i)])},c.prototype.isEmpty=function(){var t;return 1===this.blockList.length&&((t=this.getBlockAtIndex(0)).isEmpty()&&!t.hasAttributes())},c.prototype.copy=function(t){var e;return null==t&&(t={}),e=t.consolidateBlocks?this.blockList.consolidate().toArray():this.blockList.toArray(),new this.constructor(e)},c.prototype.copyUsingObjectsFromDocument=function(t){var n;return n=new e.ObjectMap(t.getObjects()),this.copyUsingObjectMap(n)},c.prototype.copyUsingObjectMap=function(t){var e,n,i;return n=function(){var n,o,r,a;for(a=[],n=0,o=(r=this.getBlocks()).length;o>n;n++)e=r[n],a.push((i=t.find(e))?i:e.copyUsingObjectMap(t));return a}.call(this),new this.constructor(n)},c.prototype.copyWithBaseBlockAttributes=function(t){var e,n,i;return null==t&&(t=[]),i=function(){var i,o,r,a;for(a=[],i=0,o=(r=this.getBlocks()).length;o>i;i++)n=r[i],e=t.concat(n.getAttributes()),a.push(n.copyWithAttributes(e));return a}.call(this),new this.constructor(i)},c.prototype.replaceBlock=function(t,e){var n;return-1===(n=this.blockList.indexOf(t))?this:new this.constructor(this.blockList.replaceObjectAtIndex(e,n))},c.prototype.insertDocumentAtRange=function(t,e){var n,r,a,s,l,c,u;return r=t.blockList,l=(e=i(e))[0],a=(c=this.locationFromPosition(l)).index,s=c.offset,u=this,n=this.getBlockAtPosition(l),o(e)&&n.isEmpty()&&!n.hasAttributes()?u=new this.constructor(u.blockList.removeObjectAtIndex(a)):n.getBlockBreakPosition()===s&&l++,u=u.removeTextAtRange(e),new this.constructor(u.blockList.insertSplittableListAtPosition(r,l))},c.prototype.mergeDocumentAtRange=function(e,n){var o,r,a,s,l,c,u,d,p,h,f,m;return f=(n=i(n))[0],h=this.locationFromPosition(f),r=this.getBlockAtIndex(h.index).getAttributes(),o=e.getBaseBlockAttributes(),m=r.slice(-o.length),t(o,m)?(u=r.slice(0,-o.length),c=e.copyWithBaseBlockAttributes(u)):c=e.copy({consolidateBlocks:!0}).copyWithBaseBlockAttributes(r),a=c.getBlockCount(),s=c.getBlockAtIndex(0),t(r,s.getAttributes())?(l=s.getTextWithoutBlockBreak(),p=this.insertTextAtRange(l,n),a>1&&(c=new this.constructor(c.getBlocks().slice(1)),d=f+l.getLength(),p=p.insertDocumentAtRange(c,d))):p=this.insertDocumentAtRange(c,n),p},c.prototype.insertTextAtRange=function(t,e){var n,o,r,a,s;return s=(e=i(e))[0],o=(a=this.locationFromPosition(s)).index,r=a.offset,n=this.removeTextAtRange(e),new this.constructor(n.blockList.editObjectAtIndex(o,function(e){return e.copyWithText(e.text.insertTextAtPosition(t,r))}))},c.prototype.removeTextAtRange=function(t){var e,n,r,a,s,l,c,u,d,p,h,f,m,g,v,y,b,w;return u=(p=t=i(t))[0],y=p[1],o(t)?this:(l=(h=this.locationRangeFromRange(t))[0],g=h[1],s=l.index,c=l.offset,a=this.getBlockAtIndex(s),m=g.index,v=g.offset,f=this.getBlockAtIndex(m),y-u==1&&a.getBlockBreakPosition()===c&&f.getBlockBreakPosition()!==v&&"\n"===f.text.getStringAtPosition(v)?r=this.blockList.editObjectAtIndex(m,function(t){return t.copyWithText(t.text.removeTextAtRange([v,v+1]))}):(d=a.text.getTextAtRange([0,c]),b=f.text.getTextAtRange([v,f.getLength()]),w=d.appendText(b),n=s!==m&&0===c&&a.getAttributeLevel()>=f.getAttributeLevel()?f.copyWithText(w):a.copyWithText(w),e=m+1-s,r=this.blockList.splice(s,e,n)),new this.constructor(r))},c.prototype.moveTextFromRangeToPosition=function(t,e){var n,o,r,a,l,c,u,d,p,h;return p=(c=t=i(t))[0],r=c[1],e>=p&&r>=e?this:(o=this.getDocumentAtRange(t),d=this.removeTextAtRange(t),(l=e>p)&&(e-=o.getLength()),a=(u=o.getBlocks())[0],0===(n=2<=u.length?s.call(u,1):[]).length?(h=a.getTextWithoutBlockBreak(),l&&(e+=1)):h=a.text,d=d.insertTextAtRange(h,e),0===n.length?d:(o=new this.constructor(n),e+=h.getLength(),d.insertDocumentAtRange(o,e)))},c.prototype.addAttributeAtRange=function(t,e,i){var o;return o=this.blockList,this.eachBlockAtRange(i,function(i,r,a){return o=o.editObjectAtIndex(a,function(){return n(t)?i.addAttribute(t,e):r[0]===r[1]?i:i.copyWithText(i.text.addAttributeAtRange(t,e,r))})}),new this.constructor(o)},c.prototype.addAttribute=function(t,e){var n;return n=this.blockList,this.eachBlock(function(i,o){return n=n.editObjectAtIndex(o,function(){return i.addAttribute(t,e)})}),new this.constructor(n)},c.prototype.removeAttributeAtRange=function(t,e){var i;return i=this.blockList,this.eachBlockAtRange(e,function(e,o,r){return n(t)?i=i.editObjectAtIndex(r,function(){return e.removeAttribute(t)}):o[0]!==o[1]?i=i.editObjectAtIndex(r,function(){return e.copyWithText(e.text.removeAttributeAtRange(t,o))}):void 0}),new this.constructor(i)},c.prototype.updateAttributesForAttachment=function(t,e){var n,i,o;return i=this.getRangeOfAttachment(e)[0],n=this.locationFromPosition(i).index,o=this.getTextAtIndex(n),new this.constructor(this.blockList.editObjectAtIndex(n,function(n){return n.copyWithText(o.updateAttributesForAttachment(t,e))}))},c.prototype.removeAttributeForAttachment=function(t,e){var n;return n=this.getRangeOfAttachment(e),this.removeAttributeAtRange(t,n)},c.prototype.insertBlockBreakAtRange=function(t){var n,o,r,a;return a=(t=i(t))[0],r=this.locationFromPosition(a).offset,o=this.removeTextAtRange(t),0===r&&(n=[new e.Block]),new this.constructor(o.blockList.insertSplittableListAtPosition(new e.SplittableList(n),a))},c.prototype.applyBlockAttributeAtRange=function(t,e,i){var o,r,a,s;return r=(a=this.expandRangeToLineBreaksAndSplitBlocks(i)).document,i=a.range,(o=n(t)).listAttribute?(r=(s=(r=r.removeLastListAttributeAtRange(i,{exceptAttributeName:t})).convertLineBreaksToBlockBreaksInRange(i)).document,i=s.range):r=o.exclusive?r.removeBlockAttributesAtRange(i):o.terminal?r.removeLastTerminalAttributeAtRange(i):r.consolidateBlocksAtRange(i),r.addAttributeAtRange(t,e,i)},c.prototype.removeLastListAttributeAtRange=function(t,e){var i;return null==e&&(e={}),i=this.blockList,this.eachBlockAtRange(t,function(t,o,r){var a;if((a=t.getLastAttribute())&&n(a).listAttribute&&a!==e.exceptAttributeName)return i=i.editObjectAtIndex(r,function(){return t.removeAttribute(a)})}),new this.constructor(i)},c.prototype.removeLastTerminalAttributeAtRange=function(t){var e;return e=this.blockList,this.eachBlockAtRange(t,function(t,i,o){var r;if((r=t.getLastAttribute())&&n(r).terminal)return e=e.editObjectAtIndex(o,function(){return t.removeAttribute(r)})}),new this.constructor(e)},c.prototype.removeBlockAttributesAtRange=function(t){var e;return e=this.blockList,this.eachBlockAtRange(t,function(t,n,i){return t.hasAttributes()?e=e.editObjectAtIndex(i,function(){return t.copyWithoutAttributes()}):void 0}),new this.constructor(e)},c.prototype.expandRangeToLineBreaksAndSplitBlocks=function(t){var e,n,o,r,a,s,l,c,u;return u=(s=t=i(t))[0],r=s[1],c=this.locationFromPosition(u),o=this.locationFromPosition(r),l=(e=this).getBlockAtIndex(c.index),null!=(c.offset=l.findLineBreakInDirectionFromPosition("backward",c.offset))&&(a=e.positionFromLocation(c),e=e.insertBlockBreakAtRange([a,a+1]),o.index+=1,o.offset-=e.getBlockAtIndex(c.index).getLength(),c.index+=1),c.offset=0,0===o.offset&&o.index>c.index?(o.index-=1,o.offset=e.getBlockAtIndex(o.index).getBlockBreakPosition()):("\n"===(n=e.getBlockAtIndex(o.index)).text.getStringAtRange([o.offset-1,o.offset])?o.offset-=1:o.offset=n.findLineBreakInDirectionFromPosition("forward",o.offset),o.offset!==n.getBlockBreakPosition()&&(a=e.positionFromLocation(o),e=e.insertBlockBreakAtRange([a,a+1]))),u=e.positionFromLocation(c),r=e.positionFromLocation(o),{document:e,range:t=i([u,r])}},c.prototype.convertLineBreaksToBlockBreaksInRange=function(t){var e,n,o;return n=(t=i(t))[0],o=this.getStringAtRange(t).slice(0,-1),e=this,o.replace(/.*?\n/g,function(t){return n+=t.length,e=e.insertBlockBreakAtRange([n-1,n])}),{document:e,range:t}},c.prototype.consolidateBlocksAtRange=function(t){var e,n,o,r,a;return a=(o=t=i(t))[0],n=o[1],r=this.locationFromPosition(a).index,e=this.locationFromPosition(n).index,new this.constructor(this.blockList.consolidateFromIndexToIndex(r,e))},c.prototype.getDocumentAtRange=function(t){var e;return t=i(t),e=this.blockList.getSplittableListInRange(t).toArray(),new this.constructor(e)},c.prototype.getStringAtRange=function(t){var e,n;return(n=t=i(t))[n.length-1]!==this.getLength()&&(e=-1),this.getDocumentAtRange(t).toString().slice(0,e)},c.prototype.getBlockAtIndex=function(t){return this.blockList.getObjectAtIndex(t)},c.prototype.getBlockAtPosition=function(t){var e;return e=this.locationFromPosition(t).index,this.getBlockAtIndex(e)},c.prototype.getTextAtIndex=function(t){var e;return null!=(e=this.getBlockAtIndex(t))?e.text:void 0},c.prototype.getTextAtPosition=function(t){var e;return e=this.locationFromPosition(t).index,this.getTextAtIndex(e)},c.prototype.getPieceAtPosition=function(t){var e,n,i;return e=(i=this.locationFromPosition(t)).index,n=i.offset,this.getTextAtIndex(e).getPieceAtPosition(n)},c.prototype.getCharacterAtPosition=function(t){var e,n,i;return e=(i=this.locationFromPosition(t)).index,n=i.offset,this.getTextAtIndex(e).getStringAtRange([n,n+1])},c.prototype.getLength=function(){return this.blockList.getEndPosition()},c.prototype.getBlocks=function(){return this.blockList.toArray()},c.prototype.getBlockCount=function(){return this.blockList.length},c.prototype.getEditCount=function(){return this.editCount},c.prototype.eachBlock=function(t){return this.blockList.eachObject(t)},c.prototype.eachBlockAtRange=function(t,e){var n,o,r,a,s,l,c,u,d,p,h,f;if(h=(l=t=i(t))[0],r=l[1],p=this.locationFromPosition(h),o=this.locationFromPosition(r),p.index===o.index)return n=this.getBlockAtIndex(p.index),f=[p.offset,o.offset],e(n,f,p.index);for(d=[],s=a=c=p.index,u=o.index;u>=c?u>=a:a>=u;s=u>=c?++a:--a)(n=this.getBlockAtIndex(s))?(f=function(){switch(s){case p.index:return[p.offset,n.text.getLength()];case o.index:return[0,o.offset];default:return[0,n.text.getLength()]}}(),d.push(e(n,f,s))):d.push(void 0);return d},c.prototype.getCommonAttributesAtRange=function(t){var n,r,a;return r=(t=i(t))[0],o(t)?this.getCommonAttributesAtPosition(r):(a=[],n=[],this.eachBlockAtRange(t,function(t,e){return e[0]!==e[1]?(a.push(t.text.getCommonAttributesAtRange(e)),n.push(u(t))):void 0}),e.Hash.fromCommonAttributesOfObjects(a).merge(e.Hash.fromCommonAttributesOfObjects(n)).toObject())},c.prototype.getCommonAttributesAtPosition=function(t){var n,i,o,r,a,s,c,d,p,h;if(a=(p=this.locationFromPosition(t)).index,d=p.offset,!(o=this.getBlockAtIndex(a)))return{};for(c in r=u(o),n=o.text.getAttributesAtPosition(d),i=o.text.getAttributesAtPosition(d-1),s=function(){var t,n;for(c in n=[],t=e.config.textAttributes)(h=t[c]).inheritable&&n.push(c);return n}(),i)((h=i[c])===n[c]||l.call(s,c)>=0)&&(r[c]=h);return r},c.prototype.getRangeOfCommonAttributeAtPosition=function(t,e){var n,o,r,a,s,l,c,u;return r=(s=this.locationFromPosition(e)).index,a=s.offset,u=(l=this.getTextAtIndex(r).getExpandedRangeForAttributeAtOffset(t,a))[0],o=l[1],c=this.positionFromLocation({index:r,offset:u}),n=this.positionFromLocation({index:r,offset:o}),i([c,n])},c.prototype.getBaseBlockAttributes=function(){var t,e,n,i,o,r,a;for(t=this.getBlockAtIndex(0).getAttributes(),n=i=1,a=this.getBlockCount();a>=1?a>i:i>a;n=a>=1?++i:--i)e=this.getBlockAtIndex(n).getAttributes(),r=Math.min(t.length,e.length),t=function(){var n,i,a;for(a=[],o=n=0,i=r;(i>=0?i>n:n>i)&&e[o]===t[o];o=i>=0?++n:--n)a.push(e[o]);return a}();return t},u=function(t){var e,n;return n={},(e=t.getLastAttribute())&&(n[e]=!0),n},c.prototype.getAttachmentById=function(t){var e,n,i,o;for(n=0,i=(o=this.getAttachments()).length;i>n;n++)if((e=o[n]).id===t)return e},c.prototype.getAttachmentPieces=function(){var t;return t=[],this.blockList.eachObject(function(e){var n;return n=e.text,t=t.concat(n.getAttachmentPieces())}),t},c.prototype.getAttachments=function(){var t,e,n,i,o;for(o=[],t=0,e=(i=this.getAttachmentPieces()).length;e>t;t++)n=i[t],o.push(n.attachment);return o},c.prototype.getRangeOfAttachment=function(t){var e,n,o,r,a,s,l;for(r=0,n=e=0,o=(a=this.blockList.toArray()).length;o>e;n=++e){if(l=(s=a[n].text).getRangeOfAttachment(t))return i([r+l[0],r+l[1]]);r+=s.getLength()}},c.prototype.getLocationRangeOfAttachment=function(t){var e;return e=this.getRangeOfAttachment(t),this.locationRangeFromRange(e)},c.prototype.getAttachmentPieceForAttachment=function(t){var e,n,i,o;for(e=0,n=(o=this.getAttachmentPieces()).length;n>e;e++)if((i=o[e]).attachment===t)return i},c.prototype.findRangesForBlockAttribute=function(t){var e,n,i,o,r,a,s;for(r=0,a=[],n=0,i=(s=this.getBlocks()).length;i>n;n++)o=(e=s[n]).getLength(),e.hasAttribute(t)&&a.push([r,r+o]),r+=o;return a},c.prototype.findRangesForTextAttribute=function(t,e){var n,i,o,r,a,s,l,c,u,d;for(d=(null!=e?e:{}).withValue,s=0,l=[],c=[],r=function(e){return null!=d?e.getAttribute(t)===d:e.hasAttribute(t)},n=0,i=(u=this.getPieces()).length;i>n;n++)o=(a=u[n]).getLength(),r(a)&&(l[1]===s?l[1]=s+o:c.push(l=[s,s+o])),s+=o;return c},c.prototype.locationFromPosition=function(t){var e,n;return null!=(n=this.blockList.findIndexAndOffsetAtPosition(Math.max(0,t))).index?n:{index:(e=this.getBlocks()).length-1,offset:e[e.length-1].getLength()}},c.prototype.positionFromLocation=function(t){return this.blockList.findPositionAtIndexAndOffset(t.index,t.offset)},c.prototype.locationRangeFromPosition=function(t){return i(this.locationFromPosition(t))},c.prototype.locationRangeFromRange=function(t){var e,n,o,r;if(t=i(t))return r=t[0],n=t[1],o=this.locationFromPosition(r),e=this.locationFromPosition(n),i([o,e])},c.prototype.rangeFromLocationRange=function(t){var e,n;return t=i(t),e=this.positionFromLocation(t[0]),o(t)||(n=this.positionFromLocation(t[1])),i([e,n])},c.prototype.isEqualTo=function(t){return this.blockList.isEqualTo(null!=t?t.blockList:void 0)},c.prototype.getTexts=function(){var t,e,n,i,o;for(o=[],e=0,n=(i=this.getBlocks()).length;n>e;e++)t=i[e],o.push(t.text);return o},c.prototype.getPieces=function(){var t,e,n,i,o;for(n=[],t=0,e=(i=this.getTexts()).length;e>t;t++)o=i[t],n.push.apply(n,o.getPieces());return n},c.prototype.getObjects=function(){return this.getBlocks().concat(this.getTexts()).concat(this.getPieces())},c.prototype.toSerializableDocument=function(){var t;return t=[],this.blockList.eachObject(function(e){return t.push(e.copyWithText(e.text.toSerializableText()))}),new this.constructor(t)},c.prototype.toString=function(){return this.blockList.toString()},c.prototype.toJSON=function(){return this.blockList.toJSON()},c.prototype.toConsole=function(){var t;return JSON.stringify(function(){var e,n,i,o;for(o=[],e=0,n=(i=this.blockList.toArray()).length;n>e;e++)t=i[e],o.push(JSON.parse(t.text.toConsole()));return o}.call(this))},c}(e.Object)}.call(this),function(){
e.LineBreakInsertion=function(){function t(t){var e;this.composition=t,this.document=this.composition.document,e=this.composition.getSelectedRange(),this.startPosition=e[0],this.endPosition=e[1],this.startLocation=this.document.locationFromPosition(this.startPosition),this.endLocation=this.document.locationFromPosition(this.endPosition),this.block=this.document.getBlockAtIndex(this.endLocation.index),this.breaksOnReturn=this.block.breaksOnReturn(),this.previousCharacter=this.block.text.getStringAtPosition(this.endLocation.offset-1),this.nextCharacter=this.block.text.getStringAtPosition(this.endLocation.offset)}return t.prototype.shouldInsertBlockBreak=function(){return this.block.hasAttributes()&&this.block.isListItem()&&!this.block.isEmpty()?0!==this.startLocation.offset:this.breaksOnReturn&&"\n"!==this.nextCharacter},t.prototype.shouldBreakFormattedBlock=function(){return this.block.hasAttributes()&&!this.block.isListItem()&&(this.breaksOnReturn&&"\n"===this.nextCharacter||"\n"===this.previousCharacter)},t.prototype.shouldDecreaseListLevel=function(){return this.block.hasAttributes()&&this.block.isListItem()&&this.block.isEmpty()},t.prototype.shouldPrependListItem=function(){return this.block.isListItem()&&0===this.startLocation.offset&&!this.block.isEmpty()},t.prototype.shouldRemoveLastBlockAttribute=function(){return this.block.hasAttributes()&&!this.block.isListItem()&&this.block.isEmpty()},t}()}.call(this),function(){var t,n,i,o,r,a,s,l,c,u,d=function(t,e){function n(){this.constructor=t}for(var i in e)p.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},p={}.hasOwnProperty;a=e.normalizeRange,c=e.rangesAreEqual,l=e.rangeIsCollapsed,s=e.objectsAreEqual,t=e.arrayStartsWith,u=e.summarizeArrayChange,i=e.getAllAttributeNames,o=e.getBlockConfig,r=e.getTextConfig,n=e.extend,e.Composition=function(p){function h(){this.document=new e.Document,this.attachments=[],this.currentAttributes={},this.revision=0}var f;return d(h,p),h.prototype.setDocument=function(t){var e;return t.isEqualTo(this.document)?void 0:(this.document=t,this.refreshAttachments(),this.revision++,null!=(e=this.delegate)&&"function"==typeof e.compositionDidChangeDocument?e.compositionDidChangeDocument(t):void 0)},h.prototype.getSnapshot=function(){return{document:this.document,selectedRange:this.getSelectedRange()}},h.prototype.loadSnapshot=function(t){var n,i,o,r;return n=t.document,r=t.selectedRange,null!=(i=this.delegate)&&"function"==typeof i.compositionWillLoadSnapshot&&i.compositionWillLoadSnapshot(),this.setDocument(null!=n?n:new e.Document),this.setSelection(null!=r?r:[0,0]),null!=(o=this.delegate)&&"function"==typeof o.compositionDidLoadSnapshot?o.compositionDidLoadSnapshot():void 0},h.prototype.insertText=function(t,e){var n,i,o,r;return r=(null!=e?e:{updatePosition:!0}).updatePosition,i=this.getSelectedRange(),this.setDocument(this.document.insertTextAtRange(t,i)),n=(o=i[0])+t.getLength(),r&&this.setSelection(n),this.notifyDelegateOfInsertionAtRange([o,n])},h.prototype.insertBlock=function(t){var n;return null==t&&(t=new e.Block),n=new e.Document([t]),this.insertDocument(n)},h.prototype.insertDocument=function(t){var n,i,o;return null==t&&(t=new e.Document),i=this.getSelectedRange(),this.setDocument(this.document.insertDocumentAtRange(t,i)),n=(o=i[0])+t.getLength(),this.setSelection(n),this.notifyDelegateOfInsertionAtRange([o,n])},h.prototype.insertString=function(t,n){var i,o;return i=this.getCurrentTextAttributes(),o=e.Text.textForStringWithAttributes(t,i),this.insertText(o,n)},h.prototype.insertBlockBreak=function(){var t,e,n;return e=this.getSelectedRange(),this.setDocument(this.document.insertBlockBreakAtRange(e)),t=(n=e[0])+1,this.setSelection(t),this.notifyDelegateOfInsertionAtRange([n,t])},h.prototype.insertLineBreak=function(){var t,n;return(n=new e.LineBreakInsertion(this)).shouldDecreaseListLevel()?(this.decreaseListLevel(),this.setSelection(n.startPosition)):n.shouldPrependListItem()?(t=new e.Document([n.block.copyWithoutText()]),this.insertDocument(t)):n.shouldInsertBlockBreak()?this.insertBlockBreak():n.shouldRemoveLastBlockAttribute()?this.removeLastBlockAttribute():n.shouldBreakFormattedBlock()?this.breakFormattedBlock(n):this.insertString("\n")},h.prototype.insertHTML=function(t){var n,i,o,r;return n=e.Document.fromHTML(t),o=this.getSelectedRange(),this.setDocument(this.document.mergeDocumentAtRange(n,o)),i=(r=o[0])+n.getLength()-1,this.setSelection(i),this.notifyDelegateOfInsertionAtRange([r,i])},h.prototype.replaceHTML=function(t){var n,i,o;return n=e.Document.fromHTML(t).copyUsingObjectsFromDocument(this.document),i=this.getLocationRange({strict:!1}),o=this.document.rangeFromLocationRange(i),this.setDocument(n),this.setSelection(o)},h.prototype.insertFile=function(t){return this.insertFiles([t])},h.prototype.insertFiles=function(t){var n,i,o,r,a,s;for(i=[],r=0,a=t.length;a>r;r++)o=t[r],(null!=(s=this.delegate)?s.compositionShouldAcceptFile(o):void 0)&&(n=e.Attachment.attachmentForFile(o),i.push(n));return this.insertAttachments(i)},h.prototype.insertAttachment=function(t){return this.insertAttachments([t])},h.prototype.insertAttachments=function(t){var n,i,o,r,a,s,l,c,u;for(c=new e.Text,r=0,a=t.length;a>r;r++)u=(n=t[r]).getType(),s=null!=(l=e.config.attachments[u])?l.presentation:void 0,o=this.getCurrentTextAttributes(),s&&(o.presentation=s),i=e.Text.textForAttachmentWithAttributes(n,o),c=c.appendText(i);return this.insertText(c)},h.prototype.shouldManageDeletingInDirection=function(t){var e;if(e=this.getLocationRange(),l(e)){if("backward"===t&&0===e[0].offset)return!0;if(this.shouldManageMovingCursorInDirection(t))return!0}else if(e[0].index!==e[1].index)return!0;return!1},h.prototype.deleteInDirection=function(t,e){var n,i,o,r,a,s,c,u;return r=(null!=e?e:{}).length,a=this.getLocationRange(),s=this.getSelectedRange(),(c=l(s))?o="backward"===t&&0===a[0].offset:u=a[0].index!==a[1].index,!(o&&this.canDecreaseBlockAttributeLevel()&&(i=this.getBlock(),i.isListItem()?this.decreaseListLevel():this.decreaseBlockAttributeLevel(),this.setSelection(s[0]),i.isEmpty()))&&(c&&(s=this.getExpandedRangeInDirection(t,{length:r}),"backward"===t&&(n=this.getAttachmentAtRange(s))),n?(this.editAttachment(n),!1):(this.setDocument(this.document.removeTextAtRange(s)),this.setSelection(s[0]),!o&&!u&&void 0))},h.prototype.moveTextFromRange=function(t){var e;return e=this.getSelectedRange()[0],this.setDocument(this.document.moveTextFromRangeToPosition(t,e)),this.setSelection(e)},h.prototype.removeAttachment=function(t){var e;return(e=this.document.getRangeOfAttachment(t))?(this.stopEditingAttachment(),this.setDocument(this.document.removeTextAtRange(e)),this.setSelection(e[0])):void 0},h.prototype.removeLastBlockAttribute=function(){var t,e,n,i;return i=(n=this.getSelectedRange())[0],e=n[1],t=this.document.getBlockAtPosition(e),this.removeCurrentAttribute(t.getLastAttribute()),this.setSelection(i)},f=" ",h.prototype.insertPlaceholder=function(){return this.placeholderPosition=this.getPosition(),this.insertString(f)},h.prototype.selectPlaceholder=function(){return null!=this.placeholderPosition?(this.setSelectedRange([this.placeholderPosition,this.placeholderPosition+f.length]),this.getSelectedRange()):void 0},h.prototype.forgetPlaceholder=function(){return this.placeholderPosition=null},h.prototype.hasCurrentAttribute=function(t){var e;return null!=(e=this.currentAttributes[t])&&!1!==e},h.prototype.toggleCurrentAttribute=function(t){var e;return(e=!this.currentAttributes[t])?this.setCurrentAttribute(t,e):this.removeCurrentAttribute(t)},h.prototype.canSetCurrentAttribute=function(t){return o(t)?this.canSetCurrentBlockAttribute(t):this.canSetCurrentTextAttribute(t)},h.prototype.canSetCurrentTextAttribute=function(){var t,e,n,i;if(t=this.getSelectedDocument()){for(e=0,n=(i=t.getAttachments()).length;n>e;e++)if(!i[e].hasContent())return!1;return!0}},h.prototype.canSetCurrentBlockAttribute=function(){var t;if(t=this.getBlock())return!t.isTerminalBlock()},h.prototype.setCurrentAttribute=function(t,e){return o(t)?this.setBlockAttribute(t,e):(this.setTextAttribute(t,e),this.currentAttributes[t]=e,this.notifyDelegateOfCurrentAttributesChange())},h.prototype.setTextAttribute=function(t,n){var i,o;if(i=this.getSelectedRange())return i[0]!==i[1]?this.setDocument(this.document.addAttributeAtRange(t,n,i)):"href"===t?(o=e.Text.textForStringWithAttributes(n,{href:n}),this.insertText(o)):void 0},h.prototype.setBlockAttribute=function(t,e){var n;if(n=this.getSelectedRange())return this.canSetCurrentAttribute(t)?(this.getBlock(),this.setDocument(this.document.applyBlockAttributeAtRange(t,e,n)),this.setSelection(n)):void 0},h.prototype.removeCurrentAttribute=function(t){return o(t)?(this.removeBlockAttribute(t),this.updateCurrentAttributes()):(this.removeTextAttribute(t),delete this.currentAttributes[t],this.notifyDelegateOfCurrentAttributesChange())},h.prototype.removeTextAttribute=function(t){var e;if(e=this.getSelectedRange())return this.setDocument(this.document.removeAttributeAtRange(t,e))},h.prototype.removeBlockAttribute=function(t){var e;if(e=this.getSelectedRange())return this.setDocument(this.document.removeAttributeAtRange(t,e))},h.prototype.canDecreaseNestingLevel=function(){var t;return(null!=(t=this.getBlock())?t.getNestingLevel():void 0)>0},h.prototype.canIncreaseNestingLevel=function(){var e,n,i;if(e=this.getBlock())return null!=(i=o(e.getLastNestableAttribute()))&&i.listAttribute?(n=this.getPreviousBlock())?t(n.getListItemAttributes(),e.getListItemAttributes()):void 0:e.getNestingLevel()>0},h.prototype.decreaseNestingLevel=function(){var t;if(t=this.getBlock())return this.setDocument(this.document.replaceBlock(t,t.decreaseNestingLevel()))},h.prototype.increaseNestingLevel=function(){var t;if(t=this.getBlock())return this.setDocument(this.document.replaceBlock(t,t.increaseNestingLevel()))},h.prototype.canDecreaseBlockAttributeLevel=function(){var t;return(null!=(t=this.getBlock())?t.getAttributeLevel():void 0)>0},h.prototype.decreaseBlockAttributeLevel=function(){var t,e;return(t=null!=(e=this.getBlock())?e.getLastAttribute():void 0)?this.removeCurrentAttribute(t):void 0},h.prototype.decreaseListLevel=function(){var t,e,n,i,o,r;for(r=this.getSelectedRange()[0],n=o=this.document.locationFromPosition(r).index,t=this.getBlock().getAttributeLevel();(e=this.document.getBlockAtIndex(n+1))&&e.isListItem()&&e.getAttributeLevel()>t;)n++;return r=this.document.positionFromLocation({index:o,offset:0}),i=this.document.positionFromLocation({index:n,offset:0}),this.setDocument(this.document.removeLastListAttributeAtRange([r,i]))},h.prototype.updateCurrentAttributes=function(){var t,e,n,o,r,a;if(a=this.getSelectedRange({ignoreLock:!0})){for(e=this.document.getCommonAttributesAtRange(a),n=0,o=(r=i()).length;o>n;n++)e[t=r[n]]||this.canSetCurrentAttribute(t)||(e[t]=!1);if(!s(e,this.currentAttributes))return this.currentAttributes=e,this.notifyDelegateOfCurrentAttributesChange()}},h.prototype.getCurrentAttributes=function(){return n.call({},this.currentAttributes)},h.prototype.getCurrentTextAttributes=function(){var t,e,n,i;for(e in t={},n=this.currentAttributes)!1!==(i=n[e])&&r(e)&&(t[e]=i);return t},h.prototype.freezeSelection=function(){return this.setCurrentAttribute("frozen",!0)},h.prototype.thawSelection=function(){return this.removeCurrentAttribute("frozen")},h.prototype.hasFrozenSelection=function(){return this.hasCurrentAttribute("frozen")},h.proxyMethod("getSelectionManager().getPointRange"),h.proxyMethod("getSelectionManager().setLocationRangeFromPointRange"),h.proxyMethod("getSelectionManager().createLocationRangeFromDOMRange"),h.proxyMethod("getSelectionManager().locationIsCursorTarget"),h.proxyMethod("getSelectionManager().selectionIsExpanded"),h.proxyMethod("delegate?.getSelectionManager"),h.prototype.setSelection=function(t){var e,n;return e=this.document.locationRangeFromRange(t),null!=(n=this.delegate)?n.compositionDidRequestChangingSelectionToLocationRange(e):void 0},h.prototype.getSelectedRange=function(){var t;return(t=this.getLocationRange())?this.document.rangeFromLocationRange(t):void 0},h.prototype.setSelectedRange=function(t){var e;return e=this.document.locationRangeFromRange(t),this.getSelectionManager().setLocationRange(e)},h.prototype.getPosition=function(){var t;return(t=this.getLocationRange())?this.document.positionFromLocation(t[0]):void 0},h.prototype.getLocationRange=function(t){var e,n;return null!=(e=null!=(n=this.targetLocationRange)?n:this.getSelectionManager().getLocationRange(t))?e:a({index:0,offset:0})},h.prototype.withTargetLocationRange=function(t,e){var n;this.targetLocationRange=t;try{n=e()}finally{this.targetLocationRange=null}return n},h.prototype.withTargetRange=function(t,e){var n;return n=this.document.locationRangeFromRange(t),this.withTargetLocationRange(n,e)},h.prototype.withTargetDOMRange=function(t,e){var n;return n=this.createLocationRangeFromDOMRange(t,{strict:!1}),this.withTargetLocationRange(n,e)},h.prototype.getExpandedRangeInDirection=function(t,e){var n,i,o,r;return i=(null!=e?e:{}).length,r=(o=this.getSelectedRange())[0],n=o[1],"backward"===t?i?r-=i:r=this.translateUTF16PositionFromOffset(r,-1):i?n+=i:n=this.translateUTF16PositionFromOffset(n,1),a([r,n])},h.prototype.shouldManageMovingCursorInDirection=function(t){var e;return!!this.editingAttachment||(e=this.getExpandedRangeInDirection(t),null!=this.getAttachmentAtRange(e))},h.prototype.moveCursorInDirection=function(t){var e,n,i,o;return this.editingAttachment?i=this.document.getRangeOfAttachment(this.editingAttachment):(o=this.getSelectedRange(),i=this.getExpandedRangeInDirection(t),n=!c(o,i)),this.setSelectedRange("backward"===t?i[0]:i[1]),n&&(e=this.getAttachmentAtRange(i))?this.editAttachment(e):void 0},h.prototype.expandSelectionInDirection=function(t,e){var n,i;return n=(null!=e?e:{}).length,i=this.getExpandedRangeInDirection(t,{length:n}),this.setSelectedRange(i)},h.prototype.expandSelectionForEditing=function(){return this.hasCurrentAttribute("href")?this.expandSelectionAroundCommonAttribute("href"):void 0},h.prototype.expandSelectionAroundCommonAttribute=function(t){var e,n;return e=this.getPosition(),n=this.document.getRangeOfCommonAttributeAtPosition(t,e),this.setSelectedRange(n)},h.prototype.selectionContainsAttachments=function(){var t;return(null!=(t=this.getSelectedAttachments())?t.length:void 0)>0},h.prototype.selectionIsInCursorTarget=function(){return this.editingAttachment||this.positionIsCursorTarget(this.getPosition())},h.prototype.positionIsCursorTarget=function(t){var e;return(e=this.document.locationFromPosition(t))?this.locationIsCursorTarget(e):void 0},h.prototype.positionIsBlockBreak=function(t){var e;return null!=(e=this.document.getPieceAtPosition(t))?e.isBlockBreak():void 0},h.prototype.getSelectedDocument=function(){var t;return(t=this.getSelectedRange())?this.document.getDocumentAtRange(t):void 0},h.prototype.getSelectedAttachments=function(){var t;return null!=(t=this.getSelectedDocument())?t.getAttachments():void 0},h.prototype.getAttachments=function(){return this.attachments.slice(0)},h.prototype.refreshAttachments=function(){var t,e,n,i,o,r,a,s,l,c,d,p;for(n=this.document.getAttachments(),t=(s=u(this.attachments,n)).added,d=s.removed,this.attachments=n,i=0,r=d.length;r>i;i++)(e=d[i]).delegate=null,null!=(l=this.delegate)&&"function"==typeof l.compositionDidRemoveAttachment&&l.compositionDidRemoveAttachment(e);for(p=[],o=0,a=t.length;a>o;o++)(e=t[o]).delegate=this,p.push(null!=(c=this.delegate)&&"function"==typeof c.compositionDidAddAttachment?c.compositionDidAddAttachment(e):void 0);return p},h.prototype.attachmentDidChangeAttributes=function(t){var e;return this.revision++,null!=(e=this.delegate)&&"function"==typeof e.compositionDidEditAttachment?e.compositionDidEditAttachment(t):void 0},h.prototype.attachmentDidChangePreviewURL=function(t){var e;return this.revision++,null!=(e=this.delegate)&&"function"==typeof e.compositionDidChangeAttachmentPreviewURL?e.compositionDidChangeAttachmentPreviewURL(t):void 0},h.prototype.editAttachment=function(t,e){var n;if(t!==this.editingAttachment)return this.stopEditingAttachment(),this.editingAttachment=t,null!=(n=this.delegate)&&"function"==typeof n.compositionDidStartEditingAttachment?n.compositionDidStartEditingAttachment(this.editingAttachment,e):void 0},h.prototype.stopEditingAttachment=function(){var t;if(this.editingAttachment)return null!=(t=this.delegate)&&"function"==typeof t.compositionDidStopEditingAttachment&&t.compositionDidStopEditingAttachment(this.editingAttachment),this.editingAttachment=null},h.prototype.updateAttributesForAttachment=function(t,e){return this.setDocument(this.document.updateAttributesForAttachment(t,e))},h.prototype.removeAttributeForAttachment=function(t,e){return this.setDocument(this.document.removeAttributeForAttachment(t,e))},h.prototype.breakFormattedBlock=function(t){var n,i,o,r,a;return i=t.document,n=t.block,a=[(r=t.startPosition)-1,r],n.getBlockBreakPosition()===t.startLocation.offset?(n.breaksOnReturn()&&"\n"===t.nextCharacter?r+=1:i=i.removeTextAtRange(a),a=[r,r]):"\n"===t.nextCharacter?"\n"===t.previousCharacter?a=[r-1,r+1]:(a=[r,r+1],r+=1):t.startLocation.offset-1!=0&&(r+=1),o=new e.Document([n.removeLastAttribute().copyWithoutText()]),this.setDocument(i.insertDocumentAtRange(o,a)),this.setSelection(r)},h.prototype.getPreviousBlock=function(){var t,e;return(e=this.getLocationRange())&&(t=e[0].index)>0?this.document.getBlockAtIndex(t-1):void 0},h.prototype.getBlock=function(){var t;return(t=this.getLocationRange())?this.document.getBlockAtIndex(t[0].index):void 0},h.prototype.getAttachmentAtRange=function(t){var n;return(n=this.document.getDocumentAtRange(t)).toString()===e.OBJECT_REPLACEMENT_CHARACTER+"\n"?n.getAttachments()[0]:void 0},h.prototype.notifyDelegateOfCurrentAttributesChange=function(){var t;return null!=(t=this.delegate)&&"function"==typeof t.compositionDidChangeCurrentAttributes?t.compositionDidChangeCurrentAttributes(this.currentAttributes):void 0},h.prototype.notifyDelegateOfInsertionAtRange=function(t){var e;return null!=(e=this.delegate)&&"function"==typeof e.compositionDidPerformInsertionAtRange?e.compositionDidPerformInsertionAtRange(t):void 0},h.prototype.translateUTF16PositionFromOffset=function(t,e){var n,i;return n=(i=this.document.toUTF16String()).offsetFromUCS2Offset(t),i.offsetToUCS2Offset(n+e)},h}(e.BasicObject)}.call(this),function(){var t=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;e.UndoManager=function(e){function n(t){this.composition=t,this.undoEntries=[],this.redoEntries=[]}var i;return t(n,e),n.prototype.recordUndoEntry=function(t,e){var n,o,r,a,s;return o=(a=null!=e?e:{}).context,n=a.consolidatable,r=this.undoEntries.slice(-1)[0],n&&i(r,t,o)?void 0:(s=this.createEntry({description:t,context:o}),this.undoEntries.push(s),this.redoEntries=[])},n.prototype.undo=function(){var t,e;return(e=this.undoEntries.pop())?(t=this.createEntry(e),this.redoEntries.push(t),this.composition.loadSnapshot(e.snapshot)):void 0},n.prototype.redo=function(){var t,e;return(t=this.redoEntries.pop())?(e=this.createEntry(t),this.undoEntries.push(e),this.composition.loadSnapshot(t.snapshot)):void 0},n.prototype.canUndo=function(){return this.undoEntries.length>0},n.prototype.canRedo=function(){return this.redoEntries.length>0},n.prototype.createEntry=function(t){var e,n,i;return n=(i=null!=t?t:{}).description,e=i.context,{description:null!=n?n.toString():void 0,context:JSON.stringify(e),snapshot:this.composition.getSnapshot()}},i=function(t,e,n){return(null!=t?t.description:void 0)===(null!=e?e.toString():void 0)&&(null!=t?t.context:void 0)===JSON.stringify(n)},n}(e.BasicObject)}.call(this),function(){var t;e.attachmentGalleryFilter=function(e){var n;return(n=new t(e)).perform(),n.getSnapshot()},t=function(){function t(t){this.document=t.document,this.selectedRange=t.selectedRange}var e,n,i;return e="attachmentGallery",n="presentation",i="gallery",t.prototype.perform=function(){return this.removeBlockAttribute(),this.applyBlockAttribute()},t.prototype.getSnapshot=function(){return{document:this.document,selectedRange:this.selectedRange}},t.prototype.removeBlockAttribute=function(){var t,n,i,o,r;for(r=[],t=0,n=(o=this.findRangesOfBlocks()).length;n>t;t++)i=o[t],r.push(this.document=this.document.removeAttributeAtRange(e,i));return r},t.prototype.applyBlockAttribute=function(){var t,n,i,o,r,a;for(i=0,a=[],t=0,n=(r=this.findRangesOfPieces()).length;n>t;t++)(o=r[t])[1]-o[0]>1&&(o[0]+=i,o[1]+=i,"\n"!==this.document.getCharacterAtPosition(o[1])&&(this.document=this.document.insertBlockBreakAtRange(o[1]),o[1]<this.selectedRange[1]&&this.moveSelectedRangeForward(),o[1]++,i++),0!==o[0]&&"\n"!==this.document.getCharacterAtPosition(o[0]-1)&&(this.document=this.document.insertBlockBreakAtRange(o[0]),o[0]<this.selectedRange[0]&&this.moveSelectedRangeForward(),o[0]++,i++),a.push(this.document=this.document.applyBlockAttributeAtRange(e,!0,o)));return a},t.prototype.findRangesOfBlocks=function(){return this.document.findRangesForBlockAttribute(e)},t.prototype.findRangesOfPieces=function(){return this.document.findRangesForTextAttribute(n,{withValue:i})},t.prototype.moveSelectedRangeForward=function(){return this.selectedRange[0]+=1,this.selectedRange[1]+=1},t}()}.call(this),function(){e.Editor=function(){function t(t,i,o){this.composition=t,this.selectionManager=i,this.element=o,this.undoManager=new e.UndoManager(this.composition),this.filters=n.slice(0)}var n;return n=[e.attachmentGalleryFilter],t.prototype.loadDocument=function(t){return this.loadSnapshot({document:t,selectedRange:[0,0]})},t.prototype.loadHTML=function(t){return null==t&&(t=""),this.loadDocument(e.Document.fromHTML(t,{referenceElement:this.element}))},t.prototype.loadJSON=function(t){var n,i;return n=t.document,i=t.selectedRange,n=e.Document.fromJSON(n),this.loadSnapshot({document:n,selectedRange:i})},t.prototype.loadSnapshot=function(t){return this.undoManager=new e.UndoManager(this.composition),this.composition.loadSnapshot(t)},t.prototype.getDocument=function(){return this.composition.document},t.prototype.getSelectedDocument=function(){return this.composition.getSelectedDocument()},t.prototype.getSnapshot=function(){return this.composition.getSnapshot()},t.prototype.toJSON=function(){return this.getSnapshot()},t.prototype.deleteInDirection=function(t){return this.composition.deleteInDirection(t)},t.prototype.insertAttachment=function(t){return this.composition.insertAttachment(t)},t.prototype.insertDocument=function(t){return this.composition.insertDocument(t)},t.prototype.insertFile=function(t){return this.composition.insertFile(t)},t.prototype.insertFiles=function(t){return this.composition.insertFiles(t)},t.prototype.insertHTML=function(t){return this.composition.insertHTML(t)},t.prototype.insertString=function(t){return this.composition.insertString(t)},t.prototype.insertText=function(t){return this.composition.insertText(t)},t.prototype.insertLineBreak=function(){return this.composition.insertLineBreak()},t.prototype.getSelectedRange=function(){return this.composition.getSelectedRange()},t.prototype.getPosition=function(){return this.composition.getPosition()},t.prototype.getClientRectAtPosition=function(t){var e;return e=this.getDocument().locationRangeFromRange([t,t+1]),this.selectionManager.getClientRectAtLocationRange(e)},t.prototype.expandSelectionInDirection=function(t){return this.composition.expandSelectionInDirection(t)},t.prototype.moveCursorInDirection=function(t){return this.composition.moveCursorInDirection(t)},t.prototype.setSelectedRange=function(t){return this.composition.setSelectedRange(t)},t.prototype.activateAttribute=function(t,e){return null==e&&(e=!0),this.composition.setCurrentAttribute(t,e)},t.prototype.attributeIsActive=function(t){return this.composition.hasCurrentAttribute(t)},t.prototype.canActivateAttribute=function(t){return this.composition.canSetCurrentAttribute(t)},t.prototype.deactivateAttribute=function(t){return this.composition.removeCurrentAttribute(t)},t.prototype.canDecreaseNestingLevel=function(){return this.composition.canDecreaseNestingLevel()},t.prototype.canIncreaseNestingLevel=function(){return this.composition.canIncreaseNestingLevel()},t.prototype.decreaseNestingLevel=function(){return this.canDecreaseNestingLevel()?this.composition.decreaseNestingLevel():void 0},t.prototype.increaseNestingLevel=function(){return this.canIncreaseNestingLevel()?this.composition.increaseNestingLevel():void 0},t.prototype.canRedo=function(){return this.undoManager.canRedo()},t.prototype.canUndo=function(){return this.undoManager.canUndo()},t.prototype.recordUndoEntry=function(t,e){var n,i,o;return i=(o=null!=e?e:{}).context,n=o.consolidatable,this.undoManager.recordUndoEntry(t,{context:i,consolidatable:n})},t.prototype.redo=function(){return this.canRedo()?this.undoManager.redo():void 0},t.prototype.undo=function(){return this.canUndo()?this.undoManager.undo():void 0},t}()}.call(this),function(){var t=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;e.ManagedAttachment=function(e){function n(t,e){var n;this.attachmentManager=t,this.attachment=e,n=this.attachment,this.id=n.id,this.file=n.file}return t(n,e),n.prototype.remove=function(){return this.attachmentManager.requestRemovalOfAttachment(this.attachment)},n.proxyMethod("attachment.getAttribute"),n.proxyMethod("attachment.hasAttribute"),n.proxyMethod("attachment.setAttribute"),n.proxyMethod("attachment.getAttributes"),n.proxyMethod("attachment.setAttributes"),n.proxyMethod("attachment.isPending"),n.proxyMethod("attachment.isPreviewable"),n.proxyMethod("attachment.getURL"),n.proxyMethod("attachment.getHref"),n.proxyMethod("attachment.getFilename"),n.proxyMethod("attachment.getFilesize"),n.proxyMethod("attachment.getFormattedFilesize"),n.proxyMethod("attachment.getExtension"),n.proxyMethod("attachment.getContentType"),n.proxyMethod("attachment.getFile"),n.proxyMethod("attachment.setFile"),n.proxyMethod("attachment.releaseFile"),n.proxyMethod("attachment.getUploadProgress"),n.proxyMethod("attachment.setUploadProgress"),n}(e.BasicObject)}.call(this),function(){var t=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;e.AttachmentManager=function(n){function i(t){var e,n,i;for(null==t&&(t=[]),this.managedAttachments={},n=0,i=t.length;i>n;n++)e=t[n],this.manageAttachment(e)}return t(i,n),i.prototype.getAttachments=function(){var t,e,n,i;for(e in i=[],n=this.managedAttachments)t=n[e],i.push(t);return i},i.prototype.manageAttachment=function(t){var n,i;return null!=(n=this.managedAttachments)[i=t.id]?n[i]:n[i]=new e.ManagedAttachment(this,t)},i.prototype.attachmentIsManaged=function(t){return t.id in this.managedAttachments},i.prototype.requestRemovalOfAttachment=function(t){var e;return this.attachmentIsManaged(t)&&null!=(e=this.delegate)&&"function"==typeof e.attachmentManagerDidRequestRemovalOfAttachment?e.attachmentManagerDidRequestRemovalOfAttachment(t):void 0},i.prototype.unmanageAttachment=function(t){var e;return e=this.managedAttachments[t.id],delete this.managedAttachments[t.id],e},i}(e.BasicObject)}.call(this),function(){var t,n,i,o,r,a,s,l,c,u,d;t=e.elementContainsNode,n=e.findChildIndexOfNode,r=e.nodeIsBlockStart,a=e.nodeIsBlockStartComment,o=e.nodeIsBlockContainer,s=e.nodeIsCursorTarget,l=e.nodeIsEmptyTextNode,c=e.nodeIsTextNode,i=e.nodeIsAttachmentElement,u=e.tagName,d=e.walkTree,e.LocationMapper=function(){function e(t){this.element=t}var p,h,f,m;return e.prototype.findLocationFromContainerAndOffset=function(e,i,o){var a,l,u,p,m,g,v;for(g=(null!=o?o:{strict:!0}).strict,l=0,u=!1,p={index:0,offset:0},(a=this.findAttachmentElementParentForNode(e))&&(e=a.parentNode,i=n(a)),v=d(this.element,{usingFilter:f});v.nextNode();){if((m=v.currentNode)===e&&c(e)){s(m)||(p.offset+=i);break}if(m.parentNode===e){if(l++===i)break}else if(!t(e,m)&&l>0)break;r(m,{strict:g})?(u&&p.index++,p.offset=0,u=!0):p.offset+=h(m)}return p},e.prototype.findContainerAndOffsetFromLocation=function(t){var e,i,a,l,u;if(0===t.index&&0===t.offset){for(e=this.element,l=0;e.firstChild;)if(e=e.firstChild,o(e)){l=1;break}return[e,l]}if(i=(u=this.findNodeAndOffsetFromLocation(t))[0],a=u[1],i){if(c(i))0===h(i)?(e=i.parentNode.parentNode,l=n(i.parentNode),s(i,{name:"right"})&&l++):(e=i,l=t.offset-a);else{if(e=i.parentNode,!r(i.previousSibling)&&!o(e))for(;i===e.lastChild&&(i=e,e=e.parentNode,!o(e)););l=n(i),0!==t.offset&&l++}return[e,l]}},e.prototype.findNodeAndOffsetFromLocation=function(t){var e,n,i,o,r,a,l,u;for(l=0,n=0,i=(u=this.getSignificantNodesForIndex(t.index)).length;i>n;n++){if(e=u[n],o=h(e),t.offset<=l+o)if(c(e)){if(r=e,a=l,t.offset===a&&s(r))break}else r||(r=e,a=l);if((l+=o)>t.offset)break}return[r,a]},e.prototype.findAttachmentElementParentForNode=function(t){for(;t&&t!==this.element;){if(i(t))return t;t=t.parentNode}},e.prototype.getSignificantNodesForIndex=function(t){var e,n,i,o,r;for(i=[],r=d(this.element,{usingFilter:p}),o=!1;r.nextNode();)if(n=r.currentNode,a(n)){if(null!=e?e++:e=0,e===t)o=!0;else if(o)break}else o&&i.push(n);return i},h=function(t){return t.nodeType===Node.TEXT_NODE?s(t)?0:t.textContent.length:"br"===u(t)||i(t)?1:0},p=function(t){return m(t)===NodeFilter.FILTER_ACCEPT?f(t):NodeFilter.FILTER_REJECT},m=function(t){return l(t)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},f=function(t){return i(t.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},e}()}.call(this),function(){var t,n,i=[].slice;t=e.getDOMRange,n=e.setDOMRange,e.PointMapper=function(){function e(){}return e.prototype.createDOMRangeFromPoint=function(e){var i,o,r,a,s,l,c,u;if(c=e.x,u=e.y,document.caretPositionFromPoint)return r=(s=document.caretPositionFromPoint(c,u)).offsetNode,o=s.offset,(i=document.createRange()).setStart(r,o),i;if(document.caretRangeFromPoint)return document.caretRangeFromPoint(c,u);if(document.body.createTextRange){a=t();try{(l=document.body.createTextRange()).moveToPoint(c,u),l.select()}catch(d){}return i=t(),n(a),i}},e.prototype.getClientRectsForDOMRange=function(t){var e;return[(e=i.call(t.getClientRects()))[0],e[e.length-1]]},e}()}.call(this),function(){var t,n=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty,r=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};t=e.getDOMRange,e.SelectionChangeObserver=function(e){function o(){this.run=n(this.run,this),this.update=n(this.update,this),this.selectionManagers=[]}var a;return i(o,e),o.prototype.start=function(){return this.started?void 0:(this.started=!0,"onselectionchange"in document?document.addEventListener("selectionchange",this.update,!0):this.run())},o.prototype.stop=function(){return this.started?(this.started=!1,document.removeEventListener("selectionchange",this.update,!0)):void 0},o.prototype.registerSelectionManager=function(t){return r.call(this.selectionManagers,t)<0?(this.selectionManagers.push(t),this.start()):void 0},o.prototype.unregisterSelectionManager=function(t){var e;return this.selectionManagers=function(){var n,i,o,r;for(r=[],n=0,i=(o=this.selectionManagers).length;i>n;n++)(e=o[n])!==t&&r.push(e);return r}.call(this),0===this.selectionManagers.length?this.stop():void 0},o.prototype.notifySelectionManagersOfSelectionChange=function(){var t,e,n,i,o;for(i=[],t=0,e=(n=this.selectionManagers).length;e>t;t++)o=n[t],i.push(o.selectionDidChange());return i},o.prototype.update=function(){var e;return e=t(),a(e,this.domRange)?void 0:(this.domRange=e,this.notifySelectionManagersOfSelectionChange())},o.prototype.reset=function(){return this.domRange=null,this.update()},o.prototype.run=function(){return this.started?(this.update(),requestAnimationFrame(this.run)):void 0},a=function(t,e){return(null!=t?t.startContainer:void 0)===(null!=e?e.startContainer:void 0)&&(null!=t?t.startOffset:void 0)===(null!=e?e.startOffset:void 0)&&(null!=t?t.endContainer:void 0)===(null!=e?e.endContainer:void 0)&&(null!=t?t.endOffset:void 0)===(null!=e?e.endOffset:void 0)},o}(e.BasicObject),null==e.selectionChangeObserver&&(e.selectionChangeObserver=new e.SelectionChangeObserver)}.call(this),function(){var t,n,i,o,r,a,s,l,c,u,d=function(t,e){return function(){
return t.apply(e,arguments)}},p=function(t,e){function n(){this.constructor=t}for(var i in e)h.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},h={}.hasOwnProperty;i=e.getDOMSelection,n=e.getDOMRange,u=e.setDOMRange,t=e.elementContainsNode,a=e.nodeIsCursorTarget,r=e.innerElementIsActive,o=e.handleEvent,s=e.normalizeRange,l=e.rangeIsCollapsed,c=e.rangesAreEqual,e.SelectionManager=function(h){function f(t){this.element=t,this.selectionDidChange=d(this.selectionDidChange,this),this.didMouseDown=d(this.didMouseDown,this),this.locationMapper=new e.LocationMapper(this.element),this.pointMapper=new e.PointMapper,this.lockCount=0,o("mousedown",{onElement:this.element,withCallback:this.didMouseDown})}return p(f,h),f.prototype.getLocationRange=function(t){var e;return null==t&&(t={}),!1===t.strict?this.createLocationRangeFromDOMRange(n(),{strict:!1}):t.ignoreLock?this.currentLocationRange:null!=(e=this.lockedLocationRange)?e:this.currentLocationRange},f.prototype.setLocationRange=function(t){var e;if(!this.lockedLocationRange)return t=s(t),(e=this.createDOMRangeFromLocationRange(t))?(u(e),this.updateCurrentLocationRange(t)):void 0},f.prototype.setLocationRangeFromPointRange=function(t){var e,n;return t=s(t),n=this.getLocationAtPoint(t[0]),e=this.getLocationAtPoint(t[1]),this.setLocationRange([n,e])},f.prototype.getClientRectAtLocationRange=function(t){var e;return(e=this.createDOMRangeFromLocationRange(t))?this.getClientRectsForDOMRange(e)[1]:void 0},f.prototype.locationIsCursorTarget=function(t){var e,n;return e=(n=this.findNodeAndOffsetFromLocation(t))[0],n[1],a(e)},f.prototype.lock=function(){return 0==this.lockCount++?(this.updateCurrentLocationRange(),this.lockedLocationRange=this.getLocationRange()):void 0},f.prototype.unlock=function(){var t;return 0==--this.lockCount&&(t=this.lockedLocationRange,this.lockedLocationRange=null,null!=t)?this.setLocationRange(t):void 0},f.prototype.clearSelection=function(){var t;return null!=(t=i())?t.removeAllRanges():void 0},f.prototype.selectionIsCollapsed=function(){var t;return!0===(null!=(t=n())?t.collapsed:void 0)},f.prototype.selectionIsExpanded=function(){return!this.selectionIsCollapsed()},f.prototype.createLocationRangeFromDOMRange=function(t,e){var n,i;if(null!=t&&this.domRangeWithinElement(t)&&(i=this.findLocationFromContainerAndOffset(t.startContainer,t.startOffset,e)))return t.collapsed||(n=this.findLocationFromContainerAndOffset(t.endContainer,t.endOffset,e)),s([i,n])},f.proxyMethod("locationMapper.findLocationFromContainerAndOffset"),f.proxyMethod("locationMapper.findContainerAndOffsetFromLocation"),f.proxyMethod("locationMapper.findNodeAndOffsetFromLocation"),f.proxyMethod("pointMapper.createDOMRangeFromPoint"),f.proxyMethod("pointMapper.getClientRectsForDOMRange"),f.prototype.didMouseDown=function(){return this.pauseTemporarily()},f.prototype.pauseTemporarily=function(){var e,n,i,r;return this.paused=!0,n=function(e){return function(){var n,o;for(e.paused=!1,clearTimeout(r),n=0,o=i.length;o>n;n++)i[n].destroy();return t(document,e.element)?e.selectionDidChange():void 0}}(this),r=setTimeout(n,200),i=function(){var t,i,r,a;for(a=[],t=0,i=(r=["mousemove","keydown"]).length;i>t;t++)e=r[t],a.push(o(e,{onElement:document,withCallback:n}));return a}()},f.prototype.selectionDidChange=function(){return this.paused||r(this.element)?void 0:this.updateCurrentLocationRange()},f.prototype.updateCurrentLocationRange=function(t){var e;return(null!=t?t:t=this.createLocationRangeFromDOMRange(n()))&&!c(t,this.currentLocationRange)?(this.currentLocationRange=t,null!=(e=this.delegate)&&"function"==typeof e.locationRangeDidChange?e.locationRangeDidChange(this.currentLocationRange.slice(0)):void 0):void 0},f.prototype.createDOMRangeFromLocationRange=function(t){var e,n,i,o;return i=this.findContainerAndOffsetFromLocation(t[0]),n=l(t)?i:null!=(o=this.findContainerAndOffsetFromLocation(t[1]))?o:i,null!=i&&null!=n?((e=document.createRange()).setStart.apply(e,i),e.setEnd.apply(e,n),e):void 0},f.prototype.getLocationAtPoint=function(t){var e,n;return(e=this.createDOMRangeFromPoint(t))&&null!=(n=this.createLocationRangeFromDOMRange(e))?n[0]:void 0},f.prototype.domRangeWithinElement=function(e){return e.collapsed?t(this.element,e.startContainer):t(this.element,e.startContainer)&&t(this.element,e.endContainer)},f}(e.BasicObject)}.call(this),function(){var t,n,i,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty,a=[].slice;n=e.rangeIsCollapsed,i=e.rangesAreEqual,t=e.objectsAreEqual,e.EditorController=function(r){function s(t){var n,i;this.editorElement=t.editorElement,n=t.document,i=t.html,this.selectionManager=new e.SelectionManager(this.editorElement),this.selectionManager.delegate=this,this.composition=new e.Composition,this.composition.delegate=this,this.attachmentManager=new e.AttachmentManager(this.composition.getAttachments()),this.attachmentManager.delegate=this,this.inputController=new(e["Level"+e.config.input.getLevel()+"InputController"])(this.editorElement),this.inputController.delegate=this,this.inputController.responder=this.composition,this.compositionController=new e.CompositionController(this.editorElement,this.composition),this.compositionController.delegate=this,this.toolbarController=new e.ToolbarController(this.editorElement.toolbarElement),this.toolbarController.delegate=this,this.editor=new e.Editor(this.composition,this.selectionManager,this.editorElement),null!=n?this.editor.loadDocument(n):this.editor.loadHTML(i)}var l;return o(s,r),s.prototype.registerSelectionManager=function(){return e.selectionChangeObserver.registerSelectionManager(this.selectionManager)},s.prototype.unregisterSelectionManager=function(){return e.selectionChangeObserver.unregisterSelectionManager(this.selectionManager)},s.prototype.render=function(){return this.compositionController.render()},s.prototype.reparse=function(){return this.composition.replaceHTML(this.editorElement.innerHTML)},s.prototype.compositionDidChangeDocument=function(){return this.notifyEditorElement("document-change"),this.handlingInput?void 0:this.render()},s.prototype.compositionDidChangeCurrentAttributes=function(t){return this.currentAttributes=t,this.toolbarController.updateAttributes(this.currentAttributes),this.updateCurrentActions(),this.notifyEditorElement("attributes-change",{attributes:this.currentAttributes})},s.prototype.compositionDidPerformInsertionAtRange=function(t){return this.pasting?this.pastedRange=t:void 0},s.prototype.compositionShouldAcceptFile=function(t){return this.notifyEditorElement("file-accept",{file:t})},s.prototype.compositionDidAddAttachment=function(t){var e;return e=this.attachmentManager.manageAttachment(t),this.notifyEditorElement("attachment-add",{attachment:e})},s.prototype.compositionDidEditAttachment=function(t){var e;return this.compositionController.rerenderViewForObject(t),e=this.attachmentManager.manageAttachment(t),this.notifyEditorElement("attachment-edit",{attachment:e}),this.notifyEditorElement("change")},s.prototype.compositionDidChangeAttachmentPreviewURL=function(t){return this.compositionController.invalidateViewForObject(t),this.notifyEditorElement("change")},s.prototype.compositionDidRemoveAttachment=function(t){var e;return e=this.attachmentManager.unmanageAttachment(t),this.notifyEditorElement("attachment-remove",{attachment:e})},s.prototype.compositionDidStartEditingAttachment=function(t,e){return this.attachmentLocationRange=this.composition.document.getLocationRangeOfAttachment(t),this.compositionController.installAttachmentEditorForAttachment(t,e),this.selectionManager.setLocationRange(this.attachmentLocationRange)},s.prototype.compositionDidStopEditingAttachment=function(){return this.compositionController.uninstallAttachmentEditor(),this.attachmentLocationRange=null},s.prototype.compositionDidRequestChangingSelectionToLocationRange=function(t){return!this.loadingSnapshot||this.isFocused()?(this.requestedLocationRange=t,this.compositionRevisionWhenLocationRangeRequested=this.composition.revision,this.handlingInput?void 0:this.render()):void 0},s.prototype.compositionWillLoadSnapshot=function(){return this.loadingSnapshot=!0},s.prototype.compositionDidLoadSnapshot=function(){return this.compositionController.refreshViewCache(),this.render(),this.loadingSnapshot=!1},s.prototype.getSelectionManager=function(){return this.selectionManager},s.proxyMethod("getSelectionManager().setLocationRange"),s.proxyMethod("getSelectionManager().getLocationRange"),s.prototype.attachmentManagerDidRequestRemovalOfAttachment=function(t){return this.removeAttachment(t)},s.prototype.compositionControllerWillSyncDocumentView=function(){return this.inputController.editorWillSyncDocumentView(),this.selectionManager.lock(),this.selectionManager.clearSelection()},s.prototype.compositionControllerDidSyncDocumentView=function(){return this.inputController.editorDidSyncDocumentView(),this.selectionManager.unlock(),this.updateCurrentActions(),this.notifyEditorElement("sync")},s.prototype.compositionControllerDidRender=function(){return null!=this.requestedLocationRange&&(this.compositionRevisionWhenLocationRangeRequested===this.composition.revision&&this.selectionManager.setLocationRange(this.requestedLocationRange),this.requestedLocationRange=null,this.compositionRevisionWhenLocationRangeRequested=null),this.renderedCompositionRevision!==this.composition.revision&&(this.runEditorFilters(),this.composition.updateCurrentAttributes(),this.notifyEditorElement("render")),this.renderedCompositionRevision=this.composition.revision},s.prototype.compositionControllerDidFocus=function(){return this.toolbarController.hideDialog(),this.notifyEditorElement("focus")},s.prototype.compositionControllerDidBlur=function(){return this.notifyEditorElement("blur")},s.prototype.compositionControllerDidSelectAttachment=function(t,e){return this.composition.editAttachment(t,e)},s.prototype.compositionControllerDidRequestDeselectingAttachment=function(t){var e,n;return e=null!=(n=this.attachmentLocationRange)?n:this.composition.document.getLocationRangeOfAttachment(t),this.selectionManager.setLocationRange(e[1])},s.prototype.compositionControllerWillUpdateAttachment=function(t){return this.editor.recordUndoEntry("Edit Attachment",{context:t.id,consolidatable:!0})},s.prototype.compositionControllerDidRequestRemovalOfAttachment=function(t){return this.removeAttachment(t)},s.prototype.inputControllerWillHandleInput=function(){return this.handlingInput=!0,this.requestedRender=!1},s.prototype.inputControllerDidRequestRender=function(){return this.requestedRender=!0},s.prototype.inputControllerDidHandleInput=function(){return this.handlingInput=!1,this.requestedRender?(this.requestedRender=!1,this.render()):void 0},s.prototype.inputControllerDidAllowUnhandledInput=function(){return this.notifyEditorElement("change")},s.prototype.inputControllerDidRequestReparse=function(){return this.reparse()},s.prototype.inputControllerWillPerformTyping=function(){return this.recordTypingUndoEntry()},s.prototype.inputControllerWillPerformFormatting=function(){return this.recordFormattingUndoEntry()},s.prototype.inputControllerWillCutText=function(){return this.editor.recordUndoEntry("Cut")},s.prototype.inputControllerWillPaste=function(t){return this.editor.recordUndoEntry("Paste"),this.pasting=!0,this.notifyEditorElement("before-paste",{paste:t})},s.prototype.inputControllerDidPaste=function(t){return t.range=this.pastedRange,this.pastedRange=null,this.pasting=null,this.notifyEditorElement("paste",{paste:t})},s.prototype.inputControllerWillMoveText=function(){return this.editor.recordUndoEntry("Move")},s.prototype.inputControllerWillAttachFiles=function(){return this.editor.recordUndoEntry("Drop Files")},s.prototype.inputControllerWillPerformUndo=function(){return this.editor.undo()},s.prototype.inputControllerWillPerformRedo=function(){return this.editor.redo()},s.prototype.inputControllerDidReceiveKeyboardCommand=function(t){return this.toolbarController.applyKeyboardCommand(t)},s.prototype.inputControllerDidStartDrag=function(){return this.locationRangeBeforeDrag=this.selectionManager.getLocationRange()},s.prototype.inputControllerDidReceiveDragOverPoint=function(t){return this.selectionManager.setLocationRangeFromPointRange(t)},s.prototype.inputControllerDidCancelDrag=function(){return this.selectionManager.setLocationRange(this.locationRangeBeforeDrag),this.locationRangeBeforeDrag=null},s.prototype.locationRangeDidChange=function(t){return this.composition.updateCurrentAttributes(),this.updateCurrentActions(),this.attachmentLocationRange&&!i(this.attachmentLocationRange,t)&&this.composition.stopEditingAttachment(),this.notifyEditorElement("selection-change")},s.prototype.toolbarDidClickButton=function(){return this.getLocationRange()?void 0:this.setLocationRange({index:0,offset:0})},s.prototype.toolbarDidInvokeAction=function(t){return this.invokeAction(t)},s.prototype.toolbarDidToggleAttribute=function(t){return this.recordFormattingUndoEntry(),this.composition.toggleCurrentAttribute(t),this.render(),this.selectionFrozen?void 0:this.editorElement.focus()},s.prototype.toolbarDidUpdateAttribute=function(t,e){return this.recordFormattingUndoEntry(),this.composition.setCurrentAttribute(t,e),this.render(),this.selectionFrozen?void 0:this.editorElement.focus()},s.prototype.toolbarDidRemoveAttribute=function(t){return this.recordFormattingUndoEntry(),this.composition.removeCurrentAttribute(t),this.render(),this.selectionFrozen?void 0:this.editorElement.focus()},s.prototype.toolbarWillShowDialog=function(){return this.composition.expandSelectionForEditing(),this.freezeSelection()},s.prototype.toolbarDidShowDialog=function(t){return this.notifyEditorElement("toolbar-dialog-show",{dialogName:t})},s.prototype.toolbarDidHideDialog=function(t){return this.thawSelection(),this.editorElement.focus(),this.notifyEditorElement("toolbar-dialog-hide",{dialogName:t})},s.prototype.freezeSelection=function(){return this.selectionFrozen?void 0:(this.selectionManager.lock(),this.composition.freezeSelection(),this.selectionFrozen=!0,this.render())},s.prototype.thawSelection=function(){return this.selectionFrozen?(this.composition.thawSelection(),this.selectionManager.unlock(),this.selectionFrozen=!1,this.render()):void 0},s.prototype.actions={undo:{test:function(){return this.editor.canUndo()},perform:function(){return this.editor.undo()}},redo:{test:function(){return this.editor.canRedo()},perform:function(){return this.editor.redo()}},link:{test:function(){return this.editor.canActivateAttribute("href")}},increaseNestingLevel:{test:function(){return this.editor.canIncreaseNestingLevel()},perform:function(){return this.editor.increaseNestingLevel()&&this.render()}},decreaseNestingLevel:{test:function(){return this.editor.canDecreaseNestingLevel()},perform:function(){return this.editor.decreaseNestingLevel()&&this.render()}}},s.prototype.canInvokeAction=function(t){var e,n;return!!this.actionIsExternal(t)||!!(null!=(e=this.actions[t])&&null!=(n=e.test)?n.call(this):void 0)},s.prototype.invokeAction=function(t){var e,n;return this.actionIsExternal(t)?this.notifyEditorElement("action-invoke",{actionName:t}):null!=(e=this.actions[t])&&null!=(n=e.perform)?n.call(this):void 0},s.prototype.actionIsExternal=function(t){return/^x-./.test(t)},s.prototype.getCurrentActions=function(){var t,e;for(t in e={},this.actions)e[t]=this.canInvokeAction(t);return e},s.prototype.updateCurrentActions=function(){var e;return e=this.getCurrentActions(),t(e,this.currentActions)?void 0:(this.currentActions=e,this.toolbarController.updateActions(this.currentActions),this.notifyEditorElement("actions-change",{actions:this.currentActions}))},s.prototype.runEditorFilters=function(){var t,e,n,i,o,r,a,s;for(s=this.composition.getSnapshot(),n=0,i=(o=this.editor.filters).length;i>n;n++)e=o[n],t=s.document,a=s.selectedRange,null==(s=null!=(r=e.call(this.editor,s))?r:{}).document&&(s.document=t),null==s.selectedRange&&(s.selectedRange=a);return l(s,this.composition.getSnapshot())?void 0:this.composition.loadSnapshot(s)},l=function(t,e){return i(t.selectedRange,e.selectedRange)&&t.document.isEqualTo(e.document)},s.prototype.updateInputElement=function(){var t,n;return t=this.compositionController.getSerializableElement(),n=e.serializeToContentType(t,"text/html"),this.editorElement.setInputElementValue(n)},s.prototype.notifyEditorElement=function(t,e){switch(t){case"document-change":this.documentChangedSinceLastRender=!0;break;case"render":this.documentChangedSinceLastRender&&(this.documentChangedSinceLastRender=!1,this.notifyEditorElement("change"));break;case"change":case"attachment-add":case"attachment-edit":case"attachment-remove":this.updateInputElement()}return this.editorElement.notify(t,e)},s.prototype.removeAttachment=function(t){return this.editor.recordUndoEntry("Delete Attachment"),this.composition.removeAttachment(t),this.render()},s.prototype.recordFormattingUndoEntry=function(){var t;return t=this.selectionManager.getLocationRange(),n(t)?void 0:this.editor.recordUndoEntry("Formatting",{context:this.getUndoContext(),consolidatable:!0})},s.prototype.recordTypingUndoEntry=function(){return this.editor.recordUndoEntry("Typing",{context:this.getUndoContext(this.currentAttributes),consolidatable:!0})},s.prototype.getUndoContext=function(){var t;return t=1<=arguments.length?a.call(arguments,0):[],[this.getLocationContext(),this.getTimeContext()].concat(a.call(t))},s.prototype.getLocationContext=function(){var t;return t=this.selectionManager.getLocationRange(),n(t)?t[0].index:t},s.prototype.getTimeContext=function(){return e.config.undoInterval>0?Math.floor((new Date).getTime()/e.config.undoInterval):0},s.prototype.isFocused=function(){var t;return this.editorElement===(null!=(t=this.editorElement.ownerDocument)?t.activeElement:void 0)},s}(e.Controller)}.call(this),function(){var t,n,i,o,r,a,s,l,c,u,d,p,h,f;n=e.browser,r=e.makeElement,a=e.triggerEvent,i=e.handleEvent,o=e.handleEventOnce,t=e.AttachmentView.attachmentSelector,e.registerElement("trix-editor",(p=0,l=function(t){return!document.querySelector(":focus")&&t.hasAttribute("autofocus")&&document.querySelector("[autofocus]")===t?t.focus():void 0},h=function(t){return t.hasAttribute("contenteditable")?void 0:(t.setAttribute("contenteditable",""),o("focus",{onElement:t,withCallback:function(){return c(t)}}))},s=function(t){return t.hasAttribute("role")?void 0:t.setAttribute("role","textbox")},c=function(t){return d(t),f(t)},d=function(t){return("function"==typeof document.queryCommandSupported?document.queryCommandSupported("enableObjectResizing"):void 0)?(document.execCommand("enableObjectResizing",!1,!1),i("mscontrolselect",{onElement:t,preventDefault:!0})):void 0},f=function(){var t;return("function"==typeof document.queryCommandSupported?document.queryCommandSupported("DefaultParagraphSeparator"):void 0)&&("div"===(t=e.config.blockAttributes["default"].tagName)||"p"===t)?document.execCommand("DefaultParagraphSeparator",!1,t):void 0},u=n.forcesObjectResizing?{display:"inline",width:"auto"}:{display:"inline-block",width:"1px"},{defaultCSS:"%t {\n  display: block;\n}\n\n%t:empty:not(:focus)::before {\n  content: attr(placeholder);\n  color: graytext;\n  cursor: text;\n}\n\n%t a[contenteditable=false] {\n  cursor: text;\n}\n\n%t img {\n  max-width: 100%;\n  height: auto;\n}\n\n%t "+t+" figcaption textarea {\n  resize: none;\n}\n\n%t "+t+" figcaption textarea.trix-autoresize-clone {\n  position: absolute;\n  left: -9999px;\n  max-height: 0px;\n}\n\n%t "+t+" figcaption[data-trix-placeholder]:empty::before {\n  content: attr(data-trix-placeholder);\n  color: graytext;\n}\n\n%t [data-trix-cursor-target] {\n  display: "+u.display+" !important;\n  width: "+u.width+" !important;\n  padding: 0 !important;\n  margin: 0 !important;\n  border: none !important;\n}\n\n%t [data-trix-cursor-target=left] {\n  vertical-align: top !important;\n  margin-left: -1px !important;\n}\n\n%t [data-trix-cursor-target=right] {\n  vertical-align: bottom !important;\n  margin-right: -1px !important;\n}",trixId:{get:function(){return this.hasAttribute("trix-id")?this.getAttribute("trix-id"):(this.setAttribute("trix-id",++p),this.trixId)}},toolbarElement:{get:function(){var t,e,n;return this.hasAttribute("toolbar")?null!=(e=this.ownerDocument)?e.getElementById(this.getAttribute("toolbar")):void 0:this.parentNode?(n="trix-toolbar-"+this.trixId,this.setAttribute("toolbar",n),t=r("trix-toolbar",{id:n}),this.parentNode.insertBefore(t,this),t):void 0}},inputElement:{get:function(){var t,e,n;return this.hasAttribute("input")?null!=(n=this.ownerDocument)?n.getElementById(this.getAttribute("input")):void 0:this.parentNode?(e="trix-input-"+this.trixId,this.setAttribute("input",e),t=r("input",{type:"hidden",id:e}),this.parentNode.insertBefore(t,this.nextElementSibling),t):void 0}},editor:{get:function(){var t;return null!=(t=this.editorController)?t.editor:void 0}},name:{get:function(){var t;return null!=(t=this.inputElement)?t.name:void 0}},value:{get:function(){var t;return null!=(t=this.inputElement)?t.value:void 0},set:function(t){var e;return this.defaultValue=t,null!=(e=this.editor)?e.loadHTML(this.defaultValue):void 0}},notify:function(t,e){return this.editorController?a("trix-"+t,{onElement:this,attributes:e}):void 0},setInputElementValue:function(t){var e;return null!=(e=this.inputElement)?e.value=t:void 0},initialize:function(){return h(this),s(this)},connect:function(){return this.hasAttribute("data-trix-internal")?void 0:(this.editorController||(a("trix-before-initialize",{onElement:this}),this.editorController=new e.EditorController({editorElement:this,html:this.defaultValue=this.value}),requestAnimationFrame((t=this,function(){return a("trix-initialize",{onElement:t})}))),this.editorController.registerSelectionManager(),this.registerResetListener(),l(this));var t},disconnect:function(){var t;return null!=(t=this.editorController)&&t.unregisterSelectionManager(),this.unregisterResetListener()},registerResetListener:function(){return this.resetListener=this.resetBubbled.bind(this),window.addEventListener("reset",this.resetListener,!1)},unregisterResetListener:function(){return window.removeEventListener("reset",this.resetListener,!1)},resetBubbled:function(t){var e;return t.target!==(null!=(e=this.inputElement)?e.form:void 0)||t.defaultPrevented?void 0:this.reset()},reset:function(){return this.value=this.defaultValue}}))}.call(this),function(){}.call(this)}).call(this),"object"==typeof module&&module.exports?module.exports=e:"function"==typeof define&&define.amd&&define(e)}.call(this),function(){var t;$.fn.cv_checkbox=function(e){var n;return n={multiple:!0,single_line:!1,"debugger":!1,show_text:"\u663e\u793a\u5168\u90e8",hide_text:"\u9690\u85cf\u5168\u90e8"},e=$.extend(!0,{},n,e),this.data("cv_check",new t(this,e))},t=function(){function t(t,e){this.options=e,this.$base=t,this._init(),this._bind_event()}return t.prototype._init=function(){if(this.$inputs=this.$base.find("input[type=checkbox]"),this.$labels=this.$base.find("label"),this.$container=this.$base.find(".inputs"),this.$no_limit=this.$base.find(".no_limit"),this._init_seleted(),this.options.single_line)return this._init_control_bar()},t.prototype._init_seleted=function(){var t;if(this.$inputs.each((t=this,function(e,n){return t._init_input($(n))})),0===this.$container.find("input:checked").length)return this.$no_limit.addClass("option-selected")},t.prototype._init_control_bar=function(){var t;return t=this,this.$show_more=$("<div class='show-all'>"+this.options.show_text+"<i class='fa fa-caret-down'></i></div>"),this.$hide_more=$("<div class='hide-more'>"+this.options.hide_text+"<i class='fa fa-caret-up'></i></div>"),this.$container.addClass("single_line").prepend(this.$show_more).prepend(this.$hide_more),this.$show_more.click(function(){return t.$container.removeClass("single_line")}),this.$hide_more.click(function(){return t.$container.addClass("single_line")})},t.prototype._empty_lables_select=function(){return this.$labels.removeClass("option-selected"),this.$inputs.prop("checked",!1)},t.prototype._init_input=function(t){var e,n;return n=this,e=t.parent("label"),t.is(":checked")?(n.$no_limit.removeClass("option-selected"),e.addClass("option-selected")):e.removeClass("option-selected")},t.prototype._console_checked_input=function(){if(this.options["debugger"])return console.log(this.$base.find("input[type=checkbox]:checked").length)},t.prototype._bind_event=function(){var t;return t=this,this.$inputs.change(function(){return t.options.multiple||(t._empty_lables_select(),$(this).prop("checked",!0)),t.$base.find("input[type=checkbox]:checked").length>3&&($(this).prop("checked",!1),$.notify("\u6700\u591a\u90093\u4e2a","error")),t._init_input($(this)),t._console_checked_input()}),this.$no_limit.click(function(){return $(this).addClass("option-selected"),t._empty_lables_select(),t._console_checked_input()})},t}()}.call(this),function(){var t;$.fn.limit_select2=function(e){var n;return n={multiple:!1,placeholder:"\u8bf7\u9009\u62e9",minimumResultsForSearch:7},e=$.extend(!0,{},n,e),this.data("limit_select2",new t(this,e))},t=function(){function t(t,e){this.options=e,this.$base=t,this._init(),this._select2(),this._bind_event(),this._init_multiple_selected(),this._update_selected_text()}return t.prototype._init=function(){return this.$selected=$("<div class='selected default'><span class='text'>"+this.options.placeholder+"</span><span class='glyphicon glyphicon-menu-down' aria-hidden='true'></span></div>"),this.$selected_text=this.$selected.find(".text"),this.$base.wrap("<div class='limit-select2'></div>"),this.$limit_select2=this.$base.parent(".limit-select2"),this.$limit_select2.append(this.$selected)},t.prototype._select2=function(){var t;return t=this,this.$base.select2({multiple:t.options.multiple,minimumResultsForSearch:t.options.minimumResultsForSearch,dropdownCssClass:"limit-select2-dropdown",dropdownPosition:"below"})},t.prototype._bind_event=function(){var t;if(t=this,this.$base.change(function(){return t._init_multiple_selected(),t._update_selected_text()}),this.options.multiple)return this.$base.on("select2:open",function(){return setTimeout(function(){return $(".select2-results__option").first().attr("aria-selected",0===t.$base.find("option:selected").length)},100)})},t.prototype._init_multiple_selected=function(){var t;if(t=this,Array.isArray(t.$base.val())&&t.$base.val().includes(""))return t.$base.find("option:selected").prop("selected",!1)},t.prototype._update_selected_text=function(){var t,e;return e=this,t=this.$base.find("option:selected"),e.$base.val()?(this.options.multiple?this.$selected_text.text(e.options.placeholder+"("+t.length+")"):this.$selected_text.text(t.text()),e.$selected.removeClass("default")):(this.$selected_text.text(e.options.placeholder),e.$selected.addClass("default"))},t}()}.call(this),
/**
 * Swiper 3.3.1
 * Most modern mobile touch slider and framework with hardware accelerated transitions
 *
 * http://www.idangero.us/swiper/
 *
 * Copyright 2016, Vladimir Kharlampidi
 * The iDangero.us
 * http://www.idangero.us/
 *
 * Licensed under MIT
 *
 * Released on: February 7, 2016
 */
function(){"use strict";function t(t){t.fn.swiper=function(e){var n;return t(this).each(function(){var t=new o(this,e);n||(n=t)}),n}}var e,n,i,o=function(t,n){function i(t){return Math.floor(t)}function r(){w.autoplayTimeoutId=setTimeout(function(){w.params.loop?(w.fixLoop(),w._slideNext(),w.emit("onAutoplay",w)):w.isEnd?n.autoplayStopOnLast?w.stopAutoplay():(w._slideTo(0),w.emit("onAutoplay",w)):(w._slideNext(),w.emit("onAutoplay",w))},w.params.autoplay)}function s(t,n){var i=e(t.target);if(!i.is(n))if("string"==typeof n)i=i.parents(n);else if(n.nodeType){var o;return i.parents().each(function(t,e){e===n&&(o=n)}),o?n:undefined}return 0===i.length?undefined:i[0]}function l(t,e){e=e||{};var n=new(window.MutationObserver||window.WebkitMutationObserver)(function(t){t.forEach(function(t){w.onResize(!0),w.emit("onObserverUpdate",w,t)})});n.observe(t,{attributes:"undefined"==typeof e.attributes||e.attributes,childList:"undefined"==typeof e.childList||e.childList,characterData:"undefined"==typeof e.characterData||e.characterData}),w.observers.push(n)}function c(t){t.originalEvent&&(t=t.originalEvent);var e=t.keyCode||t.charCode;if(!w.params.allowSwipeToNext&&(w.isHorizontal()&&39===e||!w.isHorizontal()&&40===e))return!1;if(!w.params.allowSwipeToPrev&&(w.isHorizontal()&&37===e||!w.isHorizontal()&&38===e))return!1;if(!(t.shiftKey||t.altKey||t.ctrlKey||t.metaKey||document.activeElement&&document.activeElement.nodeName&&("input"===document.activeElement.nodeName.toLowerCase()||"textarea"===document.activeElement.nodeName.toLowerCase()))){if(37===e||39===e||38===e||40===e){var n=!1;if(w.container.parents(".swiper-slide").length>0&&0===w.container.parents(".swiper-slide-active").length)return;var i={left:window.pageXOffset,top:window.pageYOffset},o=window.innerWidth,r=window.innerHeight,a=w.container.offset();w.rtl&&(a.left=a.left-w.container[0].scrollLeft);for(var s=[[a.left,a.top],[a.left+w.width,a.top],[a.left,a.top+w.height],[a.left+w.width,a.top+w.height]],l=0;l<s.length;l++){var c=s[l];c[0]>=i.left&&c[0]<=i.left+o&&c[1]>=i.top&&c[1]<=i.top+r&&(n=!0)}if(!n)return}w.isHorizontal()?(37!==e&&39!==e||(t.preventDefault?t.preventDefault():t.returnValue=!1),(39===e&&!w.rtl||37===e&&w.rtl)&&w.slideNext(),(37===e&&!w.rtl||39===e&&w.rtl)&&w.slidePrev()):(38!==e&&40!==e||(t.preventDefault?t.preventDefault():t.returnValue=!1),40===e&&w.slideNext(),38===e&&w.slidePrev())}}function u(t){t.originalEvent&&(t=t.originalEvent);var e=w.mousewheel.event,n=0,i=w.rtl?-1:1;if("mousewheel"===e)if(w.params.mousewheelForceToAxis)if(w.isHorizontal()){if(!(Math.abs(t.wheelDeltaX)>Math.abs(t.wheelDeltaY)))return;n=t.wheelDeltaX*i}else{if(!(Math.abs(t.wheelDeltaY)>Math.abs(t.wheelDeltaX)))return;n=t.wheelDeltaY}else n=Math.abs(t.wheelDeltaX)>Math.abs(t.wheelDeltaY)?-t.wheelDeltaX*i:-t.wheelDeltaY;else if("DOMMouseScroll"===e)n=-t.detail;else if("wheel"===e)if(w.params.mousewheelForceToAxis)if(w.isHorizontal()){if(!(Math.abs(t.deltaX)>Math.abs(t.deltaY)))return;n=-t.deltaX*i}else{if(!(Math.abs(t.deltaY)>Math.abs(t.deltaX)))return;n=-t.deltaY}else n=Math.abs(t.deltaX)>Math.abs(t.deltaY)?-t.deltaX*i:-t.deltaY;if(0!==n){if(w.params.mousewheelInvert&&(n=-n),w.params.freeMode){var o=w.getWrapperTranslate()+n*w.params.mousewheelSensitivity,r=w.isBeginning,a=w.isEnd;if(o>=w.minTranslate()&&(o=w.minTranslate()),o<=w.maxTranslate()&&(o=w.maxTranslate()),w.setWrapperTransition(0),w.setWrapperTranslate(o),w.updateProgress(),w.updateActiveIndex(),(!r&&w.isBeginning||!a&&w.isEnd)&&w.updateClasses(),w.params.freeModeSticky?(clearTimeout(w.mousewheel.timeout),w.mousewheel.timeout=setTimeout(function(){w.slideReset()},300)):w.params.lazyLoading&&w.lazy&&w.lazy.load(),0===o||o===w.maxTranslate())return}else{if((new window.Date).getTime()-w.mousewheel.lastScrollTime>60)if(n<0)if(w.isEnd&&!w.params.loop||w.animating){if(w.params.mousewheelReleaseOnEdges)return!0}else w.slideNext();else if(w.isBeginning&&!w.params.loop||w.animating){if(w.params.mousewheelReleaseOnEdges)return!0}else w.slidePrev();w.mousewheel.lastScrollTime=(new window.Date).getTime()}return w.params.autoplay&&w.stopAutoplay(),t.preventDefault?t.preventDefault():t.returnValue=!1,!1}}function d(t,n){var i,o,r;t=e(t);var a=w.rtl?-1:1;i=t.attr("data-swiper-parallax")||"0",o=t.attr("data-swiper-parallax-x"),r=t.attr("data-swiper-parallax-y"),o||r?(o=o||"0",r=r||"0"):w.isHorizontal()?(o=i,r="0"):(r=i,o="0"),o=o.indexOf("%")>=0?parseInt(o,10)*n*a+"%":o*n*a+"px",r=r.indexOf("%")>=0?parseInt(r,10)*n+"%":r*n+"px",t.transform("translate3d("+o+", "+r+",0px)")}function p(t){return 0!==t.indexOf("on")&&(t=t[0]!==t[0].toUpperCase()?"on"+t[0].toUpperCase()+t.substring(1):"on"+t),t}if(!(this instanceof o))return new o(t,n);var h={direction:"horizontal",touchEventsTarget:"container",initialSlide:0,speed:300,autoplay:!1,autoplayDisableOnInteraction:!0,autoplayStopOnLast:!1,iOSEdgeSwipeDetection:!1,iOSEdgeSwipeThreshold:20,freeMode:!1,freeModeMomentum:!0,freeModeMomentumRatio:1,freeModeMomentumBounce:!0,freeModeMomentumBounceRatio:1,freeModeSticky:!1,freeModeMinimumVelocity:.02,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",coverflow:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:!0},flip:{slideShadows:!0,limitRotation:!0},cube:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94},fade:{crossFade:!1},parallax:!1,scrollbar:null,scrollbarHide:!0,scrollbarDraggable:!1,scrollbarSnapOnRelease:!1,keyboardControl:!1,mousewheelControl:!1,mousewheelReleaseOnEdges:!1,mousewheelInvert:!1,mousewheelForceToAxis:!1,mousewheelSensitivity:1,hashnav:!1,breakpoints:undefined,spaceBetween:0,slidesPerView:1,slidesPerColumn:1,slidesPerColumnFill:"column",slidesPerGroup:1,centeredSlides:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,onlyExternal:!1,threshold:0,touchMoveStopPropagation:!0,uniqueNavElements:!0,pagination:null,paginationElement:"span",paginationClickable:!1,paginationHide:!1,paginationBulletRender:null,paginationProgressRender:null,paginationFractionRender:null,paginationCustomRender:null,paginationType:"bullets",resistance:!0,resistanceRatio:.85,nextButton:null,prevButton:null,watchSlidesProgress:!1,watchSlidesVisibility:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,lazyLoading:!1,lazyLoadingInPrevNext:!1,lazyLoadingInPrevNextAmount:1,lazyLoadingOnTransitionStart:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,control:undefined,controlInverse:!1,controlBy:"slide",allowSwipeToPrev:!0,allowSwipeToNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",slideClass:"swiper-slide",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",bulletClass:"swiper-pagination-bullet",bulletActiveClass:"swiper-pagination-bullet-active",buttonDisabledClass:"swiper-button-disabled",paginationCurrentClass:"swiper-pagination-current",paginationTotalClass:"swiper-pagination-total",paginationHiddenClass:"swiper-pagination-hidden",paginationProgressbarClass:"swiper-pagination-progressbar",observer:!1,observeParents:!1,a11y:!1,prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}",runCallbacksOnInit:!0},f=n&&n.virtualTranslate;n=n||{};var m={};for(var g in n)if("object"!=typeof n[g]||null===n[g]||(n[g].nodeType||n[g]===window||n[g]===document||void 0!==a&&n[g]instanceof a||"undefined"!=typeof jQuery&&n[g]instanceof jQuery))m[g]=n[g];else for(var v in m[g]={},n[g])m[g][v]=n[g][v];for(var y in h)if("undefined"==typeof n[y])n[y]=h[y];else if("object"==typeof n[y])for(var b in h[y])"undefined"==typeof n[y][b]&&(n[y][b]=h[y][b]);var w=this;if(w.params=n,w.originalParams=m,w.classNames=[],void 0!==e&&void 0!==a&&(e=a),(void 0!==e||(e=void 0===a?window.Dom7||window.Zepto||window.jQuery:a))&&(w.$=e,w.currentBreakpoint=undefined,w.getActiveBreakpoint=function(){if(!w.params.breakpoints)return!1;var t,e=!1,n=[];for(t in w.params.breakpoints)w.params.breakpoints.hasOwnProperty(t)&&n.push(t);n.sort(function(t,e){return parseInt(t,10)>parseInt(e,10)});for(var i=0;i<n.length;i++)(t=n[i])>=window.innerWidth&&!e&&(e=t);return e||"max"},w.setBreakpoint=function(){var t=w.getActiveBreakpoint();if(t&&w.currentBreakpoint!==t){var e=t in w.params.breakpoints?w.params.breakpoints[t]:w.originalParams,n=w.params.loop&&e.slidesPerView!==w.params.slidesPerView;for(var i in e)w.params[i]=e[i];w.currentBreakpoint=t,n&&w.destroyLoop&&w.reLoop(!0)}},w.params.breakpoints&&w.setBreakpoint(),w.container=e(t),0!==w.container.length)){if(w.container.length>1){var $=[];return w.container.each(function(){$.push(new o(this,n))}),$}w.container[0].swiper=w,w.container.data("swiper",w),w.classNames.push("swiper-container-"+w.params.direction),w.params.freeMode&&w.classNames.push("swiper-container-free-mode"),w.support.flexbox||(w.classNames.push("swiper-container-no-flexbox"),w.params.slidesPerColumn=1),w.params.autoHeight&&w.classNames.push("swiper-container-autoheight"),(w.params.parallax||w.params.watchSlidesVisibility)&&(w.params.watchSlidesProgress=!0),["cube","coverflow","flip"].indexOf(w.params.effect)>=0&&(w.support.transforms3d?(w.params.watchSlidesProgress=!0,w.classNames.push("swiper-container-3d")):w.params.effect="slide"),"slide"!==w.params.effect&&w.classNames.push("swiper-container-"+w.params.effect),"cube"===w.params.effect&&(w.params.resistanceRatio=0,w.params.slidesPerView=1,w.params.slidesPerColumn=1,w.params.slidesPerGroup=1,w.params.centeredSlides=!1,w.params.spaceBetween=0,w.params.virtualTranslate=!0,w.params.setWrapperSize=!1),"fade"!==w.params.effect&&"flip"!==w.params.effect||(w.params.slidesPerView=1,w.params.slidesPerColumn=1,w.params.slidesPerGroup=1,w.params.watchSlidesProgress=!0,w.params.spaceBetween=0,w.params.setWrapperSize=!1,void 0===f&&(w.params.virtualTranslate=!0)),w.params.grabCursor&&w.support.touch&&(w.params.grabCursor=!1),w.wrapper=w.container.children("."+w.params.wrapperClass),w.params.pagination&&(w.paginationContainer=e(w.params.pagination),w.params.uniqueNavElements&&"string"==typeof w.params.pagination&&w.paginationContainer.length>1&&1===w.container.find(w.params.pagination).length&&(w.paginationContainer=w.container.find(w.params.pagination)),"bullets"===w.params.paginationType&&w.params.paginationClickable?w.paginationContainer.addClass("swiper-pagination-clickable"):w.params.paginationClickable=!1,w.paginationContainer.addClass("swiper-pagination-"+w.params.paginationType)),(w.params.nextButton||w.params.prevButton)&&(w.params.nextButton&&(w.nextButton=e(w.params.nextButton),w.params.uniqueNavElements&&"string"==typeof w.params.nextButton&&w.nextButton.length>1&&1===w.container.find(w.params.nextButton).length&&(w.nextButton=w.container.find(w.params.nextButton))),w.params.prevButton&&(w.prevButton=e(w.params.prevButton),w.params.uniqueNavElements&&"string"==typeof w.params.prevButton&&w.prevButton.length>1&&1===w.container.find(w.params.prevButton).length&&(w.prevButton=w.container.find(w.params.prevButton)))),w.isHorizontal=function(){return"horizontal"===w.params.direction},w.rtl=w.isHorizontal()&&("rtl"===w.container[0].dir.toLowerCase()||"rtl"===w.container.css("direction")),w.rtl&&w.classNames.push("swiper-container-rtl"),w.rtl&&(w.wrongRTL="-webkit-box"===w.wrapper.css("display")),w.params.slidesPerColumn>1&&w.classNames.push("swiper-container-multirow"),w.device.android&&w.classNames.push("swiper-container-android"),w.container.addClass(w.classNames.join(" ")),w.translate=0,w.progress=0,w.velocity=0,w.lockSwipeToNext=function(){w.params.allowSwipeToNext=!1},w.lockSwipeToPrev=function(){w.params.allowSwipeToPrev=!1},w.lockSwipes=function(){w.params.allowSwipeToNext=w.params.allowSwipeToPrev=!1},w.unlockSwipeToNext=function(){w.params.allowSwipeToNext=!0},w.unlockSwipeToPrev=function(){w.params.allowSwipeToPrev=!0},w.unlockSwipes=function(){w.params.allowSwipeToNext=w.params.allowSwipeToPrev=!0},w.params.grabCursor&&(w.container[0].style.cursor="move",w.container[0].style.cursor="-webkit-grab",w.container[0].style.cursor="-moz-grab",w.container[0].style.cursor="grab"),w.imagesToLoad=[],w.imagesLoaded=0,w.loadImage=function(t,e,n,i,o){function r(){o&&o()}var a;t.complete&&i?r():e?((a=new window.Image).onload=r,a.onerror=r,n&&(a.srcset=n),e&&(a.src=e)):r()},w.preloadImages=function(){function t(){null!=w&&(w.imagesLoaded!==undefined&&w.imagesLoaded++,w.imagesLoaded===w.imagesToLoad.length&&(w.params.updateOnImagesReady&&w.update(),w.emit("onImagesReady",w)))}w.imagesToLoad=w.container.find("img");for(var e=0;e<w.imagesToLoad.length;e++)w.loadImage(w.imagesToLoad[e],w.imagesToLoad[e].currentSrc||w.imagesToLoad[e].getAttribute("src"),w.imagesToLoad[e].srcset||w.imagesToLoad[e].getAttribute("srcset"),!0,t)},w.autoplayTimeoutId=undefined,w.autoplaying=!1,w.autoplayPaused=!1,w.startAutoplay=function(){return"undefined"==typeof w.autoplayTimeoutId&&(!!w.params.autoplay&&(!w.autoplaying&&(w.autoplaying=!0,w.emit("onAutoplayStart",w),void r())))},w.stopAutoplay=function(){w.autoplayTimeoutId&&(w.autoplayTimeoutId&&clearTimeout(w.autoplayTimeoutId),w.autoplaying=!1,w.autoplayTimeoutId=undefined,w.emit("onAutoplayStop",w))},w.pauseAutoplay=function(t){w.autoplayPaused||(w.autoplayTimeoutId&&clearTimeout(w.autoplayTimeoutId),w.autoplayPaused=!0,0===t?(w.autoplayPaused=!1,r()):w.wrapper.transitionEnd(function(){w&&(w.autoplayPaused=!1,w.autoplaying?r():w.stopAutoplay())}))},w.minTranslate=function(){return-w.snapGrid[0]},w.maxTranslate=function(){return-w.snapGrid[w.snapGrid.length-1]},w.updateAutoHeight=function(){var t=w.slides.eq(w.activeIndex)[0];if(void 0!==t){var e=t.offsetHeight;e&&w.wrapper.css("height",e+"px")}},w.updateContainerSize=function(){var t,e;t="undefined"!=typeof w.params.width?w.params.width:w.container[0].clientWidth,e="undefined"!=typeof w.params.height?w.params.height:w.container[0].clientHeight,0===t&&w.isHorizontal()||0===e&&!w.isHorizontal()||(t=t-parseInt(w.container.css("padding-left"),10)-parseInt(w.container.css("padding-right"),10),e=e-parseInt(w.container.css("padding-top"),10)-parseInt(w.container.css("padding-bottom"),10),w.width=t,w.height=e,w.size=w.isHorizontal()?w.width:w.height)},w.updateSlidesSize=function(){w.slides=w.wrapper.children("."+w.params.slideClass),w.snapGrid=[],w.slidesGrid=[],w.slidesSizesGrid=[];var t,e=w.params.spaceBetween,n=-w.params.slidesOffsetBefore,o=0,r=0;if("undefined"!=typeof w.size){var a,s;"string"==typeof e&&e.indexOf("%")>=0&&(e=parseFloat(e.replace("%",""))/100*w.size),w.virtualSize=-e,w.rtl?w.slides.css({marginLeft:"",marginTop:""}):w.slides.css({marginRight:"",marginBottom:""}),w.params.slidesPerColumn>1&&(a=Math.floor(w.slides.length/w.params.slidesPerColumn)===w.slides.length/w.params.slidesPerColumn?w.slides.length:Math.ceil(w.slides.length/w.params.slidesPerColumn)*w.params.slidesPerColumn,"auto"!==w.params.slidesPerView&&"row"===w.params.slidesPerColumnFill&&(a=Math.max(a,w.params.slidesPerView*w.params.slidesPerColumn)));var l,c=w.params.slidesPerColumn,u=a/c,d=u-(w.params.slidesPerColumn*u-w.slides.length);for(t=0;t<w.slides.length;t++){s=0;var p,h,f,m=w.slides.eq(t);if(w.params.slidesPerColumn>1)"column"===w.params.slidesPerColumnFill?(f=t-(h=Math.floor(t/c))*c,(h>d||h===d&&f===c-1)&&++f>=c&&(f=0,h++),p=h+f*a/c,m.css({"-webkit-box-ordinal-group":p,"-moz-box-ordinal-group":p,"-ms-flex-order":p,"-webkit-order":p,order:p})):h=t-(f=Math.floor(t/u))*u,m.css({"margin-top":0!==f&&w.params.spaceBetween&&w.params.spaceBetween+"px"}).attr("data-swiper-column",h).attr("data-swiper-row",f);"none"!==m.css("display")&&("auto"===w.params.slidesPerView?(s=w.isHorizontal()?m.outerWidth(!0):m.outerHeight(!0),w.params.roundLengths&&(s=i(s))):(s=(w.size-(w.params.slidesPerView-1)*e)/w.params.slidesPerView,w.params.roundLengths&&(s=i(s)),w.isHorizontal()?w.slides[t].style.width=s+"px":w.slides[t].style.height=s+"px"),w.slides[t].swiperSlideSize=s,w.slidesSizesGrid.push(s),w.params.centeredSlides?(n=n+s/2+o/2+e,0===t&&(n=n-w.size/2-e),Math.abs(n)<.001&&(n=0),r%w.params.slidesPerGroup==0&&w.snapGrid.push(n),w.slidesGrid.push(n)):(r%w.params.slidesPerGroup==0&&w.snapGrid.push(n),w.slidesGrid.push(n),n=n+s+e),w.virtualSize+=s+e,o=s,r++)}if(w.virtualSize=Math.max(w.virtualSize,w.size)+w.params.slidesOffsetAfter,w.rtl&&w.wrongRTL&&("slide"===w.params.effect||"coverflow"===w.params.effect)&&w.wrapper.css({width:w.virtualSize+w.params.spaceBetween+"px"}),w.support.flexbox&&!w.params.setWrapperSize||(w.isHorizontal()?w.wrapper.css({width:w.virtualSize+w.params.spaceBetween+"px"}):w.wrapper.css({height:w.virtualSize+w.params.spaceBetween+"px"})),w.params.slidesPerColumn>1&&(w.virtualSize=(s+w.params.spaceBetween)*a,w.virtualSize=Math.ceil(w.virtualSize/w.params.slidesPerColumn)-w.params.spaceBetween,w.wrapper.css({width:w.virtualSize+w.params.spaceBetween+"px"}),w.params.centeredSlides)){for(l=[],t=0;t<w.snapGrid.length;t++)w.snapGrid[t]<w.virtualSize+w.snapGrid[0]&&l.push(w.snapGrid[t]);w.snapGrid=l}if(!w.params.centeredSlides){for(l=[],t=0;t<w.snapGrid.length;t++)w.snapGrid[t]<=w.virtualSize-w.size&&l.push(w.snapGrid[t]);w.snapGrid=l,Math.floor(w.virtualSize-w.size)-Math.floor(w.snapGrid[w.snapGrid.length-1])>1&&w.snapGrid.push(w.virtualSize-w.size)}0===w.snapGrid.length&&(w.snapGrid=[0]),0!==w.params.spaceBetween&&(w.isHorizontal()?w.rtl?w.slides.css({marginLeft:e+"px"}):w.slides.css({marginRight:e+"px"}):w.slides.css({marginBottom:e+"px"})),w.params.watchSlidesProgress&&w.updateSlidesOffset()}},w.updateSlidesOffset=function(){for(var t=0;t<w.slides.length;t++)w.slides[t].swiperSlideOffset=w.isHorizontal()?w.slides[t].offsetLeft:w.slides[t].offsetTop},w.updateSlidesProgress=function(t){if(void 0===t&&(t=w.translate||0),0!==w.slides.length){"undefined"==typeof w.slides[0].swiperSlideOffset&&w.updateSlidesOffset();var e=-t;w.rtl&&(e=t),w.slides.removeClass(w.params.slideVisibleClass);for(var n=0;n<w.slides.length;n++){var i=w.slides[n],o=(e-i.swiperSlideOffset)/(i.swiperSlideSize+w.params.spaceBetween);if(w.params.watchSlidesVisibility){var r=-(e-i.swiperSlideOffset),a=r+w.slidesSizesGrid[n];(r>=0&&r<w.size||a>0&&a<=w.size||r<=0&&a>=w.size)&&w.slides.eq(n).addClass(w.params.slideVisibleClass)}i.progress=w.rtl?-o:o}}},w.updateProgress=function(t){void 0===t&&(t=w.translate||0);var e=w.maxTranslate()-w.minTranslate(),n=w.isBeginning,i=w.isEnd;0===e?(w.progress=0,w.isBeginning=w.isEnd=!0):(w.progress=(t-w.minTranslate())/e,w.isBeginning=w.progress<=0,w.isEnd=w.progress>=1),w.isBeginning&&!n&&w.emit("onReachBeginning",w),w.isEnd&&!i&&w.emit("onReachEnd",w),w.params.watchSlidesProgress&&w.updateSlidesProgress(t),w.emit("onProgress",w,w.progress)},w.updateActiveIndex=function(){var t,e,n,i=w.rtl?w.translate:-w.translate;for(e=0;e<w.slidesGrid.length;e++)"undefined"!=typeof w.slidesGrid[e+1]?i>=w.slidesGrid[e]&&i<w.slidesGrid[e+1]-(w.slidesGrid[e+1]-w.slidesGrid[e])/2?t=e:i>=w.slidesGrid[e]&&i<w.slidesGrid[e+1]&&(t=e+1):i>=w.slidesGrid[e]&&(t=e);(t<0||void 0===t)&&(t=0),(n=Math.floor(t/w.params.slidesPerGroup))>=w.snapGrid.length&&(n=w.snapGrid.length-1),t!==w.activeIndex&&(w.snapIndex=n,w.previousIndex=w.activeIndex,w.activeIndex=t,w.updateClasses())},w.updateClasses=function(){w.slides.removeClass(w.params.slideActiveClass+" "+w.params.slideNextClass+" "+w.params.slidePrevClass);var t=w.slides.eq(w.activeIndex);t.addClass(w.params.slideActiveClass);var n=t.next("."+w.params.slideClass).addClass(w.params.slideNextClass);w.params.loop&&0===n.length&&w.slides.eq(0).addClass(w.params.slideNextClass);var i=t.prev("."+w.params.slideClass).addClass(w.params.slidePrevClass);if(w.params.loop&&0===i.length&&w.slides.eq(-1).addClass(w.params.slidePrevClass),w.paginationContainer&&w.paginationContainer.length>0){var o,r=w.params.loop?Math.ceil((w.slides.length-2*w.loopedSlides)/w.params.slidesPerGroup):w.snapGrid.length;if(w.params.loop?((o=Math.ceil((w.activeIndex-w.loopedSlides)/w.params.slidesPerGroup))>w.slides.length-1-2*w.loopedSlides&&(o-=w.slides.length-2*w.loopedSlides),o>r-1&&(o-=r),o<0&&"bullets"!==w.params.paginationType&&(o=r+o)):o="undefined"!=typeof w.snapIndex?w.snapIndex:w.activeIndex||0,"bullets"===w.params.paginationType&&w.bullets&&w.bullets.length>0&&(w.bullets.removeClass(w.params.bulletActiveClass),w.paginationContainer.length>1?w.bullets.each(function(){e(this).index()===o&&e(this).addClass(w.params.bulletActiveClass)}):w.bullets.eq(o).addClass(w.params.bulletActiveClass)),"fraction"===w.params.paginationType&&(w.paginationContainer.find("."+w.params.paginationCurrentClass).text(o+1),w.paginationContainer.find("."+w.params.paginationTotalClass).text(r)),"progress"===w.params.paginationType){var a=(o+1)/r,s=a,l=1;w.isHorizontal()||(l=a,s=1),w.paginationContainer.find("."+w.params.paginationProgressbarClass).transform("translate3d(0,0,0) scaleX("+s+") scaleY("+l+")").transition(w.params.speed)}"custom"===w.params.paginationType&&w.params.paginationCustomRender&&(w.paginationContainer.html(w.params.paginationCustomRender(w,o+1,r)),w.emit("onPaginationRendered",w,w.paginationContainer[0]))}w.params.loop||(w.params.prevButton&&w.prevButton&&w.prevButton.length>0&&(w.isBeginning?(w.prevButton.addClass(w.params.buttonDisabledClass),w.params.a11y&&w.a11y&&w.a11y.disable(w.prevButton)):(w.prevButton.removeClass(w.params.buttonDisabledClass),w.params.a11y&&w.a11y&&w.a11y.enable(w.prevButton))),w.params.nextButton&&w.nextButton&&w.nextButton.length>0&&(w.isEnd?(w.nextButton.addClass(w.params.buttonDisabledClass),w.params.a11y&&w.a11y&&w.a11y.disable(w.nextButton)):(w.nextButton.removeClass(w.params.buttonDisabledClass),w.params.a11y&&w.a11y&&w.a11y.enable(w.nextButton))))},w.updatePagination=function(){if(w.params.pagination&&w.paginationContainer&&w.paginationContainer.length>0){var t="";if("bullets"===w.params.paginationType){for(var e=w.params.loop?Math.ceil((w.slides.length-2*w.loopedSlides)/w.params.slidesPerGroup):w.snapGrid.length,n=0;n<e;n++)w.params.paginationBulletRender?t+=w.params.paginationBulletRender(n,w.params.bulletClass):t+="<"+w.params.paginationElement+' class="'+w.params.bulletClass+'"></'+w.params.paginationElement+">";w.paginationContainer.html(t),w.bullets=w.paginationContainer.find("."+w.params.bulletClass),w.params.paginationClickable&&w.params.a11y&&w.a11y&&w.a11y.initPagination()}"fraction"===w.params.paginationType&&(t=w.params.paginationFractionRender?w.params.paginationFractionRender(w,w.params.paginationCurrentClass,w.params.paginationTotalClass):'<span class="'+w.params.paginationCurrentClass+'"></span> / <span class="'+w.params.paginationTotalClass+'"></span>',w.paginationContainer.html(t)),"progress"===w.params.paginationType&&(t=w.params.paginationProgressRender?w.params.paginationProgressRender(w,w.params.paginationProgressbarClass):'<span class="'+w.params.paginationProgressbarClass+'"></span>',w.paginationContainer.html(t)),"custom"!==w.params.paginationType&&w.emit("onPaginationRendered",w,w.paginationContainer[0])}},w.update=function(t){function e(){n=Math.min(Math.max(w.translate,w.maxTranslate()),w.minTranslate()),w.setWrapperTranslate(n),w.updateActiveIndex(),w.updateClasses()}var n;(w.updateContainerSize(),w.updateSlidesSize(),w.updateProgress(),w.updatePagination(),w.updateClasses(),w.params.scrollbar&&w.scrollbar&&w.scrollbar.set(),t)?(w.controller&&w.controller.spline&&(w.controller.spline=undefined),w.params.freeMode?(e(),w.params.autoHeight&&w.updateAutoHeight()):(("auto"===w.params.slidesPerView||w.params.slidesPerView>1)&&w.isEnd&&!w.params.centeredSlides?w.slideTo(w.slides.length-1,0,!1,!0):w.slideTo(w.activeIndex,0,!1,!0))||e()):w.params.autoHeight&&w.updateAutoHeight()},w.onResize=function(t){w.params.breakpoints&&w.setBreakpoint();var e=w.params.allowSwipeToPrev,n=w.params.allowSwipeToNext;w.params.allowSwipeToPrev=w.params.allowSwipeToNext=!0,w.updateContainerSize(),w.updateSlidesSize(),("auto"===w.params.slidesPerView||w.params.freeMode||t)&&w.updatePagination(),w.params.scrollbar&&w.scrollbar&&w.scrollbar.set(),w.controller&&w.controller.spline&&(w.controller.spline=undefined);var i=!1;if(w.params.freeMode){var o=Math.min(Math.max(w.translate,w.maxTranslate()),w.minTranslate());w.setWrapperTranslate(o),w.updateActiveIndex(),w.updateClasses(),w.params.autoHeight&&w.updateAutoHeight()}else w.updateClasses(),i=("auto"===w.params.slidesPerView||w.params.slidesPerView>1)&&w.isEnd&&!w.params.centeredSlides?w.slideTo(w.slides.length-1,0,!1,!0):w.slideTo(w.activeIndex,0,!1,!0);w.params.lazyLoading&&!i&&w.lazy&&w.lazy.load(),w.params.allowSwipeToPrev=e,w.params.allowSwipeToNext=n};var C=["mousedown","mousemove","mouseup"];window.navigator.pointerEnabled?C=["pointerdown","pointermove","pointerup"]:window.navigator.msPointerEnabled&&(C=["MSPointerDown","MSPointerMove","MSPointerUp"]),w.touchEvents={start:w.support.touch||!w.params.simulateTouch?"touchstart":C[0],move:w.support.touch||!w.params.simulateTouch?"touchmove":C[1],end:w.support.touch||!w.params.simulateTouch?"touchend":C[2]},(window.navigator.pointerEnabled||window.navigator.msPointerEnabled)&&("container"===w.params.touchEventsTarget?w.container:w.wrapper).addClass("swiper-wp8-"+w.params.direction),w.initEvents=function(t){var e=t?"off":"on",i=t?"removeEventListener":"addEventListener",o="container"===w.params.touchEventsTarget?w.container[0]:w.wrapper[0],r=w.support.touch?o:document,a=!!w.params.nested;w.browser.ie?(o[i](w.touchEvents.start,w.onTouchStart,!1),r[i](w.touchEvents.move,w.onTouchMove,a),r[i](w.touchEvents.end,w.onTouchEnd,!1)):(w.support.touch&&(o[i](w.touchEvents.start,w.onTouchStart,!1),o[i](w.touchEvents.move,w.onTouchMove,a),o[i](w.touchEvents.end,w.onTouchEnd,!1)),!n.simulateTouch||w.device.ios||w.device.android||(o[i]("mousedown",w.onTouchStart,!1),document[i]("mousemove",w.onTouchMove,a),document[i]("mouseup",w.onTouchEnd,!1))),window[i]("resize",w.onResize),w.params.nextButton&&w.nextButton&&w.nextButton.length>0&&(w.nextButton[e]("click",w.onClickNext),w.params.a11y&&w.a11y&&w.nextButton[e]("keydown",w.a11y.onEnterKey)),w.params.prevButton&&w.prevButton&&w.prevButton.length>0&&(w.prevButton[e]("click",w.onClickPrev),w.params.a11y&&w.a11y&&w.prevButton[e]("keydown",w.a11y.onEnterKey)),w.params.pagination&&w.params.paginationClickable&&(w.paginationContainer[e]("click","."+w.params.bulletClass,w.onClickIndex),w.params.a11y&&w.a11y&&w.paginationContainer[e]("keydown","."+w.params.bulletClass,w.a11y.onEnterKey)),(w.params.preventClicks||w.params.preventClicksPropagation)&&o[i]("click",w.preventClicks,!0)},w.attachEvents=function(){w.initEvents()},w.detachEvents=function(){w.initEvents(!0)},w.allowClick=!0,w.preventClicks=function(t){w.allowClick||(w.params.preventClicks&&t.preventDefault(),w.params.preventClicksPropagation&&w.animating&&(t.stopPropagation(),t.stopImmediatePropagation()))},w.onClickNext=function(t){t.preventDefault(),w.isEnd&&!w.params.loop||w.slideNext()},w.onClickPrev=function(t){t.preventDefault(),w.isBeginning&&!w.params.loop||w.slidePrev()},w.onClickIndex=function(t){t.preventDefault();var n=e(this).index()*w.params.slidesPerGroup;w.params.loop&&(n+=w.loopedSlides),w.slideTo(n)},w.updateClickedSlide=function(t){var n=s(t,"."+w.params.slideClass),i=!1;if(n)for(var o=0;o<w.slides.length;o++)w.slides[o]===n&&(i=!0);if(!n||!i)return w.clickedSlide=undefined,void(w.clickedIndex=undefined);if(w.clickedSlide=n,w.clickedIndex=e(n).index(),w.params.slideToClickedSlide&&w.clickedIndex!==undefined&&w.clickedIndex!==w.activeIndex){var r,a=w.clickedIndex;if(w.params.loop){if(w.animating)return;r=e(w.clickedSlide).attr("data-swiper-slide-index"),w.params.centeredSlides?a<w.loopedSlides-w.params.slidesPerView/2||a>w.slides.length-w.loopedSlides+w.params.slidesPerView/2?(w.fixLoop(),a=w.wrapper.children("."+w.params.slideClass+'[data-swiper-slide-index="'+r+'"]:not(.swiper-slide-duplicate)').eq(0).index(),setTimeout(function(){w.slideTo(a)},0)):w.slideTo(a):a>w.slides.length-w.params.slidesPerView?(w.fixLoop(),a=w.wrapper.children("."+w.params.slideClass+'[data-swiper-slide-index="'+r+'"]:not(.swiper-slide-duplicate)').eq(0).index(),setTimeout(function(){w.slideTo(a)},0)):w.slideTo(a)}else w.slideTo(a)}};var _,x,k,A,S,T,D,E,O,M,L,I,P="input, select, textarea, button",R=Date.now(),N=[];if(w.animating=!1,w.touches={startX:0,startY:0,currentX:0,currentY:0,diff:0},w.onTouchStart=function(t){if(t.originalEvent&&(t=t.originalEvent),(L="touchstart"===t.type)||!("which"in t)||3!==t.which)if(w.params.noSwiping&&s(t,"."+w.params.noSwipingClass))w.allowClick=!0;else if(!w.params.swipeHandler||s(t,w.params.swipeHandler)){var n=w.touches.currentX="touchstart"===t.type?t.targetTouches[0].pageX:t.pageX,i=w.touches.currentY="touchstart"===t.type?t.targetTouches[0].pageY:t.pageY;if(!(w.device.ios&&w.params.iOSEdgeSwipeDetection&&n<=w.params.iOSEdgeSwipeThreshold)){if(_=!0,x=!1,k=!0,S=undefined,I=undefined,w.touches.startX=n,w.touches.startY=i,A=Date.now(),w.allowClick=!0,w.updateContainerSize(),w.swipeDirection=undefined,w.params.threshold>0&&(E=!1),"touchstart"!==t.type){var o=!0;e(t.target).is(P)&&(o=!1),document.activeElement&&e(document.activeElement).is(P)&&document.activeElement.blur(),o&&t.preventDefault()}w.emit("onTouchStart",w,t)}}},w.onTouchMove=function(t){if(t.originalEvent&&(t=t.originalEvent),!L||"mousemove"!==t.type){if(t.preventedByNestedSwiper)return w.touches.startX="touchmove"===t.type?t.targetTouches[0].pageX:t.pageX,void(w.touches.startY="touchmove"===t.type?t.targetTouches[0].pageY:t.pageY);if(w.params.onlyExternal)return w.allowClick=!1,void(_&&(w.touches.startX=w.touches.currentX="touchmove"===t.type?t.targetTouches[0].pageX:t.pageX,w.touches.startY=w.touches.currentY="touchmove"===t.type?t.targetTouches[0].pageY:t.pageY,A=Date.now()));if(L&&document.activeElement&&t.target===document.activeElement&&e(t.target).is(P))return x=!0,void(w.allowClick=!1);if(k&&w.emit("onTouchMove",w,t),!(t.targetTouches&&t.targetTouches.length>1)){if(w.touches.currentX="touchmove"===t.type?t.targetTouches[0].pageX:t.pageX,w.touches.currentY="touchmove"===t.type?t.targetTouches[0].pageY:t.pageY,void 0===S){var i=180*Math.atan2(Math.abs(w.touches.currentY-w.touches.startY),Math.abs(w.touches.currentX-w.touches.startX))/Math.PI;S=w.isHorizontal()?i>w.params.touchAngle:90-i>w.params.touchAngle}if(S&&w.emit("onTouchMoveOpposite",w,t),void 0===I&&w.browser.ieTouch&&(w.touches.currentX===w.touches.startX&&w.touches.currentY===w.touches.startY||(I=!0)),_)if(S)_=!1;else if(I||!w.browser.ieTouch){w.allowClick=!1,w.emit("onSliderMove",w,t),t.preventDefault(),w.params.touchMoveStopPropagation&&!w.params.nested&&t.stopPropagation(),x||(n.loop&&w.fixLoop(),D=w.getWrapperTranslate(),w.setWrapperTransition(0),w.animating&&w.wrapper.trigger("webkitTransitionEnd transitionend oTransitionEnd MSTransitionEnd msTransitionEnd"),w.params.autoplay&&w.autoplaying&&(w.params.autoplayDisableOnInteraction?w.stopAutoplay():w.pauseAutoplay()),M=!1,w.params.grabCursor&&(w.container[0].style.cursor="move",w.container[0].style.cursor="-webkit-grabbing",w.container[0].style.cursor="-moz-grabbin",w.container[0].style.cursor="grabbing")),x=!0;var o=w.touches.diff=w.isHorizontal()?w.touches.currentX-w.touches.startX:w.touches.currentY-w.touches.startY;o*=w.params.touchRatio,w.rtl&&(o=-o),w.swipeDirection=o>0?"prev":"next",T=o+D;var r=!0;if(o>0&&T>w.minTranslate()?(r=!1,w.params.resistance&&(T=w.minTranslate()-1+Math.pow(-w.minTranslate()+D+o,w.params.resistanceRatio))):o<0&&T<w.maxTranslate()&&(r=!1,w.params.resistance&&(T=w.maxTranslate()+1-Math.pow(w.maxTranslate()-D-o,w.params.resistanceRatio))),r&&(t.preventedByNestedSwiper=!0),!w.params.allowSwipeToNext&&"next"===w.swipeDirection&&T<D&&(T=D),!w.params.allowSwipeToPrev&&"prev"===w.swipeDirection&&T>D&&(T=D),w.params.followFinger){if(w.params.threshold>0){if(!(Math.abs(o)>w.params.threshold||E))return void(T=D);if(!E)return E=!0,w.touches.startX=w.touches.currentX,w.touches.startY=w.touches.currentY,T=D,void(w.touches.diff=w.isHorizontal()?w.touches.currentX-w.touches.startX:w.touches.currentY-w.touches.startY)}(w.params.freeMode||w.params.watchSlidesProgress)&&w.updateActiveIndex(),w.params.freeMode&&(0===N.length&&N.push({position:w.touches[w.isHorizontal()?"startX":"startY"],time:A}),N.push({position:w.touches[w.isHorizontal()?"currentX":"currentY"],time:(new window.Date).getTime()})),w.updateProgress(T),w.setWrapperTranslate(T)}}}}},w.onTouchEnd=function(t){if(t.originalEvent&&(t=t.originalEvent),
k&&w.emit("onTouchEnd",w,t),k=!1,_){w.params.grabCursor&&x&&_&&(w.container[0].style.cursor="move",w.container[0].style.cursor="-webkit-grab",w.container[0].style.cursor="-moz-grab",w.container[0].style.cursor="grab");var n,i=Date.now(),o=i-A;if(w.allowClick&&(w.updateClickedSlide(t),w.emit("onTap",w,t),o<300&&i-R>300&&(O&&clearTimeout(O),O=setTimeout(function(){w&&(w.params.paginationHide&&w.paginationContainer.length>0&&!e(t.target).hasClass(w.params.bulletClass)&&w.paginationContainer.toggleClass(w.params.paginationHiddenClass),w.emit("onClick",w,t))},300)),o<300&&i-R<300&&(O&&clearTimeout(O),w.emit("onDoubleTap",w,t))),R=Date.now(),setTimeout(function(){w&&(w.allowClick=!0)},0),_&&x&&w.swipeDirection&&0!==w.touches.diff&&T!==D)if(_=x=!1,n=w.params.followFinger?w.rtl?w.translate:-w.translate:-T,w.params.freeMode){if(n<-w.minTranslate())return void w.slideTo(w.activeIndex);if(n>-w.maxTranslate())return void(w.slides.length<w.snapGrid.length?w.slideTo(w.snapGrid.length-1):w.slideTo(w.slides.length-1));if(w.params.freeModeMomentum){if(N.length>1){var r=N.pop(),a=N.pop(),s=r.position-a.position,l=r.time-a.time;w.velocity=s/l,w.velocity=w.velocity/2,Math.abs(w.velocity)<w.params.freeModeMinimumVelocity&&(w.velocity=0),(l>150||(new window.Date).getTime()-r.time>300)&&(w.velocity=0)}else w.velocity=0;N.length=0;var c=1e3*w.params.freeModeMomentumRatio,u=w.velocity*c,d=w.translate+u;w.rtl&&(d=-d);var p,h=!1,f=20*Math.abs(w.velocity)*w.params.freeModeMomentumBounceRatio;if(d<w.maxTranslate())w.params.freeModeMomentumBounce?(d+w.maxTranslate()<-f&&(d=w.maxTranslate()-f),p=w.maxTranslate(),h=!0,M=!0):d=w.maxTranslate();else if(d>w.minTranslate())w.params.freeModeMomentumBounce?(d-w.minTranslate()>f&&(d=w.minTranslate()+f),p=w.minTranslate(),h=!0,M=!0):d=w.minTranslate();else if(w.params.freeModeSticky){var m,g=0;for(g=0;g<w.snapGrid.length;g+=1)if(w.snapGrid[g]>-d){m=g;break}d=Math.abs(w.snapGrid[m]-d)<Math.abs(w.snapGrid[m-1]-d)||"next"===w.swipeDirection?w.snapGrid[m]:w.snapGrid[m-1],w.rtl||(d=-d)}if(0!==w.velocity)c=w.rtl?Math.abs((-d-w.translate)/w.velocity):Math.abs((d-w.translate)/w.velocity);else if(w.params.freeModeSticky)return void w.slideReset();w.params.freeModeMomentumBounce&&h?(w.updateProgress(p),w.setWrapperTransition(c),w.setWrapperTranslate(d),w.onTransitionStart(),w.animating=!0,w.wrapper.transitionEnd(function(){w&&M&&(w.emit("onMomentumBounce",w),w.setWrapperTransition(w.params.speed),w.setWrapperTranslate(p),w.wrapper.transitionEnd(function(){w&&w.onTransitionEnd()}))})):w.velocity?(w.updateProgress(d),w.setWrapperTransition(c),w.setWrapperTranslate(d),w.onTransitionStart(),w.animating||(w.animating=!0,w.wrapper.transitionEnd(function(){w&&w.onTransitionEnd()}))):w.updateProgress(d),w.updateActiveIndex()}(!w.params.freeModeMomentum||o>=w.params.longSwipesMs)&&(w.updateProgress(),w.updateActiveIndex())}else{var v,y=0,b=w.slidesSizesGrid[0];for(v=0;v<w.slidesGrid.length;v+=w.params.slidesPerGroup)"undefined"!=typeof w.slidesGrid[v+w.params.slidesPerGroup]?n>=w.slidesGrid[v]&&n<w.slidesGrid[v+w.params.slidesPerGroup]&&(y=v,b=w.slidesGrid[v+w.params.slidesPerGroup]-w.slidesGrid[v]):n>=w.slidesGrid[v]&&(y=v,b=w.slidesGrid[w.slidesGrid.length-1]-w.slidesGrid[w.slidesGrid.length-2]);var $=(n-w.slidesGrid[y])/b;if(o>w.params.longSwipesMs){if(!w.params.longSwipes)return void w.slideTo(w.activeIndex);"next"===w.swipeDirection&&($>=w.params.longSwipesRatio?w.slideTo(y+w.params.slidesPerGroup):w.slideTo(y)),"prev"===w.swipeDirection&&($>1-w.params.longSwipesRatio?w.slideTo(y+w.params.slidesPerGroup):w.slideTo(y))}else{if(!w.params.shortSwipes)return void w.slideTo(w.activeIndex);"next"===w.swipeDirection&&w.slideTo(y+w.params.slidesPerGroup),"prev"===w.swipeDirection&&w.slideTo(y)}}else _=x=!1}},w._slideTo=function(t,e){return w.slideTo(t,e,!0,!0)},w.slideTo=function(t,e,n,i){void 0===n&&(n=!0),void 0===t&&(t=0),t<0&&(t=0),w.snapIndex=Math.floor(t/w.params.slidesPerGroup),w.snapIndex>=w.snapGrid.length&&(w.snapIndex=w.snapGrid.length-1);var o=-w.snapGrid[w.snapIndex];w.params.autoplay&&w.autoplaying&&(i||!w.params.autoplayDisableOnInteraction?w.pauseAutoplay(e):w.stopAutoplay()),w.updateProgress(o);for(var r=0;r<w.slidesGrid.length;r++)-Math.floor(100*o)>=Math.floor(100*w.slidesGrid[r])&&(t=r);return!(!w.params.allowSwipeToNext&&o<w.translate&&o<w.minTranslate())&&(!(!w.params.allowSwipeToPrev&&o>w.translate&&o>w.maxTranslate()&&(w.activeIndex||0)!==t)&&(void 0===e&&(e=w.params.speed),w.previousIndex=w.activeIndex||0,w.activeIndex=t,w.rtl&&-o===w.translate||!w.rtl&&o===w.translate?(w.params.autoHeight&&w.updateAutoHeight(),w.updateClasses(),"slide"!==w.params.effect&&w.setWrapperTranslate(o),!1):(w.updateClasses(),w.onTransitionStart(n),0===e?(w.setWrapperTranslate(o),w.setWrapperTransition(0),w.onTransitionEnd(n)):(w.setWrapperTranslate(o),w.setWrapperTransition(e),w.animating||(w.animating=!0,w.wrapper.transitionEnd(function(){w&&w.onTransitionEnd(n)}))),!0)))},w.onTransitionStart=function(t){void 0===t&&(t=!0),w.params.autoHeight&&w.updateAutoHeight(),w.lazy&&w.lazy.onTransitionStart(),t&&(w.emit("onTransitionStart",w),w.activeIndex!==w.previousIndex&&(w.emit("onSlideChangeStart",w),w.activeIndex>w.previousIndex?w.emit("onSlideNextStart",w):w.emit("onSlidePrevStart",w)))},w.onTransitionEnd=function(t){w.animating=!1,w.setWrapperTransition(0),void 0===t&&(t=!0),w.lazy&&w.lazy.onTransitionEnd(),t&&(w.emit("onTransitionEnd",w),w.activeIndex!==w.previousIndex&&(w.emit("onSlideChangeEnd",w),w.activeIndex>w.previousIndex?w.emit("onSlideNextEnd",w):w.emit("onSlidePrevEnd",w))),w.params.hashnav&&w.hashnav&&w.hashnav.setHash()},w.slideNext=function(t,e,n){if(w.params.loop){if(w.animating)return!1;w.fixLoop();w.container[0].clientLeft;return w.slideTo(w.activeIndex+w.params.slidesPerGroup,e,t,n)}return w.slideTo(w.activeIndex+w.params.slidesPerGroup,e,t,n)},w._slideNext=function(t){return w.slideNext(!0,t,!0)},w.slidePrev=function(t,e,n){if(w.params.loop){if(w.animating)return!1;w.fixLoop();w.container[0].clientLeft;return w.slideTo(w.activeIndex-1,e,t,n)}return w.slideTo(w.activeIndex-1,e,t,n)},w._slidePrev=function(t){return w.slidePrev(!0,t,!0)},w.slideReset=function(t,e){return w.slideTo(w.activeIndex,e,t)},w.setWrapperTransition=function(t,e){w.wrapper.transition(t),"slide"!==w.params.effect&&w.effects[w.params.effect]&&w.effects[w.params.effect].setTransition(t),w.params.parallax&&w.parallax&&w.parallax.setTransition(t),w.params.scrollbar&&w.scrollbar&&w.scrollbar.setTransition(t),w.params.control&&w.controller&&w.controller.setTransition(t,e),w.emit("onSetTransition",w,t)},w.setWrapperTranslate=function(t,e,n){var o=0,r=0,a=0;w.isHorizontal()?o=w.rtl?-t:t:r=t,w.params.roundLengths&&(o=i(o),r=i(r)),w.params.virtualTranslate||(w.support.transforms3d?w.wrapper.transform("translate3d("+o+"px, "+r+"px, "+a+"px)"):w.wrapper.transform("translate("+o+"px, "+r+"px)")),w.translate=w.isHorizontal()?o:r;var s=w.maxTranslate()-w.minTranslate();(0===s?0:(t-w.minTranslate())/s)!==w.progress&&w.updateProgress(t),e&&w.updateActiveIndex(),"slide"!==w.params.effect&&w.effects[w.params.effect]&&w.effects[w.params.effect].setTranslate(w.translate),w.params.parallax&&w.parallax&&w.parallax.setTranslate(w.translate),w.params.scrollbar&&w.scrollbar&&w.scrollbar.setTranslate(w.translate),w.params.control&&w.controller&&w.controller.setTranslate(w.translate,n),w.emit("onSetTranslate",w,w.translate)},w.getTranslate=function(t,e){var n,i,o,r;return void 0===e&&(e="x"),w.params.virtualTranslate?w.rtl?-w.translate:w.translate:(o=window.getComputedStyle(t,null),window.WebKitCSSMatrix?((i=o.transform||o.webkitTransform).split(",").length>6&&(i=i.split(", ").map(function(t){return t.replace(",",".")}).join(", ")),r=new window.WebKitCSSMatrix("none"===i?"":i)):n=(r=o.MozTransform||o.OTransform||o.MsTransform||o.msTransform||o.transform||o.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,")).toString().split(","),"x"===e&&(i=window.WebKitCSSMatrix?r.m41:16===n.length?parseFloat(n[12]):parseFloat(n[4])),"y"===e&&(i=window.WebKitCSSMatrix?r.m42:16===n.length?parseFloat(n[13]):parseFloat(n[5])),w.rtl&&i&&(i=-i),i||0)},w.getWrapperTranslate=function(t){return void 0===t&&(t=w.isHorizontal()?"x":"y"),w.getTranslate(w.wrapper[0],t)},w.observers=[],w.initObservers=function(){if(w.params.observeParents)for(var t=w.container.parents(),e=0;e<t.length;e++)l(t[e]);l(w.container[0],{childList:!1}),l(w.wrapper[0],{attributes:!1})},w.disconnectObservers=function(){for(var t=0;t<w.observers.length;t++)w.observers[t].disconnect();w.observers=[]},w.createLoop=function(){w.wrapper.children("."+w.params.slideClass+"."+w.params.slideDuplicateClass).remove();var t=w.wrapper.children("."+w.params.slideClass);"auto"!==w.params.slidesPerView||w.params.loopedSlides||(w.params.loopedSlides=t.length),w.loopedSlides=parseInt(w.params.loopedSlides||w.params.slidesPerView,10),w.loopedSlides=w.loopedSlides+w.params.loopAdditionalSlides,w.loopedSlides>t.length&&(w.loopedSlides=t.length);var n,i=[],o=[];for(t.each(function(n,r){var a=e(this);n<w.loopedSlides&&o.push(r),n<t.length&&n>=t.length-w.loopedSlides&&i.push(r),a.attr("data-swiper-slide-index",n)}),n=0;n<o.length;n++)w.wrapper.append(e(o[n].cloneNode(!0)).addClass(w.params.slideDuplicateClass));for(n=i.length-1;n>=0;n--)w.wrapper.prepend(e(i[n].cloneNode(!0)).addClass(w.params.slideDuplicateClass))},w.destroyLoop=function(){w.wrapper.children("."+w.params.slideClass+"."+w.params.slideDuplicateClass).remove(),w.slides.removeAttr("data-swiper-slide-index")},w.reLoop=function(t){var e=w.activeIndex-w.loopedSlides;w.destroyLoop(),w.createLoop(),w.updateSlidesSize(),t&&w.slideTo(e+w.loopedSlides,0,!1)},w.fixLoop=function(){var t;w.activeIndex<w.loopedSlides?(t=w.slides.length-3*w.loopedSlides+w.activeIndex,t+=w.loopedSlides,w.slideTo(t,0,!1,!0)):("auto"===w.params.slidesPerView&&w.activeIndex>=2*w.loopedSlides||w.activeIndex>w.slides.length-2*w.params.slidesPerView)&&(t=-w.slides.length+w.activeIndex+w.loopedSlides,t+=w.loopedSlides,w.slideTo(t,0,!1,!0))},w.appendSlide=function(t){if(w.params.loop&&w.destroyLoop(),"object"==typeof t&&t.length)for(var e=0;e<t.length;e++)t[e]&&w.wrapper.append(t[e]);else w.wrapper.append(t);w.params.loop&&w.createLoop(),w.params.observer&&w.support.observer||w.update(!0)},w.prependSlide=function(t){w.params.loop&&w.destroyLoop();var e=w.activeIndex+1;if("object"==typeof t&&t.length){for(var n=0;n<t.length;n++)t[n]&&w.wrapper.prepend(t[n]);e=w.activeIndex+t.length}else w.wrapper.prepend(t);w.params.loop&&w.createLoop(),w.params.observer&&w.support.observer||w.update(!0),w.slideTo(e,0,!1)},w.removeSlide=function(t){w.params.loop&&(w.destroyLoop(),w.slides=w.wrapper.children("."+w.params.slideClass));var e,n=w.activeIndex;if("object"==typeof t&&t.length){for(var i=0;i<t.length;i++)e=t[i],w.slides[e]&&w.slides.eq(e).remove(),e<n&&n--;n=Math.max(n,0)}else e=t,w.slides[e]&&w.slides.eq(e).remove(),e<n&&n--,n=Math.max(n,0);w.params.loop&&w.createLoop(),w.params.observer&&w.support.observer||w.update(!0),w.params.loop?w.slideTo(n+w.loopedSlides,0,!1):w.slideTo(n,0,!1)},w.removeAllSlides=function(){for(var t=[],e=0;e<w.slides.length;e++)t.push(e);w.removeSlide(t)},w.effects={fade:{setTranslate:function(){for(var t=0;t<w.slides.length;t++){var e=w.slides.eq(t),n=-e[0].swiperSlideOffset;w.params.virtualTranslate||(n-=w.translate);var i=0;w.isHorizontal()||(i=n,n=0);var o=w.params.fade.crossFade?Math.max(1-Math.abs(e[0].progress),0):1+Math.min(Math.max(e[0].progress,-1),0);e.css({opacity:o}).transform("translate3d("+n+"px, "+i+"px, 0px)")}},setTransition:function(t){if(w.slides.transition(t),w.params.virtualTranslate&&0!==t){var e=!1;w.slides.transitionEnd(function(){if(!e&&w){e=!0,w.animating=!1;for(var t=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"],n=0;n<t.length;n++)w.wrapper.trigger(t[n])}})}}},flip:{setTranslate:function(){for(var t=0;t<w.slides.length;t++){var n=w.slides.eq(t),i=n[0].progress;w.params.flip.limitRotation&&(i=Math.max(Math.min(n[0].progress,1),-1));var o=-180*i,r=0,a=-n[0].swiperSlideOffset,s=0;if(w.isHorizontal()?w.rtl&&(o=-o):(s=a,a=0,r=-o,o=0),n[0].style.zIndex=-Math.abs(Math.round(i))+w.slides.length,w.params.flip.slideShadows){var l=w.isHorizontal()?n.find(".swiper-slide-shadow-left"):n.find(".swiper-slide-shadow-top"),c=w.isHorizontal()?n.find(".swiper-slide-shadow-right"):n.find(".swiper-slide-shadow-bottom");0===l.length&&(l=e('<div class="swiper-slide-shadow-'+(w.isHorizontal()?"left":"top")+'"></div>'),n.append(l)),0===c.length&&(c=e('<div class="swiper-slide-shadow-'+(w.isHorizontal()?"right":"bottom")+'"></div>'),n.append(c)),l.length&&(l[0].style.opacity=Math.max(-i,0)),c.length&&(c[0].style.opacity=Math.max(i,0))}n.transform("translate3d("+a+"px, "+s+"px, 0px) rotateX("+r+"deg) rotateY("+o+"deg)")}},setTransition:function(t){if(w.slides.transition(t).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(t),w.params.virtualTranslate&&0!==t){var n=!1;w.slides.eq(w.activeIndex).transitionEnd(function(){if(!n&&w&&e(this).hasClass(w.params.slideActiveClass)){n=!0,w.animating=!1;for(var t=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"],i=0;i<t.length;i++)w.wrapper.trigger(t[i])}})}}},cube:{setTranslate:function(){var t,n=0;w.params.cube.shadow&&(w.isHorizontal()?(0===(t=w.wrapper.find(".swiper-cube-shadow")).length&&(t=e('<div class="swiper-cube-shadow"></div>'),w.wrapper.append(t)),t.css({height:w.width+"px"})):0===(t=w.container.find(".swiper-cube-shadow")).length&&(t=e('<div class="swiper-cube-shadow"></div>'),w.container.append(t)));for(var i=0;i<w.slides.length;i++){var o=w.slides.eq(i),r=90*i,a=Math.floor(r/360);w.rtl&&(r=-r,a=Math.floor(-r/360));var s=Math.max(Math.min(o[0].progress,1),-1),l=0,c=0,u=0;i%4==0?(l=4*-a*w.size,u=0):(i-1)%4==0?(l=0,u=4*-a*w.size):(i-2)%4==0?(l=w.size+4*a*w.size,u=w.size):(i-3)%4==0&&(l=-w.size,u=3*w.size+4*w.size*a),w.rtl&&(l=-l),w.isHorizontal()||(c=l,l=0);var d="rotateX("+(w.isHorizontal()?0:-r)+"deg) rotateY("+(w.isHorizontal()?r:0)+"deg) translate3d("+l+"px, "+c+"px, "+u+"px)";if(s<=1&&s>-1&&(n=90*i+90*s,w.rtl&&(n=90*-i-90*s)),o.transform(d),w.params.cube.slideShadows){var p=w.isHorizontal()?o.find(".swiper-slide-shadow-left"):o.find(".swiper-slide-shadow-top"),h=w.isHorizontal()?o.find(".swiper-slide-shadow-right"):o.find(".swiper-slide-shadow-bottom");0===p.length&&(p=e('<div class="swiper-slide-shadow-'+(w.isHorizontal()?"left":"top")+'"></div>'),o.append(p)),0===h.length&&(h=e('<div class="swiper-slide-shadow-'+(w.isHorizontal()?"right":"bottom")+'"></div>'),o.append(h)),p.length&&(p[0].style.opacity=Math.max(-s,0)),h.length&&(h[0].style.opacity=Math.max(s,0))}}if(w.wrapper.css({"-webkit-transform-origin":"50% 50% -"+w.size/2+"px","-moz-transform-origin":"50% 50% -"+w.size/2+"px","-ms-transform-origin":"50% 50% -"+w.size/2+"px","transform-origin":"50% 50% -"+w.size/2+"px"}),w.params.cube.shadow)if(w.isHorizontal())t.transform("translate3d(0px, "+(w.width/2+w.params.cube.shadowOffset)+"px, "+-w.width/2+"px) rotateX(90deg) rotateZ(0deg) scale("+w.params.cube.shadowScale+")");else{var f=Math.abs(n)-90*Math.floor(Math.abs(n)/90),m=1.5-(Math.sin(2*f*Math.PI/360)/2+Math.cos(2*f*Math.PI/360)/2),g=w.params.cube.shadowScale,v=w.params.cube.shadowScale/m,y=w.params.cube.shadowOffset;t.transform("scale3d("+g+", 1, "+v+") translate3d(0px, "+(w.height/2+y)+"px, "+-w.height/2/v+"px) rotateX(-90deg)")}var b=w.isSafari||w.isUiWebView?-w.size/2:0;w.wrapper.transform("translate3d(0px,0,"+b+"px) rotateX("+(w.isHorizontal()?0:n)+"deg) rotateY("+(w.isHorizontal()?-n:0)+"deg)")},setTransition:function(t){w.slides.transition(t).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(t),w.params.cube.shadow&&!w.isHorizontal()&&w.container.find(".swiper-cube-shadow").transition(t)}},coverflow:{setTranslate:function(){for(var t=w.translate,n=w.isHorizontal()?-t+w.width/2:-t+w.height/2,i=w.isHorizontal()?w.params.coverflow.rotate:-w.params.coverflow.rotate,o=w.params.coverflow.depth,r=0,a=w.slides.length;r<a;r++){var s=w.slides.eq(r),l=w.slidesSizesGrid[r],c=(n-s[0].swiperSlideOffset-l/2)/l*w.params.coverflow.modifier,u=w.isHorizontal()?i*c:0,d=w.isHorizontal()?0:i*c,p=-o*Math.abs(c),h=w.isHorizontal()?0:w.params.coverflow.stretch*c,f=w.isHorizontal()?w.params.coverflow.stretch*c:0;Math.abs(f)<.001&&(f=0),Math.abs(h)<.001&&(h=0),Math.abs(p)<.001&&(p=0),Math.abs(u)<.001&&(u=0),Math.abs(d)<.001&&(d=0);var m="translate3d("+f+"px,"+h+"px,"+p+"px)  rotateX("+d+"deg) rotateY("+u+"deg)";if(s.transform(m),s[0].style.zIndex=1-Math.abs(Math.round(c)),w.params.coverflow.slideShadows){var g=w.isHorizontal()?s.find(".swiper-slide-shadow-left"):s.find(".swiper-slide-shadow-top"),v=w.isHorizontal()?s.find(".swiper-slide-shadow-right"):s.find(".swiper-slide-shadow-bottom");0===g.length&&(g=e('<div class="swiper-slide-shadow-'+(w.isHorizontal()?"left":"top")+'"></div>'),s.append(g)),0===v.length&&(v=e('<div class="swiper-slide-shadow-'+(w.isHorizontal()?"right":"bottom")+'"></div>'),s.append(v)),g.length&&(g[0].style.opacity=c>0?c:0),v.length&&(v[0].style.opacity=-c>0?-c:0)}}w.browser.ie&&(w.wrapper[0].style.perspectiveOrigin=n+"px 50%")},setTransition:function(t){w.slides.transition(t).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(t)}}},w.lazy={initialImageLoaded:!1,loadImageInSlide:function(t,n){if(void 0!==t&&(void 0===n&&(n=!0),0!==w.slides.length)){var i=w.slides.eq(t),o=i.find(".swiper-lazy:not(.swiper-lazy-loaded):not(.swiper-lazy-loading)");!i.hasClass("swiper-lazy")||i.hasClass("swiper-lazy-loaded")||i.hasClass("swiper-lazy-loading")||(o=o.add(i[0])),0!==o.length&&o.each(function(){var t=e(this);t.addClass("swiper-lazy-loading");var o=t.attr("data-background"),r=t.attr("data-src"),a=t.attr("data-srcset");w.loadImage(t[0],r||o,a,!1,function(){if(o?(t.css("background-image",'url("'+o+'")'),t.removeAttr("data-background")):(a&&(t.attr("srcset",a),t.removeAttr("data-srcset")),r&&(t.attr("src",r),t.removeAttr("data-src"))),t.addClass("swiper-lazy-loaded").removeClass("swiper-lazy-loading"),i.find(".swiper-lazy-preloader, .preloader").remove(),w.params.loop&&n){var e=i.attr("data-swiper-slide-index");if(i.hasClass(w.params.slideDuplicateClass)){var s=w.wrapper.children('[data-swiper-slide-index="'+e+'"]:not(.'+w.params.slideDuplicateClass+")");w.lazy.loadImageInSlide(s.index(),!1)}else{var l=w.wrapper.children("."+w.params.slideDuplicateClass+'[data-swiper-slide-index="'+e+'"]');w.lazy.loadImageInSlide(l.index(),!1)}}w.emit("onLazyImageReady",w,i[0],t[0])}),w.emit("onLazyImageLoad",w,i[0],t[0])})}},load:function(){var t;if(w.params.watchSlidesVisibility)w.wrapper.children("."+w.params.slideVisibleClass).each(function(){w.lazy.loadImageInSlide(e(this).index())});else if(w.params.slidesPerView>1)for(t=w.activeIndex;t<w.activeIndex+w.params.slidesPerView;t++)w.slides[t]&&w.lazy.loadImageInSlide(t);else w.lazy.loadImageInSlide(w.activeIndex);if(w.params.lazyLoadingInPrevNext)if(w.params.slidesPerView>1||w.params.lazyLoadingInPrevNextAmount&&w.params.lazyLoadingInPrevNextAmount>1){var n=w.params.lazyLoadingInPrevNextAmount,i=w.params.slidesPerView,o=Math.min(w.activeIndex+i+Math.max(n,i),w.slides.length),r=Math.max(w.activeIndex-Math.max(i,n),0);for(t=w.activeIndex+w.params.slidesPerView;t<o;t++)w.slides[t]&&w.lazy.loadImageInSlide(t);for(t=r;t<w.activeIndex;t++)w.slides[t]&&w.lazy.loadImageInSlide(t)}else{var a=w.wrapper.children("."+w.params.slideNextClass);a.length>0&&w.lazy.loadImageInSlide(a.index());var s=w.wrapper.children("."+w.params.slidePrevClass);s.length>0&&w.lazy.loadImageInSlide(s.index())}},onTransitionStart:function(){w.params.lazyLoading&&(w.params.lazyLoadingOnTransitionStart||!w.params.lazyLoadingOnTransitionStart&&!w.lazy.initialImageLoaded)&&w.lazy.load()},onTransitionEnd:function(){w.params.lazyLoading&&!w.params.lazyLoadingOnTransitionStart&&w.lazy.load()}},w.scrollbar={isTouched:!1,setDragPosition:function(t){var e=w.scrollbar,n=(w.isHorizontal()?"touchstart"===t.type||"touchmove"===t.type?t.targetTouches[0].pageX:t.pageX||t.clientX:"touchstart"===t.type||"touchmove"===t.type?t.targetTouches[0].pageY:t.pageY||t.clientY)-e.track.offset()[w.isHorizontal()?"left":"top"]-e.dragSize/2,i=-w.minTranslate()*e.moveDivider,o=-w.maxTranslate()*e.moveDivider;n<i?n=i:n>o&&(n=o),n=-n/e.moveDivider,w.updateProgress(n),w.setWrapperTranslate(n,!0)},dragStart:function(t){var e=w.scrollbar;e.isTouched=!0,t.preventDefault(),t.stopPropagation(),e.setDragPosition(t),clearTimeout(e.dragTimeout),e.track.transition(0),w.params.scrollbarHide&&e.track.css("opacity",1),w.wrapper.transition(100),e.drag.transition(100),w.emit("onScrollbarDragStart",w)},dragMove:function(t){var e=w.scrollbar;e.isTouched&&(t.preventDefault?t.preventDefault():t.returnValue=!1,e.setDragPosition(t),w.wrapper.transition(0),e.track.transition(0),e.drag.transition(0),w.emit("onScrollbarDragMove",w))},dragEnd:function(){var t=w.scrollbar;t.isTouched&&(t.isTouched=!1,w.params.scrollbarHide&&(clearTimeout(t.dragTimeout),t.dragTimeout=setTimeout(function(){t.track.css("opacity",0),t.track.transition(400)},1e3)),w.emit("onScrollbarDragEnd",w),w.params.scrollbarSnapOnRelease&&w.slideReset())},enableDraggable:function(){var t=w.scrollbar,n=w.support.touch?t.track:document;e(t.track).on(w.touchEvents.start,t.dragStart),e(n).on(w.touchEvents.move,t.dragMove),e(n).on(w.touchEvents.end,t.dragEnd)},disableDraggable:function(){var t=w.scrollbar,n=w.support.touch?t.track:document;e(t.track).off(w.touchEvents.start,t.dragStart),e(n).off(w.touchEvents.move,t.dragMove),e(n).off(w.touchEvents.end,t.dragEnd)},set:function(){if(w.params.scrollbar){var t=w.scrollbar;t.track=e(w.params.scrollbar),w.params.uniqueNavElements&&"string"==typeof w.params.scrollbar&&t.track.length>1&&1===w.container.find(w.params.scrollbar).length&&(t.track=w.container.find(w.params.scrollbar)),t.drag=t.track.find(".swiper-scrollbar-drag"),0===t.drag.length&&(t.drag=e('<div class="swiper-scrollbar-drag"></div>'),t.track.append(t.drag)),t.drag[0].style.width="",t.drag[0].style.height="",t.trackSize=w.isHorizontal()?t.track[0].offsetWidth:t.track[0].offsetHeight,t.divider=w.size/w.virtualSize,t.moveDivider=t.divider*(t.trackSize/w.size),t.dragSize=t.trackSize*t.divider,w.isHorizontal()?t.drag[0].style.width=t.dragSize+"px":t.drag[0].style.height=t.dragSize+"px",t.divider>=1?t.track[0].style.display="none":t.track[0].style.display="",w.params.scrollbarHide&&(t.track[0].style.opacity=0)}},setTranslate:function(){if(w.params.scrollbar){var t,e=w.scrollbar,n=(w.translate,e.dragSize);t=(e.trackSize-e.dragSize)*w.progress,w.rtl&&w.isHorizontal()?(t=-t)>0?(n=e.dragSize-t,t=0):-t+e.dragSize>e.trackSize&&(n=e.trackSize+t):t<0?(n=e.dragSize+t,t=0):t+e.dragSize>e.trackSize&&(n=e.trackSize-t),w.isHorizontal()?(w.support.transforms3d?e.drag.transform("translate3d("+t+"px, 0, 0)"):e.drag.transform("translateX("+t+"px)"),e.drag[0].style.width=n+"px"):(w.support.transforms3d?e.drag.transform("translate3d(0px, "+t+"px, 0)"):e.drag.transform("translateY("+t+"px)"),e.drag[0].style.height=n+"px"),w.params.scrollbarHide&&(clearTimeout(e.timeout),e.track[0].style.opacity=1,e.timeout=setTimeout(function(){e.track[0].style.opacity=0,e.track.transition(400)},1e3))}},setTransition:function(t){w.params.scrollbar&&w.scrollbar.drag.transition(t)}},w.controller={LinearSpline:function(t,e){var n,i;this.x=t,this.y=e,this.lastIndex=t.length-1;this.x.length;this.interpolate=function(t){return t?(i=s(this.x,t),n=i-1,(t-this.x[n])*(this.y[i]-this.y[n])/(this.x[i]-this.x[n])+this.y[n]):0};var o,r,a,s=function(t,e){for(r=-1,o=t.length;o-r>1;)t[a=o+r>>1]<=e?r=a:o=a;return o}},getInterpolateFunction:function(t){w.controller.spline||(w.controller.spline=w.params.loop?new w.controller.LinearSpline(w.slidesGrid,t.slidesGrid):new w.controller.LinearSpline(w.snapGrid,t.snapGrid))},setTranslate:function(t,e){function n(e){t=e.rtl&&"horizontal"===e.params.direction?-w.translate:w.translate,"slide"===w.params.controlBy&&(w.controller.getInterpolateFunction(e),r=-w.controller.spline.interpolate(-t)),r&&"container"!==w.params.controlBy||(i=(e.maxTranslate()-e.minTranslate())/(w.maxTranslate()-w.minTranslate()),r=(t-w.minTranslate())*i+e.minTranslate()),w.params.controlInverse&&(r=e.maxTranslate()-r),e.updateProgress(r),e.setWrapperTranslate(r,!1,w),e.updateActiveIndex()}var i,r,a=w.params.control;if(w.isArray(a))for(var s=0;s<a.length;s++)a[s]!==e&&a[s]instanceof o&&n(a[s]);else a instanceof o&&e!==a&&n(a)},setTransition:function(t,e){function n(e){e.setWrapperTransition(t,w),0!==t&&(e.onTransitionStart(),e.wrapper.transitionEnd(function(){r&&(e.params.loop&&"slide"===w.params.controlBy&&e.fixLoop(),e.onTransitionEnd())}))}var i,r=w.params.control;if(w.isArray(r))for(i=0;i<r.length;i++)r[i]!==e&&r[i]instanceof o&&n(r[i]);else r instanceof o&&e!==r&&n(r)}},w.hashnav={init:function(){if(w.params.hashnav){w.hashnav.initialized=!0;var t=document.location.hash.replace("#","");if(t)for(var e=0,n=0,i=w.slides.length;n<i;n++){var o=w.slides.eq(n);if(o.attr("data-hash")===t&&!o.hasClass(w.params.slideDuplicateClass)){var r=o.index();w.slideTo(r,e,w.params.runCallbacksOnInit,!0)}}}},setHash:function(){w.hashnav.initialized&&w.params.hashnav&&(document.location.hash=w.slides.eq(w.activeIndex).attr("data-hash")||"")}},w.disableKeyboardControl=function(){w.params.keyboardControl=!1,e(document).off("keydown",c)},w.enableKeyboardControl=function(){w.params.keyboardControl=!0,e(document).on("keydown",c)},w.mousewheel={event:!1,lastScrollTime:(new window.Date).getTime()},w.params.mousewheelControl){try{new window.WheelEvent("wheel"),w.mousewheel.event="wheel"}catch(F){(window.WheelEvent||w.container[0]&&"wheel"in w.container[0])&&(w.mousewheel.event="wheel")}!w.mousewheel.event&&window.WheelEvent,w.mousewheel.event||document.onmousewheel===undefined||(w.mousewheel.event="mousewheel"),w.mousewheel.event||(w.mousewheel.event="DOMMouseScroll")}for(var B in w.disableMousewheelControl=function(){return!!w.mousewheel.event&&(w.container.off(w.mousewheel.event,u),!0)},w.enableMousewheelControl=function(){return!!w.mousewheel.event&&(w.container.on(w.mousewheel.event,u),!0)},w.parallax={setTranslate:function(){w.container.children("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function(){d(this,w.progress)}),w.slides.each(function(){var t=e(this);t.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function(){d(this,Math.min(Math.max(t[0].progress,-1),1))})})},setTransition:function(t){void 0===t&&(t=w.params.speed),w.container.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function(){var n=e(this),i=parseInt(n.attr("data-swiper-parallax-duration"),10)||t;0===t&&(i=0),n.transition(i)})}},w._plugins=[],w.plugins){var j=w.plugins[B](w,w.params[B]);j&&w._plugins.push(j)}return w.callPlugins=function(t){for(var e=0;e<w._plugins.length;e++)t in w._plugins[e]&&w._plugins[e][t](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])},w.emitterEventListeners={},w.emit=function(t){var e;if(w.params[t]&&w.params[t](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),w.emitterEventListeners[t])for(e=0;e<w.emitterEventListeners[t].length;e++)w.emitterEventListeners[t][e](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);w.callPlugins&&w.callPlugins(t,arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])},w.on=function(t,e){return t=p(t),w.emitterEventListeners[t]||(w.emitterEventListeners[t]=[]),w.emitterEventListeners[t].push(e),w},w.off=function(t,e){var n;if(t=p(t),void 0===e)return w.emitterEventListeners[t]=[],w;if(w.emitterEventListeners[t]&&0!==w.emitterEventListeners[t].length){for(n=0;n<w.emitterEventListeners[t].length;n++)w.emitterEventListeners[t][n]===e&&w.emitterEventListeners[t].splice(n,1);return w}},w.once=function(t,e){t=p(t);var n=function(){e(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]),w.off(t,n)};return w.on(t,n),w},w.a11y={makeFocusable:function(t){return t.attr("tabIndex","0"),t},addRole:function(t,e){return t.attr("role",e),t},addLabel:function(t,e){return t.attr("aria-label",e),t},disable:function(t){return t.attr("aria-disabled",!0),t},enable:function(t){return t.attr("aria-disabled",!1),t},onEnterKey:function(t){13===t.keyCode&&(e(t.target).is(w.params.nextButton)?(w.onClickNext(t),w.isEnd?w.a11y.notify(w.params.lastSlideMessage):w.a11y.notify(w.params.nextSlideMessage)):e(t.target).is(w.params.prevButton)&&(w.onClickPrev(t),w.isBeginning?w.a11y.notify(w.params.firstSlideMessage):w.a11y.notify(w.params.prevSlideMessage)),e(t.target).is("."+w.params.bulletClass)&&e(t.target)[0].click())},liveRegion:e('<span class="swiper-notification" aria-live="assertive" aria-atomic="true"></span>'),notify:function(t){var e=w.a11y.liveRegion;0!==e.length&&(e.html(""),e.html(t))},init:function(){w.params.nextButton&&w.nextButton&&w.nextButton.length>0&&(w.a11y.makeFocusable(w.nextButton),w.a11y.addRole(w.nextButton,"button"),w.a11y.addLabel(w.nextButton,w.params.nextSlideMessage)),w.params.prevButton&&w.prevButton&&w.prevButton.length>0&&(w.a11y.makeFocusable(w.prevButton),w.a11y.addRole(w.prevButton,"button"),w.a11y.addLabel(w.prevButton,w.params.prevSlideMessage)),e(w.container).append(w.a11y.liveRegion)},initPagination:function(){w.params.pagination&&w.params.paginationClickable&&w.bullets&&w.bullets.length&&w.bullets.each(function(){var t=e(this);w.a11y.makeFocusable(t),w.a11y.addRole(t,"button"),w.a11y.addLabel(t,w.params.paginationBulletMessage.replace(/{{index}}/,t.index()+1))})},destroy:function(){w.a11y.liveRegion&&w.a11y.liveRegion.length>0&&w.a11y.liveRegion.remove()}},w.init=function(){w.params.loop&&w.createLoop(),w.updateContainerSize(),w.updateSlidesSize(),w.updatePagination(),w.params.scrollbar&&w.scrollbar&&(w.scrollbar.set(),w.params.scrollbarDraggable&&w.scrollbar.enableDraggable()),"slide"!==w.params.effect&&w.effects[w.params.effect]&&(w.params.loop||w.updateProgress(),w.effects[w.params.effect].setTranslate()),w.params.loop?w.slideTo(w.params.initialSlide+w.loopedSlides,0,w.params.runCallbacksOnInit):(w.slideTo(w.params.initialSlide,0,w.params.runCallbacksOnInit),0===w.params.initialSlide&&(w.parallax&&w.params.parallax&&w.parallax.setTranslate(),w.lazy&&w.params.lazyLoading&&(w.lazy.load(),w.lazy.initialImageLoaded=!0))),w.attachEvents(),w.params.observer&&w.support.observer&&w.initObservers(),w.params.preloadImages&&!w.params.lazyLoading&&w.preloadImages(),w.params.autoplay&&w.startAutoplay(),w.params.keyboardControl&&w.enableKeyboardControl&&w.enableKeyboardControl(),w.params.mousewheelControl&&w.enableMousewheelControl&&w.enableMousewheelControl(),w.params.hashnav&&w.hashnav&&w.hashnav.init(),w.params.a11y&&w.a11y&&w.a11y.init(),w.emit("onInit",w)},w.cleanupStyles=function(){w.container.removeClass(w.classNames.join(" ")).removeAttr("style"),w.wrapper.removeAttr("style"),w.slides&&w.slides.length&&w.slides.removeClass([w.params.slideVisibleClass,w.params.slideActiveClass,w.params.slideNextClass,w.params.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-column").removeAttr("data-swiper-row"),w.paginationContainer&&w.paginationContainer.length&&w.paginationContainer.removeClass(w.params.paginationHiddenClass),w.bullets&&w.bullets.length&&w.bullets.removeClass(w.params.bulletActiveClass),w.params.prevButton&&e(w.params.prevButton).removeClass(w.params.buttonDisabledClass),w.params.nextButton&&e(w.params.nextButton).removeClass(w.params.buttonDisabledClass),w.params.scrollbar&&w.scrollbar&&(w.scrollbar.track&&w.scrollbar.track.length&&w.scrollbar.track.removeAttr("style"),w.scrollbar.drag&&w.scrollbar.drag.length&&w.scrollbar.drag.removeAttr("style"))},w.destroy=function(t,e){w.detachEvents(),w.stopAutoplay(),w.params.scrollbar&&w.scrollbar&&w.params.scrollbarDraggable&&w.scrollbar.disableDraggable(),w.params.loop&&w.destroyLoop(),e&&w.cleanupStyles(),w.disconnectObservers(),w.params.keyboardControl&&w.disableKeyboardControl&&w.disableKeyboardControl(),w.params.mousewheelControl&&w.disableMousewheelControl&&w.disableMousewheelControl(),w.params.a11y&&w.a11y&&w.a11y.destroy(),w.emit("onDestroy"),!1!==t&&(w=null)},w.init(),w}};o.prototype={isSafari:(i=navigator.userAgent.toLowerCase(),i.indexOf("safari")>=0&&i.indexOf("chrome")<0&&i.indexOf("android")<0),isUiWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent),isArray:function(t){
return"[object Array]"===Object.prototype.toString.apply(t)},browser:{ie:window.navigator.pointerEnabled||window.navigator.msPointerEnabled,ieTouch:window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>1||window.navigator.pointerEnabled&&window.navigator.maxTouchPoints>1},device:function(){var t=navigator.userAgent,e=t.match(/(Android);?[\s\/]+([\d.]+)?/),n=t.match(/(iPad).*OS\s([\d_]+)/),i=t.match(/(iPod)(.*OS\s([\d_]+))?/),o=!n&&t.match(/(iPhone\sOS)\s([\d_]+)/);return{ios:n||o||i,android:e}}(),support:{touch:window.Modernizr&&!0===Modernizr.touch||!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch),transforms3d:window.Modernizr&&!0===Modernizr.csstransforms3d||(n=document.createElement("div").style,"webkitPerspective"in n||"MozPerspective"in n||"OPerspective"in n||"MsPerspective"in n||"perspective"in n),flexbox:function(){for(var t=document.createElement("div").style,e="alignItems webkitAlignItems webkitBoxAlign msFlexAlign mozBoxAlign webkitFlexDirection msFlexDirection mozBoxDirection mozBoxOrient webkitBoxDirection webkitBoxOrient".split(" "),n=0;n<e.length;n++)if(e[n]in t)return!0}(),observer:"MutationObserver"in window||"WebkitMutationObserver"in window},plugins:{}};for(var r,a=function(){var t=function(t){var e=this,n=0;for(n=0;n<t.length;n++)e[n]=t[n];return e.length=t.length,this},e=function(e,n){var i=[],o=0;if(e&&!n&&e instanceof t)return e;if(e)if("string"==typeof e){var r,a,s=e.trim();if(s.indexOf("<")>=0&&s.indexOf(">")>=0){var l="div";for(0===s.indexOf("<li")&&(l="ul"),0===s.indexOf("<tr")&&(l="tbody"),0!==s.indexOf("<td")&&0!==s.indexOf("<th")||(l="tr"),0===s.indexOf("<tbody")&&(l="table"),0===s.indexOf("<option")&&(l="select"),(a=document.createElement(l)).innerHTML=e,o=0;o<a.childNodes.length;o++)i.push(a.childNodes[o])}else for(r=n||"#"!==e[0]||e.match(/[ .<>:~]/)?(n||document).querySelectorAll(e):[document.getElementById(e.split("#")[1])],o=0;o<r.length;o++)r[o]&&i.push(r[o])}else if(e.nodeType||e===window||e===document)i.push(e);else if(e.length>0&&e[0].nodeType)for(o=0;o<e.length;o++)i.push(e[o]);return new t(i)};return t.prototype={addClass:function(t){if(void 0===t)return this;for(var e=t.split(" "),n=0;n<e.length;n++)for(var i=0;i<this.length;i++)this[i].classList.add(e[n]);return this},removeClass:function(t){for(var e=t.split(" "),n=0;n<e.length;n++)for(var i=0;i<this.length;i++)this[i].classList.remove(e[n]);return this},hasClass:function(t){return!!this[0]&&this[0].classList.contains(t)},toggleClass:function(t){for(var e=t.split(" "),n=0;n<e.length;n++)for(var i=0;i<this.length;i++)this[i].classList.toggle(e[n]);return this},attr:function(t,e){if(1===arguments.length&&"string"==typeof t)return this[0]?this[0].getAttribute(t):undefined;for(var n=0;n<this.length;n++)if(2===arguments.length)this[n].setAttribute(t,e);else for(var i in t)this[n][i]=t[i],this[n].setAttribute(i,t[i]);return this},removeAttr:function(t){for(var e=0;e<this.length;e++)this[e].removeAttribute(t);return this},data:function(t,e){if(void 0===e){if(this[0]){var n=this[0].getAttribute("data-"+t);return n||(this[0].dom7ElementDataStorage&&t in this[0].dom7ElementDataStorage?this[0].dom7ElementDataStorage[t]:undefined)}return undefined}for(var i=0;i<this.length;i++){var o=this[i];o.dom7ElementDataStorage||(o.dom7ElementDataStorage={}),o.dom7ElementDataStorage[t]=e}return this},transform:function(t){for(var e=0;e<this.length;e++){var n=this[e].style;n.webkitTransform=n.MsTransform=n.msTransform=n.MozTransform=n.OTransform=n.transform=t}return this},transition:function(t){"string"!=typeof t&&(t+="ms");for(var e=0;e<this.length;e++){var n=this[e].style;n.webkitTransitionDuration=n.MsTransitionDuration=n.msTransitionDuration=n.MozTransitionDuration=n.OTransitionDuration=n.transitionDuration=t}return this},on:function(t,n,i,o){function r(t){var o=t.target;if(e(o).is(n))i.call(o,t);else for(var r=e(o).parents(),a=0;a<r.length;a++)e(r[a]).is(n)&&i.call(r[a],t)}var a,s,l=t.split(" ");for(a=0;a<this.length;a++)if("function"==typeof n||!1===n)for("function"==typeof n&&(i=arguments[1],o=arguments[2]||!1),s=0;s<l.length;s++)this[a].addEventListener(l[s],i,o);else for(s=0;s<l.length;s++)this[a].dom7LiveListeners||(this[a].dom7LiveListeners=[]),this[a].dom7LiveListeners.push({listener:i,liveListener:r}),this[a].addEventListener(l[s],r,o);return this},off:function(t,e,n,i){for(var o=t.split(" "),r=0;r<o.length;r++)for(var a=0;a<this.length;a++)if("function"==typeof e||!1===e)"function"==typeof e&&(n=arguments[1],i=arguments[2]||!1),this[a].removeEventListener(o[r],n,i);else if(this[a].dom7LiveListeners)for(var s=0;s<this[a].dom7LiveListeners.length;s++)this[a].dom7LiveListeners[s].listener===n&&this[a].removeEventListener(o[r],this[a].dom7LiveListeners[s].liveListener,i);return this},once:function(t,e,n,i){function o(a){n(a),r.off(t,e,o,i)}var r=this;"function"==typeof e&&(e=!1,n=arguments[1],i=arguments[2]),r.on(t,e,o,i)},trigger:function(t,e){for(var n=0;n<this.length;n++){var i;try{i=new window.CustomEvent(t,{detail:e,bubbles:!0,cancelable:!0})}catch(o){(i=document.createEvent("Event")).initEvent(t,!0,!0),i.detail=e}this[n].dispatchEvent(i)}return this},transitionEnd:function(t){function e(r){if(r.target===this)for(t.call(this,r),n=0;n<i.length;n++)o.off(i[n],e)}var n,i=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"],o=this;if(t)for(n=0;n<i.length;n++)o.on(i[n],e);return this},width:function(){return this[0]===window?window.innerWidth:this.length>0?parseFloat(this.css("width")):null},outerWidth:function(t){return this.length>0?t?this[0].offsetWidth+parseFloat(this.css("margin-right"))+parseFloat(this.css("margin-left")):this[0].offsetWidth:null},height:function(){return this[0]===window?window.innerHeight:this.length>0?parseFloat(this.css("height")):null},outerHeight:function(t){return this.length>0?t?this[0].offsetHeight+parseFloat(this.css("margin-top"))+parseFloat(this.css("margin-bottom")):this[0].offsetHeight:null},offset:function(){if(this.length>0){var t=this[0],e=t.getBoundingClientRect(),n=document.body,i=t.clientTop||n.clientTop||0,o=t.clientLeft||n.clientLeft||0,r=window.pageYOffset||t.scrollTop,a=window.pageXOffset||t.scrollLeft;return{top:e.top+r-i,left:e.left+a-o}}return null},css:function(t,e){var n;if(1===arguments.length){if("string"!=typeof t){for(n=0;n<this.length;n++)for(var i in t)this[n].style[i]=t[i];return this}if(this[0])return window.getComputedStyle(this[0],null).getPropertyValue(t)}if(2===arguments.length&&"string"==typeof t){for(n=0;n<this.length;n++)this[n].style[t]=e;return this}return this},each:function(t){for(var e=0;e<this.length;e++)t.call(this[e],e,this[e]);return this},html:function(t){if(void 0===t)return this[0]?this[0].innerHTML:undefined;for(var e=0;e<this.length;e++)this[e].innerHTML=t;return this},text:function(t){if(void 0===t)return this[0]?this[0].textContent.trim():null;for(var e=0;e<this.length;e++)this[e].textContent=t;return this},is:function(n){if(!this[0])return!1;var i,o;if("string"==typeof n){var r=this[0];if(r===document)return n===document;if(r===window)return n===window;if(r.matches)return r.matches(n);if(r.webkitMatchesSelector)return r.webkitMatchesSelector(n);if(r.mozMatchesSelector)return r.mozMatchesSelector(n);if(r.msMatchesSelector)return r.msMatchesSelector(n);for(i=e(n),o=0;o<i.length;o++)if(i[o]===this[0])return!0;return!1}if(n===document)return this[0]===document;if(n===window)return this[0]===window;if(n.nodeType||n instanceof t){for(i=n.nodeType?[n]:n,o=0;o<i.length;o++)if(i[o]===this[0])return!0;return!1}return!1},index:function(){if(this[0]){for(var t=this[0],e=0;null!==(t=t.previousSibling);)1===t.nodeType&&e++;return e}return undefined},eq:function(e){if(void 0===e)return this;var n,i=this.length;return new t(e>i-1?[]:e<0?(n=i+e)<0?[]:[this[n]]:[this[e]])},append:function(e){var n,i;for(n=0;n<this.length;n++)if("string"==typeof e){var o=document.createElement("div");for(o.innerHTML=e;o.firstChild;)this[n].appendChild(o.firstChild)}else if(e instanceof t)for(i=0;i<e.length;i++)this[n].appendChild(e[i]);else this[n].appendChild(e);return this},prepend:function(e){var n,i;for(n=0;n<this.length;n++)if("string"==typeof e){var o=document.createElement("div");for(o.innerHTML=e,i=o.childNodes.length-1;i>=0;i--)this[n].insertBefore(o.childNodes[i],this[n].childNodes[0])}else if(e instanceof t)for(i=0;i<e.length;i++)this[n].insertBefore(e[i],this[n].childNodes[0]);else this[n].insertBefore(e,this[n].childNodes[0]);return this},insertBefore:function(t){for(var n=e(t),i=0;i<this.length;i++)if(1===n.length)n[0].parentNode.insertBefore(this[i],n[0]);else if(n.length>1)for(var o=0;o<n.length;o++)n[o].parentNode.insertBefore(this[i].cloneNode(!0),n[o])},insertAfter:function(t){for(var n=e(t),i=0;i<this.length;i++)if(1===n.length)n[0].parentNode.insertBefore(this[i],n[0].nextSibling);else if(n.length>1)for(var o=0;o<n.length;o++)n[o].parentNode.insertBefore(this[i].cloneNode(!0),n[o].nextSibling)},next:function(n){return this.length>0?n?this[0].nextElementSibling&&e(this[0].nextElementSibling).is(n)?new t([this[0].nextElementSibling]):new t([]):this[0].nextElementSibling?new t([this[0].nextElementSibling]):new t([]):new t([])},nextAll:function(n){var i=[],o=this[0];if(!o)return new t([]);for(;o.nextElementSibling;){var r=o.nextElementSibling;n?e(r).is(n)&&i.push(r):i.push(r),o=r}return new t(i)},prev:function(n){return this.length>0?n?this[0].previousElementSibling&&e(this[0].previousElementSibling).is(n)?new t([this[0].previousElementSibling]):new t([]):this[0].previousElementSibling?new t([this[0].previousElementSibling]):new t([]):new t([])},prevAll:function(n){var i=[],o=this[0];if(!o)return new t([]);for(;o.previousElementSibling;){var r=o.previousElementSibling;n?e(r).is(n)&&i.push(r):i.push(r),o=r}return new t(i)},parent:function(t){for(var n=[],i=0;i<this.length;i++)t?e(this[i].parentNode).is(t)&&n.push(this[i].parentNode):n.push(this[i].parentNode);return e(e.unique(n))},parents:function(t){for(var n=[],i=0;i<this.length;i++)for(var o=this[i].parentNode;o;)t?e(o).is(t)&&n.push(o):n.push(o),o=o.parentNode;return e(e.unique(n))},find:function(e){for(var n=[],i=0;i<this.length;i++)for(var o=this[i].querySelectorAll(e),r=0;r<o.length;r++)n.push(o[r]);return new t(n)},children:function(n){for(var i=[],o=0;o<this.length;o++)for(var r=this[o].childNodes,a=0;a<r.length;a++)n?1===r[a].nodeType&&e(r[a]).is(n)&&i.push(r[a]):1===r[a].nodeType&&i.push(r[a]);return new t(e.unique(i))},remove:function(){for(var t=0;t<this.length;t++)this[t].parentNode&&this[t].parentNode.removeChild(this[t]);return this},add:function(){var t,n,i=this;for(t=0;t<arguments.length;t++){var o=e(arguments[t]);for(n=0;n<o.length;n++)i[i.length]=o[n],i.length++}return i}},e.fn=t.prototype,e.unique=function(t){for(var e=[],n=0;n<t.length;n++)-1===e.indexOf(t[n])&&e.push(t[n]);return e},e}(),s=["jQuery","Zepto","Dom7"],l=0;l<s.length;l++)window[s[l]]&&t(window[s[l]]);(r=void 0===a?window.Dom7||window.Zepto||window.jQuery:a)&&("transitionEnd"in r.fn||(r.fn.transitionEnd=function(t){function e(r){if(r.target===this)for(t.call(this,r),n=0;n<i.length;n++)o.off(i[n],e)}var n,i=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"],o=this;if(t)for(n=0;n<i.length;n++)o.on(i[n],e);return this}),"transform"in r.fn||(r.fn.transform=function(t){for(var e=0;e<this.length;e++){var n=this[e].style;n.webkitTransform=n.MsTransform=n.msTransform=n.MozTransform=n.OTransform=n.transform=t}return this}),"transition"in r.fn||(r.fn.transition=function(t){"string"!=typeof t&&(t+="ms");for(var e=0;e<this.length;e++){var n=this[e].style;n.webkitTransitionDuration=n.MsTransitionDuration=n.msTransitionDuration=n.MozTransitionDuration=n.OTransitionDuration=n.transitionDuration=t}return this})),window.Swiper=o}(),"undefined"!=typeof module?module.exports=window.Swiper:"function"==typeof define&&define.amd&&define([],function(){"use strict";return window.Swiper}),$(document).on("click",".mobile-pre-btn",function(){$('input[value^="\u4e0a\u4e00\u6b65"]').click()}),$(document).on("click",".tips-item-title",function(){var t=$(this).parent();t.hasClass("active")?t.removeClass("active"):t.addClass("active")}),function(){$(function(){var t,e,n,i,o,r,a;return new(function(){function t(){this.initial_value(),this.handle_clicks()}var e;return t.prototype.initial_value=function(){var t;return t=$("#order-information"),this.price=t.data("price"),this.final_price=t.data("final-price"),this.coupon_title=$(".coupon .title-info"),this.adviced_coupon_value=t.data("adviced-coupon-value"),this.current_coupon_value=this.adviced_coupon_value,this.current_coupon_id=t.data("adviced-coupon-id"),this.adviced_credit=t.data("adviced-credit"),this.available_credit=t.data("available-credit"),this.current_credit=this.adviced_credit,this.credit_button=$(".credit-button"),this.credit_will_be_used=$("#credit-will-be-used"),this.period_card=$(".period-card"),this.member_plan=t.data("member-plan"),this.update_url=t.data("update-url"),this.expired_text=$(".member-expired-at .time")},t.prototype.handle_clicks=function(){return this.handle_credit_button(),this.handle_coupon_click(),this.handle_period_card_click()},e="\uffe5",t.prototype.has_credit=function(){return this.available_credit>0},t.prototype.has_coupon=function(){return this.adviced_coupon_value>0},t.prototype.is_member_plan=function(){return!0===this.member_plan},t.prototype.handle_period_card_click=function(){if(this.is_member_plan())return this.period_card.bind("click",(t=this,function(e){var n;return e.preventDefault(),e.stopPropagation(),n=$(e.currentTarget),t.period_card.removeClass("active"),t.update_member_expired_text(n),t.update_member_period(n)}));var t},t.prototype.update_member_expired_text=function(t){var e;return e=t.data("expired"),console.log(e),this.expired_text.text(e)},t.prototype.update_member_period=function(t){return $.ajax({url:this.update_url,method:"PATCH",data:{member_period:t.data("member-period"),price:t.data("member-price")},success:(e=this,function(n){return void 0!==n.error?($.notify(n.error,"error"),window.location.reload()):(t.addClass("active"),e.update_final_price(n.final_price),e.price=n.price,e.coupon_post_update())})});var e},t.prototype.handle_credit_button=function(){if(this.has_credit())return this.credit_button.click((t=this,function(e){return e.preventDefault(),t.update_credit()}));var t},t.prototype.update_credit=function(){if(this.has_credit())return this.current_credit>0?(this.update_final_price(this.final_price+this.current_credit),this.current_credit=0):0===this.current_credit&&(this.credit_button.addClass("active").removeClass("negative"),this.use_credit()),this.update_credit_text(),this.update_form_credit()},t.prototype.update_form_credit=function(){return $("#final-credit-used").val(this.current_credit)},t.prototype.update_form_coupon=function(){return $("#final-coupon-used").val(this.current_coupon_id)},t.prototype.use_credit=function(){var t;return t=this.price-this.current_coupon_value,console.log("remain:"+t+"price:"+this.price+"value:"+this.current_coupon_value),t>0?this.available_credit>t?(this.current_credit=t,this.update_final_price(0)):(this.current_credit=this.available_credit,this.update_final_price(t-this.available_credit)):(this.current_credit=0,this.update_final_price(0))},t.prototype.update_credit_text=function(){return 0===this.current_credit?(this.credit_button.removeClass("active").addClass("negative"),this.credit_button.text("\u4e0d\u4f7f\u7528"),this.credit_will_be_used.text("\u4e0d\u4f7f\u7528"),this.credit_will_be_used.removeClass("active")):this.current_credit>0?(this.credit_button.addClass("active").removeClass("negative"),this.credit_button.text("\u4f7f\u7528"),this.credit_will_be_used.addClass("active"),this.credit_will_be_used.text("- "+e+this.current_credit/100)):void 0},t.prototype.handle_coupon_click=function(){if(this.has_coupon())return $(".coupon-list").click((t=this,function(e){var n;return(n=$(e.currentTarget)).hasClass("active")?t.not_use_coupon(n):t.use_coupon(n),t.coupon_post_update()}));var t},t.prototype.coupon_post_update=function(){return this.update_form_coupon(),this.use_credit(),this.update_credit_text(),this.update_form_credit()},t.prototype.not_use_coupon=function(t){return t.removeClass("active"),this.coupon_title.removeClass("active"),this.coupon_title.text("\u4e0d\u4f7f\u7528"),this.current_coupon_value=0,this.current_coupon_id=""},t.prototype.use_coupon=function(t){return this.clear_current_selected_coupon(),t.addClass("active"),this.current_coupon_value=t.data("coupon-value"),this.current_coupon_id=t.data("coupon-id"),this.coupon_title.addClass("active"),this.coupon_title.text("-"+t.find(".coupon-info").text())},t.prototype.clear_current_selected_coupon=function(){return $(".coupon-list").each(function(t,e){return $(e).removeClass("active")})},t.prototype.update_final_price=function(t){return this.final_price=t,$("#final-price-text").text(""+e+t/100)},t}()),$(document).on("click","#coupon-btn",function(){$(".coupon").hasClass("close-coupon")?$(".coupon").removeClass("close-coupon"):$(".coupon").addClass("close-coupon")}),$(document).on("ajax:success",".order-query-btn",function(t,e){return"unsubscribe"===e.status?($.notify("\u8fd8\u672a\u5173\u6ce8\u516c\u4f17\u53f7, \u65e0\u6cd5\u83b7\u5f97\u6d88\u606f","warn"),$("#bind-wx-pub-modal").modal("show")):"success"===e.status?$.notify(e.msg,"success"):$.notify(e.msg,"error")}),r=function(t){return $(".order-form"),$(".cell-title-price").html(t)},t=function(){var t,e,n,i;return t=$(".order-form"),i=$("#common-cv-id option:selected"),n=parseInt(t.data("init-price"))*(e=parseFloat(i.data("multiple")))*parseFloat($("select[name*=urgency] option:selected").data("multiple")),console.log(e),r(n)},i=function(t){var e;return e=$("#new-order-form"),$(".order-title").addClass("hidden"),$("#"+t).removeClass("hidden"),$(".no-resume-notice").length>0?$("html, body").animate({scrollTop:"200px"},1e3):$("html, body").animate({scrollTop:$(".order-create-panel").offset().top-80+"px"},1e3),$(".order-tips").removeClass("hidden"),e.removeClass("hidden")},o=function(){var t,e,n,i;return n=parseInt($("#suit-form #improved_order_cv_id").val()),e=parseInt($("#suit-form #improved_order_cv2_id").val()),t=parseInt($("#suit-form #improved_order_cover_letter_id").val()),void 0===(i=n>0&&e>0&&t>0?1599:n>0&&e&&isNaN(t)?999:t>0?n>0?999:e>0?1299:void 0:void 0)?$(".order-price").addClass("hide"):$(".order-price").removeClass("hide"),console.log(i),r(i)},a=function(){return JSON.parse($("#user_present").val())},$(".js-order-select").click(function(e){var n;return a()?(n=$(e.currentTarget),$("#new-order-form .order-form").data("init-price",n.data("init-price")),$("#common-form .improved_order_package").val(n.data("package")),i(n.data("type")),t(),$("#suit-form").addClass("hidden"),$("#common-form").removeClass("hidden")):window.location.href=$(e.currentTarget).data("sign-url")}),$(".js-suit-select").click(function(t){var e;return a()?(e=$(t.currentTarget),$("#new-order-form .order-form").data("init-price",e.data("init-price")),o(),$("#common-form .improved_order_package").val(e.data("package")),i(e.data("type")),$("#common-form").addClass("hidden"),$("#suit-form").removeClass("hidden")):window.location.href=$(t.currentTarget).data("sign-url")}),$(document).ready(function(){if($("#improved_orders-order_confirm").length>0&&$("#premium").is(":visible"))return o()}),$("#improved_order_cv_id, #improved_order_cv2_id, #improved_order_cover_letter_id").on("change",function(){return o()}),$("#common-cv-id, select[name*=urgency]").on("change",function(){return t()}),e=function(){var t,e,n,i;return n=$("#improved_order_cv_id").val(),e=$("#improved_order_cv2_id").val(),i=$("#improved_order_cover_letter_id").val(),t=0,!isNaN(n)&&n.length>0&&(t+=1),!isNaN(e)&&e.length>0&&(t+=1),!isNaN(i)&&i.length>0&&(t+=1),console.log(t),t<2},n=function(t){return!!user_subscribe_status()&&(t.find(".order-question").val().length<=0?(alert("\u8bf7\u586b\u5199\u7b80\u5386\u7528\u9014\u53ca\u95ee\u9898"),!1):!!confirm("\u8bf7\u786e\u5b9a\u6240\u9009\u62e9\u7b80\u5386\u5df2\u586b\u5199\u5b8c\u6574\uff0c\u5bfc\u5e08\u4ec5\u9488\u5bf9\u5df2\u9009\u7b80\u5386\u3001\u62db\u8058\u94fe\u63a5\u548c\u95ee\u9898\uff0c\u505a\u51fa\u4fee\u6539\u548c\u53cd\u9988\u610f\u89c1"))},$('#common-form input[type="submit"]').on("click",function(t){var e;return e=$(t.currentTarget).closest("form"),n(e)}),$('#suit-form input[type="submit"]').on("click",function(t){var i;return i=$(t.currentTarget).closest("form"),e()?(alert("\u5957\u9910\u5fc5\u987b\u9009\u62e92\u4e2a\u4ee5\u4e0a\u6587\u4ef6\uff0c\u8bf7\u7ee7\u7eed\u9009\u62e9"),!1):n(i)})})}.call(this),$(document).on("touchstart",".submit-form",function(){const t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;setTimeout(function(){$(".mobile-error-tip").addClass("hide")},1500),$("#profiles-show").length>0&&(""==$("#cv_profile_attributes_username").val()||$("#cv_profile_attributes_username").val()==undefined)?($(".mobile-error-tip").removeClass("hide"),$(".mobile-error-tip span").text("\u8bf7\u586b\u5199\u59d3\u540d")):$("#profiles-show").length>0&&(""==$("#cv_profile_attributes_phone").val()||$("#cv_profile_attributes_phone").val()==undefined)?($(".mobile-error-tip").removeClass("hide"),$(".mobile-error-tip span").text("\u8bf7\u586b\u5199\u7535\u8bdd")):$("#profiles-show").length>0&&(""==$("#cv_profile_attributes_email").val()||$("#cv_profile_attributes_email").val()==undefined)?($(".mobile-error-tip").removeClass("hide"),$(".mobile-error-tip span").text("\u8bf7\u586b\u5199\u90ae\u7bb1")):$("#profiles-show").length>0&&!t.test($("#cv_profile_attributes_email").val())?($(".mobile-error-tip").removeClass("hide"),$(".mobile-error-tip span").text("\u8bf7\u586b\u5199\u6b63\u786e\u683c\u5f0f\u90ae\u7bb1")):($("#form_commit").val($(this).val()),$("form").submit())}),$(document).on("changeDate","input.time-picker",function(){const t=$(this),e=t.datepicker("getDate"),n=e.getMonth()+1,i=e.getFullYear();t.hasClass("end-time")?($presentInput=t.next(),$presentInputDot=t.next().find(".to-date-dot-inline"),$presentInput.hide(),$presentInputDot.removeClass("active")):/_present/.test(t.attr("id"))&&(t.prev('[id*="end_at"]').val(t.val()),$("#cvs-show").length>0?presentEndAtUpdateState(t.next(),i,n):presentEndAtUpdateState(t.parent().next(".to-date"))),console.log(getStrftime(i,n)),syncCvFormDisplay(t,getStrftime(i,n))}),$(document).on("click",'#cv-content input[name*="end_at"], #cv-content input[name*="present"]',function(){$(".to-date").show()}),$(document).on("click","#cv-content .to-date",function(){presentEndAtUpdateState($(this))}),$(document).on("click touchstart",".editor-left-panel-container .switch-part .check-btn",function(){$(".editor-left-panel-container .left-content-container .check-part").removeClass("hide"),$(".editor-left-panel-container .left-content-container .module-part").addClass("hide"),$(this).addClass("active"),$(".editor-left-panel-container .switch-part .module-btn").removeClass("active")}),$(document).on("click touchstart",".editor-left-panel-container .switch-part .module-btn",function(){$(".editor-left-panel-container .left-content-container .check-part").addClass("hide"),$(".editor-left-panel-container .left-content-container .module-part").removeClass("hide"),$(this).addClass("active"),$(".editor-left-panel-container .switch-part .check-btn").removeClass("active")}),$(document).on("touchstart",".editor-left-panel-container .left-content-container .module-part .operation-part .left-panel-section-up",function(){var t=$("#"+$(this).parent().parent().attr("class").split(" ")[0]+" .resume-editor-plate-title .title-ctrl-bar .section-up");if(!t.hasClass("hide")){t.click();var e=$(this).closest("li");e.prev().before(e)}}),$(document).on("touchstart",".editor-left-panel-container .left-content-container .module-part .operation-part .left-panel-section-down",function(){var t=$("#"+$(this).parent().parent().attr("class").split(" ")[0]+" .resume-editor-plate-title .title-ctrl-bar .section-down");if(!t.hasClass("hide")){t.click();var e=$(this).closest("li");e.next().after(e)}}),$(document).on("touchstart",".editor-left-panel-container .left-content-container .module-part .operation-part .left-panel-section-del",function(){$("#"+$(this).parent().parent().attr("class").split(" ")[0]+" .resume-editor-plate-title .title-ctrl-bar .bar-del-btn").click()});var moves=!0;$(document).on("touchmove","#cvs-show #cv-content",function(){moves=!1,$(document).on("touchend","#cvs-show #cv-content",function(){moves=!0})}),$(document).on("touchend","#cvs-show #cv-content #profile-header",function(){const t=$('input[name="mobile"]').val();moves&&t&&$(this).closest(".file-mode").length<=0&&(window.location.href=$(this).find(".mobile-edit-profile-btn").attr("href"))}),$(document).on("touchend","#cvs-show #cv-content .min-height-content .resume-editor-plate-item",function(){const t=$('input[name="mobile"]').val();moves&&t&&$(this).closest(".file-mode").length<=0&&($(this).closest(".other-content").length>0?window.location.href=$(this).parent().parent().find(".resume-editor-plate-title .title-ctrl-bar .bar-edit-btn").attr("href"):window.location.href=$(this).data("edit-form-url"))});var sortableCvBody=function(){$("#cv-body").sortable({axis:"y",handle:".cv-show-step-handle",items:"div.resume-editor-plate",containment:"div#cv-body",update:function(){var t={};return $(".resume-editor-plate").each(function(){t[this.id]=$(this).index()}),$.ajax({url:$(this).data("update-position"),method:"post",dataType:"script",data:{cv:{sections_position:JSON.stringify(t)}}})}})};sortableCvBody(),$(function(){var t=$("#cv-content").data("format-update"),e=function(){$(".control-bar-choose-cv").on("click",function(){$(".cv-picker").hasClass("hide")?$(".cv-picker").removeClass("hide"):$(".cv-picker").addClass("hide")}),$("body").on("click",function(t){$(t.target).closest(".control-bar-choose-cv").length||$(".cv-picker").addClass("hide")})},n=function(){$(".control-bar-choose-file").on("click",function(){$(".file-picker").hasClass("hide")?$(".file-picker").removeClass("hide"):$(".file-picker").addClass("hide")}),$("body").on("click",function(t){$(t.target).closest(".control-bar-choose-file").length||$(".file-picker").addClass("hide")})},i=function(){$(".control-bar-color").on("click",function(){var t=$(".color-picker");t.hasClass("hide")?t.removeClass("hide"):t.addClass("hide")}),$("body").on("click",function(t){var e=$(".color-picker");$(t.target).closest(".control-bar-color").length||e.addClass("hide")})},o=function(){$(".color-item").on("click",function(){var e=$(this).data("color");$("#cvs-show").length>0?$.post(t,{cv:{theme_color:e}}).done(function(){$(".selector-color").css("background",e),$("#cv-content .resume-editor-plate-title").css("border-bottom-color",e)}):$("#cover_letters-edit").length>0?$.ajax({url:t,type:"PUT",data:{cover_letter:{theme_color:e}},success:function(){$(".selector-color").css("background",e),$("#cv-content .divider").css("border-color",e)}}):$("#cover_letters-new").length>0&&($(".selector-color").css("background",e),$("#cv-content .divider").css("border-color",e),$("#cover_letter_theme_color").val(e))})},r=function(){$("#fontsize-select").on("click",function(){var t=$(".font-size-selector").find(".selector-list");t.hasClass("hide")?t.removeClass("hide"):t.addClass("hide")}),$("body").on("click",function(t){var e=$(".font-size-selector").find(".selector-list");$(t.target).closest(".font-size-selector").length||e.addClass("hide")})},a=function(){$(".fontsize-item").on("click",function(){var e=$(this).text().replace("pt","");parseInt(e),parseInt(e);$("#cvs-show").length>0?$.post(t,{cv:{font_size:e}}).done(function(){$("#cv-content").removeClass(function(t,e){return(e.match(/(^|\s)fontsize-\S+/g)||[]).join(" ")}),$("#cv-content").addClass("fontsize-"+e),$(".font-size-selector .selector-list").addClass("hide"),$("#fontsize-input").text(e+"pt"),$("#cv-content").removeData("fontsize"),$("#cv-content").data("fontsize",e)}):$("#cover_letters-edit").length>0?$.ajax({url:t,type:"PUT",data:{cover_letter:{font_size:e}},success:function(){$("#cv-content").removeClass(function(t,e){return(e.match(/(^|\s)fontsize-\S+/g)||[]).join(" ")}),$("#cv-content").addClass("fontsize-"+e),$(".font-size-selector .selector-list").addClass("hide"),$("#fontsize-input").text(e+"pt")}}):$("#cover_letters-new").length>0&&($("#cv-content").removeClass(function(t,e){return(e.match(/(^|\s)fontsize-\S+/g)||[]).join(" ")}),$("#cv-content").addClass("fontsize-"+e),$(".font-size-selector .selector-list").addClass("hide"),$("#fontsize-input").text(e+"pt"),$("#cover_letter_font_size").val(e))})},s=function(){$("#fontsize-input").on("focus",function(){var t=$(this);return t.data("before",t.text()),t}),$("#fontsize-input").on("blur",function(){var e=$(this);if(e.data("before")!==e.text()){if(e.data("before",e.text()),10>(n=e.data("before").replace("pt",""))||n>18)var n=16;parseInt(n),parseInt(n);$("#cvs-show").length>0?$.post(t,{cv:{font_size:n}}).done(function(){$("#cv-content").removeClass(function(t,e){return(e.match(/(^|\s)fontsize-\S+/g)||[]).join(" ")}),$("#cv-content").addClass("fontsize-"+n),$(".font-size-selector .selector-list").addClass("hide"),e.text(n+"pt"),$("#cv-content").removeData("fontsize"),$("#cv-content").data("fontsize",n)}):$("#cover_letters-edit").length>0?$.ajax({url:t,type:"PUT",data:{cover_letter:{font_size:n}},success:function(){$("#cv-content").removeClass(function(t,e){return(e.match(/(^|\s)fontsize-\S+/g)||[]).join(" ")}),$("#cv-content").addClass("fontsize-"+n),$(".font-size-selector .selector-list").addClass("hide")}}):$("#cover_letters-new").length>0&&($("#cv-content").removeClass(function(t,e){return(e.match(/(^|\s)fontsize-\S+/g)||[]).join(" ")}),$("#cv-content").addClass("fontsize-"+n),$(".font-size-selector .selector-list").addClass("hide"),$("#cover_letter_font_size").val(n))}return e})},l=function(){$("#lineheight-select").on("click",function(){var t=$(".spacing-selector").find(".selector-list");t.hasClass("hide")?t.removeClass("hide"):t.addClass("hide")}),$("body").on("click",function(t){var e=$(".spacing-selector").find(".selector-list");$(t.target).closest(".spacing-selector").length||e.addClass("hide")})},c=function(){$(".spacing-selector li").on("click",function(){var e=$(this).text();$("#cvs-show").length>0?$.post(t,{cv:{line_spacing:e}}).done(function(){$("#cv-content").removeClass(function(t,e){return(e.match(/(^|\s)lineH-\S+/g)||[]).join(" ")}),$("#cv-content").addClass("lineH-"+e),$("#lineheight-input").text(parseInt(e)),$("#lineheight-select .spacing-selector .selector-list li").each(function(){$(this).hasClass("active")&&$(this).removeClass("active"),$(this).text()==parseInt(e)&&$(this).addClass("active")}),$(".spacing-selector").find(".selector-list").addClass("hide"),$("#one-page").removeData("line-height"),$("#one-page").data("line-height",e),$("#cv-content").removeData("lineheight"),$("#cv-content").data("lineheight",e)}):$("#cover_letters-edit").length>0?$.ajax({url:t,type:"PUT",data:{cover_letter:{line_spacing:e}},success:function(){$("#cv-content").removeClass(function(t,e){return(e.match(/(^|\s)lineH-\S+/g)||[]).join(" ")}),$("#cv-content").addClass("lineH-"+e),$("#lineheight-input").text(parseInt(e)),$(".spacing-selector").find(".selector-list").addClass("hide")}}):$("#cover_letters-new").length>0&&($("#cv-content").removeClass(function(t,e){return(e.match(/(^|\s)lineH-\S+/g)||[]).join(" ")}),$("#cv-content").addClass("lineH-"+e),$("#lineheight-input").text(parseInt(e)),$(".spacing-selector").find(".selector-list").addClass("hide"),$("#cover_letter_line_spacing").val(e))})},u=function(){$("#lineheight-input").on("focus",function(){var t=$(this);return t.data("before",t.text()),t}),$("#lineheight-input").on("blur",function(){var e=$(this);if(e.data("before")!==e.text()){e.data("before",e.text());var n=e.data("before");(14>n||n>28)&&(n=20),$("#cvs-show").length>0?$.post(t,{cv:{line_spacing:n}}).done(function(){$("#cv-content").removeClass(function(t,e){return(e.match(/(^|\s)lineH-\S+/g)||[]).join(" ")}),$("#cv-content").addClass("lineH-"+n),$("#lineheight-input").text(parseInt(n)),$("#one-page").removeData("line-height"),$("#one-page").data("line-height",n),$("#cv-content").removeData("lineheight"),$("#cv-content").data("lineheight",n)}):$("#cover_letters-edit").length>0?$.ajax({url:t,type:"PUT",data:{cover_letter:{line_spacing:n}},success:function(){$("#cv-content").removeClass(function(t,e){return(e.match(/(^|\s)lineH-\S+/g)||[]).join(" ")}),$("#cv-content").addClass("lineH-"+n),
$("#lineheight-input").text(parseInt(n))}}):$("#cover_letters-new").length>0&&($("#cv-content").removeClass(function(t,e){return(e.match(/(^|\s)fontsize-\S+/g)||[]).join(" ")}),$("#cv-content").addClass("fontsize-"+fontSize),$(".font-size-selector .selector-list").addClass("hide"),$("#fontsize-input").text(fontSize+"pt"),$("#cover_letter_line_spacing").val(n))}return e})},d=function(){$("#page-margin-select").on("click",function(){var t=$(".page-margin-selector").find(".selector-list");t.hasClass("hide")?t.removeClass("hide"):t.addClass("hide")}),$("body").on("click",function(t){var e=$(".page-margin-selector").find(".selector-list");$(t.target).closest(".page-margin-selector").length||e.addClass("hide")})},p=function(){$(".page-margin-selector li").on("click",function(){var e=$(this).text();$("#cvs-show").length>0&&$.post(t,{cv:{page_margin:e}}).done(function(){$("#cv-content").removeClass(function(t,e){return(e.match(/(^|\s)padding-\S+/g)||[]).join(" ")}),$("#cv-content").addClass("padding-"+e),$("#page-margin-input").text(parseInt(e)),$("#page-margin-select .page-margin-selector .selector-list li").each(function(){$(this).hasClass("active")&&$(this).removeClass("active"),$(this).text()==parseInt(e)&&$(this).addClass("active")}),$(".page-margin-selector").find(".selector-list").addClass("hide"),$("#cv-content").removeData("page-margin"),$("#cv-content").data("page-margin",e),cvOnePage(e)})})},h=function(){$("#page-margin-input").on("focus",function(){$(this).data("origin",$(this).text());var t=$(this);return t.data("before",t.text()),t}),$("#page-margin-input").on("blur",function(){var e=$(this);if(e.data("before")!==e.text()){e.data("before",e.text());var n=e.data("before");5>n||n>25?$("#page-margin-input").text(parseInt(e.data("origin"))):$("#cvs-show").length>0&&$.post(t,{cv:{page_margin:n}}).done(function(){$("#cv-content").removeClass(function(t,e){return(e.match(/(^|\s)padding-\S+/g)||[]).join(" ")}),$("#cv-content").addClass("padding-"+n),$("#page-margin-input").text(parseInt(n)),$("#cv-content").removeData("page-margin"),$("#cv-content").data("page-margin",n),cvOnePage(n)})}})},f=function(){$(".font-family-selector").on("click",function(){var t=$(".font-family-selector").find(".selector-list");t.hasClass("hide")?t.removeClass("hide"):t.addClass("hide")}),$("body").on("click",function(t){var e=$(".font-family-selector").find(".selector-list");$(t.target).closest(".font-family-selector").length||e.addClass("hide")})},m=function(){$(".font-item").click(function(){var e=$(this),n=e.attr("title");$("#cvs-show").length>0?$.post(t,{cv:{font:n}}).done(function(){$("#cv-content").removeClass(function(t,e){return(e.match(/(^|\s)font-\S+/g)||[]).join(" ")}),$("#cv-content").addClass(n),$(".font-family-selector .selector-text").text(e.text()),localStorage.alertFontNoPreview||($.notify("\u5b57\u4f53\u6548\u679c\u5df2\u53d8\u66f4\u6210\u529f\uff0c\u8bf7\u4e0b\u8f7d\u6587\u4ef6\u67e5\u770b","info"),localStorage.alertFontNoPreview=!0)}):$("#cover_letters-edit").length>0?$.ajax({url:t,type:"PUT",data:{cover_letter:{font_family:n}},success:function(){$("#cv-content").removeClass(function(t,e){return(e.match(/(^|\s)font-\S+/g)||[]).join(" ")}),$("#cv-content").addClass(n),$(".font-family-selector .selector-text").text(e.text())}}):$("#cover_letters-new").length>0&&($("#cv-content").removeClass(function(t,e){return(e.match(/(^|\s)font-\S+/g)||[]).join(" ")}),$("#cv-content").addClass(n),$(".font-family-selector .selector-text").text(e.text()),$("#cover_letter_font_family").val(n))})},g=function(){$(".add-modal-selector").on("mouseenter",function(){$(this).find(".selector-list").removeClass("hide"),$(this).addClass("active")}),$(".add-modal-selector").on("mouseleave",function(){$(this).find(".selector-list").addClass("hide"),$(this).removeClass("active")}),$("body").on("click",function(t){var e=$(".add-modal-selector").find(".selector-list");$(t.target).closest(".add-modal-selector").length||(e.addClass("hide"),$(".add-modal-selector").removeClass("active"))})},v=function(){$(".typesetting-selector").on("mouseenter",function(){$(".typesetting-selector").find(".selector-list").removeClass("hide"),$(this).addClass("active")}),$(".typesetting-selector").on("mouseleave",function(){$(".typesetting-selector").find(".selector-list").addClass("hide"),$(this).removeClass("active")}),$("body").on("click",function(t){var e=$(".typesetting-selector").find(".selector-list");$(t.target).closest(".typesetting-selector").length||(e.addClass("hide"),$(".typesetting-selector").removeClass("active"))}),$(".item-link").on("click",function(){})};(function(){$(".control-bar-upload-file").on("click",function(){$(".file-type-picker").hasClass("hide")?$(".file-type-picker").removeClass("hide"):$(".file-type-picker").addClass("hide")}),$("body").on("click",function(t){$(t.target).closest(".control-bar-upload-file").length||$(".file-type-picker").addClass("hide")})})(),n(),e(),o(),i(),l(),d(),r(),f(),a(),s(),c(),u(),p(),h(),m(),g(),v()}),$(function(){var t=function(){$(document).on("click",".item-up",function(){const t=$(this),e=t.data("url"),n=t.closest(".resume-editor-plate-item");n.prev().before(n),$.post(e).done(()=>{const e=t.closest(".resume-editor-plate-item").attr("id"),n=$(`#${e}`).find("textarea").attr("id");singleReloadTinymce(e,n)})})},e=function(){$(document).on("click",".item-down",function(){const t=$(this),e=t.data("url"),n=t.closest(".resume-editor-plate-item");n.next().after(n),$.post(e).done(()=>{const e=t.closest(".resume-editor-plate-item").attr("id"),n=$(`#${e}`).find("textarea").attr("id");singleReloadTinymce(e,n)})})},n=function(){$(document).on("click",".section-down",function(){var t=$(this).closest(".resume-editor-plate");t.next().after(t),l()})},i=function(){$(document).on("click",".section-up",function(){var t=$(this).closest(".resume-editor-plate");t.prev().before(t),l()})},o=function(){$(document).on("click",".other-up",function(){var t=$(this).closest(".resume-editor-plate-item");t.prev().before(t),s()})},r=function(){$(document).on("click",".other-down",function(){var t=$(this).closest(".resume-editor-plate-item");t.next().after(t),s()})},a=$("#cv-body").data("update-position"),s=function(){const t=$("#cv-body").data("update-position");var e={};$("#other .resume-editor-plate-item").each(function(){e[this.id]=$(this).index()}),$.post(t,{cv:{others_position:JSON.stringify(e)}})},l=function(){var t={};$(".resume-editor-plate").each(function(){t[this.id]=$(this).index()}),$.post(a,{cv:{sections_position:JSON.stringify(t)}})};$(".cv-show-step-handle").tooltip();var c=function(){$("#cv-body .resume-editor-plate:first .title-ctrl-bar .section-up").addClass("hide"),$("#cv-body .resume-editor-plate:last .title-ctrl-bar .section-down").addClass("hide"),$("#cv-body .resume-editor-plate").each(function(){$(this).children().find(".resume-editor-plate-item:first .resume-editor-palte-item-ctrl-bar .ctrl-bar-up-btn").addClass("hide")}),$("#cv-body .resume-editor-plate").each(function(){$(this).children().find(".resume-editor-plate-item:last .resume-editor-palte-item-ctrl-bar .ctrl-bar-down-btn").addClass("hide")})},u=function(){setSectionPosition(),setOtherPosition(),c()};o(),r(),i(),n(),t(),e(),u()}),$(function(){const t=$('input[name="mobile"]').val();$("#js-cv-token").val();var e=function(){$(document).on("click",".info-top-close",function(){$(".bottom-profile-container").slideUp(500),$(".transparent-modal-background").addClass("hide"),$("#one-page-line").removeClass("hide"),toggleEditorLeftPanel()}),$(document).on("click","#cover-letter-header, .email-profile-header",function(){t||($(".bottom-profile-container").slideDown(500),$(".transparent-modal-background").removeClass("hide"))})},n=function(){$(document).on("click","#profile-more-show",function(t){t.preventDefault(),$("#profile-detail").show(),$(".info-add-item").hide(),$(".info-hide-item").show()}),$(document).on("click","#profile-more-hide",function(t){t.preventDefault(),$("#profile-detail").hide(),$(".info-add-item").show(),$(".info-add-item").removeClass("hide"),$(".info-hide-item").hide()})},i=function(){$("#add-avatar-modal").find(".faq-item").on("click",function(){$(this).hasClass("active")?$(this).removeClass("active"):$(this).addClass("active")})},o=function(){$("#upload-avatar-btn").on("click",function(){$("#profile_avatar").click(),$("#user_avatar").click()})};(function(){$(document).on("click",".remote-add-section",function(){var t=$(this).data("remote-url");$.post(t,{first:!0})})})(),e(),n(),o(),i()}),$(function(){var t=function(){function t(){if(!(window.innerWidth<768)){var t=$(window).scrollTop(),e=$("#cvs-show .right-panel-control-bar, #cover_letters-edit .right-panel-control-bar"),n=$(".right-panel-control-bar-container"),i=$(".right-panel-control-bar-container").children(".control-download"),o=$(".right-panel-control-bar").children(".file-name"),r=$(".right-panel-resume-editor");$(".left-panel-actual"),$(".right-panel"),$(document.body).outerWidth(!0),parseInt($(".fold-container").css("width")),parseInt($(".unfold-container").css("width")),parseInt($(".fold-container").css("width"));t>=145?(e.css({position:"fixed",left:"0px",top:"0px","z-index":"999",display:"flex","justify-content":"space-around",padding:"0 3%"}),n.css({"max-width":"900px","margin-right":"0"}),i.css("display","inline-block"),o.css({display:"inline-flex"}),r.css({"margin-top":"78px"})):(e.css({position:"relative",left:"0px",top:"0px","z-index":"9"}),n.css({"max-width":"9999px",float:"none"}),i.css("display","none"),o.css({display:"none"}),r.css({"margin-top":"10px"}))}}$(window).scroll(t)};(function(){function t(t){if($(".fold-container").addClass("hide"),$(".unfold-container").removeClass("hide"),($(t.target).hasClass("inteligent-check-bgc")||$(t.target).parents().hasClass("inteligent-check-bgc"))&&($(".inteligent-check").siblings().addClass("hide"),$(".inteligent-check").removeClass("hide")),$(t.target).hasClass("fill-in-tips-bgc")||$(t.target).parents().hasClass("fill-in-tips-bgc")){$(".fill-in-tips").siblings().addClass("hide"),$(".fill-in-tips").removeClass("hide");const t=e();if(null!=t){const e=$(".faq-select");new TypeDetect(e,t).result()&&(e.find("option:checked").prop("selected",!1),e.find("option[data-type="+t+"]").prop("selected",!0),$("#faq-form").submit())}}($(t.target).hasClass("view-cases-bgc")||$(t.target).parents().hasClass("view-cases-bgc"))&&($(".view-cases").siblings().addClass("hide"),$(".view-cases").removeClass("hide")),($(t.target).hasClass("tutor-bgc")||$(t.target).parents().hasClass("tutor-bgc"))&&($(".tutor").siblings().addClass("hide"),$(".tutor").removeClass("hide")),/Android|webOS|iPhone|iPad/i.test(navigator.userAgent)?console.info("is mobile"):i<1100&&$(".right-panel").css({"margin-left":"138px"})}function e(){return $('[id*="edit-form"]').length>0?$($('[id*="edit-form"]')[0].closest(".resume-editor-plate-item")).data("faq-type"):$(".bottom-other-container").is(":visible")?"other":$(".bottom-profile-container").is(":visible")?"profile":null}function n(){$(".unfold-container").addClass("hide"),$(".unfold-container").children().addClass("hide"),$(".fold-container").removeClass("hide"),i<1100&&$(".right-panel").css({"margin-left":"10px"})}var i=$(document.body).outerWidth(!0)+15;$(".fold-container").children("a").on("click",t),$(".nav-btn").on("click",t),$(".fold-btn").on("click",n),$(".selector-content").on("click",function(t){$(".selector").removeClass("open"),$this=$(t.target).hasClass("selector-content")?$(t.target):$(t.target).parents(".selector-content"),console.log($this),$this.parents(".selector").addClass("open"),$this.siblings(".selector-options").find("a").on("click",function(t){var e=$(t.target).text();$this.children(".text").text(e),$this.parents(".selector").removeClass("open")})}),$(".title-btn").on("click",function(t){$this=$(t.target).hasClass("title-btn")?$(t.target):$(t.target).parents(".item-title"),$panel=$this.parent().parent(),$panel.hasClass("close-panel")?$panel.removeClass("close-panel"):$panel.addClass("close-panel")}),$(document).on("click","#cv-jobs .title",function(){$panel=$(this).parent(),$panel.hasClass("close-job-panel")?$panel.removeClass("close-job-panel"):$panel.addClass("close-job-panel")}),$(document).on("click","#faqs .item-title",function(t){$this=$(t.target).hasClass("item-title")?$(t.target):$(t.target).parents(".item-title"),$panel=$this.closest(".tip-item"),$panel.hasClass("close-panel")?$panel.removeClass("close-panel"):$panel.addClass("close-panel")}),$(".cases .title-btn").on("click",function(t){$this=$(t.target).hasClass("title-btn")?$(t.target):$(t.target).parents(".cases-title"),$panel=$this.parent().parent().find(".case-container"),$panel.hasClass("hidden")?($panel.removeClass("hidden"),$this.find("i").removeClass("fa-chevron-down"),$this.find("i").addClass("fa-chevron-up")):($panel.addClass("hidden"),$this.find("i").addClass("fa-chevron-down"),$this.find("i").removeClass("fa-chevron-up"))}),$(".verb-reference .title-btn").on("click",function(t){$this=$(t.target).hasClass("title-btn")?$(t.target):$(t.target).parents(".verb-title"),$panel=$this.parent().parent().find(".verb-container"),$panel.hasClass("hidden")?($panel.removeClass("hidden"),$this.find("i").removeClass("fa-chevron-down"),$this.find("i").addClass("fa-chevron-up")):($panel.addClass("hidden"),$this.find("i").addClass("fa-chevron-down"),$this.find("i").removeClass("fa-chevron-up"))})})(),t()}),$(function(){function t(t){var e=0;if(/msie/i.test(navigator.userAgent)&&!window.opera&&!t.files){var n=t.value;e=new ActiveXObject("Scripting.FileSystemObject").GetFile(n).Size}else e=t.files[0].size;var i=$(".panel-upload-avatar .avatar-max-size").data("avatar-max-size");if(e>i){var o="\u56fe\u7247\u4e0d\u80fd\u5927\u4e8e"+i/1048576+" MB";return"ios"==client?setupWebViewJavascriptBridge(function(t){t.callHandler("failUpload",{info:o},function(){})}):alert(o),void(t.value="")}var r=t.value,a=r.substring(r.lastIndexOf(".")+1).toLowerCase();if(-1===["jpg","jpeg","png","gif","tif","tiff"].indexOf(a)){var s="\u8bf7\u9009\u62e9\u56fe\u7247\u683c\u5f0f\u6587\u4ef6\u4e0a\u4f20(jpg/png/gif/tif)";return"ios"==client?setupWebViewJavascriptBridge(function(t){t.callHandler("failUpload",{info:s},function(){})}):alert(s),void(t.value="")}"ios"==client?setupWebViewJavascriptBridge(function(t){t.callHandler("uploadingImage",{info:"\u4e0a\u4f20\u4e2d...\u8bf7\u8010\u5fc3\u7b49\u5f85"},function(){})}):$.notify("\u4e0a\u4f20\u4e2d...\u8bf7\u8010\u5fc3\u7b49\u5f85",{className:"success",autoHide:!1}),$(".upload-btn").css("background-color","#B3B3B3"),$(".upload-btn").removeAttr("id")}var e=function(){$(document).on("click","#save",function(t){t.preventDefault(),t.stopPropagation(),$.get($("#cv-score-path").data("score-path")).done(function(){$.notify("\u4fdd\u5b58\u6210\u529f","success")})})};(function(){$(document).on("change","#profile_avatar, #user_avatar",function(){try{t(this)}catch(i){console.log(i)}var e=new FormData;const n=$(this).data("url");return $input=$(this),"user_avatar"==$(this).attr("id")?e.append("user[avatar]",$input[0].files[0]):e.append("profile[avatar]",$input[0].files[0]),$.ajax({url:n,type:"PUT",beforeSend:function(t){t.setRequestHeader("X-CSRF-Token",$('meta[name="csrf-token"]').attr("content"))},data:e,cache:!1,contentType:!1,processData:!1,success:function(){"ios"!=client?($(".notifyjs-wrapper").remove(),$.notify("\u4e0a\u4f20\u6210\u529f","success")):setupWebViewJavascriptBridge(function(t){t.callHandler("uploadSuccess",{successInfo:"\u4e0a\u4f20\u6210\u529f"},function(){})})}}),!1})})(),e()}),$(function(){var t=function(){$(document).on("click",".resume-advice-top",function(){var t=$(".resume-advice");t.hasClass("close-panel")?t.removeClass("close-panel"):t.addClass("close-panel")})},e=function(){$(document).on("click",".resume-match-top-btn",function(){var t=$(".resume-match");t.hasClass("close-panel")?t.removeClass("close-panel"):t.addClass("close-panel")})};(function(){$(document).on("click","#copy-cv-content",function(){localStorage.setItem("cvContent",$("#cv-content").text().trim())})})(),t(),e()}),$(function(){var t=function(){$("#faqs .tip-item:not(:first-child)").each(function(){$(this).addClass("close-panel")})};(function(){$(".faq-select").on("change",function(){$("#faq-form").submit()})})(),t()}),($("#edus-index").length>0||$("#works-index").length>0||$("#orgs-index").length>0||$("#custom_sections-edit").length>0)&&($(document).on("change paste keyup",'input[name*="name"], input[name*="title"], select',function(){const t=$(this).attr("class");if(t!==undefined){const e=t.split(" ")[0].toString();$(this).closest(".info-content-item-form").siblings(".info-content-item-tag").find("."+e).text($(this).val())}}),$(document).on("change paste keyup",'input[name*="name"], input[name*="title"], select',function(){const t=$(this).val(),e=$(this).data("target");$(this).closest(".info-content-item-form").siblings(".info-content-item-tag").find("."+e).text(t)}),$(document).on("change paste keyup",'input[name*="start_at"]',function(){const t=$(this).val(),e=$(".edit-panel").data("lang"),n=$(this).data("target"),i=$(this).closest(".info-content-item-form").siblings(".info-content-item-tag").find("."+n);t.length>0?i.text(t):"cn"===e?i.text("\u8d77\u59cb\u65e5\u671f"):i.text("Start At")}),$(document).on("change paste keyup",'input[name*="end_at"]',function(){const t=$(this).val(),e=$(".edit-panel").data("lang"),n=$(this).data("target"),i=$(this).closest(".info-content-item-form").siblings(".info-content-item-tag").find("."+n),o=$(this).next().val();t.length>0?i.text(t):o.length>0?i.text(o):"cn"===e?i.text("\u7ed3\u675f\u65e5\u671f"):i.text("End At")})),
/**
 * jquery.Jcrop.js v0.9.12
 * jQuery Image Cropping Plugin - released under MIT License 
 * Author: Kelly Hallman <khallman@gmail.com>
 * http://github.com/tapmodo/Jcrop
 * Copyright (c) 2008-2013 Tapmodo Interactive LLC {{{
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 *
 * }}}
 */
function(t){t.Jcrop=function(e,n){function i(t){return Math.round(t)+"px"}function o(t){return P.baseClass+"-"+t}function r(){return t.fx.step.hasOwnProperty("backgroundColor")}function a(e){var n=t(e).offset();return[n.left,n.top]}function s(t){return[t.pageX-I[0],t.pageY-I[1]]}function l(e){"object"!=typeof e&&(e={}),P=t.extend(P,e),t.each(["onChange","onSelect","onRelease","onDblClick"],function(t,e){"function"!=typeof P[e]&&(P[e]=function(){})})}function c(t,e,n){if(I=a(W),ht.setCursor("move"===t?t:t+"-resize"),"move"===t)return ht.activateHandlers(d(e),g,n);var i=ut.getFixed(),o=p(t),r=ut.getCorner(p(o));ut.setPressed(ut.getCorner(o)),ut.setCurrent(r),ht.activateHandlers(u(t,i),g,n)}function u(t,e){return function(n){if(P.aspectRatio)switch(t){case"e":case"w":n[1]=e.y+1;break;case"n":case"s":n[0]=e.x+1}else switch(t){case"e":case"w":n[1]=e.y2;break;case"n":case"s":n[0]=e.x2}ut.setCurrent(n),pt.update()}}function d(t){var e=t;return ft.watchKeys(),function(t){ut.moveOffset([t[0]-e[0],t[1]-e[1]]),e=t,pt.update()}}function p(t){switch(t){case"n":return"sw";case"s":case"e":return"nw";case"w":return"ne";case"ne":return"sw";case"nw":return"se";case"se":return"nw";case"sw":return"ne"}}function h(t){return function(e){return!P.disabled&&(!("move"===t&&!P.allowMove)&&(I=a(W),it=!0,c(t,s(e)),e.stopPropagation(),e.preventDefault(),!1))}}function f(t,e,n){var i=t.width(),o=t.height();i>e&&e>0&&(i=e,o=e/t.width()*t.height()),o>n&&n>0&&(o=n,i=n/t.height()*t.width()),et=t.width()/i,nt=t.height()/o,t.width(i).height(o)}function m(t){return{x:t.x*et,y:t.y*nt,x2:t.x2*et,y2:t.y2*nt,w:t.w*et,h:t.h*nt}}function g(){var t=ut.getFixed();t.w>P.minSelect[0]&&t.h>P.minSelect[1]?(pt.enableHandles(),pt.done()):pt.release(),ht.setCursor(P.allowSelect?"crosshair":"default")}function v(t){if(P.disabled)return!1;if(!P.allowSelect)return!1;it=!0,I=a(W),pt.disableHandles(),ht.setCursor("crosshair");var e=s(t);return ut.setPressed(e),pt.update(),ht.activateHandlers(y,g,"touch"===t.type.substring(0,5)),ft.watchKeys(),t.stopPropagation(),t.preventDefault(),!1}function y(t){ut.setCurrent(t),pt.update()}function b(){var e=t("<div></div>").addClass(o("tracker"));return N&&e.css({opacity:0,backgroundColor:"white"}),e}function w(t){q.removeClass().addClass(o("holder")).addClass(t)}function $(t,e){function n(){window.setTimeout(y,d)}var i=t[0]/et,o=t[1]/nt,r=t[2]/et,a=t[3]/nt;if(!ot){var s=ut.flipCoords(i,o,r,a),l=ut.getFixed(),c=[l.x,l.y,l.x2,l.y2],u=c,d=P.animationDelay,p=s[0]-c[0],h=s[1]-c[1],f=s[2]-c[2],m=s[3]-c[3],g=0,v=P.swingSpeed;i=u[0],o=u[1],r=u[2],a=u[3],pt.animMode(!0);var y=function(){g+=(100-g)/v,u[0]=Math.round(i+g/100*p),u[1]=Math.round(o+g/100*h),u[2]=Math.round(r+g/100*f),u[3]=Math.round(a+g/100*m),g>=99.8&&(g=100),g<100?(_(u),n()):(pt.done(),pt.animMode(!1),"function"==typeof e&&e.call(mt))};n()}}function C(t){_([t[0]/et,t[1]/nt,t[2]/et,t[3]/nt]),P.onSelect.call(mt,m(ut.getFixed())),pt.enableHandles()}function _(t){ut.setPressed([t[0],t[1]]),ut.setCurrent([t[2],t[3]]),pt.update()}function x(){return m(ut.getFixed())}function k(){return ut.getFixed()}function A(t){l(t),L()}function S(){P.disabled=!0,pt.disableHandles(),pt.setCursor("default"),ht.setCursor("default")}function T(){P.disabled=!1,L()}function D(){pt.done(),ht.activateHandlers(null,null)}function E(){q.remove(),F.show(),F.css("visibility","visible"),t(e).removeData("Jcrop")}function O(t,e){pt.release(),S();var n=new Image;n.onload=function(){var i=n.width,o=n.height,r=P.boxWidth,a=P.boxHeight;W.width(i).height(o),W.attr("src",t),J.attr("src",t),f(W,r,a),U=W.width(),V=W.height(),J.width(U).height(V),at.width(U+2*rt).height(V+2*rt),q.width(U).height(V),dt.resize(U,V),T(),"function"==typeof e&&e.call(mt)},n.src=t}function M(t,e,n){var i=e||P.bgColor;P.bgFade&&r()&&P.fadeTime&&!n?t.animate({backgroundColor:i},{queue:!1,duration:P.fadeTime}):t.css("backgroundColor",i)}function L(t){P.allowResize?t?pt.enableOnly():pt.enableHandles():pt.disableHandles(),ht.setCursor(P.allowSelect?"crosshair":"default"),pt.setCursor(P.allowMove?"move":"default"),P.hasOwnProperty("trueSize")&&(et=P.trueSize[0]/U,nt=P.trueSize[1]/V),P.hasOwnProperty("setSelect")&&(C(P.setSelect),pt.done(),delete P.setSelect),dt.refresh(),P.bgColor!=st&&(M(P.shade?dt.getShades():q,P.shade&&P.shadeColor||P.bgColor),st=P.bgColor),lt!=P.bgOpacity&&(lt=P.bgOpacity,P.shade?dt.refresh():pt.setBgOpacity(lt)),X=P.maxSize[0]||0,Z=P.maxSize[1]||0,Q=P.minSize[0]||0,tt=P.minSize[1]||0,P.hasOwnProperty("outerImage")&&(W.attr("src",P.outerImage),delete P.outerImage),pt.refresh()}var I,P=t.extend({},t.Jcrop.defaults),R=navigator.userAgent.toLowerCase(),N=/msie/.test(R),B=/msie [1-6]\./.test(R);"object"!=typeof e&&(e=t(e)[0]),"object"!=typeof n&&(n={}),l(n);var j={border:"none",visibility:"visible",margin:0,padding:0,position:"absolute",top:0,left:0},F=t(e),z=!0;if("IMG"==e.tagName){if(0!=F[0].width&&0!=F[0].height)F.width(F[0].width),F.height(F[0].height);else{var H=new Image;H.src=F[0].src,F.width(H.width),F.height(H.height)}var W=F.clone().removeAttr("id").css(j).show();W.width(F.width()),W.height(F.height()),F.after(W).hide()}else W=F.css(j).show(),z=!1,null===P.shade&&(P.shade=!0);f(W,P.boxWidth,P.boxHeight);var U=W.width(),V=W.height(),q=t("<div />").width(U).height(V).addClass(o("holder")).css({position:"relative",backgroundColor:P.bgColor}).insertAfter(F).append(W);P.addClass&&q.addClass(P.addClass);var J=t("<div />"),G=t("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",overflow:"hidden"}),Y=t("<div />").width("100%").height("100%").css("zIndex",320),K=t("<div />").css({position:"absolute",zIndex:600}).dblclick(function(){var t=ut.getFixed();P.onDblClick.call(mt,t)}).insertBefore(W).append(G,Y);z&&(J=t("<img />").attr("src",W.attr("src")).css(j).width(U).height(V),G.append(J)),B&&K.css({overflowY:"hidden"});var X,Z,Q,tt,et,nt,it,ot,rt=P.boundary,at=b().width(U+2*rt).height(V+2*rt).css({position:"absolute",top:i(-rt),left:i(-rt),zIndex:290}).mousedown(v),st=P.bgColor,lt=P.bgOpacity;I=a(W);var ct=function(){function t(){var t,e={},n=["touchstart","touchmove","touchend"],i=document.createElement("div");try{for(t=0;t<n.length;t++){var o=n[t],r=(o="on"+o)in i;r||(i.setAttribute(o,"return;"),r="function"==typeof i[o]),e[n[t]]=r}return e.touchstart&&e.touchend&&e.touchmove}catch(a){return!1}}function e(){return!0===P.touchSupport||!1===P.touchSupport?P.touchSupport:t()}return{createDragger:function(t){return function(e){return!P.disabled&&(!("move"===t&&!P.allowMove)&&(I=a(W),it=!0,c(t,s(ct.cfilter(e)),!0),e.stopPropagation(),e.preventDefault(),!1))}},newSelection:function(t){return v(ct.cfilter(t))},cfilter:function(t){return t.pageX=t.originalEvent.changedTouches[0].pageX,t.pageY=t.originalEvent.changedTouches[0].pageY,t},isSupported:t,support:e()}}(),ut=function(){function t(t){t=a(t),f=p=t[0],m=h=t[1]}function e(t){t=a(t),u=t[0]-f,d=t[1]-m,f=t[0],m=t[1]}function n(){return[u,d]}function i(t){var e=t[0],n=t[1];0>p+e&&(e-=e+p),0>h+n&&(n-=n+h),V<m+n&&(n+=V-(m+n)),U<f+e&&(e+=U-(f+e)),p+=e,f+=e,h+=n,m+=n}function o(t){var e=r();switch(t){case"ne":return[e.x2,e.y];case"nw":return[e.x,e.y];case"se":return[e.x2,e.y2];case"sw":return[e.x,e.y2]}}function r(){if(!P.aspectRatio)return l();var t,e,n,i,o=P.aspectRatio,r=P.minSize[0]/et,a=P.maxSize[0]/et,u=P.maxSize[1]/nt,d=f-p,g=m-h,v=Math.abs(d),y=Math.abs(g);return 0===a&&(a=10*U),0===u&&(u=10*V),v/y<o?(e=m,n=y*o,(t=d<0?p-n:n+p)<0?(t=0,i=Math.abs((t-p)/o),e=g<0?h-i:i+h):t>U&&(t=U,i=Math.abs((t-p)/o),e=g<0?h-i:i+h)):(t=f,i=v/o,(e=g<0?h-i:h+i)<0?(e=0,n=Math.abs((e-h)*o),t=d<0?p-n:n+p):e>V&&(e=V,n=Math.abs(e-h)*o,t=d<0?p-n:n+p)),t>p?(t-p<r?t=p+r:t-p>a&&(t=p+a),e=e>h?h+(t-p)/o:h-(t-p)/o):t<p&&(p-t<r?t=p-r:p-t>a&&(t=p-a),e=e>h?h+(p-t)/o:h-(p-t)/o),t<0?(p-=t,t=0):t>U&&(p-=t-U,t=U),e<0?(h-=e,e=0):e>V&&(h-=e-V,e=V),c(s(p,h,t,e))}function a(t){return t[0]<0&&(t[0]=0),t[1]<0&&(t[1]=0),t[0]>U&&(t[0]=U),t[1]>V&&(t[1]=V),[Math.round(t[0]),Math.round(t[1])]}function s(t,e,n,i){var o=t,r=n,a=e,s=i;return n<t&&(o=n,r=t),i<e&&(a=i,s=e),[o,a,r,s]}function l(){var t,e=f-p,n=m-h;return X&&Math.abs(e)>X&&(f=e>0?p+X:p-X),Z&&Math.abs(n)>Z&&(m=n>0?h+Z:h-Z),tt/nt&&Math.abs(n)<tt/nt&&(m=n>0?h+tt/nt:h-tt/nt),Q/et&&Math.abs(e)<Q/et&&(f=e>0?p+Q/et:p-Q/et),p<0&&(f-=p,p-=p),h<0&&(m-=h,h-=h),f<0&&(p-=f,f-=f),m<0&&(h-=m,m-=m),f>U&&(p-=t=f-U,f-=t),m>V&&(h-=t=m-V,m-=t),p>U&&(m-=t=p-V,h-=t),h>V&&(m-=t=h-V,h-=t),c(s(p,h,f,m))}function c(t){return{x:t[0],y:t[1],x2:t[2],y2:t[3],w:t[2]-t[0],h:t[3]-t[1]}}var u,d,p=0,h=0,f=0,m=0;return{flipCoords:s,setPressed:t,setCurrent:e,getOffset:n,moveOffset:i,getCorner:o,getFixed:r}}(),dt=function(){function e(t,e){f.left.css({height:i(e)}),f.right.css({height:i(e)})}function n(){return o(ut.getFixed())}function o(t){f.top.css({left:i(t.x),width:i(t.w),height:i(t.y)}),f.bottom.css({top:i(t.y2),left:i(t.x),width:i(t.w),height:i(V-t.y2)}),f.right.css({left:i(t.x2),width:i(U-t.x2)}),f.left.css({width:i(t.x)})}function r(){return t("<div />").css({position:"absolute",backgroundColor:P.shadeColor||P.bgColor}).appendTo(h)}function a(){p||(p=!0,h.insertBefore(W),n(),pt.setBgOpacity(1,0,1),J.hide(),s(P.shadeColor||P.bgColor,1),pt.isAwake()?c(P.bgOpacity,1):c(1,1))}function s(t,e){M(d(),t,e)}function l(){p&&(h.remove(),J.show(),p=!1,pt.isAwake()?pt.setBgOpacity(P.bgOpacity,1,1):(pt.setBgOpacity(1,1,1),pt.disableHandles()),M(q,0,1))}function c(t,e){p&&(P.bgFade&&!e?h.animate({opacity:1-t},{queue:!1,duration:P.fadeTime}):h.css({opacity:1-t}))}function u(){P.shade?a():l(),pt.isAwake()&&c(P.bgOpacity)}function d(){return h.children()}var p=!1,h=t("<div />").css({position:"absolute",zIndex:240,opacity:0}),f={top:r(),left:r().height(V),right:r().height(V),bottom:r()};return{update:n,updateRaw:o,getShades:d,setBgColor:s,enable:a,disable:l,resize:e,refresh:u,opacity:c}}(),pt=function(){function e(e){var n=t("<div />").css({position:"absolute",opacity:P.borderOpacity}).addClass(o(e));return G.append(n),n}function n(e,n){var i=t("<div />").mousedown(h(e)).css({cursor:e+"-resize",position:"absolute",zIndex:n}).addClass("ord-"+e);return ct.support&&i.bind("touchstart.jcrop",ct.createDragger(e)),Y.append(i),i}function r(t){var e=P.handleSize,i=n(t,S++).css({opacity:P.handleOpacity}).addClass(o("handle"));return e&&i.width(e).height(e),i}function a(t){return n(t,S++).addClass("jcrop-dragbar")}function s(t){var e;for(e=0;e<t.length;e++)E[t[e]]=a(t[e])}function l(t){var n,i;for(i=0;i<t.length;i++){switch(t[i]){case"n":n="hline";break;case"s":n="hline bottom";break;case"e":n="vline right";break;case"w":n="vline"}T[t[i]]=e(n)}}function c(t){var e;for(e=0;e<t.length;e++)D[t[e]]=r(t[e])}function u(t,e){P.shade||J.css({top:i(-e),left:i(-t)}),K.css({top:i(e),left:i(t)})}function d(t,e){K.width(Math.round(t)).height(Math.round(e))}function p(){var t=ut.getFixed();ut.setPressed([t.x,t.y]),ut.setCurrent([t.x2,t.y2]),f()}function f(t){if(A)return g(t)}function g(t){var e=ut.getFixed();d(e.w,e.h),u(e.x,e.y),P.shade&&dt.updateRaw(e),A||y(),t?P.onSelect.call(mt,m(e)):P.onChange.call(mt,m(e))}function v(t,e,n){(A||e)&&(P.bgFade&&!n?W.animate({opacity:t},{queue:!1,duration:P.fadeTime}):W.css("opacity",t))}function y(){K.show(),P.shade?dt.opacity(lt):v(lt,!0),A=!0}function w(){_(),K.hide(),P.shade?dt.opacity(1):v(1),A=!1,P.onRelease.call(mt)}function $(){O&&Y.show()}function C(){if(O=!0,P.allowResize)return Y.show(),!0}function _(){O=!1,Y.hide()}function x(t){t?(ot=!0,_()):(ot=!1,C())}function k(){x(!1),p()}var A,S=370,T={},D={},E={},O=!1;P.dragEdges&&t.isArray(P.createDragbars)&&s(P.createDragbars),t.isArray(P.createHandles)&&c(P.createHandles),P.drawBorders&&t.isArray(P.createBorders)&&l(P.createBorders),t(document).bind("touchstart.jcrop-ios",function(e){t(e.currentTarget).hasClass("jcrop-tracker")&&e.stopPropagation()});var M=b().mousedown(h("move")).css({cursor:"move",position:"absolute",zIndex:360});return ct.support&&M.bind("touchstart.jcrop",ct.createDragger("move")),G.append(M),_(),{updateVisible:f,update:g,release:w,refresh:p,isAwake:function(){return A},setCursor:function(t){M.css("cursor",t)},enableHandles:C,enableOnly:function(){O=!0},showHandles:$,disableHandles:_,animMode:x,setBgOpacity:v,done:k}}(),ht=function(){function e(e){at.css({zIndex:450}),e?t(document).bind("touchmove.jcrop",a).bind("touchend.jcrop",l):p&&t(document).bind("mousemove.jcrop",i).bind("mouseup.jcrop",o)}function n(){at.css({zIndex:290}),t(document).unbind(".jcrop")}function i(t){return u(s(t)),!1}function o(t){return t.preventDefault(),t.stopPropagation(),it&&(it=!1,d(s(t)),pt.isAwake()&&P.onSelect.call(mt,m(ut.getFixed())),n(),u=function(){},d=function(){}),!1}function r(t,n,i){return it=!0,u=t,d=n,e(i),!1}function a(t){return u(s(ct.cfilter(t))),!1}function l(t){return o(ct.cfilter(t))}function c(t){at.css("cursor",t)}var u=function(){},d=function(){},p=P.trackDocument;return p||at.mousemove(i).mouseup(o).mouseout(o),W.before(at),{activateHandlers:r,setCursor:c}}(),ft=function(){function e(){P.keySupport&&(r.show(),r.focus())}function n(){r.hide()}function i(t,e,n){P.allowMove&&(ut.moveOffset([e,n]),pt.updateVisible(!0)),t.preventDefault(),t.stopPropagation()}function o(t){if(t.ctrlKey||t.metaKey)return!0;var e=!!t.shiftKey?10:1;switch(t.keyCode){case 37:i(t,-e,0);break;case 39:i(t,e,0);break;case 38:i(t,0,-e);break;case 40:i(t,0,e);break;case 27:P.allowSelect&&pt.release();break;case 9:return!0}return!1}var r=t('<input type="radio" />').css({position:"fixed",left:"-120px",width:"12px"}).addClass("jcrop-keymgr"),a=t("<div />").css({position:"absolute",overflow:"hidden"}).append(r);return P.keySupport&&(r.keydown(o).blur(n),B||!P.fixedSupport?(r.css({position:"absolute",left:"-20px"}),a.append(r).insertBefore(W)):r.insertBefore(W)),{watchKeys:e}}();ct.support&&at.bind("touchstart.jcrop",ct.newSelection),Y.hide(),L(!0);var mt={setImage:O,animateTo:$,setSelect:C,setOptions:A,tellSelect:x,tellScaled:k,setClass:w,disable:S,enable:T,cancel:D,release:pt.release,destroy:E,focus:ft.watchKeys,getBounds:function(){return[U*et,V*nt]},getWidgetSize:function(){return[U,V]},getScaleFactor:function(){return[et,nt]},getOptions:function(){return P},ui:{holder:q,selection:K}};return N&&q.bind("selectstart",function(){return!1}),F.data("Jcrop",mt),mt},t.fn.Jcrop=function(e,n){var i;return this.each(function(){if(t(this).data("Jcrop")){if("api"===e)return t(this).data("Jcrop");t(this).data("Jcrop").setOptions(e)}else"IMG"==this.tagName?t.Jcrop.Loader(this,function(){t(this).css({display:"block",visibility:"hidden"}),i=t.Jcrop(this,e),t.isFunction(n)&&n.call(i)}):(t(this).css({display:"block",visibility:"hidden"}),i=t.Jcrop(this,e),t.isFunction(n)&&n.call(i))}),this},t.Jcrop.Loader=function(e,n,i){function o(){a.complete?(r.unbind(".jcloader"),t.isFunction(n)&&n.call(a)):window.setTimeout(o,50)}var r=t(e),a=r[0];r.bind("load.jcloader",o).bind("error.jcloader",function(){r.unbind(".jcloader"),t.isFunction(i)&&i.call(a)}),a.complete&&t.isFunction(n)&&(r.unbind(".jcloader"),n.call(a))},t.Jcrop.defaults={allowSelect:!0,allowMove:!0,allowResize:!0,trackDocument:!0,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:.6,bgFade:!1,borderOpacity:.4,handleOpacity:.5,handleSize:null,aspectRatio:0,keySupport:!0,createHandles:["n","s","e","w","nw","ne","se","sw"],createDragbars:["n","s","e","w"],createBorders:["n","s","e","w"],drawBorders:!0,dragEdges:!0,fixedSupport:!0,touchSupport:null,shade:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onDblClick:function(){},onRelease:function(){}}}(jQuery),function(){$(function(){var t;return $(document).on("click",".js-cv-download-file",function(){if(!JSON.parse(sessionStorage.getItem("UserBindModalShow")))return showBindOfficalAccount(4e3),sessionStorage.setItem("UserBindModalShow",!0)}),$(document).on("click",".copy-link",function(){return $(".copy-link-item").select(),$(".copy-link-item").focus(),document.execCommand("copy")?$.notify("\u5df2\u590d\u5236","success"):$.notify("\u590d\u5236\u5931\u8d25","warn")}),$(document).on("click",".js-copy-item",function(t){var e;return e=$(t.currentTarget).find(".copy-value"),console.log(e.val()),e.select(),e.focus(),document.execCommand("copy")?$.notify("\u5df2\u590d\u5236","success"):$.notify("\u590d\u5236\u5931\u8d25","warn")}),$(document).on("mouseover",".scan-share-button",function(){return $(".qr-code").removeClass("hide")}),$(document).on("click","#js-profile-use-jobmail",function(t){var e,n;return t.preventDefault(),n=$(".use-jobmail-modal .current-jobmail").data("email"),e={cv_id:$(".use-jobmail-modal").data("cv-token"),email:n},(new UpdateProfileEmail).post(e),$(".use-jobmail-modal").modal("hide"),$('[data-rule="unprofessinal_email"]').remove(),$.notify("\u66f4\u65b0\u6210\u529f\uff01","success")}),$(document).on("click",".switch-other-contact .on",function(){var t;return t=$(".contact-cell"),$(this).hide(),$(this).next().show(),$(".other-contacts").show(),t.data("select",!0),t.css("cursor","pointer")}),$(document).on("click",".switch-other-contact .off",function(){var t;return t=$(".contact-cell"),$(this).hide(),$(this).prev().show(),$(".other-contacts").hide(),t.data("select",!1),t.css("cursor","auto")}),$(document).on("click",".contact-cell",function(){var e,n;return"persisted"===$(this).data("asso-status")?$.ajax({url:$(this).data("url"),type:"POST"}):(n=$(this).get(0).outerHTML,e=$(".contact-cell.using").get(0).outerHTML,$(".contact-cell.using").replaceWith(n),$(this).replaceWith(e),$(".contacts .contact-cell").addClass("using"),$(".other-contacts .contact-cell").removeClass("using"),$(".other-contacts").hide(),$(".switch-other-contact .off").click(),$(".contact-cell.using .check").removeClass("hidden"),t($(this)),(new ContactTextVerticalLine).inserted())}),t=function(t){return $('input[name*="contact_id"]').val(t.data("contact-id"))}}),this.ContactTextVerticalLine=function(){function t(){}var e;return e=function(t,e){var n,i;if(n=(i=$(e)).text(),t>0&&n.length>0&&-1===n.indexOf("|"))return i.text(" | "+n)},t.prototype.inserted=function(){return $(".contact-cell .primary-line").each(function(t,n){return $(n).find("span:not(.contact-status)").each(e)}),$(".contact-cell .secondary-line").each(function(t,n){return $(n).find("span:not(.contact-status)").each(e)})},t}(),$(function(){return(new ContactTextVerticalLine).inserted()})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;$(function(){var n;return n=function(){function t(){}var e,n,i,o;return t.prototype.count=function(t){var e,n,i,o;if(t=t.trim(),this.empty_str(t))return 0;for(i="",o=0,n=t.length;n--;)e=t.charAt(n),("function"==typeof this.han?this.han(e):void 0)?(o++,i="han"):("function"==typeof this.word_segment?this.word_segment(e):void 0)?i="word_seg":("other_type"!==i&&o++,i="other_type");return o},t.prototype.empty_str=function(t){return null==t||0===t.length},t.prototype.han=function(t){return t.match(/[\u4E00-\u9FFF]|[\u3400-\u4DBF]/)},t.prototype.word_segment=function(t){return t.match("[\\s"+e+i+o+n+"]")},o="\u2010-\u2027\u2030-\u2043\u2045-\u205e",e="!-@[-`{-~"+String.fromCharCode(161,167,171,182,183,187,191),n="\u3001-\u3003\u3008-\u3011\u3014-\u301f\u3030\u303d",i="\uff01-\uff03\uff05-\uff0a\uff0c-\uff0f\uff1a-\uff1b\uff1f-\uff20\uff3b-\uff3d\uff3f\uff5b\uff5d\uff5f-\uff65",t}(),new(function(){function i(e){this.update_cv_words_by_observer=t(this.update_cv_words_by_observer,this),this.on_cv_page(e)&&(this.cv_id=e,this.update_cv_words_count(),this.monitor_cv_changes())}return e(i,n),i.prototype.on_cv_page=function(t){return null!=t&&null!=document.getElementById(t)},i.prototype.monitor_cv_changes=function(){return this.observe_cv_content(),this.monitor_input_event(),this.monitor_description_events()},i.prototype.observe_cv_content=function(){var t,e;return e=document.querySelector("#"+this.cv_id),t={subtree:!0,childList:!0,characterData:!0},new MutationObserver(this.update_cv_words_by_observer).observe(e,t),console.debug("[counter]"+this.cv_id+" observer launched")},i.prototype.update_cv_words_by_observer=function(){return console.debug("[counter]update by observer"),this.update_cv_words_count()},i.prototype.monitor_input_event=function(){return $(document).on("input change","#"+this.cv_id,(t=this,function(){return console.debug("[counter]@cv_id input/change updating..."),t.update_cv_words_count()}));var t},i.prototype.monitor_description_events=function(){return tinymce.on("AddEditor",(t=this,function(e){return console.debug("[counter]new editor added "+e.editor.id),e.editor.on("Change Undo Redo",function(){return t.update_cv_words_count(),t.monitor_description_input()})}));var t},i.prototype.monitor_description_input=function(){var t,e;return t=document.querySelector("#"+this.cv_id+" iframe").contentDocument,$(t).on("input","body",(e=this,function(){return console.debug("[counter]iframe input updating desp..."),e.update_cv_words_count()}))},i.prototype.update_cv_words_count=function(){return $(".word-counter").text(this.count(this.cv_content()))},i.prototype.cv_content=function(){var t,e,n;return t=document.querySelector("#"+this.cv_id).innerText,$("#"+this.cv_id+" input[type='text']").filter(":visible").each(function(){return t+=" "+$(this).val()}),null!=(n=document.querySelector("#"+this.cv_id+" iframe"))&&(e=n.contentDocument.querySelector("body").innerText,t+=" "+e,console.debug("[counter]description="+e)),console.debug("[counter]cv content="+t.replace(/\s+/g," ")),t},i}())("cv-content")})}.call(this),function(){this.UploadFileSize=function(){function t(){}return t.prototype.check=function(t){return t>2097152?($.notify("\u6587\u4ef6\u4e0d\u80fd\u8d85\u8fc72MB","error"),setTimeout(function(){return $("#import-new-resume-modal .file-list").text(""),$("#import-new-resume-modal .new_parsed_resume .file-container").removeClass("hide")},1),!1):!(t<10)||($.notify("\u6587\u4ef6\u4e0d\u80fd\u5c0f\u4e8e10\u5b57\u8282","error"),!1)},t}()}.call(this),function(){this.SetFilesInfo=function(){function t(){this.cells=[]}return t.prototype.show=function(t,e){return $.each(t,function(t,n){var i,o,r;return i=(r=$(e).find(".file-list")).data("html-template"),r.append(i),(o=r.find(".file-info").last()).append("<div class='file-name'>"+n.name+"</div>"),o.append("<div class='file-size'>"+Math.floor(n.size/1024)+"KB</div>")})},t.prototype.add=function(t,e){return $.each(t,(n=this,function(t,i){var o,r,a,s;return r=(s=$(e).find(".file-list")).data("html-template"),s.append(r),(a=(o=s.find(".file-cell").last()).find(".file-info")).append("<div class='file-name'>"+i.name+"</div>"),a.append("<div class='file-size'>"+Math.floor(i.size/1024)+"KB</div>"),n.cells.push(o)}));var n},t.prototype.cells=function(){return this.cells},t}()}.call(this),function(){$(function(){var t;if((t=$(".file-upload")).fileupload({dropZone:t.closest(".drop-zone"),send:function(t,e){return(new SetFilesInfo).show(e.files,"#import-new-resume-modal"),$("#import-new-resume-modal .file-container").addClass("hide")},progress:function(t,e){var n,i,o,r;if(i=$("#import-new-resume-modal").find(".file-list"),r="<span class='progress-done'>\u4e0a\u4f20\u5b8c\u6210\uff0c\u6b63\u5728\u89e3\u6790...\u8bf7\u7a0d\u5019<span>",o=parseInt(e.loaded/e.total*100,10),(n=i.find(".progress .progress-bar")).css("width",o+"%"),n.text(o+"%"),"100%"===n.text())return setTimeout(function(){n.closest(".file-cell").append(r)},1e3,n)},done:function(){return $("#import-new-resume-modal .file-container").removeClass("hide"),$("#import-new-resume-modal .file-list").html("")}}).on("fileuploadsend",function(t,e){return(new UploadFileSize).check(e.files[0].size)}),$(".js-cv-import-exceed-limit").click(function(){return $.notify($(this).data("error"),"error")}),null!=$("#import-new-resume-modal"))return $(document).on("drop dragover",function(t){return t.preventDefault()})})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.ProfileAvatarCropper=function(){function e(e){this.opt=null!=e?e:this.default_crop_setting(),this.updatePreview=t(this.updatePreview,this),this.update=t(this.update,this),$("#"+this.opt.model+"_avatar_cropbox").Jcrop({aspectRatio:this.opt.width/this.opt.height,setSelect:[0,0,this.opt.width*this.opt.multiple,this.opt.height*this.opt.multiple],boxWidth:3*this.opt.width,boxHeight:3*this.opt.height,minSize:[this.opt.width*this.opt.multiple,this.opt.height*this.opt.multiple],trueSize:[this.opt.actual.width,this.opt.actual.height],onSelect:this.update,onChange:this.update})}return e.prototype.default_crop_setting=function(){var t;return(t=JSON.parse("{:width=>80, :height=>96, :multiple=>1}")).actual={width:0,height:0},t.model="profile",t},e.prototype.update=function(t){return $("#"+this.opt.model+"_avatar_crop_x").val(t.x),$("#"+this.opt.model+"_avatar_crop_y").val(t.y),$("#"+this.opt.model+"_avatar_crop_w").val(t.w),$("#"+this.opt.model+"_avatar_crop_h").val(t.h)},e.prototype.updatePreview=function(t){return $("#"+this.opt.model+"_avatar_previewbox").css({width:Math.round(100/t.w*$("#"+this.opt.model+"_avatar_cropbox").width())+"px",height:Math.round(100/t.h*$("#"+this.opt.model+"_avatar_cropbox").height())+"px",marginLeft:"-"+Math.round(100/t.w*t.x)+"px",marginTop:"-"+Math.round(100/t.h*t.y)+"px"})},e}(),$(function(){var t,e;return t=".js-age-or-birthday li a",e=function(e){var n;if(e.length>0)return n=$("#js-age-birthday-opt-link").data("url"),$.getJSON(n,{new_date:e},function(e){return $(t).each(function(t){return $(this).text(e[t])})})},null!=$(t)&&($(document).on("change profile-format-show-attr-name-changed","#cv_profile_attributes_birthday",function(){var t;if((t=$(this).val()).length>0)return e(t)}),$(document).on("hide","#cv_profile_attributes_birthday",function(){if($(this).val().length>0)return $(this).addClass("hide"),$(".js-age-or-birthday").removeClass("hide"),$(".js-age-or-birthday .dropdown-toggle").click()}),$(document).on("click",t,function(t){var e,n,i;return t.preventDefault(),$(this).hasClass("delete-age")?$("#cv_profile_attributes_birthday").val(""):(e=$(this).data("chosen"),i=$(this).data("date-format"),n=$(this),$(".js-age-or-birthday li").each(function(){return $(this).removeClass("active")}),n.closest("li").addClass("active"),$("#cv_profile_attributes_format_pref_age_birthday_chosen").val(e),$("#cv_profile_attributes_format_pref_age_birthday_date_format").val(i)),$("#cv_profile_attributes_birthday").removeClass("hide"),$(".js-age-or-birthday").addClass("hide")})),$(".js-show-attr-name-switch").click(function(t){var e,n,i,o,r;return t.preventDefault(),e=$(this),o=(r=$("[data-show-attr-name]")).data("show-attr-name"),n={cv:{profile_attributes:{format_pref:{show_attr_name:i=!o}}}},$.post(e.attr("href"),n,function(){return e.find(".item-check-dot span").toggleClass("checked"),r.data("show-attr-name",i),$("#cv_profile_attributes_birthday").trigger("profile-format-show-attr-name-changed")}).fail(function(){return $.notify("Showing/Hiding attribute names failed","error")})})})}.call(this),function(){$(function(){var t,e,n,i,o,r,a,s,l;return l="undefined"!=typeof window.orientation||-1!==navigator.userAgent.indexOf("IEMobile")?"touchstart":"click",a=[],$(document).on(l,".restore-trigger",function(e){var n,i;return n=$(e.currentTarget),i=n.data("delete-type"),!!confirm("\u786e\u5b9a\u5220\u9664\u8be5\u7ecf\u5386\uff1f")&&$.ajax({url:n.data("url"),method:"delete",dataType:"script",beforeSend:function(){return localStorage.setItem("restore-cv-"+i,t(n)),a.push(i)},error:function(){return s(i)},complete:function(){return o(n)}})}),$(document).on(l,".other-restore-trigger",function(t){var e,n;return e=$(t.currentTarget),n=e.data("delete-type"),!!confirm("\u786e\u5b9a\u5220\u9664\u8be5\u7ecf\u5386\uff1f")&&$.ajax({url:e.data("url"),method:"delete",dataType:"script",beforeSend:function(){var t;return t={title:$("#cv-"+n+"-name").text().trim(),description:$("#cv-"+n+"-description").text().trim(),default_description:$("#cv-"+n+"-default-description").text().trim()},localStorage.setItem("restore-cv-"+n,JSON.stringify(t)),a.push(n)},error:function(){return localStorage.removeItem("restore-cv-"+n)}})}),$(document).on("click",".other-start-restore",function(t){var e,n,i;return e=$(t.currentTarget),i=e.data("restore-type"),$.ajax({url:e.data("url"),method:"POST",dataType:"script",data:(n={},n[""+i]=JSON.parse(localStorage.getItem("restore-cv-"+i)),n),success:function(){return localStorage.removeItem("restore-cv-"+i),a.splice($.inArray(i,a),1)}})}),t=function(t){var e,o,r,a;return a=t.data("delete-type"),r=t.closest(".resume-editor-plate-item"),e=n(a),o=i(r,a),e.push(o),JSON.stringify(e)},n=function(t){return null!==localStorage.getItem("restore-cv-"+t)?JSON.parse(localStorage.getItem("restore-cv-"+t)):[]},i=function(t,e){var n;return(n={})[""+e]=t.data("restore-source"),n[""+e].description=t.find(".description-content").html(),n[""+e].default_description=t.find(".default-description-content").html(),n},s=function(t){var e;try{return(e=JSON.parse(localStorage.getItem("restore-cv-"+t))).pop(),0===e.length?(localStorage.removeItem("restore-cv-"+t),a.splice($.inArray(t,a),1)):localStorage.setItem("restore-cv-"+t,JSON.stringify(e))}catch(n){return n,!0}},o=function(t){var e;return e=t.closest(".resume-editor-plate").attr("id"),$("#"+e).find(".start-restore").removeClass("hidden")},$(document).on("click",".start-restore",function(t){var e,n,i;return e=$(t.currentTarget),i=e.data("restore-type"),n=JSON.parse(localStorage.getItem("restore-cv-"+i)),$.ajax({url:e.data("url"),method:"POST",dataType:"script",data:n.pop(),success:function(){return 0===n.length?(localStorage.removeItem("restore-cv-"+i),a.splice($.inArray(i,a),1),$("[data-restore-type="+i+"]").addClass("hidden")):localStorage.setItem("restore-cv-"+i,JSON.stringify(n))}})}),e=function(t){var e,n,i,o;return o=t.data("type"),i=t.data("section-title"),(e={}).cv={},e.cv[o+"_attributes"]=[],n=t.closest(".resume-editor-plate").find(".resume-editor-plate-item"),$.each(n,function(t,n){var i,r,a;return a=$(n).data("restore-source"),r=$(n).find(".description-content").html(),i=$(n).find(".default-description-content").html(),e.cv[o+"_attributes"].push($.extend(a,{description:r,default_description:i}))}),void 0!==i&&(e.section_title=i),JSON.stringify(e)},$(document).on("click",".bulk-restore-trigger",function(t){var n,i;return n=$(t.currentTarget),i=n.data("type"),!!confirm("\u662f\u5426\u5220\u9664\u8be5\u6a21\u5757\uff1f")&&$.ajax({url:n.data("url"),method:"delete",dataType:"script",beforeSend:function(){return localStorage.setItem("restore-cv-"+i,e(n)),a.push(i)},error:function(){return localStorage.removeItem("restore-cv-"+i),a.splice($.inArray(i,a),1)}})}),$(document).on(l,".start-bulk-restore",function(t){var e,n;return n=(e=$(t.currentTarget)).data("type"),$.ajax({url:e.data("remote-url"),method:"POST",dataType:"script",data:JSON.parse(localStorage.getItem("restore-cv-"+n))})}),r=function(){var t;return t={},["skill","certificate","interest","language","other"].forEach(function(e){return t[e+"_title"]=$("#cv-"+e+"-name").text().trim(),t[e+"_description"]=$("#cv-"+e+"-description").text().trim(),t[e+"_default_description"]=$("#cv-"+e+"-default-description").text().trim()}),t.main_other_title=$("#other .resume-editor-plate-title .title-text").text().trim(),JSON.stringify(t)},$(document).on("click",".bulk-other-restore-trigger",function(t){var e,n;return e=$(t.currentTarget),n="other-sections",!!confirm("\u662f\u5426\u5220\u9664\u8be5\u6a21\u5757\uff1f")&&$.ajax({url:e.data("url"),method:"delete",dataType:"script",beforeSend:function(){return localStorage.setItem("restore-cv-"+n,r()),a.push(n)},error:function(){return localStorage.removeItem("restore-cv-"+n),a.splice($.inArray(n,a),1)}})}),$(document).on("click",".start-bulk-other-restore",function(t){var e,n;return e=$(t.currentTarget),n="other-sections",$.ajax({url:e.data("remote-url"),method:"POST",dataType:"json",data:JSON.parse(localStorage.getItem("restore-cv-"+n)),success:function(t){return $(".bottom-other-container").html(t.html.form),$("#other").replaceWith(t.html.editor),$(".add-modal-selector").find(".toolbar-add-other").addClass("hidden"),$(".editor-left-panel-container .module-part .add-module .content").find(".toolbar-add-other").addClass("hidden"),$(".editor-left-panel-container .left-content-container .module-part .current-module .content .other").removeClass("hide"),$(".bottom-other-container").height()<380&&$(".bottom-other-container").height(380),$(".bottom-other-container").slideDown(500),$(".transparent-modal-background").removeClass("hide"),
localStorage.removeItem("restore-cv-"+n),a.splice($.inArray(n,a),1)}})}),$(window).on("beforeunload unload reload",function(){if($("#cvs-show").length>0)return a.forEach(function(t){return localStorage.removeItem("restore-cv-"+t)})})}),this.setRestoreBtn=function(t,e,n){var i,o;return o=$(".add-modal-selector").find(".toolbar-add-"+t),i=$(".editor-left-panel-container .module-part .add-module .content").find(".toolbar-add-"+t),$.each([i,o],function(){return $(this).removeClass("hidden").removeClass("remote-add-section"),$(this).addClass("start-bulk-restore"),$(this).data("remote-url",n),$(this).data("type",e),$(this).find("img").attr("src","https://files.wondercv.com/restore_btn.png"),$(this).find("img").attr("data-title","\u64a4\u56de")})},this.cleanRestoreBtn=function(t,e,n){var i,o;return o=$(".add-modal-selector").find(".toolbar-add-"+t),i=$(".editor-left-panel-container .module-part .add-module .content").find(".toolbar-add-"+t),$.each([i,o],function(){return $(this).addClass("hidden").addClass("remote-add-section"),$(this).removeClass("start-bulk-restore"),$(this).data("remote-url",n),$(this).find("img").attr("src","https://files.wondercv.com/darkgray_circle_plus_icon.png"),$(this).find("img").attr("data-title","\u6dfb\u52a0")}),localStorage.removeItem("restore-cv-"+e)}}.call(this),function(){$(function(){var t;return $(document).on("click","#cvs-show #cv-content .title-text",function(t){var e,n;if($(this).closest(".file-mode").length<=0)return e=(n=$(t.currentTarget)).next(),n.addClass("hidden"),e.data("history-text",n.text()),e.removeClass("hidden").focus()}),$(".info-title-edit-btn").on("click",function(t){var e;return(e=$(t.currentTarget)).parent().addClass("hidden"),e.parent().siblings().removeClass("hidden").focus()}),$(document).on("blur",".title-input",function(e){var n,i,o,r,a;return n=(o=$(e.currentTarget)).attr("name"),i=o.val().trim().length>0?o.val():o.data("history-text"),(a={})[n]=i,r=o.closest("#cv-content").length>0?o.prev():o.siblings(".title-content").find(".text"),$.ajax({type:"PUT",url:o.data("url"),data:{title:a},beforeSend:function(){return t(o,r,i)},success:function(){if($("#cvs-show").length>0)return o.closest(".resume-editor-plate").find(".bulk-restore-trigger").data("section-title",i)},error:function(){return $.notify("\u50a8\u5b58\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5","error")}})}),t=function(t,e,n){return t.addClass("hidden"),e.text(n),e.removeClass("hidden"),e.closest(".title-content").removeClass("hidden")}})}.call(this),function(){this.TypeDetect=function(){function t(t,e){this.el=t,this.type=e}return t.prototype.result=function(){return-1!==(this.el.is(".faq-select")?this.el.find("option").map(function(){return $(this).data("type")}):this.el.find("option").map(function(){return this.value})).get().indexOf(this.type)},t}()}.call(this),function(){var t,e,n,i;this.cvEnStrftime=function(t,n){return e()[n]+" "+t},this.cvCnStrftime=function(t,e){return t+"\u5e74"+e+"\u6708"},this.cvNumberStrftime=function(t,e){return t+"."+e},e=function(){return{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"}},this.getStrftime=function(e,n){return $("#cv-number-time-format").length>0&&t()?cvNumberStrftime(e,n):isCvCN()?cvCnStrftime(e,n):isCvEN()?cvEnStrftime(e,n):cvNumberStrftime(e,n)},this.isCvCN=function(){return"zh-CN"===$("#cv-lang").text()},this.isCvEN=function(){return"en"===$("#cv-lang").text()},t=function(){return JSON.parse($("#cv-number-time-format").val())},this.syncCvFormDisplay=function(t,e){var n;return n=t.data("cv-field"),$("[data-field-display="+n+"]").text(e)},this.toggleEditorLeftPanel=function(){if($("#cvs-show").length>0)return $(".inteligent-check").removeClass("hide"),$(".inteligent-check").siblings().addClass("hide")},n=function(){var t;return t=$("#one-page"),$(".one-page-btn").html("\u53d6\u6d88\u4e00\u9875\u7eb8"),t.attr("id","one-page-rollback"),t.html('<i class="fa fa-sticky-note-o"></i>\u53d6\u6d88\u4e00\u9875\u7eb8')},i=function(){var t;return t=$("#one-page-rollback"),$(".one-page-btn").html("\u81ea\u52a8\u4e00\u9875\u7eb8"),t.attr("id","one-page"),t.html('<i class="fa fa-sticky-note-o"></i>\u81ea\u52a8\u4e00\u9875\u7eb8')},$(function(){var t,e,o,r,a,s,l,c,u,d,p,h,f,m,g,v,y,b,w,C,_,x,k,A;return v=function(){return $('input[name="is_mobile"]').val()},p=function(){return $(".transparent-modal-background").removeClass("hide")},h=function(){return $(".transparent-modal-background").addClass("hide")},_=function(){return setTimeout(function(){if("false"===localStorage.getItem("cv_saved"))return $(".can-not-save-cv-alert").removeClass("hide")},2e3),C(),$(".bottom-other-container").slideDown(500),setTimeout(function(){if($(window).height()<$(".bottom-other-container").height())return $(".bottom-other-container").css("top",0),$(".bottom-other-container").css("overflow-y","scroll"),$(".bottom-other-container").css("overflow-x","hidden")},1e3)},u=function(){return $(".bottom-other-container").slideUp(500)},C=function(){if($(".bottom-other-container").height()<380)return $(".bottom-other-container").height(380)},f=function(){var t;if(t=navigator.userAgent,console.log("userAgent------------------"+t),t.indexOf("compatible")>-1&&t.indexOf("MSIE")>-1||t.indexOf("Edge")>-1||t.indexOf("Trident")>-1)return console.log("IE/Edge"),$("#bottom-cv-other-form").submit()},d=function(){var t,e;return e=$(".js-show-bottom-other").data("url"),t=$(".js-show-bottom-other").data("other-url"),$.ajax({url:e,method:"post",dataType:"json",success:function(e){return v()?window.location.href=t:($(".bottom-other-container").html(e.html.form),$("#other").replaceWith(e.html.editor),$(".add-modal-selector").find(".toolbar-add-other").addClass("hidden"),_(),p())}})},$(document).on("click",".other-info-top-close, .other-info-top-save",function(){return u(),h(),toggleEditorLeftPanel(),$("#one-page-line").removeClass("hide")}),$(document).on("click",".other-info-top-save",function(){return f()}),$(document).on("click",".js-show-bottom-other",function(t){if(!$(t.currentTarget).hasClass("start-bulk-other-restore"))return d()}),b=null,$(document).on("click",".other-content .plate-item-content, .show-bottom-other",function(){var t;if(!v())return _(),p(),t=!(null!=b&&"other"===b),b="other",e("other","\u5176\u4ed6",t)}),$(document).on("click",".applicant-info",function(){var t;if(setTimeout(function(){if("false"===localStorage.getItem("cv_saved"))return $(".can-not-save-cv-alert").removeClass("hide")},2e3),!v())return $(".bottom-profile-container").slideDown(500),$(".transparent-modal-background").removeClass("hide"),t=!(null!=b&&"other"===b),b="other",e("other","\u5176\u4ed6",t),setTimeout(function(){if($(window).height()<$(".bottom-profile-container").height())return $(".bottom-profile-container").css("top",0),$(".bottom-profile-container").css("overflow-y","scroll"),$(".bottom-profile-container").css("overflow-x","hidden")},1e3)}),w=function(t){return $("#cv-content").removeClass(function(t,e){return e.match(/(^|\s)lineH-\S+/g).join(" ")}),$("#cv-content").addClass("lineH-"+t),$("#cv-content").removeData("lineheight"),$("#cv-content").data("lineheight",t),$("#lineheight-input").text(t),t},$(document).on("click","#one-page",function(t){var e,i,o,r,a,s,l,c,u,d,p,h;if(t.preventDefault(),t.stopPropagation(),u=$("#cv-content").data("format-update"),i=parseInt($("#one-page").data("line-height")),e=$(".resume-editor").height(),c=parseInt($("#cv-content").data("page-margin")),a=document.getElementById("divMMHeight").getBoundingClientRect().height,console.log("1mm --------------"+a.toFixed(2)),e>(l=(297-2.45*c)*a.toFixed(2)))for(h=o=i;o>=12&&(s=w(h),d=!0,!($(".resume-editor").height()<l));h=o+=-1);else for(h=r=i;r<=30&&(s=w(h),p=!0,!($(".resume-editor").height()>l));h=r+=1);return p&&(s-=1),console.log(s),$.post(u,{cv:{line_spacing:s}}).done(function(){if(w(s),$("#lineheight-select .spacing-selector .selector-list li").each(function(){if($(this).hasClass("active")&&$(this).removeClass("active"),$(this).text()===s.toString())return $(this).addClass("active")}),n(),d&&$(".resume-editor").height()>l)return alert("\u5185\u5bb9\u8fc7\u591a\uff0c\u65e0\u6cd5\u663e\u793a\u5728\u4e00\u9875\u7eb8\u5185\uff0c\n \u8bf7\u5220\u51cf\u5185\u5bb9\u6216\u8c03\u6574\u5b57\u53f7\u518d\u6b21\u5c1d\u8bd5")})}),$(document).on("click","#one-page-rollback",function(){var t,e,n;return t=$("#one-page-rollback"),e=parseInt(t.data("line-height")),n=$("#cv-content").data("format-update"),$.post(n,{cv:{line_spacing:e}}).done(function(){return w(e),i()})}),e=function(t,e,n){var i,o,r,a;if(r=$(".fill-in-tips"),i=$(".view-cases"),r.is(":visible")){if(a=$(".faq-select"),new TypeDetect(a,t).result()&&n)return a.find("option:checked").prop("selected",!1),a.find("option[data-type='"+t+"']").prop("selected",!0),$("#faq-form").submit()}else if(i.removeClass("hide"),i.siblings().addClass("hide"),o=$("select[name=example_type]"),$("#one-page-line").addClass("hide"),new TypeDetect(o,e).result()&&n)return o.find("option:checked").prop("selected",!1),o.find("option[value='"+e+"']").prop("selected",!0),$("#example-type-select").trigger("change")},(m=function(){return $("#cvs-show").length>0})()&&initMiniTinymce(),window.currentEditForm=null,$(document).on("click",'#cvs-show [id*="work-"], #cvs-show [id*="edu-"], #cvs-show [id*="org-"], #cvs-show [id^="info-"]',function(t){var n,i,o,a,s,l;if(i=$(t.target),v()||$(".header-v3 .header-content .header-left .save-tips span.text, .right-panel-control-bar .save-tips span.text").text("\u6536\u8d77\u7f16\u8f91\u6846\u540e\u5c06\u81ea\u52a8\u4fdd\u5b58"),!v()&&null==window.currentEditForm&&!r(i))return a=(o=(n=$(t.currentTarget)).find("form")).data("class"),x(n),window.currentEditForm={"class":a,id:o.data("id")},l=n.attr("id").split("-")[0],s=!(null!=b&&b===l),b=l,e(a,n.data("example-type"),s)}),x=function(t){return console.log("false"===localStorage.getItem("cv_saved")),setTimeout(function(){if("false"===localStorage.getItem("cv_saved"))return $(".can-not-save-cv-alert").removeClass("hide")},2e3),t.addClass("editable"),t.find(".plate-item-tag").addClass("hidden"),t.find(".plate-item-tag-from").removeClass("hidden"),t.find(".plate-item-tag-from").addClass("plate-item-tag")},$("#cvs-show").on("click",function(e){var n,i;if(null!=window.currentEditForm&&(i=$(e.target),n="#edit_"+t(),y(i,n)))return A(n),$(n).submit(),localStorage.setItem("cv_saved",!1),setTimeout(function(){if("false"===localStorage.getItem("cv_saved"))return $(".save-tips span").text("\u6b63\u5728\u4fdd\u5b58..."),$(".save-tips img").attr("src","https://files.wondercv.com/loading.gif")},2e3),c(n),window.currentEditForm=null,$("#one-page-line").removeClass("hide"),toggleEditorLeftPanel()}),y=function(t,e){return 0===t.closest(e).length&&k()&&s(t)&&a(t)||o(t)||l(t)||r(t)},t=function(){return window.currentEditForm["class"]+"_"+window.currentEditForm.id},c=function(t){return $(t).closest(".plate-item-tag-from").addClass("hidden"),$(t).closest(".plate-item-tag-from").removeClass(".plate-item-tag"),$(t).closest(".plate-item-tag-from").prev().removeClass("hidden")},A=function(e){var n,i,o;if(i="description_"+t(),null!=(o=tinyMCE.editors[i]))return n=o.getContent(),$(e).closest(".resume-editor-plate-item").find(".description-content").html(n),$("#"+i).val(n)},k=function(){return 0===$("#mce-modal-block").length},s=function(t){return 0===t.closest(".unfold-container").length},o=function(t){return t.closest("#cv-check").length>0},l=function(t){return t.closest("#cv-score").length>0},r=function(t){return t.closest(".resume-editor-palte-item-ctrl-bar").length>0},a=function(t){return 0===t.closest(".ui-autocomplete").length},$(document).on("ajax:success",function(t){if(t.target.id.match("edit_")&&$("#cvs-show").length>0)return $(".save-tips span").text("\u5df2\u81ea\u52a8\u4fdd\u5b58"),$(".save-tips img").attr("src","https://files.wondercv.com/gray-circle-check.png"),$(".can-not-save-cv-alert").addClass("hide"),localStorage.setItem("cv_saved",!0)}),$(document).on("ajax:error",function(t,e){return 0===e.status&&t.target.id.match("edit_")&&$("#cvs-show").length>0?($(".can-not-save-cv-alert").removeClass("hide"),localStorage.setItem("cv_saved",!1),!1):422===e.status&&t.target.id.match("edit_")&&$("#cvs-show").length>0&&v()?alert("\u60a8\u521a\u521a\u7f16\u8f91\u7684\u5185\u5bb9\u672a\u80fd\u6b63\u5e38\u4fdd\u5b58\uff0c\u8bf7\u590d\u5236\u5185\u5bb9\uff0c\u5e76\u5237\u65b0\u9875\u9762\u91cd\u65b0\u7f16\u8f91"):void 0}),$(document).on("input","input[data-cv-field], select[data-cv-field]",function(){return g($(this))}),$(document).on("keyup.autocomplete","input[name*=company_name]",function(){var t,e;return t=$(this),e={term:t.val(),lang:t.data("lang")},t.autocomplete({source:function(t,n){return $.getJSON("/companies.json",e,n)},change:function(){if(m())return g(t)}})}),$(document).on("keyup.autocomplete","input[name*=cust_city_name]",function(){var t;return(t=$(this)).autocomplete({source:"/cities.json",change:function(){if(m())return g(t)}})}),$(document).on("keyup.autocomplete","input[name*=cust_uni_name]",function(){var t;return(t=$(this)).autocomplete({source:"/universities.json",change:function(){if(m())return g(t)}})}),g=function(t){var e,n;return n=t.val(),e=t.data("placeholder"),0===n.length&&null!=e?syncCvFormDisplay(t,e):syncCvFormDisplay(t,n)},$(".js-pc-cv-download").click(function(){if($(this).css("pointer-events","none"),setTimeout(function(){return $(".js-pc-cv-download").css("pointer-events","auto")},5e3),-1===navigator.userAgent.toLowerCase().indexOf("wondercv_ios")&&($.notify("\u6b63\u5728\u4e0b\u8f7d...","success"),!JSON.parse(sessionStorage.getItem("UserBindModalShow"))))return showBindOfficalAccount(4e3),sessionStorage.setItem("UserBindModalShow",!0)})})}.call(this),function(){this.cvNameRegex=function(){function t(){}return t.prototype.build=function(t){var e;try{return new RegExp("_"+t+"|"+t+"_|"+t)}catch(n){return n,e=t.replace(/[\[\]\(\)\\uff08\\uff09\\uff0c\,\+]/g,""),new RegExp("_"+e+"|"+e+"_|"+e)}},t}(),$(function(){var t;return t=function(t){var e;return e=t.find(".cv_cv_name").val(),[t.find(".js-username"),t.find(".js-exp-job"),t.find(".js-uni-name"),t.find(".js-degree-name"),t.find(".js-major-name"),t.find(".js-current-state"),t.find(".js-profile-phone")].forEach(function(t){var n;if(n=$(t),(new cvNameRegex).build(n.val()).test(e))return n.addClass("done")})},$(".name-display, .show-edit-name-modal").click(function(){return $(".file-name-editor-modal").modal("show")}),$(".cv_cv_name").on("keyup",function(t){var e,n;if(e=(n=$(t.currentTarget)).closest(".name-editor").find(".items-area"),0===n.val().length)return e.find(".done").removeClass("done")}),$(".file-name-editor-modal").on("show.bs.modal",function(e){var n;return n=$(e.currentTarget),t(n)}),$(document).on("click",'[name="cv-name-item"]',function(t){var e,n,i,o,r;return o=(i=$(t.currentTarget)).val(),n=(e=i.closest(".name-editor").find(".cv_cv_name")).val(),r=(new cvNameRegex).build(o),i.hasClass("done")?(e.val(n.replace(n.match(r),"")),i.removeClass("done").addClass("click")):0===n.length?(e.val(""+n+o),i.addClass("done").removeClass("click")):(e.val(n+"_"+o),i.addClass("done").removeClass("click"))})}),$(function(){var t,e,n,i,o,r,a;return t=function(){return $(".file-name-editor-modal:visible").find(".js-cv-download-btn-list")},e=function(){return t().data("cv-name-parts")},$(document).on("click",".name-select",function(t){var e,o,r;return o=(r=(e=$(t.currentTarget)).find(":checkbox")).data("field"),r.is(":checked")?(r.prop("checked",!1),i(o),e.addClass("unchecked").removeClass("checked")):(r.prop("checked",!0),n(o),e.addClass("checked").removeClass("unchecked")),a()}),n=function(t){var n;return(n=e()).push(t),r(n)},i=function(t){var n;return(n=e()).splice(n.indexOf(t),1),r(n)},r=function(e){return t().data("cv-name-parts",e)},a=function(){return $.ajax({url:t().data("cv-name-parts-url"),method:"PUT",data:{name_parts:o()},success:function(t){if($(".file-name-editor-modal:visible").find('input[name="cv[cv_name]"]').val(t.text),$("#cvs-show").length>0)return $(".name-display").text(t.text||"")}})},o=function(){return console.log(e()),e().length>0?e():""},$(document).on("click",".submit-update-name-form",function(t){var e;return(e=$(t.currentTarget).closest(".file-name-editor-modal").find(".update-cv-name")).find('input[name="name_auto_update"]').val("off"),e.submit()}),$(document).on("blur",".cv_cv_name",function(e){var n;return(n=$(e.currentTarget).closest(".file-name-editor-modal").find(".update-cv-name")).find('input[name="name_auto_update"]').val("on"),t().html(""),n.submit()})})}.call(this),function(){$(function(){var t,e,n,i,o,r,a,s,l;return $(document).on("click",".btns-ignore",function(t){return t.preventDefault(),$(this).closest(".resume-advice-item").show()}),o="highlight-rule",$(document).on("click",".section-amount-issue",function(t){var r,l;return t.preventDefault(),isMobileDevice()&&($(".editor-left-panel-container").animate({left:"-100%"},300),$(".container").css("overflow","auto"),$(".container").css("position","static"),$(".mobile-modal-background").addClass("hide")),s(),r=$(this).data("section"),$("#"+r).addClass(o),"unprofessinal_email"===r?i():"has_template"===r?n():"oneline"===r?e():"wordcount"!==r&&0===$("#"+r).length?a():"wordcount"===r?(l=$("#wordcount .word-counter").text(),alert("\u7b80\u5386\u5b57\u6570\uff1a"+l+"\uff0c\u5185\u5bb9\u8fc7\u5c11\uff0c\u5efa\u8bae\u589e\u52a0\u63cf\u8ff0")):$("#"+r).length>0?$("html, body").animate({scrollTop:$("#"+r).offset().top},1e3):void 0}),i=function(){return $("#jobmail-modal").modal("show")},e=function(){return $('[data-need-online="true"] .tag-second-line').addClass(o),$("html, body").animate({scrollTop:$('div[data-need-online="true"]').offset().top},1e3)},n=function(){return $(".temp-checker").removeClass(o),$(".temp-checker").each(function(){if(JSON.parse($(this).data("has-template")))return $(this).addClass(o)}),$("html, body").animate({scrollTop:$('div[data-has-template="true"]').offset().top},1e3)},s=function(){return $("."+o).each(function(){return $(this).removeClass(o)})},l={cv_name:function(){return $(".file-name-editor-modal").modal("show")},languages_blank:a=function(){return isMobileDevice()?($(".editor-left-panel-container .left-content-container .check-part").addClass("hide"),$(".editor-left-panel-container .left-content-container .module-part").removeClass("hide"),$(".mobile-modal-background").removeClass("hide"),$(".editor-left-panel-container").animate({left:"0"},300)):($("#cv-add-modal .selector-list").removeClass("hide"),$("html, body").animate({scrollTop:0},1e3))}},r=function(t){return Object.keys(l).includes(t)},t=function(t){return $.ajax({url:t,method:"GET",dataType:"script"})},$(document).on("click",".js-start-highlight",function(){var e,n;return isMobileDevice()&&($(".editor-left-panel-container").animate({left:"-100%"},300),$(".container").css("overflow","auto"),$(".container").css("position","static"),$(".mobile-modal-background").addClass("hide")),n=$(this).data("rule"),e=$(this).data("url"),r(n)?l[n].call():t(e)})})}.call(this),function(){}.call(this),function(){$(function(){var t,e,n;return $("#intention_work_hour").cv_checkbox({multiple:!1}),$("#intention_industry").cv_checkbox({multiple:!0,single_line:!0}),$("#intention_profession").cv_checkbox({multiple:!0,single_line:!0}),$("#intention_company_scale").cv_checkbox({multiple:!0}),$("#intention_company_natures").cv_checkbox({multiple:!0}),$("#intentions_city").select2({placeholder:"\u5168\u56fd",maximumSelectionLength:3,width:330,language:{maximumSelected:function(t){return"\u6700\u591a\u9009\u62e9"+t.maximum+"\u4e2a\u57ce\u5e02"}}}),n=function(){var t,e,n;return t=$("#intentions_city").val(),Array.isArray(t)&&t.length>3?($.notify("\u6700\u591a\u9009\u62e93\u4e2a\u57ce\u5e02","error"),!1):(isMobileDevice()?(n=$(".profession-collection .collection-item.active"),e=$(".industry-collection .collection-item.active")):(n=$("#intention_profession label.option-selected"),e=$("#intention_industry label.option-selected")),n.length>3?($.notify("\u6700\u591a\u9009\u62e93\u4e2a\u804c\u4f4d","error"),!1):e.length>3?($.notify("\u6700\u591a\u9009\u62e93\u4e2a\u884c\u4e1a","error"),!1):void 0)},$("#edit_job_intention").submit(function(){if(!isMobileDevice())return n()}),e=$(".intentions-show"),t=$(".intentions-edit"),$(".intentions-status"),$(document).on("click","#edit-intention",function(){return e.addClass("hide"),t.removeClass("hide")}),$(document).on("touchstart",".mobile-choose-intention-container .collection-operation .cancel-btn",function(){return $(".mobile-choose-intention-container .collection-operation").addClass("hidden"),$(".mobile-choose-intention-container .collection-part").addClass("hidden"),$(".mobile-choose-intention-container .city-collection").addClass("hidden"),$(".modal-background").addClass("hidden")}),$(document).on("touchstart","#intentions-index .fake-table .tr",function(t){return $(".mobile-choose-intention-container .collection-operation").removeClass("hidden"),$(".mobile-choose-intention-container .collection-part").addClass("hidden"),$(".mobile-choose-intention-container .city-collection").addClass("hidden"),$(".modal-background").removeClass("hidden"),$(t.target).closest(".tr").hasClass("job-nature")?$(".mobile-choose-intention-container .job-nature-collection").removeClass("hidden"):$(t.target).closest(".tr").hasClass("industry")?$(".mobile-choose-intention-container .industry-collection").removeClass("hidden"):$(t.target).closest(".tr").hasClass("profession")?$(".mobile-choose-intention-container .profession-collection").removeClass("hidden"):$(t.target).closest(".tr").hasClass("address")?$(".mobile-choose-intention-container .city-collection").removeClass("hidden"):$(t.target).closest(".tr").hasClass("scale")?$(".mobile-choose-intention-container .company-scale-collection").removeClass("hidden"):$(t.target).closest(".tr").hasClass("nature")?$(".mobile-choose-intention-container .company-nature-collection").removeClass("hidden"):void 0}),$(document).on("touchstart",".mobile-choose-intention-container .confirm-btn",function(){var t,e,i,o,r,a;if(i=$(".job-nature-collection .collection-item.active").data("value"),$("#intention_work_hour input").each(function(){return $(this).val()===i?$(this).prop("checked",!0):$(this).prop("checked",!1)}),e=$(".industry-collection .collection-item.active").map(function(){return $(this).data("value").toString()}).get(),$("#intention_industry input").each(function(){return e.includes($(this).val())?$(this).prop("checked",!0):$(this).prop("checked",!1)}),r=$(".profession-collection .collection-item.active").map(function(){return $(this).data("value").toString()}).get(),$("#intention_profession input").each(function(){return r.includes($(this).val())?$(this).prop("checked",!0):$(this).prop("checked",!1)}),a=$(".company-scale-collection .collection-item.active").map(function(){return $(this).data("value").toString()}).get(),$("#intention_company_scale input").each(function(){return a.includes($(this).val())?$(this).prop("checked",!0):$(this).prop("checked",!1)}),o=$(".company-nature-collection .collection-item.active").map(function(){return $(this).data("value").toString()}).get(),$("#intention_company_natures input").each(function(){return o.includes($(this).val())?$(this).prop("checked",!0):$(this).prop("checked",!1)}),t=$(".city-collection .city-name.active").map(function(){return $(this).data("value").toString()}).get(),$("#intention_cities select").val(t),void 0===n())return $("#edit_job_intention").submit()}),$(document).on("touchstart",".job-nature-collection .collection-item",function(){return $(this).siblings().removeClass("active"),$(this).addClass("active")}),$(document).on("touchstart",".industry-collection .collection-item, .profession-collection .collection-item, .company-scale-collection .collection-item, .company-nature-collection .collection-item",function(){return $(this).hasClass("no-limit-item")?($(this).siblings().removeClass("active"),$(this).addClass("active")):$(this).parent().find(".active").length>2&&!$(this).hasClass("active")?($.notify("\u6700\u591a\u9009\u62e93\u4e2a","error"),!1):($(this).toggleClass("active"),$(this).siblings(".no-limit-item").removeClass("active"))}),$(document).on("touchstart",".mobile-choose-intention-container .city-name",function(){return $(this).hasClass("all-city")?($(".city-collection .city-name").removeClass("active"),$(".city-collection .city-name[data-value='']").addClass("active")):$(this).parent().find(".active").length>2&&!$(this).hasClass("active")?($.notify("\u6700\u591a\u9009\u62e93\u4e2a","error"),!1):($(".city-collection .city-name.all-city").removeClass("active"),$(".city-collection .city-name[data-value='"+$(this).data("value")+"']").toggleClass("active"))}),$(document).on("click touchstart",".city-collection .city-item",function(){return $(this).siblings().removeClass("active"),$(this).addClass("active"),$(".right-part").addClass("hidden"),$(".right-part[data-pinyin='"+$(this).data("key")+"']").removeClass("hidden")}),$(document).on("touchstart",".profession-modal-background",function(){return setTimeout(function(){return $(".level2").addClass("hide"),$("html, body").css("overflow-y","auto"),$("html, body").css("position","initial")},100)})})}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var o in n)e.call(n,o)&&(t[o]=n[o]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;$(function(){var e,n,i,o,r,a,s,l,c;return l=$('input[name="is_mobile"]').val(),c=function(){return $("#email_contact_attributes_name").prop("required",!1),$("#email_contact_attributes_email").prop("required",!1),$("#email_contact_attributes_phone").prop("required",!1)},$(document).ready(function(){return""===$("#job-app-avatar-preview").attr("src")?($(".hide-email-avatar").addClass("hide"),$(".show-email-avatar").addClass("hide")):$(".show-email-avatar").addClass("hide")}),$(document).on("click","#email-send",function(t){return t.preventDefault(),s?($("#alert-different-email .quick-change").addClass("quick-change-and-send"),$("#alert-different-email").modal("show")):validate_before_email_send()?(c(),$(".notifyjs-corner").empty(),$.notify("\u6b63\u5728\u53d1\u9001...",{className:"success",clickToHide:!1,autoHide:!1}),$("#email-send").prop("disabled",!0),$(".send-email-btn").click()):void 0}),$(document).on("click",".email-save",function(){return c(),$(".save-email-btn").click()}),$(document).on("click",".email-info-top-save",function(){return $(".save-email-btn").click()}),$(document).on("click",".email-jump-save",function(){return c(),$("input#back").val("yes"),$(".save-email-btn").click()}),$(document).on("click",".email-preview-online",function(){var t;return t=$(this).data("url"),$(".online-preview-btn").click(),setTimeout(function(){return window.open(t)},300)}),$(document).on("click","#email-send-to-self-mailbox",function(){return $(".send-email-to-self-mailbox-btn").click()}),a=function(){var t;return t="subject="+$("#email_subject").val()+"&email_to="+$("#email_to").val(),$(".js-email-change-template").data("params",t),$(".js-email-cancel-template").data("params",t)},$(document).on("change","#email_subject",function(){var t;if(t=$(this),$(".file-name-editor .file-name").text(t.val()),$(".file-name-editor .editor-input").val(t.val()),l)return a()}),$(document).on("change","#email_to",function(){if(l)return a()}),$(".job-form-btn").click(function(t){var e,n;return t.preventDefault(),n=$(this).data("path"),(e=$(this).closest("form")).attr("action",n),e.submit()}),$(".job-btn").click(function(){var t;return t=$(this).attr("name"),$("#job_app_action").val(t)}),$(".control-bar-avatar").click(function(){return $(this).find(".menu-items").toggleClass("hide")}),null!=$(".right-panel-control-bar")&&$("body").click(function(t){if(!$(t.target).closest(".menu-avatar").length)return $(".control-bar-avatar .menu-items").addClass("hide")}),e=function(){function t(t){this.file=t,this.add_file_handler(),this.del_file_handler(),this.upload_event_handler()}return t.prototype.submit_file=function(t,e){var n;return null==e&&(e="add"),n={id:"",type:""},"add"===e&&(n={id:t.data(this.file.click.id),type:t.data(this.file.click.type)}),$(this.file.submit.id).val(n.id),$(this.file.submit.type).val(n.type)},t.prototype.add_file_handler=function(){return $(this.file.available).click((t=this,function(e){var n;return n=$(t.file.briefcase).is(".email-attachment-cv")?"\u6295\u9012\u90ae\u4ef6\u4e2d\u5df2\u6709\u7b80\u5386\u9644\u4ef6\uff0c\u662f\u5426\u66ff\u6362\uff1f":"\u6c42\u804c\u90ae\u4ef6\u4e2d\u4e0d\u5efa\u8bae\u4e0a\u4f20\u8fc7\u591a\u9644\u4ef6\uff0c\u662f\u5426\u66ff\u6362\u5df2\u6709\u6587\u4ef6\uff1f",$(t.file.briefcase).hasClass("hidden")?(t.select_file($(e.target)),l?$(".save-email-btn").click():$(".email-save").click()):confirm(n)?(t.select_file($(e.target)),l?$(".save-email-btn").click():$(".email-save").click()):($(".file-picker").addClass("hide"),$(".cv-picker").addClass("hide"),!1)}));var t},t.prototype.del_file_handler=function(){return $(this.file.remove).click((t=this,function(e){return t.submit_file($(e.target),"del"),t.remove_selected_attachment()}));var t},t.prototype.select_file=function(t){return this.submit_file(t),this.show_selected_attachment(t)},t.prototype.show_selected_attachment=function(t){var e;return e=t.text(),$(this.file.selected).text(e),$(this.file.briefcase).removeClass("hidden"),$(this.file.briefcase).find(".file-perview-link").attr("href",t.data("url"))},t.prototype.remove_selected_attachment=function(){return $(this.file.selected).text(""),$(this.file.briefcase).addClass("hidden"),$(this.file.briefcase).find(".file-perview-link").attr("href","#nogo")},t.prototype.upload_event_handler=function(){return $(this.file.upload.to).on("portfolio-"+this.file.type+"-uploaded",(t=this,function(e,n){var i;return i=t.prepend_new_file(n),t.select_file(i)}));var t},t.prototype.before_prepend=function(t){return t},t.prototype.prepend_new_file=function(t){var e;return(e=$(this.file.upload.template).children().clone(!0)).data(this.file.click.id,t.id),e.attr("data-"+this.file.click.id,t.id),e.text(t.name),e=this.before_prepend(e,t),$(this.file.upload.to).prepend(e),e},t}(),i=function(){function n(){var t;t={available:".email-cv-name",click:{id:"resumable-id",type:"resumable-type"},selected:".email-attachment-cv-name",submit:{id:"#email_resumable_id",type:"#email_resumable_type"},briefcase:".email-attachment-cv",remove:".email-attachment-cv .remove-attached-file",type:"resume",upload:{to:".portfolio-resume-list",template:"#portfolio-resume-template"}},n.__super__.constructor.call(this,t)}return t(n,e),n}(),o=function(){function n(){var t;t={available:".email-cover-letter-name",click:{id:"cover-letterable-id",type:"cover-letterable-type"},selected:".email-attachment-cl-name",submit:{id:"#email_cover_letterable_id",type:"#email_cover_letterable_type"},briefcase:".email-attachment-cl",remove:".email-attachment-cl .remove-attached-file",type:"cover_letter",upload:{to:".portfolio-cover_letter-list",template:"#portfolio-cover-letter-template"}},n.__super__.constructor.call(this,t)}return t(n,e),n}(),r=function(){function n(){var t;t={available:".email-other-name",click:{id:"other-id",type:"other-type"},selected:".email-attachment-other-name",submit:{id:"#email_portfolio_id",type:""},briefcase:".email-attachment-other",remove:".email-attachment-other .remove-attached-file",type:"other",upload:{to:".portfolio-other-list",template:"#portfolio-other-template"}},n.__super__.constructor.call(this,t)}return t(n,e),n}(),n=function(){function n(){var t;t={available:"",click:{id:"avatarable-id",type:"avatarable-type",avatar_url:"avatar-url"},selected:"",avatar:{original:".original-avatar",restore_btn:".show-email-avatar"},submit:{id:"#email_avatarable_id",type:"#email_avatarable_type",use_avatar:"#email_use_avatar"},briefcase:"#job-app-avatar-preview",remove:".hide-email-avatar",type:"avatar",upload:{to:".portfolio-avatar-list",template:"#portfolio-avatar-template"}},n.__super__.constructor.call(this,t),this.restore_avatar_event_handler()}return t(n,e),n.prototype.submit_file=function(t,e){var i;return null==e&&(e="add"),n.__super__.submit_file.call(this,t,e),$(this.file.submit.use_avatar).val(null!=(i="add"===e)?i:{"true":"false"})},n.prototype.show_selected_attachment=function(t){return this.update_avatar_url(t.data(this.file.click.avatar_url)),n.__super__.show_selected_attachment.call(this,t)},n.prototype.remove_selected_attachment=function(){return n.__super__.remove_selected_attachment.apply(this,arguments),$(this.file.remove).addClass("hide"),$(this.file.avatar.restore_btn).removeClass("hide"),this.update_avatar_url(""),$(this.file.submit.use_avatar).val("false")},
n.prototype.update_avatar_url=function(t){return $(this.file.briefcase).attr("src",t)},n.prototype.restore_avatar=function(){var t,e,n,i;return e=(t=$(this.file.avatar.original)).data("id"),n=t.data("type"),i=t.data("url"),$(this.file.submit.id).val(e),$(this.file.submit.type).val(n),$(this.file.submit.use_avatar).val("true"),$(this.file.avatar.restore_btn).addClass("hide"),$(this.file.remove).removeClass("hide"),this.show_selected_attachment(t),this.update_avatar_url(i)},n.prototype.update_original_avatar=function(t){var e;return(e=$(this.file.avatar.original)).data("id",t.id),e.data("type","Portfolio"),e.data("url",t.avatar_url)},n.prototype.before_prepend=function(t,e){return this.update_original_avatar(e),t.data(this.file.click.avatar_url,e.avatar_url),t.attr("data-"+this.file.click.avatar_url,e.avatar_url),$(".show-email-avatar").addClass("hide"),$(".hide-email-avatar").removeClass("hide"),t},n.prototype.restore_avatar_event_handler=function(){return $(this.file.avatar.restore_btn).click((t=this,function(){return t.restore_avatar()}));var t},n}(),new i,new o,new r,new n,$(".preheader-bg-color").click(function(){var t;return"white_fafa"===(t=$(this).data("bgcolor"))?($(".right-panel-control-bar .control-bar-color .selector-color").attr("class","selector-color solid-border-dada "+t),$(".job-email .email-profile .divider").attr("class","divider hidden")):($(".right-panel-control-bar .control-bar-color .selector-color").attr("class","selector-color "+t),$(".job-email .email-profile .divider").attr("class","divider "+t)),$("#email_bg_color").val(t)}),$(".control-email-template .toggle-temp-list").click(function(){var t,e;return e=(t=$(event.currentTarget)).data("lang"),t.hasClass("normal")&&($(".toggle-temp-list.current").removeClass("current").addClass("normal"),t.removeClass("normal").addClass("current")),$(".email-temp-list").addClass("hidden"),$("#"+e+"-email-temp-list").removeClass("hidden")}),window.emailDiffNeedAlert=!1,$(".email-diff-alert").length>0&&(s=!0),$(".email-diff-alert .alert-button").click(function(){return $("#alert-different-email .still-send").addClass("hidden")}),$("#alert-different-email").on("hidden.bs.modal",function(){return $("#alert-different-email .still-send").removeClass("hidden")}),$("#alert-different-email .quick-change").click(function(){var t;return t=$(this),$.ajax({url:$(this).data("post-url"),method:"post",data:null!=$(this).data("email-id")?{email_id:$(this).data("email-id"),cv_id:$(this).data("cv-attachment-id")}:{cv_id:$(this).data("cv-attachment-id")},success:function(){if(s=!1,t.hasClass("quick-change-and-send")&&validate_before_email_send())return c(),$(".send-email-btn").click()}})}),$("#alert-different-email .still-send").click(function(){if($("#alert-different-email").modal("hide"),validate_before_email_send())return c(),$(".send-email-btn").click()})})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.RecommandCvInfo=function(){function e(){this.buildCvListInfo=t(this.buildCvListInfo,this),this.initCurrentCv=t(this.initCurrentCv,this),this.cvList=$("#job-recommand-new .cv-list")}return e.prototype.init=function(){return this.initCurrentCv(),this.buildCvListInfo()},e.prototype.initCurrentCv=function(){var t;return t=this.cvList.find("li:first"),recommandChooseCv(t)},e.prototype.buildCvListInfo=function(){return this.cvList.find("li").each(function(){return recommandUpdateCvItem($(this),$(this))})},e}(),this.recommandCurrentCv=function(){return $("#job-recommand-new .current-cv")},this.recommandChooseCv=function(t){return recommandUpdateCvItem(recommandCurrentCv(),t),$(".checked").removeClass("checked"),t.find(".cv-name").addClass("checked"),recommandCurrentCv().data("cv-id",t.data("cv-id"))},this.recommandUpdateCvItem=function(t,e){return t.find(".cv-name").text(e.data("cv-name")),t.find(".cv-lang").text(e.data("cv-lang")),t.find(".cv-score").text(e.data("cv-score")+" \u5206")},$(function(){var t,e,n,i,o,r,a,s,l,c,u,d,p,h,f,m,g,v,y,b,w;return t=3,(new RecommandCvInfo).init(),a=function(){return $("#job-recommand-new .cv-list")},c=function(){return $("#email_attachment_email_id").val()},f=function(){return $("#job_id").val()},e=function(){return $("#application_id").val()},r=function(){return recommandCurrentCv().data("cv-id")},n=function(){return $("#job-recommand-new .attachment-item").length},l=function(){return 0===c().length},i=function(){return 0!==$("#birthday").length&&0===$("#birthday").val().length},d=function(){return 0!==$("#expected_salary").length&&0===$("#expected_salary").val().length},g=function(){return 0!==$("#onboard_at").length&&0===$("#onboard_at").val().length},u=function(){return 0!==$("#end_at").length&&0===$("#end_at").val().length},h=function(){return 0!==$("#intentions_profession").length&&null===$("#intentions_profession").val()},v=function(){return 0!==$("#select_cities").length&&null===$("#select_cities").val()},m=function(){return-1===navigator.userAgent.toLowerCase().indexOf("wondercv_ios")},o=function(){return recommandCurrentCv().data("bad-name")},w=function(){return $.ajax({url:"/zh-CN/job/recommands/"+r(),method:"PUT",dataType:"json",beforeSend:function(){return a().addClass("hidden"),recommandCurrentCv().find(".fa").removeClass("fa-angle-up").addClass("fa-angle-down")},success:function(t){return $(".recommand-text textarea").val(t.text),recommandCurrentCv().data("bad-name",t.bad_name)}})},y=function(){var t;return t=$(".recommand-text textarea").val(),$.ajax({url:"/zh-CN/job/recommands",method:"POST",data:{text:t,cv_id:r(),email_id:c(),recruit_info_id:f(),application_id:e()},success:function(t){return window.location.href=t.redirect_to}})},b=function(){return $.ajax({url:"/zh-CN/recruit_infos/"+f()+"/deliver_cv_to_shixiseng",method:"POST",data:{cv_id:r(),recruit_info_id:f(),application_id:e(),birthday:$("#birthday").val(),intern_frequency:$("#intern_frequency").val(),onboard_at:$("#onboard_at").val(),end_at:$("#end_at").val()},success:function(t){return console.log(t),t.success?window.location.href=t.redirect_to:t.error_msg?alert(t.error_msg):$.notify("\u7b80\u5386\u4fe1\u606f\u4e0d\u5168\uff0c\u8bf7\u5b8c\u5584\u60a8\u7684\u7b80\u5386\u4fe1\u606f","error")}})},p=function(){return $.ajax({url:"/zh-CN/job/recommands/"+c(),method:"DELETE",data:{recruit_info_id:f()},dataType:"json",success:function(t){return window.location.href=t.redirect_to}})},s=function(){var t;return t=isMobileDevice()?"\u7b80\u5386\u540d\u79f0\u4e0d\u7b26\u5408\u89c4\u8303\u6216\u804c\u4f4d\u8981\u6c42\uff0c\n\u8bf7\u4fee\u6539\u540e\u7ee7\u7eed\u6295\u9012":"\u7b80\u5386\u540d\u79f0\u4e0d\u7b26\u5408\u89c4\u8303\u6216\u804c\u4f4d\u8981\u6c42\uff0c\u8bf7\u4fee\u6539\u540e\u7ee7\u7eed\u6295\u9012",$.notify(t,"error")},$(document).on("click","#job-recommand-new .current-cv",function(){return a().toggleClass("hidden"),a().hasClass("hidden")?recommandCurrentCv().find(".fa").removeClass("fa-angle-up").addClass("fa-angle-down"):recommandCurrentCv().find(".fa").removeClass("fa-angle-down").addClass("fa-angle-up")}),$(document).on("click","#job-recommand-new .cv-list .left",function(){var t;return t=$(this).closest("li"),recommandChooseCv(t),w()}),$("#job-recommand-new .attachments .add").click(function(){return l()?$.ajax({url:"/zh-CN/job/recommands",method:"POST",dataType:"json",data:{act:"save",cv_id:r(),recruit_info_id:f(),application_id:e()},success:function(t){return $("#email_attachment_email_id").val(t.email_id)},complete:$("#email_attachment_file").click()}):n()>=t?$.notify("\u6700\u591a\u53ef\u6dfb\u52a0\u4e09\u4e2a\u9644\u4ef6","error"):$("#email_attachment_file").click()}),$(".job-recommand-attachments-upload").fileupload({dataType:"script"}),$(".job-recommand-attachments-upload").on("fileuploadsend",function(t,e){return(new UploadFileSize).check(e.files[0].size)}),$("#js-job-recommand-give-up").click(function(){return l()?window.location.href="/zh-CN/job/applications/"+f()+"/job_detail_show":p()}),$("#js-job-recommand-post").click(function(){return o()?s():(m()&&(new ContinuedNotify).success("\u5185\u63a8\u7533\u8bf7\u5df2\u53d1\u51fa\uff0c\u8bf7\u6ce8\u610f\u67e5\u6536\u90ae\u4ef6\u53cd\u9988"),$(this).prop("disabled",!0),y())}),$(".job-recommand-alert .go").click(function(){return window.location.href=$(this).data("url")}),$(document).on("click",".check_shixiseng_required",function(){var t;return(t=$(this)).text("\u6295\u9012\u4e2d..."),$.ajax({url:"/zh-CN/recruit_infos/check_shixiseng_required",method:"POST",dataType:"json",success:function(e){var n,i;return t.text("\u7acb\u5373\u6295\u9012"),i=e.user_msg,n=e.mod_cont_expc,i.name_blank||i.sex_blank||i.btday_blank||i.city_blank||i.school_blank||i.major_blank||i.degree_blank||i.tel_blank||i.email_blank||i.grady_blank?(alert("\u5f39\u6846\u63d0\u793a\u662f\u5426\u4fee\u6539\u7b80\u5386"),!1):n.day_blank?$(".job-recommand-new-modal").modal("show"):void 0}})}),$("#select_cities").select2({placeholder:"\u8bf7\u9009\u62e9",maximumSelectionLength:3,language:{maximumSelected:function(t){return"\u6700\u591a\u9009\u62e9"+t.maximum+"\u4e2a\u57ce\u5e02"}}}),$("#js-job-deliver-post").click(function(){return i()?($.notify("\u8bf7\u9009\u62e9\u51fa\u751f\u5e74\u6708","error"),!1):h()?($.notify("\u8bf7\u9009\u62e9\u671f\u671b\u804c\u4f4d","error"),!1):v()?($.notify("\u8bf7\u9009\u62e9\u671f\u671b\u57ce\u5e02","error"),!1):d()?($.notify("\u8bf7\u586b\u5199\u671f\u671b\u85aa\u8d44","error"),!1):g()?($.notify("\u8bf7\u9009\u62e9\u5f00\u59cb\u5b9e\u4e60\u65f6\u95f4","error"),!1):u()?($.notify("\u8bf7\u9009\u62e9\u7ed3\u675f\u5b9e\u4e60\u65f6\u95f4","error"),!1):o()?s():(m()&&(new ContinuedNotify).success("\u6b63\u5728\u6295\u9012,\u8bf7\u7a0d\u7b49..."),$(this).prop("disabled",!0),b())})})}.call(this),function(){$(function(){var t,e,n;return n=function(t){if($("#portfolios-index").length>0)return $(".file-right-panel").replaceWith(t)},e=$('input[name="is_mobile"]').val(),t=$('input[name="client"]').val(),e&&($(document).on("click","a.email-upload-resume",function(){return $("#portfolio-upload-resume .portfolio-upload").click()}),$(document).on("click","a.email-upload-letter",function(){return $("#portfolio-upload-letter .portfolio-upload").click()}),$(document).on("click","a.email-upload-other",function(){return $("#portfolio-upload-other .portfolio-upload").click()}),$(document).on("click","a.email-upload-avatar",function(){return $("#portfolio-upload-avatar .portfolio-upload").click()})),$(".portfolio-upload").each(function(){return $(this).fileupload({dataType:"json",dropZone:$(this).closest(".modal-white-card"),send:function(t,e){return $("body"),(new SetFilesInfo).show(e.files,".upload-file-modal.in")},progressall:function(n,i){var o,r,a,s;return r=$(".upload-file-modal.in").find(".file-list"),s="<span class='progress-done'>\u5df2\u4e0a\u4f20\u5b8c\u6210<span>",a=parseInt(i.loaded/i.total*100,10),(o=r.find(".progress .progress-bar").last()).css("width",a+"%"),o.text(a+"%"),"100%"===o.text()&&setTimeout(function(){o.closest(".file-cell").append(s)},1e3,o),"ios"===t?setupWebViewJavascriptBridge(function(t){t.callHandler("uploadingFile",{info:"\u6b63\u5728\u4e0a\u4f20"},function(){})}):e?$.notify("\u6b63\u5728\u4e0a\u4f20","success"):void 0},done:function(e,i){var o,r,a;return o=(r=i.result.portfolio).file.type,a=r.file,$(".portfolio-"+o+"-list").trigger("portfolio-"+o+"-uploaded",[a]),n(i.result.html),$(".notifyjs-wrapper").remove(),"ios"===t?setupWebViewJavascriptBridge(function(t){t.callHandler("uploadSuccess",{info:r.message},function(){})}):($.notify(r.message,"success"),$(".my-portfolios").removeClass("hidden"))},fail:function(t,e){var n;return null!=e.jqXHR&&(n=e.jqXHR.responseText||e.errorThrown,$(".notifyjs-wrapper").remove(),$.notify(n,"error")),$(".upload-file-modal.in").find(".file-list").find(".file-cell").last().remove()}}),$(this).on("fileuploadsend",function(t,e){return(new UploadFileSize).check(e.files[0].size)})}),$(document).on("click",".edit-portfolio-file-info",function(t){var e;return t.preventDefault(),e=$(t.currentTarget).data("content"),$("#portfolio-file-info-update").find("#form-content").html(""),$("#portfolio-file-info-update").find("#form-content").append(e),$("#portfolio-file-info-update").modal("show")}),$(document).on("ajax:success",".edit_portfolio",function(t,e){return"ok"===e.status?($.notify("\u66f4\u65b0\u6210\u529f\uff01","success"),$("#"+e.target).text(e.name),$("#portfolio-file-info-update").modal("hide")):$.notify("\u66f4\u65b0\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u91cd\u8bd5","error")})})}.call(this),function(){}.call(this),function(){$(function(){var t,e,n;return t=!1,$(document).on("click","#account-email-form .form-submit input",function(){if(!isMobileDevice())return setTimeout(function(){if(t)return window.open("").location.href="/zh-CN/emails/my"},1e3)}),$(document).on("ajax:success","#account-email-form",function(i,o){var r;return"ok"===o.status?($.notify("\u8bbe\u7f6e\u6210\u529f","success"),$("#cvs-show").length>0?($("#jobmail-modal").modal("hide"),$('[data-rule="unprofessinal_email"]').remove(),n(o.email),t=!0):window.location.href=o.location):(t=!1,r=$(this).find(".notice"),e(r),r.empty(),r.append("<div class='message'>* "+o.message+"</div>"))}),n=function(t){var e;return e={cv_id:$("#jobmail-modal").data("cv-token"),email:t},(new UpdateProfileEmail).post(e)},e=function(t){if(void 0===t.data("original-text"))return t.data("original-text",t.text())},$(document).on("click","#email_account_email",function(){var t;return(t=$(this).closest("#account-email-form").find(".notice")).text(t.data("original-text"))})})}.call(this),function(){this.EmailAttachment=function(){function t(t){this.init_file_upload(t),this.after_add(),this.before_send()}var e;return t.prototype.init_file_upload=function(t){var n;return this.file_upload=$(t.file_upload),n=null!=t.drop_zone?$(t.drop_zone):this.file_upload.closest(".drop-zone"),this.file_upload.fileupload({dataType:"json",dropZone:n,singleFileUploads:!1,done:e,progress:this.upload_progress,submit:this.show_added_files})},t.prototype.after_add=function(){return this.file_upload.on("fileuploadadd",(t=this,function(){return t.update_attachment_email_id_if_needed()}));var t},t.prototype.before_send=function(){return this.file_upload.on("fileuploadsend",(t=this,function(){return t.email_has_saved()&&t.current_attachment_email_id()}));var t},t.prototype.current_attachment_email_id=function(){return $("#email_attachment_email_id").val()},t.prototype.update_attachment_email_id_if_needed=function(){if(!this.current_attachment_email_id())return this.update_attachment_email_id(this.email_has_saved())},t.prototype.email_has_saved=function(){return $("#normal-email-form #email_id").val()},t.prototype.update_attachment_email_id=function(t){return $("#email_attachment_email_id").val(t)},e=function(){return $(".attachment-save").val("true"),$(".save-email-btn").prop("disabled",!1),$('#normal-email-form input[name="save"]').click(),"ios"===client?setupWebViewJavascriptBridge(function(t){t.callHandler("uploadSuccess",{info:"\u4e0a\u4f20\u6210\u529f"},function(){})}):is_mobile?$.notify("\u4e0a\u4f20\u6210\u529f","success"):void 0},t.prototype.upload_progress=function(t,e){var n;return n="<span class='progress-done'>\u5df2\u4e0a\u4f20\u5b8c\u6210<span>",$.each(e.files,function(t){var i,o;return i=parseInt(e.loaded/e.total*100,10),(o=e.cells[t].find(".progress .progress-bar")).css("width",i+"%"),o.text(i+"%"),100===i&&o.closest(".file-cell").append(n),"ios"===client?setupWebViewJavascriptBridge(function(t){t.callHandler("uploadingFile",{info:"\u6b63\u5728\u4e0a\u4f20"},function(){})}):is_mobile?$.notify("\u6b63\u5728\u4e0a\u4f20","success"):void 0})},t.prototype.show_added_files=function(t,e){var n;return(n=new SetFilesInfo).add(e.files,".upload-file-modal.in"),e.cells=n.cells,!0},$(".email-right-panel").on("click",".remove-attached-file",function(){return $(this).closest(".attached-file-bar").remove()}),t}(),this.EmailChooseCvViewHandler=function(){function t(){this.notify=new ContinuedNotify}return t.prototype.toggleAttachmentList=function(){return $(".choose-attachment-content-container").hasClass("hide")?this.openDropdownMenu():this.closeDropdownMenu()},t.prototype.disabledChooseCvList=function(){return $(".js-choose-attachments-btn").addClass("disabled")},t.prototype.enableChooseCvList=function(){return $(".js-choose-attachments-btn").removeClass("disabled")},t.prototype.addingNotify=function(){return this.notify.success("\u9644\u4ef6\u6dfb\u52a0\u4e2d...")},t.prototype.clearNotify=function(){return this.notify.removeAll()},t.prototype.startAdd=function(){return this.addingNotify(),this.closeDropdownMenu(),this.disabledChooseCvList()},t.prototype.addDone=function(){return this.clearNotify(),this.enableChooseCvList()},t.prototype.openDropdownMenu=function(){return $(".choose-attachment-content-container").removeClass("hide")},t.prototype.closeDropdownMenu=function(){return $(".choose-attachment-content-container").addClass("hide")},t}(),$(function(){var t,e,n,i,o,r;return r=new EmailChooseCvViewHandler,e=function(){return 0===$("#normal-email-form #email_id").val().length},i=function(t){return $(t.saveWay).val("true")},o=function(t){var e,n;return(n=(e=$("#normal-email-form")).serializeArray()).push({name:"save",value:"save"}),$.ajax({url:e.attr("action"),type:"POST",data:n,complete:function(){return t.complete.call(),(new ReplyEmailSubmitStatus).change(),window.emailFormChanged=!1}})},$(document).on("click",".js-choose-attachments-btn",function(t){return t.preventDefault(),0===$(".js-choose-cv-list").length&&$.ajax({url:$(this).data("url"),type:"GET"}),e()?(i({saveWay:".attachment-save"}),o({complete:r.openDropdownMenu})):r.toggleAttachmentList()}),t=function(t){var e;return e=t.attr("href"),$.ajax({url:e,method:"POST",dataType:"script",data:{email_id:$("#normal-email-form #email_id").val()}})},$(document).on("click",".js-choose-cv-list a, .choose-cv a",function(e){return e.preventDefault(),r.startAdd(),t($(this))}),$(document).on("click",".js-choose-collect-list a, .choose-collect-list a",function(e){return e.preventDefault(),r.startAdd(),t($(this))}),$(document).on("click",".email-attachments",function(t){if(t.stopPropagation(),$(this).find(".attached-file-bar").length<=0)return $(".js-choose-attachments-btn").click()}),is_mobile&&-1===navigator.userAgent.indexOf("android_wondercv_app")&&-1===navigator.userAgent.toLowerCase().indexOf("wondercv_ios")&&$(document).on("click",".attachment-operation.download-attachment-btn",function(t){return t.preventDefault(),$("#download-app-modal").modal("show")}),function(){return $("#email_category").val().length>0},n=function(){return $("#js-email-use-template").parent().addClass("open")},$(document).on("click","#js-email-use-template",function(){if(window.emailFormChanged)return i({saveWay:".auto-save"}),o({complete:n})})})}.call(this),function(){this.email_to_is_valid=function(){var t,e,n,i,o,r,a;return r=/(?:[a-zA-Z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+\/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-zA-Z0-9-]*[a-zA-Z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/,t=new RegExp("(?:[^<>]+\\s*<"+r.source+">|"+r.source+")"),o=new RegExp("^(?:"+t.source+"\\s*[,;]\\s*)*"+t.source+"$"),i=$("#email_to").val(),n=$("#email_cc").val()||{},e=$("#email_bcc").val()||{},a=o.test(i),n.length>0&&(a=a&&o.test(n)),e.length>0&&(a=a&&o.test(e)),a},this.validate_before_email_send=function(){var t;return t=!0,$("#email_to").val().length<=0&&($("#email_cc").val()||{}).length<=0&&($("#email_bcc").val()||{}).length<=0?("ios"===client?$("input[name='error_log']").val("\u8bf7\u586b\u5199\u6536\u4ef6\u4eba"):$.notify("\u8bf7\u586b\u5199\u6536\u4ef6\u4eba","error"),t=!1):email_to_is_valid()?$("#email_subject").val().length<=0&&(confirm("\u60a8\u7684\u90ae\u4ef6\u6ca1\u6709\u586b\u5199\u4e3b\u9898\u3002\u60a8\u786e\u5b9a\u7ee7\u7eed\u53d1\u9001\uff1f")?$("#email_subject").val("(\u65e0\u4e3b\u9898)"):($("input[name='error_log']").val("\u53d6\u6d88\u53d1\u9001"),t=!1)):("ios"===client?$("input[name='error_log']").val("\u90ae\u4ef6\u5730\u5740\u683c\u5f0f\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5"):$.notify("\u90ae\u4ef6\u5730\u5740\u683c\u5f0f\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5"),t=!1),(null!==window.location.href.match(/recruit_info_id/)||$("#email_recruit_info_id").val().length>0)&&void 0===$(".attached-file-bar").html()&&(confirm("\u60a8\u672a\u9009\u62e9\u9644\u4ef6\uff0c\u786e\u8ba4\u4ecd\u7ee7\u7eed\u53d1\u9001\u4e48?")||(t=!1)),t&&"ios"!==client&&$.notify("\u6b63\u5728\u53d1\u9001...","success"),t},$(function(){var t;return $(document).on("click",".post-email-btn",function(){return validate_before_email_send()}),$(document).on("click",".mobile-max-size-reply-email-btn",function(){return $("#max_save").val("yes"),$(".save-email-btn").prop("disabled",!1),$(".save-email-btn").click()}),$(document).on("trix-change","#normal-email-form trix-editor",function(){return(new ReplyEmailSubmitStatus).change()}),$(document).on("input","#email_body",function(){return(new ReplyEmailSubmitStatus).change()}),$(document).on("ajax:complete","#normal-email-form, .js-reply-to-btn, .js-reply-all-btn, #js-open-create-new-file-list a",function(){return(new ReplyEmailSubmitStatus).change()}),t=function(){return JSON.parse($("#js-email-use-template").data("email-body-blank"))},function(){return 0===$("#normal-email-form #email_id").val().length},$(document).on("ajax:beforeSend",".js-email-change-template, .js-email-cancel-template",function(){return!!t()||!!confirm("\u5207\u6362\u6a21\u677f\u4f1a\u9020\u6210\u5f53\u524d\u5185\u5bb9\u4e22\u5931\uff0c\u662f\u5426\u5207\u6362\uff1f")})})}.call(this),function(){this.create_label=function(){var t,e,n;return n=(e=$(".mobile-create-label-container")).find("input").val().trim(),t=e.find(".color-items .check").find(".spot").data("color"),0===n.length?"ios"===client?{error:"\u672a\u586b\u5199\u6807\u7b7e\u540d\u79f0"}:$.notify("\u672a\u586b\u5199\u6807\u7b7e\u540d\u79f0"):void 0===t?"ios"===client?{error:"\u672a\u9009\u62e9\u6807\u7b7e\u989c\u8272"}:$.notify("\u672a\u9009\u62e9\u6807\u7b7e\u989c\u8272"):e.data("conversation-labels-size")>=4?"ios"===client?{error:"\u6807\u7b7e\u8fc7\u591a\uff0c\u6700\u591a\u53ef\u6dfb\u52a0\u56db\u4e2a\u6807\u7b7e"}:$.notify("\u6807\u7b7e\u8fc7\u591a\uff0c\u6700\u591a\u53ef\u6dfb\u52a0\u56db\u4e2a\u6807\u7b7e"):$.ajax({url:"/zh-CN/labels",type:"post",dataType:"json",async:!1,data:{conversation_id:e.data("conversation-id"),label:{color:t,name:n}},success:function(t){return void 0===t?window.location.href=e.data("submit-url"):"ios"===client?$("input[name='error_log']").val(t.message):$.notify(t.message)},error:function(){return"ios"===client?{error:"\u521b\u5efa\u5931\u8d25"}:$.notify("\u521b\u5efa\u5931\u8d25")}})},this.update_label=function(){var t,e;return e=$('input[name="label[name]"]').val().trim(),t=$(".color-items .check").find(".spot").data("color"),0===e.length?"ios"===client?{error:"\u672a\u586b\u5199\u6807\u7b7e\u540d\u79f0"}:$.notify("\u672a\u586b\u5199\u6807\u7b7e\u540d\u79f0"):void 0===t?"ios"===client?{error:"\u672a\u9009\u62e9\u6807\u7b7e\u989c\u8272"}:$.notify("\u672a\u9009\u62e9\u6807\u7b7e\u989c\u8272"):$.ajax({url:$(".mobile-create-label-container").data("update-url"),type:"put",dataType:"json",async:!1,data:{label:{color:t,name:e}},success:function(t){return void 0===t?window.location.href="/zh-CN/user/labels":"ios"===client?$("input[name='error_log']").val(t.message):$.notify(t.message)},error:function(){return"ios"===client?{error:"\u521b\u5efa\u5931\u8d25"}:$.notify("\u521b\u5efa\u5931\u8d25")}})},this.label_sort_mode=function(){return $(".label-edit-link").addClass("hidden"),$(".sort-control").removeClass("hidden")},this.label_edit_mode=function(){return $(".label-edit-link").removeClass("hidden"),$(".sort-control").addClass("hidden")},this.updateLeftPanelLabelList=function(){return $.ajax({url:"/zh-CN/labels/fetch_view",method:"get",dataType:"script"})},$(function(){var t,e,n,i,o,r,a,s,l,c,u;return $("body:not(#conversations-add_label)").on("click",function(t){if(!$(t.target).hasClass("add-label")&&0===$(t.target).closest(".conversation-labels").length)return $(".conversation-labels").hide()}),$("body").on("click",function(t){if(!$(t.target).hasClass("trigger-edit-label")&&$(".labels-table").length>0&&0===$(t.target).closest(".edit-label").length)return $(".edit-label").hide()}),$(document).on("click",".add-label-section .add-label, .single-label",function(){var t,e;return t=$(this).data("conversation-id"),(e=$("#conversation-labels-"+t+".conversation-labels")).is(":visible")?e.hide():e.show()}),$(document).on("click",".add-label-content .add",function(){return i($(this))}),$(document).on("click",".add-label-content .cancel",function(){var e,i;return i=$(this),l(i),t(),e=n(i),a(i,e,"")}),t=function(){return $(".add-label-content input").val("")},i=function(t){var e;return t.addClass("hidden"),(e=t.closest(".conversation-labels")).find(".add-label-content .cancel").removeClass("hidden"),e.find(".labels-display").addClass("hidden"),e.find(".create-label").removeClass("hidden")},l=function(t){var e;return t.addClass("hidden"),(e=t.closest(".conversation-labels")).find(".add-label-content .add").removeClass("hidden"),e.find(".create-label").addClass("hidden"),e.find(".labels-display").removeClass("hidden")},$(document).on("click",".create-label .color span",function(){return $(".create-label .color span").removeClass("checked"),$(this).addClass("checked")}),n=function(t){return parseInt(t.closest(".conversation-labels").attr("id").match(/[0-9]+/)[0])},c=function(t,e,n,i){var o,r;return r=t.find(".labels-display .labels"),o=["<li class='label-cell "+i+"'>","<span class='text bg-"+n+"' data-color='"+n+"'>",""+e,"</span>","<i class='fa fa-check'></i>","<li>"].join(""),r.append(o)},$(document).on("click",".create-label .submit button",function(){var e,i,a,s,u;return u=$(this),a=$(this).closest(".conversation-labels"),s=a.find(".add-label-content").find("input").val().trim(),e=a.find(".create-label .color .checked").data("color"),0===s.length?$.notify("\u672a\u586b\u5199\u6807\u7b7e\u540d\u79f0"):void 0===e?$.notify("\u672a\u9009\u62e9\u6807\u7b7e\u989c\u8272"):r(u)?$.notify("\u6807\u7b7e\u8fc7\u591a\uff0c\u6700\u591a\u53ef\u6dfb\u52a0\u56db\u4e2a\u6807\u7b7e"):(i=n(u),$.ajax({url:"/zh-CN/labels",type:"post",data:{conversation_id:i,label:{color:e,name:s}},beforeSend:function(){return u.prop("disabled",!0)},success:function(n){return void 0!==n&&"error"===n.status?$.notify(n.message):($.notify("\u6dfb\u52a0\u6210\u529f","success"),o(u,s,e),$("#conversation-labels-"+i).hide(),l(u.closest(".conversation-labels").find(".add-label-content").find(".cancel")),$(".conversation-labels").not(a).each(function(){return c($(this),s,e,"")}),c(a,s,e,"checked"),updateLeftPanelLabelList(),t()),u.prop("disabled",!1)}}))}),$(document).on("click",".create-label .create button",function(){var t,e,n,i;return i=$(this),n=(e=$(this).closest(".edit-label")).find(".add-label-content").find("input").val().trim(),t=e.find(".create-label .color .checked").data("color"),0===n.length?$.notify("\u672a\u586b\u5199\u6807\u7b7e\u540d\u79f0"):void 0===t?$.notify("\u672a\u9009\u62e9\u6807\u7b7e\u989c\u8272"):$.ajax({url:e.data("update-url"),type:"post",dataType:"script",data:{label:{color:t,name:n}},beforeSend:function(){return i.prop("disabled",!0)},success:function(){return i.prop("disabled",!1),updateLeftPanelLabelList()}})}),$(document).on("click",".create-label .update button",function(){var t,e,n,i;return i=$(this),e=$(this).closest(".edit-label"),n=e.find(".add-label-content").find("input").val().trim(),t=e.find(".create-label .color .checked").data("color"),0===n.length?$.notify("\u672a\u586b\u5199\u6807\u7b7e\u540d\u79f0"):void 0===t?$.notify("\u672a\u9009\u62e9\u6807\u7b7e\u989c\u8272"):$.ajax({url:e.data("update-url"),type:"put",dataType:"json",data:{label:{color:t,name:n}},beforeSend:function(){return i.prop("disabled",!0)},success:function(o){var r;return void 0===o?((r=e.closest(".label-td").find(".content")).removeClass(function(t,e){return e.match(/(^|\s)bg-\S+/g).join(" ")}),r.addClass("bg-"+t),r.text(n),e.hide()):$.notify(o.message),i.prop("disabled",!1),updateLeftPanelLabelList()}})}),o=function(t,e,n){var i;if(t.addClass("checked"),t.closest(".display-labels").length>0)return i="<span class='single-label bg-"+n+"'>"+e+"</span>",t.closest(".display-labels").find(".content").append(i)},e=function(t,e,n){if(t.removeClass("checked"),t.closest(".display-labels").length>0)return t.closest(".js-display-labels-on-conversation").find(".content").find("span.bg-"+n+":contains('"+e+"')").remove()},r=function(t){return $("#conversations-add_label").length>0?t.closest(".conversation-labels").find(".checked").length>=4:t.closest(".js-display-labels-on-conversation").find(".content").find(".single-label").length>=4},$(document).on("click",".conversation-labels .label-cell",function(){var t,i,a,s,l;return i=(l=$(this)).find(".text"),s=i.text().trim(),t=i.data("color"),a=n(l),l.hasClass("checked")?$.ajax({url:"/zh-CN/labels/drop",type:"delete",dataType:"json",data:{conversation_id:a,label:{color:t,name:s}},beforeSend:function(){return e(l,s,t)},success:function(){return updateLeftPanelLabelList()},error:function(){return $.notify("\u5220\u9664\u5931\u8d25"),o(l,s,t)}}):r(l)?"ios"===client?setupWebViewJavascriptBridge(function(t){return t.callHandler("failInfo",{info:"\u6807\u7b7e\u8fc7\u591a\uff0c\u6700\u591a\u53ef\u6dfb\u52a0\u56db\u4e2a\u6807\u7b7e"},function(){})}):$.notify("\u6807\u7b7e\u8fc7\u591a\uff0c\u6700\u591a\u53ef\u6dfb\u52a0\u56db\u4e2a\u6807\u7b7e"):$.ajax({url:"/zh-CN/labels",type:"post",dataType:"json",data:{conversation_id:a,label:{color:t,name:s}},beforeSend:function(){return o(l,s,t)},success:function(){return updateLeftPanelLabelList()},error:function(){return $.notify("\u521b\u5efa\u5931\u8d25"),e(l,s,t)}})}),a=function(t,e,n){return $.ajax({url:"/zh-CN/labels/search",type:"get",dataType:"json",data:{conversation_id:e,name:n},success:function(e){var n;return e.length>0?(l(t.closest(".conversation-labels").find(".add-label-content").find(".cancel")),(n=t.closest(".conversation-labels")).find(".labels-display .labels").empty(),$.each(e,function(t,e){return c(n,e.name,e.color,e.status)})):i(t.closest(".conversation-labels").find(".add-label-content").find(".add"))}})},$(document).on("keyup keypress",".conversation-labels .add-label-content input",function(){var t,e;return e=$(this),t=n(e),a(e,t,e.val())}),$(document).on("click",".notify-bell",function(){var t;return t=$(this).data("conversation-id"),$("#notification-setting-modal-"+t).modal("show")}),$(document).on("touchstart","#labels-new .color-item, #labels-edit .color-item",function(){return $(".color-item").removeClass("check"),$(this).addClass("check")}),$(document).on("touchstart","#labels-new .new-label-submit",function(){return create_label()}),$(document).on("click",".trigger-edit-label",function(){var t,e;return e=$(this).data("id"),(t=$("#edit-label-"+e)).is(":visible")?t.hide():t.show()}),$(document).on("click",".create-label-btn",function(){var t;return(t=$(this).closest(".label-td").find(".edit-label")).is(":visible")?t.hide():t.show()}),$(document).on("click","#mobile-label-edit-sort-btn",function(){var t;return(t=$(this)).hasClass("edit")?(t.text("\u5b8c\u6210"),t.css("color","#50A4FF"),t.removeClass("edit").addClass("sort"),label_sort_mode()):(t.text("\u6392\u5e8f"),t.css("color","#404040"),t.addClass("edit").removeClass("sort"),label_edit_mode())}),$(document).on("click","#mobile-label-update",function(){return update_label()}),(s=function(){return $(".sort-control i").removeClass("unchecked"),$(".sort-control:first .up").addClass("unchecked"),$(".sort-control:last .down").addClass("unchecked")})(),u=function(t){var e;return e=t.closest(".label-td"),$.ajax({url:t.data("url"),method:"post",beforeSend:function(){return t.hasClass("up")?e.prev().before(e):e.next().after(e)},error:function(){return t.hasClass("up")?e.next().before(e):e.prev().after(e)}})},$(document).on("click touchstart",".sort-control i",function(){var t;if(!(t=$(this)).hasClass("unchecked"))return u(t),s()})})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.ReplyEmailSubmitStatus=function(){function e(){this.change=t(this.change,this),this.editor=$("trix-editor").length>0?$("trix-editor"):$("#email_body"),this.saveBtn=$(".save-email-btn"),this.postBtn=$(".post-email-btn"),
this.attachments=$(".email-attachments .attached-file-bar")}return e.prototype.change=function(){return this.editor.val().length>0||this.attachments.length>0?(this.saveBtn.prop("disabled",!1),this.postBtn.prop("disabled",!1),this.saveBtn.css("cursor","pointer"),this.postBtn.css("cursor","pointer")):(this.saveBtn.prop("disabled",!0),this.postBtn.prop("disabled",!0),this.saveBtn.css("cursor","not-allowed"),this.postBtn.css("cursor","not-allowed"))},e}()}.call(this),function(){$(function(){var t;return t=function(t){var e;return e=t.closest(".email-link-to").data("url"),$.ajax({type:"GET",url:e,dataType:"script"})},isMobileDevice()?$(document).on("click",".email-link-to",function(){var t;return t=$(this).data("url"),window.location.href=t}):($(document).on("click",".email-link-to .email-avatar",function(){return t($(this))}),$(document).on("click",".email-link-to .email-from",function(){return t($(this))}),$(document).on("click",".email-link-to .email-subject",function(){return t($(this))}),$(document).on("click",".email-link-to .email-content",function(){return t($(this))}))})}.call(this),function(){this.open_mobile_sidebar=function(){return"0px"!==$(".mobile-email-sidebar").css("left")?($(".mobile-email-sidebar").animate({left:0},300),$("html, body").css("overflow-y","hidden"),$("html, body").animate({scrollTop:0},1e3)):($(".mobile-email-sidebar").animate({left:"-100%"},300),$("html, body").css("overflow-y","auto"))},$(function(){var t,e,n,i,o,r,a;return o=$('input[name="is_mobile"]').val(),$(".email-show-item.many:not(.email-has-read) .edit-email-btn a").click(),$(".email-right-panel").on("click",".email-show-item.many .email-top",function(t){if($(t.target).hasClass("draft-email*")&&($(".reply-email-widget").removeClass("hide"),$(".conversation-content-bottom-container").addClass("hide")),$(t.target).closest(".operation-btns").length<=0)return $(this).closest(".email-show-item").hasClass("email-has-read")?(o&&$(".email-show-item.many:not(.email-has-read)").addClass("email-has-read"),$(this).closest(".email-show-item").removeClass("email-has-read"),$(".email-show-item.many:not(.email-has-read)").find(".edit-email-btn a").click()):$(this).closest(".email-show-item").addClass("email-has-read")}),$(document).on("click",".cc-btn",function(){return $(".open-cc").val("true"),$(".cc-container").removeClass("hide"),$(this).addClass("hide")}),$(document).on("click",".bcc-btn",function(){return $(".open-bcc").val("true"),$(".bcc-container").removeClass("hide"),$(this).addClass("hide")}),$(document).on("click",".separate-btn",function(){return $(".cc-btn").addClass("hide"),$(".bcc-btn").addClass("hide"),$(".cc-container").addClass("hide"),$(".open-cc").val(""),$("#email_cc").val(""),$(".bcc-container").addClass("hide"),$(".open-bcc").val(""),$("#email_bcc").val(""),$(this).addClass("hide"),$(".cancel-separate-btn").removeClass("hide"),$(".recipient-label").addClass("hide"),$(".separate-label").removeClass("hide"),$(".is-separate").val("true")}),$(document).on("click",".cancel-separate-btn",function(){return $(".cc-btn").removeClass("hide"),$(".bcc-btn").removeClass("hide"),$(this).addClass("hide"),$(".separate-btn").removeClass("hide"),$(".recipient-label").removeClass("hide"),$(".separate-label").addClass("hide"),$(".is-separate").val("")}),window.emailFormChanged=!1,r=setInterval(function(){var t,e;if(window.emailFormChanged)return window.emailFormChanged=!1,e=(t=new Date).toLocaleDateString()+" "+t.toLocaleTimeString(),$("#normal-email-form .auto-save").val("true"),$(".save-notification").text(e+"\u5df2\u81ea\u52a8\u4fdd\u5b58"),setTimeout(function(){return $("button[name='save']").click(),$("input[name='save']").click(),$("#normal-email-form .auto-save").val("false")},100)},2e4),$(document).on("ajax:complete","#normal-email-form, .js-reply-to-btn, .js-reply-all-btn",function(){if(!o)return clearInterval(r)}),$(document).on("click touchstart",".post-email-btn, .save-email-btn",function(){return window.emailFormChanged=!1,!0}),n=function(){return window.emailFormChanged=!0},o||($(document).on("input","#normal-email-form input",function(){return n()}),$(document).on("trix-change","#normal-email-form trix-editor",function(){return n()})),e=function(){return!!confirm("\u5185\u5bb9\u5df2\u88ab\u4fee\u6539\uff0c\u662f\u5426\u4fdd\u5b58\u6b64\u90ae\u4ef6\u4e3a\u8349\u7a3f")&&($("button[name='save']").click(),$("input[name='save']").click(),window.emailFormChanged=!1)},o||$(window).on("beforeunload unload",function(){if($("#normal-email-form").length>0&&!0===window.emailFormChanged)return"\u5185\u5bb9\u5df2\u88ab\u4fee\u6539\uff0c\u662f\u5426\u4fdd\u5b58\u6b64\u90ae\u4ef6\u4e3a\u8349\u7a3f"}),$(".email-container").on("click",".interrupt-email-edit-btn",function(){if($("#normal-email-form").length>0&&!0===window.emailFormChanged)return e()}),a=function(){if($(".email-recipient-to").addClass("hide"),$(".recipient").removeClass("hide"),$(".cc-btns").removeClass("hide"),$(".open_reply_recipient").val("true"),"-32px"!==$("form .email-attachments").css("margin-top")&&$("form .email-attachments").css("margin-top","-32px"),"-10px"!==$("form .email-body").css("margin-top"))return $("form .email-body").css("margin-top","-10px")},$(".email-right-panel").on("click",".edit-subject-btn",function(){return $(".open_reply_subject").val("true"),$(".subject-title").removeClass("hide"),a(),$(".subject-title input").focus()}),$(".email-right-panel").on("click",".email-recipient-to",function(){var t,e;return a(),(t=$(".recipient input")).focus(),t.setSelectionRange?(e=2*t.val().length,setTimeout(function(){t.setSelectionRange(e,e)},1)):t.val(t.val()),t.scrollTop=999999}),$(document).on("touchstart",".open-email-left-panel",function(){return open_mobile_sidebar()}),$(document).on("touchstart",".mobile-cc-btns",function(){return $(".open-cc").val("true"),$(".open-bcc").val("true"),$(".cc-container").removeClass("hide"),$(".bcc-container").removeClass("hide"),$(this).addClass("hide")}),$(document).on("click touchstart",".mobile-add-attachment",function(){return $("#email-attachments-upload #email_attachment_file").click()}),$(document).on("touchstart",".cancel-quick-reply-btn",function(){return $("body").css("overflow","auto"),$("body").css("position","initial"),$(".mobile-choose-save").slideUp(500),$(".mobile-modal-background").addClass("hide"),$(".reply-email-widget").addClass("hide"),setTimeout(function(){return $(".conversation-content-bottom-container").removeClass("hide")},100)}),$(document).on("touchstart",".mobile-email-btns .change-email-type .dropdown-menu .choose-email-type .left-part .lang",function(t){return t.stopPropagation(),$(this).closest(".left-part").find(".lang").removeClass("active"),$(this).addClass("active"),$(this).hasClass("cn")?($(".mobile-email-btns .change-email-type .dropdown-menu .choose-email-type .right-part .cn-email-links").removeClass("hide"),$(".mobile-email-btns .change-email-type .dropdown-menu .choose-email-type .right-part .en-email-links").addClass("hide")):$(this).hasClass("en")?($(".mobile-email-btns .change-email-type .dropdown-menu .choose-email-type .right-part .en-email-links").removeClass("hide"),$(".mobile-email-btns .change-email-type .dropdown-menu .choose-email-type .right-part .cn-email-links").addClass("hide")):$(this).hasClass("mobile-js-choose-cv")?($(".mobile-email-btns .change-email-type .dropdown-menu .attachment-drop-container .right-part .choose-cv").removeClass("hide"),$(".mobile-email-btns .change-email-type .dropdown-menu .attachment-drop-container .right-part .choose-collect-list").addClass("hide")):$(this).hasClass("mobile-js-choose-collect")?($(".mobile-email-btns .change-email-type .dropdown-menu .attachment-drop-container .right-part .choose-cv").addClass("hide"),$(".mobile-email-btns .change-email-type .dropdown-menu .attachment-drop-container .right-part .choose-collect-list").removeClass("hide")):void 0}),$(".email-container").on("click",".email-box",function(){var t;return $(".email-box-name").removeClass("active"),(t=$(this).find(".email-box-name")).addClass("active"),$("#current-email-folder").data("name",t.data("name"))}),$(".email-right-panel").on("ajax:success",".del-email-btn",function(){var t,e;return t=(e=$(this).closest(".email-show-item")).data("email-id"),null!=$("#normal-email-form #email_id[value="+t+"]")&&$("#normal-email-form").remove(),e.remove(),$(this).remove()}),$(".email-container").on("click",".del-single-composed-email-btn",function(){return $(this).find("input[name=folder]").val($("#current-email-folder").data("name"))}),$(document).on("click","#js-quick-add-attachment",function(){return $("#email_attachment_file").click()}),$(document).on("click",".js-email-attachment-collect",function(){var t,e;return t=$(this).find("i"),e=$(this).find("span"),t.hasClass("fa-star-o")?(t.removeClass("fa-star-o").addClass("fa-star"),""!==e.text()&&e.text("\u5df2\u6536\u85cf"),-1===navigator.userAgent.toLowerCase().indexOf("wondercv_ios")?$.notify("\u6536\u85cf\u6210\u529f","success"):setupWebViewJavascriptBridge(function(t){t.callHandler("successInfo",{info:"\u6536\u85cf\u6210\u529f"},function(){})})):(t.removeClass("fa-star").addClass("fa-star-o"),""!==e.text()&&e.text("\u6536\u85cf"),-1===navigator.userAgent.toLowerCase().indexOf("wondercv_ios")?$.notify("\u53d6\u6d88\u6536\u85cf","success"):setupWebViewJavascriptBridge(function(t){t.callHandler("successInfo",{info:"\u53d6\u6d88\u6536\u85cf"},function(){})}))}),$(document).on("click",".collect-attachment-container .attachment-item",function(t){if($(t.target).closest(".attachment-operation").length<=0)return window.location.href=$(this).data("url")}),i=function(){var t;return null!=(t=$("#email_category").val())&&t.length>0},$(document).ready(function(){return i()?($(".email-left-sidebar").removeClass("hidden"),$(".sidebar-block:first .sidebar-btn").click()):$(".email-left-sidebar").addClass("hidden")}),$(document).on("click",".email-profile-edit-btn",function(){if(-1===navigator.userAgent.toLowerCase().indexOf("wondercv_ios")||-1!==versionCompare(navigator.userAgent.split("app_version=")[1],"2.2.5"))return $("input#profile_save").val("yes"),$(".save-email-btn").click();$("#app-missing-function").modal("show")}),t=function(){if(!$("#normal-email-form #email_id").val())return $(".attachment-save").val("true"),$(".save-email-btn").prop("disabled",!1),$('#normal-email-form input[name="save"]').trigger("click")},o?$(".email-right-panel").on("touchstart",".show-attachment-modal",function(){return t()}):$(".email-right-panel").on("click",".show-attachment-modal",function(){return t()})})}.call(this),function(){this.VerifyEmailCallBack=function(){function t(){}return t.prototype.update_html=function(t,e){var n;return $('input[name="email-verify"]').val("true"),$("#verify-email-modal").modal("hide"),$("#bind-email-v2-modal").modal("hide"),t.find(".email_to").val(e.email),(n=$(".send-email-display").find(".checked")).data("email",e.email),n.html("<span>\u53d1\u9001\u81f3\uff1a</span>"+e.email),$(".send-email-display").removeClass("hidden")},t}()}.call(this),function(){$(function(){var t,e;return new(function(){function t(){this.initial_value(),this.initial_filename(),this.handle_clicks(),this.seleted_lists_sortable(),this.combine_file_create_callback()}return t.prototype.initial_value=function(){return this.dataLoad=0,this.select_lists=$(".select-panel"),this.selected_lists=$(".display-selected-files"),this.combine_files_modal=$(".combine-files-modal"),this.filename_input=$(".display-combine-file-name input"),this.position=[]},t.prototype.initial_filename=function(){var t;if(1===$("#cvs-show").length)return t=$("#js-cv-name").val(),this.filename_input.val(t)},t.prototype.handle_clicks=function(){return this.open_combine_files_modal(),this.hide_combine_files_modal(),this.toggle_select_lists(),this.selected_item(),this.remove_seleted_item(),this.use_item_name(),this.set_portfolio_option(),this.form_submit()},t.prototype.seleted_lists_sortable=function(){return this.selected_lists.sortable({handle:".item-cell"})},t.prototype.data_not_load=function(){return 0===this.dataLoad},t.prototype.set_data_load=function(){return this.dataLoad=1},t.prototype.open_combine_files_modal=function(){return $(document).on("click",".js-open-combine-files-modal",(t=this,function(){return t.combine_files_modal.on("show.bs.modal",function(){t.data_not_load()&&(t.fetch_select_lists_data(),t.set_data_load())}).modal("show")}));var t},t.prototype.hide_combine_files_modal=function(){return $(document).on("click",".close-combine-file-modal",(t=this,function(){return t.combine_files_modal.modal("hide")}));var t},t.prototype.init_selected=function(){var t,e;if(void 0!==(e=this.combine_files_modal.data("current-file-token")))return t=$("#select-"+e).data("content"),this.selected_lists.append(t),$("#select-"+e).removeClass("d-flex").addClass("hidden")},t.prototype.fetch_select_lists_data=function(){var t,e;return this.select_lists.addClass("text-center"),this.select_lists.html("\u6570\u636e\u52a0\u8f7d\u4e2d..."),t=this.combine_files_modal.data("url"),$.get(t,{id:this.combine_files_modal.data("file-owner-id")}).done((e=this,function(){return e.init_selected()}))},t.prototype.toggle_select_lists=function(){var t;return $(document).on("click",".combine-files-modal",(t=this,function(e){if(e.preventDefault(),!t.select_lists.hasClass("hidden")&&"js-add-file-btn"!==$(e.target).attr("id"))return t.select_lists.addClass("hidden")})),$(document).on("click","#js-add-file-btn",function(t){return function(e){return e.preventDefault(),t.select_lists.toggleClass("hidden")}}(this))},t.prototype.selected_item=function(){return $(document).on("click",".select-item",(t=this,function(e){var n,i;return e.preventDefault(),i=(n=$(e.currentTarget)).data("content"),t.selected_lists.append(i),n.removeClass("d-flex").addClass("hidden"),t.select_lists.addClass("hidden"),t.reset_boostrap_tooltip()}));var t},t.prototype.reset_boostrap_tooltip=function(){return $(".item-perview-link, .list-handle").tooltip()},t.prototype.remove_seleted_item=function(){return $(document).on("click",".item-remove-link",function(t){var e,n,i;return t.preventDefault(),n=(e=$(t.currentTarget)).closest(".item"),i=e.data("cv-id"),n.remove(),$("#select-"+i).removeClass("hidden").addClass("d-flex")})},t.prototype.use_item_name=function(){return $(document).on("click",".item-name-use",(t=this,function(e){var n;return e.preventDefault(),n=$(e.currentTarget).data("name"),t.filename_input.val(""+n)}));var t},t.prototype.combine_file_type=function(){return $(".cv-type").length>=$(".cover-letter-type").length?"resume":"cover_letter"},t.prototype.set_portfolio_option=function(){return $(document).on("click",".combine-files-modal .check-radio-btn i",(t=this,function(e){var n,i,o,r,a;return e.preventDefault(),a=$(".portfolio-save-option .check-radio-btn"),$(".display-selected-files .item").length<=0?($.notify("\u6ca1\u6709\u9009\u62e9\u5408\u5e76\u6587\u4ef6","error"),!1):!a.hasClass("disable")&&(r=$(e.currentTarget),o="fa-circle-thin",n="fa-check-circle-o",i=$(".portfolio-save-option").data("check-url"),$.ajax({url:i,method:"POST",data:{file_type:t.combine_file_type()},success:function(t){return"ok"===t.store?r.hasClass(o)?(r.removeClass(o),r.addClass(n),r.css("color","#FF4F4C"),$("#portfolio").val(!0)):(r.addClass(o),r.removeClass(n),r.css("color","#9C9C9C"),$("#portfolio").val(!1)):(a.addClass("disable"),r.addClass(o),r.removeClass(n),$("#portfolio").val(!1),a.html("<i class='fa fa-circle'></i>&nbsp;<a target='_blank' href='/zh-CN/portfolio'> \u6211\u7684\u201c\u6587\u4ef6\u5939\u201d\u5df2\u6ee1\uff0c\u6e05\u7406\u540e\u53ef\u7ee7\u7eed\u4fdd\u5b58</a>"))}}))}));var t},t.prototype.form_submit=function(){return $(document).on("click",".combine-submit",(t=this,function(e){var n;return n=$(e.currentTarget),t.clear_position_data(),t.store_position_data(),t.position_has_value()?t.filename_empty()?(t.focus_filename_input(),"ios"===client?setupWebViewJavascriptBridge(function(t){return t.callHandler("combineFail",{error:"\u6ca1\u6709\u8f93\u5165\u5408\u6210\u6587\u4ef6\u540d"},function(){})}):($.notify("\u6ca1\u6709\u8f93\u5165\u5408\u6210\u6587\u4ef6\u540d","error"),!1)):(t.update_form_position(),t.post_and_set_btn_disable(n)):"ios"===client?setupWebViewJavascriptBridge(function(t){return t.callHandler("combineFail",{error:"\u6ca1\u6709\u9009\u62e9\u5408\u5e76\u6587\u4ef6"},function(){})}):($.notify("\u6ca1\u6709\u9009\u62e9\u5408\u5e76\u6587\u4ef6","error"),!1)}));var t},t.prototype.post_and_set_btn_disable=function(t){return t.data("old-text",t.text()),t.is("#js-combine-file-send-email")?this.send_email_check()?!!confirm("\u96442\u4ef6\u5c06\u53d1\u9001\u5230\uff1a"+this.combine_files_modal.find(".email_to").val()+"\uff0c\u8bf7\u786e\u8ba4\u90ae\u7bb1\u662f\u5426\u6b63\u786e\u3002}")&&(t.text("\u6b63\u5728\u53d1\u9001..."),t.prop("disabled",!0),$("#combine-file-form").submit()):void 0:(t.text("\u4e0b\u8f7d\u4e2d..."),t.prop("disabled",!0),$("#combine-file-form").submit())},t.prototype.clear_position_data=function(){return this.position=[]},t.prototype.store_position_data=function(){return this.selected_lists.find(".item").each((t=this,function(e,n){return t.position[e]={},t.position[e].position=e+1,t.position[e].type=$(n).data("type"),t.position[e].token=$(n).data("token")}));var t},t.prototype.send_email_check=function(){return!!JSON.parse($('input[name="email-verify"]').val())||(window.prev_opened_modal=this.combine_files_modal,this.combine_files_modal.modal("hide"),$("#verify-email-modal").modal("show"),$.notify("\u8bf7\u5148\u7ed1\u5b9a\u90ae\u7bb1","warn"),!1)},t.prototype.position_has_value=function(){return this.position.length>0},t.prototype.filename_empty=function(){return 0===$("#file_name").val().length},t.prototype.focus_filename_input=function(){return $("#file_name").css("border","1px solid #FF4F4C")},t.prototype.update_form_position=function(){return $("#position").val(JSON.stringify(this.position))},t.prototype.combine_file_create_callback=function(){return $(document).on("ajax:success","#combine-file-form",(t=this,function(e,n){return t.combine_files_modal.find(".btns").find("button").each(function(t,e){return $(e).prop("disabled",!1),$(e).text($(e).data("old-text"))}),"ok"===n.status?n.url.length>0?"ios"===client?setupWebViewJavascriptBridge(function(t){return t.callHandler("combineDownload",{name:$("#file_name").val(),url:n.url},function(){})}):($.notify("\u4e0b\u8f7d\u4e2d...","success"),window.location.href=n.url):"ios"===client?setupWebViewJavascriptBridge(function(t){return t.callHandler("saveSuccess",{successInfo:"\u53d1\u9001\u6210\u529f"},function(){})}):$.notify("\u53d1\u9001\u6210\u529f","success"):"ios"===client?setupWebViewJavascriptBridge(function(t){return t.callHandler("combineFail",{error:"\u5408\u5e76\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5"},function(){})}):$.notify("\u5408\u5e76\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5","error")}));var t},t}()),$(document).on("click",".send-email-display li",function(n){var i;return n.preventDefault(),i=$(n.currentTarget),t(i),e(i),($(".combine-files-modal").data("bs.modal")||{}).isShown?$("#js-combine-file-send-email").click():($(".cv-download-modal").data("bs.modal")||{}).isShown?$("#js-downloader-send-email-temp").click():void 0}),t=function(t){return t.closest(".send-email-display").find("span").addClass("hidden"),t.closest(".send-email-display").find("li").addClass("checked"),t.addClass("checked"),t.find("span").removeClass("hidden")},e=function(t){return t.closest(".modal").find(".email_to").val(t.data("email"))}})}.call(this),function(){$(function(){return $(".js-tooltip-target").tooltip(),$(document).on("click",".group-body",function(t){if(!$(t.target).closest(".mentor-lists").length&&!$(t.target).closest(".single-task-create").length&&!$(t.target).closest("#task-create").length)return $(".mentor-lists").addClass("hidden")}),$(document).on("click",".single-task-create",function(t){var e;return t.preventDefault(),(e=$(t.currentTarget).next()).hasClass("hidden")?($(".single-task-create").each(function(t,e){return $(e).next().addClass("hidden")}),e.removeClass("hidden")):e.addClass("hidden")}),$(document).on("click",".single-submit-task",function(t){var e,n;return t.preventDefault(),n=$(this),e=n.text(),$.ajax({url:n.data("url"),method:"POST",beforeSend:function(){return!!confirm("\u5206\u914d\u7ed9\u5bfc\u5e08\uff1a"+e+"\uff1f")},dataType:"json",data:{mentor_id:n.data("mentor-id"),cv_id:n.data("cv-id"),group_id:n.data("group-id")},success:function(t){return"ok"===t.status?($("#cv_"+n.data("cv-id")).remove(),$.notify("\u5206\u914d\u6210\u529f\uff01","success")):$.notify("\u5206\u914d\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u9875\u9762\u91cd\u8bd5","error")}})}),$(document).on("click","#toggle_all",function(){return $(this).prop("checked")?$("input[name='ids[]']").prop("checked",!0):$("input[name='ids[]']").prop("checked",!1)})})}.call(this),function(){$(function(){return this.lists=$(".mentor-lists"),$(document).on("click","#task-create",function(t){var e;return t.preventDefault(),(e=$(t.currentTarget).next()).hasClass("hidden")?e.removeClass("hidden"):e.addClass("hidden")}),$(document).on("click",".submit-task",(t=this,function(e){var n,i,o,r,a;return e.preventDefault(),o=[],r=(i=$(e.currentTarget)).data("mentor-id"),n=$('input[name="ids[]"]:checked'),a=i.data("mentor-name"),n.length<1?($.notify("\u6ca1\u6709\u9009\u62e9\u5206\u914d\u7684\u7b80\u5386","error"),t.lists.addClass("hidden"),!1):(n.each(function(t,e){return o.push(e.value)}),$.ajax({url:t.lists.data("url"),method:"POST",beforeSend:function(){return!!confirm("\u5206\u914d\u7ed9\u5bfc\u5e08\uff1a"+a+"\uff1f")},data:{ids:o,mentor_id:r,group_id:i.data("group-name")},success:function(e){return $(e.ids).each(function(t,e){return $("#cv_"+e).remove()}),t.lists.addClass("hidden"),$.notify("\u5206\u914d\u6210\u529f\uff01","success")}}))}));var t})}.call(this),function(){$(function(){return new(function(){function t(){this.initial(),this.answer_purpose(),this.answer_status(),this.complete_match(),this.complete_match_done()}return t.prototype.initial=function(){return this.page=$("#template_matches-new"),this.modal=$(".template-match-modal"),this.form=$("#template-match-form"),this.first_question=$(".question-one"),this.second_question=$(".question-two"),this.other_purpose_input=$("#other_purpose_name"),this.form_purpose=this.form.find('input[name="template_match[purpose]"]'),this.intention_input=this.form.find('input[name="job_intentions"]'),this.form_status=this.form.find('input[name="template_match[status]"]'),this.form_other_purpose=this.form.find('input[name="template_match[other_purpose_name]"]'),this.confirm_status_btn=this.first_question.find(".complete input"),this.confirm_purpose_btn=this.second_question.find(".next a#template-match-complete-done")},t.prototype.answer_purpose=function(){return this.purpose_option_seleted()},t.prototype.answer_status=function(){return this.status_option_seleted()},t.prototype.check_option=function(t){return t.find(".checked").length>=1||""!==this.form.find('input[name="job_intention_names[]"]').val()&&void 0!==this.form.find('input[name="job_intention_names[]"]').val()||($.notify("\u8fd8\u6ca1\u6709\u8fdb\u884c\u9009\u62e9\uff01","warn"),!1)},t.prototype.complete_match=function(){return $("#template-match-complete").on("click",(t=this,function(e){if(e.preventDefault(),t.check_option(t.first_question))return t.form.submit(),$(e.currentTarget).prop("disabled",!0)}));var t},t.prototype.complete_match_done=function(){return $("#template-match-complete-done").on("click",(t=this,function(e){if(e.preventDefault(),t.check_option(t.second_question))return t.form.submit(),$(e.currentTarget).prop("disabled",!0)}));var t},t.prototype.idempotent_check=function(){return 1===this.page.length||1===this.modal.length},t.prototype.clean_options=function(t){return t.find(".option").removeClass("checked")},t.prototype.clean_status_options=function(t){return t.find(".option").find(".chosen").addClass("hide"),t.find(".option").find(".normal").removeClass("hide")},t.prototype.update_form_purpose=function(t){var e;return e=t.data("value"),this.form_purpose.val(e),this.intention_input.val(""),$("#job_intention").val(""),$('input[name="job_intention_names"]').val("")},t.prototype.update_form_status=function(t){var e;return e=t.data("value"),t.addClass("checked"),t.find(".chosen").removeClass("hide"),t.find(".normal").addClass("hide"),this.form_status.val(e),$("#jd-temp-name").val(e)},t.prototype.update_intention_form=function(t){return this.intention_input.val(t),$("#job_intention_name").val("")},t.prototype.purpose_option_seleted=function(){var t;if(this.idempotent_check())return this.second_question.find(".option"),$(document).on("click",".question-two .check-options .option",(t=this,function(e){var n,i,o;if(e.preventDefault(),(i=$(e.currentTarget)).hasClass("other"))return i.addClass("hide"),$(".other-option").removeClass("hide"),$.notify("\u5982\u975e\u6c42\u804c\u7528\u9014\uff0c\u53ef\u9009\u62e9 1 \u79cd\u6df1\u9020\u7528\u9014","warn");if(i.hasClass("other-option"))return t.clean_options(t.second_question),i.addClass("checked"),t.update_form_purpose(i),t.confirm_purpose_btn.addClass("btn-theme");if(t.second_question.find(".other-option.checked").removeClass("checked"),$("#template_match_purpose").val(""),!i.hasClass("checked")&&t.second_question.find(".option.checked").length<3)i.addClass("checked");else if(i.hasClass("checked"))i.removeClass("checked");else if(t.second_question.find(".option.checked").length>=3)return void $.notify("\u6700\u591a\u53ef\u9009\u62e9 3 \u4e2a","warn");return n=[],o=[],t.second_question.find(".option.checked:not(.search)").each(function(){return n.push($(this).text().trim())}),t.update_intention_form(n),t.second_question.find(".option.checked.search").each(function(){return o.push($(this).text().trim())}),$('input[name="job_intention_names"]').val(o),t.confirm_purpose_btn.addClass("btn-theme")}))},t.prototype.status_option_seleted=function(){var t;if(this.idempotent_check())return this.first_question.find(".option").on("click",(t=this,function(e){var n;return e.preventDefault(),n=$(e.currentTarget),t.clean_options(t.first_question),t.clean_status_options(t.first_question),t.update_form_status(n),t.confirm_status_btn.addClass("btn-theme")}))},t}())})}.call(this),function(){$(function(){return $(document).on("click",".header-v3 .file-name",function(){var t;return(t=$(this)).parent().data("old-text",$(".header-v3 .editor-input").val()),t.addClass("hidden"),t.next().removeClass("hidden"),t.next().focus()}),$(document).on("blur",".header-v3 .editor-input",function(){var t,e,n,i,o,r;return n=(t=$(this)).parent(),e=t.val().trim(),i=e.length>0?e:n.data("old-text"),$.ajax({url:n.data("update-url"),method:"PATCH",data:(o={reload:!1},o[""+n.data("class")]=(r={},r[""+n.data("column")]=i,r),o),success:function(){return t.addClass("hidden"),t.prev().text(i),t.prev().removeClass("hidden")}})}),$(document).on("click","#js-open-create-new-file-list",function(t){var e;return t.preventDefault(),(e=$("#create-new-file-list")).hasClass("hidden")?e.removeClass("hidden"):e.addClass("hidden")}),$("body").on("click",function(t){if(!$(t.target).closest("#create-new-file-list").length&&!$(t.target).closest("#js-open-create-new-file-list").length)return $("#create-new-file-list").addClass("hidden")}),$(".temp-modal").on("click",function(t){if(t.preventDefault(),0===$(t.target).closest(".template").length)return $(".temp-modal").modal("hide")}),$(document).on("mouseover",".template",function(t){var e;if(1===(e=$(t.currentTarget)).closest(".temp-modal").length)return e.find(".template-content").removeClass("d-inline-flex").addClass("hidden"),e.find(".template-choose-lan").removeClass("hidden").addClass("d-flex")}),$(document).on("mouseleave",".template",function(t){var e;if(1===(e=$(t.currentTarget)).closest(".temp-modal").length)return e.find(".template-content").addClass("d-inline-flex").removeClass("hidden"),e.find(".template-choose-lan").addClass("hidden").removeClass("d-flex")}),$(document).on("click",".js-download-file",function(){return $.notify("\u4e0b\u8f7d\u4e2d...","success")}),$(document).on("mouseenter",".cover-letter-info-edit",function(t){var e;return(e=$(t.currentTarget)).tooltip({title:"\u7f16\u8f91",placement:"top",trigger:"hover"}),e.tooltip("show")})})}.call(this);var agent=navigator.userAgent.toLowerCase();if($(document).on("click touchstart",".comment-part .comment-item",function(t){$(this).find(".delete-comment-part").hasClass("hide")&&$(t.target).closest(".like-comment-btn").length<=0&&($(".delete-comment-part").addClass("hide"),setTimeout(function(){$(t.target).closest(".comment-item").find(".delete-comment-part").removeClass("hide")},200))}),$(".forum-post-container .operation-part .choose-operation-btn").on("click touchstart",function(){$(this).parent().find(".post-operation-part").removeClass("hide"),$(".transparent-img-bg").removeClass("hide")}),$(document).on("click touchstart",".forum-post-container .operation-part .left-part .comment,.forum-post-container .comment-part .comment .focus-comment",function(){$("trix-editor").focus()}),$(document).on("click touchstart",".forum-post-container .operation-part .post-operation-part .share-post-part",function(){agent.indexOf("wondercv_ios")>-1?setupWebViewJavascriptBridge(function(t){appSharePost(t)}):agent.indexOf("android_wondercv_app")>-1?connectWebViewJavascriptBridge(function(t){initAndroidBridge(t),appSharePost(t)}):(setTimeout(function(){$(".mobile-share-invite-background").removeClass("hide")},200),$("body,html").css("overflow","hidden"),$("html, body").animate({scrollTop:0},100))}),$(document).on("click touchstart",".mobile-share-invite-background",function(){$("body,html").css("overflow","auto")}),$("#forum_posts-show").on("touchstart",function(t){$(t.target).closest(".choose-operation-btn").length<=0&&$(t.target).closest(".delete-post-part").length<=0&&($(".post-operation-part").hasClass("hide")||$(".post-operation-part").addClass("hide"),$(t.target).closest(".share-post-part").length>0&&setTimeout(function(){$(".transparent-img-bg").addClass("hide")},200)),!$(t.target).hasClass("delete-comment-part")&&$(t.target).closest(".comment-item").length<=0&&$(".comment .comment-item .delete-comment-part").each(function(){$(this).hasClass("hide")||$(this).addClass("hide")})}),$(document).on("click touchstart",".create-forum-post-container .choose-cv-options-container .selected-cv",function(){$("trix-editor").blur(),$("#forum_posts-new .cv-select-container").slideDown(500),setTimeout(function(){$("#forum_posts-new .modal-background").removeClass("hide")},200)}),$(document).on("click touchstart","#forum_posts-new .modal-background",function(){$("#forum_posts-new .cv-select-container").slideUp(500),$("#forum_posts-new .modal-background").addClass("hide")}),$("trix-editor").on("trix-focus",function(){console.log("focus"),$(".forum-post-container form").css("position","absolute")}),$("trix-editor").on("trix-blur",function(){console.log("blur"),$(".forum-post-container form").css("position","fixed")}),$(document).on("click touchstart","#forum_posts-new .create-forum-post-container .personal-info",function(){$(this).hasClass("active")?($(this).removeClass("active"),$("#hide_profile").val(!1)):($(this).addClass("active"),$("#hide_profile").val(!0))}),agent.indexOf("wondercv_ios")>-1&&setupWebViewJavascriptBridge(function(t){t.registerHandler("sendPost",function(t,e){if($("trix-editor").text().length<=0)var n={error:"\u8bf7\u586b\u5199\u53d1\u5e03\u5185\u5bb9"};else if($("#forum_post_cv_id").val().length<=0)n={error:"\u8bf7\u9009\u62e9\u7b80\u5386"};else $("#forum_posts-new form").submit();e(n)})}),$(document).on("touchstart","#forum_posts-new .new-post-submit",function(){$("trix-editor").text().length<=0?$.notify("\u8bf7\u586b\u5199\u53d1\u5e03\u5185\u5bb9","error"):$("#forum_post_cv_id").val().length<=0?$.notify("\u8bf7\u9009\u62e9\u7b80\u5386","error"):($("#forum_posts-new form input[name='commit']").click(),$.notify("\u6b63\u5728\u751f\u6210\uff0c\u8bf7\u7a0d\u5019","success"))}),$("#forum_posts-new").length>0){agent.indexOf("wondercv_ios")>-1&&setTimeout(function(){},200);moves=!0;$(document).on("touchmove","#forum_posts-new .cv-select-container",function(){moves=!1,$(document).on("touchend","#forum_posts-new .cv-select-container",function(){moves=!0})}),$(document).on("click touchend","#forum_posts-new .cv-select-container .select-item",function(){moves&&($("#forum_post_cv_id").val($(this).data("id")),$(".choose-cv-options-container .selected-cv .right .cv-text").text($(this).data("name")),$(".choose-cv-options-container .selected-cv .right .cv-temp-logo").html($(this).data("img")),$("#forum_posts-new .cv-select-container").slideUp(500),
$("#forum_posts-new .modal-background").addClass("hide"))})}(function(){this.ContinuedNotify=function(){function t(){}return t.prototype.success=function(t){return $.notify(t,{className:"success",autoHide:!1})},t.prototype.removeAll=function(){return $(".notifyjs-corner").empty()},t}(),this.UpdateProfileEmail=function(){function t(){}return t.prototype.post=function(t){var e;return e="/zh-CN/cvs/"+t.cv_id+"/profiles/update_email",$.post(e,{email:t.email})},t}(),this.user_subscribe_status=function(){var t;return 0===$("#bind-wx-pub-modal").length?t=!0:bind_modal_subscribe()?t=!0:$.ajax({url:$("#bind-wx-pub-modal").data("query-url"),method:"GET",dataType:"json",async:!1,success:function(e){return"ok"===e.status?($("#bind-wx-pub-modal").data("offical-account-status",!0),t=!0):($("#bind-wx-pub-modal").modal("show"),t=!1)}}),t},$(function(){var t,e,n;return $(document).on("mouseenter",".navbar-name",function(){var t;return(t=$(this)).html(t.data("hover-html"))}),$(document).on("click","#share-member-url",function(){return $(this).prev().select(),document.execCommand("copy"),$.notify("\u5df2\u590d\u5236",{className:"success",position:"top center"})}),$(document).on("mouseenter","#share-member-qr-code,.share-member-qr-code",function(){return $(".qr-code").removeClass("hidden")}),$(document).on("mouseleave","#share-member-qr-code,.share-member-qr-code",function(){return $(".qr-code").addClass("hidden")}),$(document).on("mouseleave",".navbar-name",function(){var t;return(t=$(this)).html(t.data("origin-html"))}),n=function(t){return $("[data-image]").addClass("hidden"),$("[data-link]").addClass("hidden"),$("[data-image="+t+"]").removeClass("hidden"),$("[data-link="+t+"]").removeClass("hidden")},$(document).on("click",".show-temp-snapshot",function(t){var e,i;return(e=$(t.currentTarget)).closest(".modal").modal("hide"),i=e.data("id"),n(i)}),$(document).on("click",".example-file-lang",function(t){var e,n,i,o,r;if(n=(e=$(t.currentTarget)).closest(".recommand-file-item"),r="cn"===(o=e.data("lang"))?"en":"cn",console.log(r),i=n.find(".example-img"),!e.hasClass("chosen"))return i.find("."+o).removeClass("hidden"),i.find("."+r).addClass("hidden"),n.find(".example-file-lang").removeClass("chosen"),e.addClass("chosen"),n.find(".search-icon").removeClass(r).addClass(o)}),$(document).on("click",".search-icon a",function(t){var e,i;return t.preventDefault(),i=(e=$(t.currentTarget)).closest(".search-icon").hasClass("cn")?e.data("cn-id"):e.data("en-id"),n(i),$(e.data("target")).modal("show")}),$(document).on("mouseenter","i.membership-explain",function(){return $(".member-little-card-container").removeClass("hide")}),$(document).on("mouseout","i.membership-explain",function(){return $(".member-little-card-container").addClass("hide")}),$("#wechat-share").popover({html:!0,animation:!0,trigger:"hover",placement:"auto top",title:"\u5fae\u4fe1\u516c\u4f17\u53f7",content:'<img src="https://files.wondercv.com/%E8%B6%85%E7%BA%A7%E7%AE%80%E5%8E%86%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E4%BA%8C%E7%BB%B4%E7%A0%81.jpg" width="140px"/>'}),$("#footer-app").popover({html:!0,animation:!0,trigger:"hover",placement:"auto top",title:"\u4e0b\u8f7d App",content:'<img src="https://files.wondercv.com/appDownloadIcon.png" width="140px"/>'}),$("#footer-wondercv").popover({html:!0,animation:!0,trigger:"hover",placement:"auto top",title:"\u5c0f\u7a0b\u5e8f",content:'<img src="https://files.wondercv.com/wondercv_miniprogram.jpg" width="140px"/>'}),$("#footer-example-cv").popover({html:!0,animation:!0,trigger:"hover",placement:"auto top",title:"\u5927\u725b\u7b80\u5386",content:'<img src="https://photo.wondercv.com/%E5%A4%A7%E7%89%9B%E4%BA%8C%E7%BB%B4%E7%A0%81-Mobile@2x.png" width="140px"/>'}),$("#footer-name-card").popover({html:!0,animation:!0,trigger:"hover",placement:"auto top",title:"\u5fae\u4fe1\u540d\u7247",content:'<img src="https://files.wondercv.com/gh_a98fba593556_344.jpg" width="140px"/>'}),$('input[name="is_mobile"]').val()&&-1===navigator.userAgent.indexOf("AlipayClient")&&-1===navigator.userAgent.indexOf("QQ")&&(window.confirm=function(t){var e,n;return(e=document.createElement("IFRAME")).style.display="none",e.setAttribute("src","data:text/plain,"),document.documentElement.appendChild(e),n=window.frames[0].window.confirm(t),e.parentNode.removeChild(e),n},window.alert=function(t){var e;(e=document.createElement("IFRAME")).style.display="none",e.setAttribute("src","data:text/plain,"),document.documentElement.appendChild(e),window.frames[0].window.alert(t),e.parentNode.removeChild(e)}),$(document).on("change",".example-select",function(){var t;return t=$("#example-type-select"),$.ajax({url:"/example_entries",type:"get",dataType:"script",data:{lang:t.data("lang"),tag:$("select[name=tag]").val(),example_type:$("select[name=example_type]").val(),template:t.data("template")}})}),$(document).on("ajax:success","#verify-user-email-form",function(t,e){if("error"===e.status)return $.notify(e.message,"error");if("success"===e.status){$.notify(e.message,"success");try{if((new VerifyEmailCallBack).update_html(prev_opened_modal,e),prev_opened_modal.is($(".combine-files-modal")))return $("#js-combine-file-send-email").click();if(prev_opened_modal.hasClass("cv-download-modal"))return cvNameUpdater()}catch(n){return n,(new VerifyEmailCallBack).update_html($(".cv-download-modal"),e),(new VerifyEmailCallBack).update_html($(".combine-files-modal"),e)}}}),window.token_wait=60,t=function(t){var n;return n=setInterval(function(){return e(t,n)},1e3)},e=function(t,e){return token_wait--,token_wait<=0?(clearInterval(e),t.attr("value","\u83b7\u53d6\u9a8c\u8bc1\u7801").prop("disabled",!1),window.token_wait=60):t.attr("value",token_wait+" \u79d2\u540e\u91cd\u53d1").prop("disabled",!0)},$(document).on("click",".email-token-send",function(e){var n,i,o,r;return i=$(e.currentTarget),n=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,o=i.parent().prev().find("input").val(),r=!!($("#verify-contact-email-modal").data("bs.modal")||{}).isShown,$.ajax({url:i.data("url"),method:"POST",data:{email:o,skip_check:r},beforeSend:function(){return n.test(o)?(i.data("old-value",i.attr("value")),i.attr("value","\u6b63\u5728\u53d1\u9001...").prop("disabled",!0)):("ios"===client?setupWebViewJavascriptBridge(function(t){return t.callHandler("combineFail",{error:"\u90ae\u7bb1\u683c\u5f0f\u9519\u8bef"},function(){})}):$.notify("\u90ae\u7bb1\u683c\u5f0f\u9519\u8bef!","error"),!1)},success:function(e){return"error"===e.status?("ios"===client?setupWebViewJavascriptBridge(function(t){return t.callHandler("combineFail",{error:e.message},function(){})}):$.notify(e.message,"error"),i.val(i.data("old-value")),i.prop("disabled",!1)):($("#user_email_token").prop("disabled",!1),t(i))}})})})}).call(this),function(){$(function(){var t,e,n,i;return i=$(".js-wechat-notification-settings"),t=$("#bind-wx-pub-modal"),$(document).on("click","[data-setting*=wechat]",function(o){var r,a,s,l,c,u;return a=$(o.currentTarget),u=i.data("update-url"),c=JSON.parse(i.data("subscribe"))||e(),s=a.data("notify"),l=s+"\u5df2\u5f00\u542f",r=s+"\u5df2\u5173\u95ed",c?(n(a),$.ajax({url:u,method:"PUT",data:{setting:a.data("setting")},success:function(t){return"error"===t.status?($.notify(t.message,"error"),n(a)):a.hasClass("on")?"ios"===client?setupWebViewJavascriptBridge(function(t){return t.callHandler("saveSuccess",{info:l},function(){})}):$.notify(l,"success"):"ios"===client?setupWebViewJavascriptBridge(function(t){return t.callHandler("saveSuccess",{info:r},function(){})}):$.notify(r,"success")},error:function(){return n(a)}})):t.modal("show")}),n=function(t){var e;return e=t.find("span.text"),t.hasClass("on")?(e.text("\u5173"),t.addClass("off").removeClass("on")):(e.text("\u5f00"),t.addClass("on").removeClass("off"))},e=function(){return $.ajax({url:t.data("query-url"),method:"GET",dataType:"json",async:!1,success:function(t){if("ok"===t.status)return i.data("subscribe",!0),!0}}),JSON.parse(i.data("subscribe"))}})}.call(this),function(){this.bind_modal_subscribe=function(){return JSON.parse($("#bind-wx-pub-modal").data("offical-account-status"))},$(function(){var t;return $(document).on("click",".add-notification, .notify .add, .notify .display, .js-notification-show",function(){var t;return t=$(""+$(this).data("target")),0===$("#bind-wx-pub-modal").length?t.modal("show"):bind_modal_subscribe()?t.modal("show"):$.ajax({url:$("#bind-wx-pub-modal").data("query-url"),method:"GET",dataType:"json",async:!1,success:function(e){return"ok"===e.status?($("#bind-wx-pub-modal").data("offical-account-status",!0),t.modal("show")):$("#bind-wx-pub-modal").modal("show")}})}),$(document).on("shown.bs.modal",".notification-setting-modal",function(){var t,e;return t=(e=$(this).find(".notification-datepicker")).data("date"),e.datepicker({startDate:t,language:"zh-CN",minViewMode:0,autoclose:!0,todayHighlight:!0,format:"yyyy-mm-dd"})}),$(document).on("changeDate",".notification-datepicker",function(){var t;return t=$(this).datepicker("getFormattedDate"),$(this).closest(".notification-setting-modal").find(".date-content .value").text(t)}),$(document).on("mouseover",".notification-setting-modal .time-content .value",function(){return $(this).closest(".notification-setting-modal").find(".time-picker").removeClass("hidden")}),$(document).on("mouseleave",".notification-setting-modal .time",function(){return $(this).closest(".notification-setting-modal").find(".time-picker").addClass("hidden")}),$(document).on("click",".time-picker li",function(){var t;return t=$(this).text(),$(".time-content .value").text(t),$(".time-picker").addClass("hidden")}),$(document).on("click",".day-picker li",function(){var t;return t=$(this).text(),$(".date-content .value").text(t),$(".day-picker").addClass("hidden")}),$(document).on("click",".notification-datetime-submit .create",function(){var e,n;return n=(e=$(this)).closest(".notification-setting-modal").data("post-url"),t(e,"post",n)}),$(document).on("click",".notification-datetime-submit .update",function(){var e,n;return n=(e=$(this)).data("put-url"),t(e,"put",n)}),t=function(t,e,n){var i,o,r;return o=t.closest(".notification-setting-modal"),parseInt(o.attr("id").match(/[0-9]+/)[0]),i=o.find(".date-content .value").text().trim(),r=o.find(".time-content .value").text().trim(),i.length<=0||r.length<=0?$.notify("\u6ca1\u6709\u9009\u62e9\u65f6\u95f4"):$.ajax({url:n,type:e,dataType:"script",data:{date:i,time:r}})},$(document).on("touchstart",".mobile-notification-day",function(){return $(this).next().removeClass("hidden")})})}.call(this),function(){$(function(){var t,e,n;return $("#recruit_info_industry").cv_checkbox({single_line:!0}),$("#ri_city_limit").limit_select2({multiple:!1,placeholder:"\u5de5\u4f5c\u5730\u70b9"}),$("#ri_scale_limit").limit_select2({multiple:!0,placeholder:"\u516c\u53f8\u89c4\u6a21"}),$("#ri_nature_limit").limit_select2({multiple:!0,placeholder:"\u516c\u53f8\u7c7b\u578b"}),$("#ri_experience_limit").limit_select2({multiple:!0,placeholder:"\u5de5\u4f5c\u7ecf\u9a8c"}),$("#ri_degree_limit").limit_select2({multiple:!0,placeholder:"\u5b66\u5386\u8981\u6c42"}),$("#ri_salary_limit").limit_select2({placeholder:"\u85aa\u8d44\u8981\u6c42",minimumResultsForSearch:-1}),e=$(".mobile-recruit-filter-container .top-part .part-item"),n=$(".mobile-recruit-filter-container .modal-background"),t=$(".mobile-recruit-filter-container .choose-part .choose-btn"),$(document).on("click touchstart",".mobile-recruit-filter-container .top-part .part-item",function(i){return e.removeClass("active"),$(i.target).closest(".part-item").addClass("active"),n.removeClass("hidden"),$(".mobile-recruit-filter-container .choose-part .choose-part-item").addClass("hidden"),$("html, body").css("overflow-y","hidden"),$(i.target).closest(".part-item").hasClass("address")?$(".mobile-recruit-filter-container .choose-part .choose-city").removeClass("hidden"):$(i.target).closest(".part-item").hasClass("company")?($(".mobile-recruit-filter-container .choose-part .choose-company").removeClass("hidden"),t.removeClass("hidden")):$(i.target).closest(".part-item").hasClass("other")?($(".mobile-recruit-filter-container .choose-part .choose-other").removeClass("hidden"),t.removeClass("hidden")):void 0})})}.call(this),function(t){"use strict";function e(t){this._obj=t}function n(t){var n=this;new e(t)._each(function(t,e){n[t]=e})}if(void 0===t)throw new Error("Geetest requires browser environment");var i=t.document,o=t.Math,r=i.getElementsByTagName("head")[0];e.prototype={_each:function(t){var e=this._obj;for(var n in e)e.hasOwnProperty(n)&&t(n,e[n]);return this}},n.prototype={api_server:"api.geetest.com",protocol:"http://",typePath:"/gettype.php",fallback_config:{slide:{static_servers:["static.geetest.com","dn-staticdown.qbox.me"],type:"slide",slide:"/static/js/geetest.0.0.0.js"},fullpage:{static_servers:["static.geetest.com","dn-staticdown.qbox.me"],type:"fullpage",fullpage:"/static/js/fullpage.0.0.0.js"}},_get_fallback_config:function(){var t=this;return s(t.type)?t.fallback_config[t.type]:t.new_captcha?t.fallback_config.fullpage:t.fallback_config.slide},_extend:function(t){var n=this;new e(t)._each(function(t,e){n[t]=e})}};var a=function(t){return"number"==typeof t},s=function(t){return"string"==typeof t},l=function(t){return"boolean"==typeof t},c=function(t){return"object"==typeof t&&null!==t},u=function(t){return"function"==typeof t},d=/Mobi/i.test(navigator.userAgent)?3:0,p={},h={},f=function(){var t=new Date,e=t.getFullYear(),n=t.getMonth()+1,i=t.getDate(),o=t.getHours(),r=t.getMinutes(),a=t.getSeconds();return n>=1&&n<=9&&(n="0"+n),i>=0&&i<=9&&(i="0"+i),o>=0&&o<=9&&(o="0"+o),r>=0&&r<=9&&(r="0"+r),a>=0&&a<=9&&(a="0"+a),e+"-"+n+"-"+i+" "+o+":"+r+":"+a},m=function(){return parseInt(1e4*o.random())+(new Date).valueOf()},g=function(t,e){var n=i.createElement("script");n.charset="UTF-8",n.async=!0,n.onerror=function(){e(!0)};var o=!1;n.onload=n.onreadystatechange=function(){o||n.readyState&&"loaded"!==n.readyState&&"complete"!==n.readyState||(o=!0,setTimeout(function(){e(!1)},0))},n.src=t,r.appendChild(n)},v=function(t){return t.replace(/^https?:\/\/|\/$/g,"")},y=function(t){return 0!==(t=t.replace(/\/+/g,"/")).indexOf("/")&&(t="/"+t),t},b=function(t){if(!t)return"";var n="?";return new e(t)._each(function(t,e){(s(e)||a(e)||l(e))&&(n=n+encodeURIComponent(t)+"="+encodeURIComponent(e)+"&")}),"?"===n&&(n=""),n.replace(/&$/,"")},w=function(t,e,n,i){e=v(e);var o=y(n)+b(i);return e&&(o=t+e+o),o},$=function(t,e,n,i,o,r,a){var s=function(l){var c=w(n,i[l],o,r);g(c,function(r){if(r)if(l>=i.length-1){if(a(!0),e){t.error_code=508;var c=n+i[l]+o;_(t,c)}}else s(l+1);else a(!1)})};s(0)},C=function(e,n,i,o){if(c(i.getLib))return i._extend(i.getLib),void o(i);if(i.offline)o(i._get_fallback_config());else{var r="geetest_"+m();t[r]=function(e){"success"==e.status?o(e.data):e.status?o(i._get_fallback_config()):o(e),t[r]=undefined;try{delete t[r]}catch(n){}},$(i,!0,i.protocol,e,n,{gt:i.gt,callback:r},function(t){t&&o(i._get_fallback_config())})}},_=function(t,e){$(t,!1,t.protocol,["monitor.geetest.com"],"/monitor/send",{time:f(),captcha_id:t.gt,challenge:t.challenge,pt:d,exception_url:e,error_code:t.error_code},function(){})},x=function(t,e){var n={networkError:"\u7f51\u7edc\u9519\u8bef",gtTypeError:"gt\u5b57\u6bb5\u4e0d\u662f\u5b57\u7b26\u4e32\u7c7b\u578b"};if("function"!=typeof e.onError)throw new Error(n[t]);e.onError(n[t])};(function(){return t.Geetest||i.getElementById("gt_lib")})()&&(h.slide="loaded"),t.initGeetest=function(e,i){var o=new n(e);e.https?o.protocol="https://":e.protocol||(o.protocol=t.location.protocol+"//"),"050cffef4ae57b5d5e529fea9540b0d1"!==e.gt&&"3bd38408ae4af923ed36e13819b14d42"!==e.gt||(o.apiserver="yumchina.geetest.com/",o.api_server="yumchina.geetest.com"),c(e.getType)&&o._extend(e.getType),C([o.api_server||o.apiserver],o.typePath,o,function(e){var n=e.type,r=function(){o._extend(e),i(new t.Geetest(o))};p[n]=p[n]||[];var a=h[n]||"init";"init"===a?(h[n]="loading",p[n].push(r),$(o,!0,o.protocol,e.static_servers||e.domains,e[n]||e.path,null,function(t){if(t)h[n]="fail",x("networkError",o);else{h[n]="loaded";for(var e=p[n],i=0,r=e.length;i<r;i+=1){var a=e[i];u(a)&&a()}p[n]=[]}})):"loaded"===a?r():"fail"===a?x("networkError",o):"loading"===a&&p[n].push(r)})}}(window),function(){(function(){(function(){var e=[].slice;this.ActionCable={INTERNAL:{message_types:{welcome:"welcome",ping:"ping",confirmation:"confirm_subscription",rejection:"reject_subscription"},default_mount_path:"/cable",protocols:["actioncable-v1-json","actioncable-unsupported"]},createConsumer:function(e){var n;return null==e&&(e=null!=(n=this.getConfig("url"))?n:this.INTERNAL.default_mount_path),new t.Consumer(this.createWebSocketURL(e))},getConfig:function(t){var e;return null!=(e=document.head.querySelector("meta[name='action-cable-"+t+"']"))?e.getAttribute("content"):void 0},createWebSocketURL:function(t){var e;return t&&!/^wss?:/i.test(t)?((e=document.createElement("a")).href=t,e.href=e.href,e.protocol=e.protocol.replace("http","ws"),e.href):t},startDebugging:function(){return this.debugging=!0},stopDebugging:function(){return this.debugging=null},log:function(){var t;if(t=1<=arguments.length?e.call(arguments,0):[],this.debugging)return t.push(Date.now()),console.log.apply(console,["[ActionCable]"].concat(e.call(t)))}}}).call(this)}).call(this);var t=this.ActionCable;(function(){(function(){var e=function(t,e){return function(){return t.apply(e,arguments)}};t.ConnectionMonitor=function(){function n(t){this.connection=t,this.visibilityDidChange=e(this.visibilityDidChange,this),this.reconnectAttempts=0}var i,o,r;return n.pollInterval={min:3,max:30},n.staleThreshold=6,n.prototype.start=function(){if(!this.isRunning())return this.startedAt=o(),delete this.stoppedAt,this.startPolling(),document.addEventListener("visibilitychange",this.visibilityDidChange),t.log("ConnectionMonitor started. pollInterval = "+this.getPollInterval()+" ms")},n.prototype.stop=function(){if(this.isRunning())return this.stoppedAt=o(),this.stopPolling(),document.removeEventListener("visibilitychange",this.visibilityDidChange),t.log("ConnectionMonitor stopped")},n.prototype.isRunning=function(){return null!=this.startedAt&&null==this.stoppedAt},n.prototype.recordPing=function(){return this.pingedAt=o()},n.prototype.recordConnect=function(){return this.reconnectAttempts=0,this.recordPing(),delete this.disconnectedAt,t.log("ConnectionMonitor recorded connect")},n.prototype.recordDisconnect=function(){return this.disconnectedAt=o(),t.log("ConnectionMonitor recorded disconnect")},n.prototype.startPolling=function(){return this.stopPolling(),this.poll()},n.prototype.stopPolling=function(){return clearTimeout(this.pollTimeout)},n.prototype.poll=function(){return this.pollTimeout=setTimeout((t=this,function(){return t.reconnectIfStale(),t.poll()}),this.getPollInterval());var t},n.prototype.getPollInterval=function(){var t,e,n,o;return n=(o=this.constructor.pollInterval).min,e=o.max,t=5*Math.log(this.reconnectAttempts+1),Math.round(1e3*i(t,n,e))},n.prototype.reconnectIfStale=function(){if(this.connectionIsStale())return t.log("ConnectionMonitor detected stale connection. reconnectAttempts = "+this.reconnectAttempts+", pollInterval = "+this.getPollInterval()+" ms, time disconnected = "+r(this.disconnectedAt)+" s, stale threshold = "+this.constructor.staleThreshold+" s"),this.reconnectAttempts++,this.disconnectedRecently()?t.log("ConnectionMonitor skipping reopening recent disconnect"):(t.log("ConnectionMonitor reopening"),this.connection.reopen())},n.prototype.connectionIsStale=function(){var t;return r(null!=(t=this.pingedAt)?t:this.startedAt)>this.constructor.staleThreshold},n.prototype.disconnectedRecently=function(){return this.disconnectedAt&&r(this.disconnectedAt)<this.constructor.staleThreshold},n.prototype.visibilityDidChange=function(){if("visible"===document.visibilityState)return setTimeout((e=this,function(){if(e.connectionIsStale()||!e.connection.isOpen())return t.log("ConnectionMonitor reopening stale connection on visibilitychange. visbilityState = "+document.visibilityState),e.connection.reopen()}),200);var e},o=function(){return(new Date).getTime()},r=function(t){return(o()-t)/1e3},i=function(t,e,n){return Math.max(e,Math.min(n,t))},n}()}).call(this),function(){var e,n,i,o,r,a=[].slice,s=function(t,e){return function(){return t.apply(e,arguments)}},l=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};o=t.INTERNAL,n=o.message_types,i=o.protocols,r=2<=i.length?a.call(i,0,e=i.length-1):(e=0,[]),i[e++],t.Connection=function(){function e(e){this.consumer=e,this.open=s(this.open,this),this.subscriptions=this.consumer.subscriptions,this.monitor=new t.ConnectionMonitor(this),this.disconnected=!0}return e.reopenDelay=500,e.prototype.send=function(t){return!!this.isOpen()&&(this.webSocket.send(JSON.stringify(t)),!0)},e.prototype.open=function(){if(this.isActive())throw t.log("Attempted to open WebSocket, but existing socket is "+this.getState()),new Error("Existing connection must be closed before opening");return t.log("Opening WebSocket, current state is "+this.getState()+", subprotocols: "+i),null!=this.webSocket&&this.uninstallEventHandlers(),this.webSocket=new WebSocket(this.consumer.url,i),this.installEventHandlers(),this.monitor.start(),!0},e.prototype.close=function(t){var e;if((null!=t?t:{allowReconnect:!0}).allowReconnect||this.monitor.stop(),this.isActive())return null!=(e=this.webSocket)?e.close():void 0},e.prototype.reopen=function(){var e;if(t.log("Reopening WebSocket, current state is "+this.getState()),!this.isActive())return this.open();try{return this.close()}catch(n){return e=n,t.log("Failed to reopen WebSocket",e)}finally{t.log("Reopening WebSocket in "+this.constructor.reopenDelay+"ms"),setTimeout(this.open,this.constructor.reopenDelay)}},e.prototype.getProtocol=function(){var t;return null!=(t=this.webSocket)?t.protocol:void 0},e.prototype.isOpen=function(){return this.isState("open")},e.prototype.isActive=function(){return this.isState("open","connecting")},e.prototype.isProtocolSupported=function(){var t;return t=this.getProtocol(),l.call(r,t)>=0},e.prototype.isState=function(){var t,e;return e=1<=arguments.length?a.call(arguments,0):[],t=this.getState(),l.call(e,t)>=0},e.prototype.getState=function(){var t,e;for(e in WebSocket)if(WebSocket[e]===(null!=(t=this.webSocket)?t.readyState:void 0))return e.toLowerCase();return null},e.prototype.installEventHandlers=function(){var t,e;for(t in this.events)e=this.events[t].bind(this),this.webSocket["on"+t]=e},e.prototype.uninstallEventHandlers=function(){var t;for(t in this.events)this.webSocket["on"+t]=function(){}},e.prototype.events={message:function(t){var e,i,o;if(this.isProtocolSupported())switch(e=(o=JSON.parse(t.data)).identifier,i=o.message,o.type){case n.welcome:return this.monitor.recordConnect(),this.subscriptions.reload();case n.ping:return this.monitor.recordPing();case n.confirmation:return this.subscriptions.notify(e,"connected");case n.rejection:return this.subscriptions.reject(e);default:return this.subscriptions.notify(e,"received",i)}},open:function(){if(t.log("WebSocket onopen event, using '"+this.getProtocol()+"' subprotocol"),this.disconnected=!1,!this.isProtocolSupported())return t.log("Protocol is unsupported. Stopping monitor and disconnecting."),this.close({allowReconnect:!1})},close:function(){if(t.log("WebSocket onclose event"),!this.disconnected)return this.disconnected=!0,this.monitor.recordDisconnect(),this.subscriptions.notifyAll("disconnected",{willAttemptReconnect:this.monitor.isRunning()})},error:function(){return t.log("WebSocket onerror event")}},e}()}.call(this),function(){var e=[].slice;t.Subscriptions=function(){function n(t){this.consumer=t,this.subscriptions=[]}return n.prototype.create=function(e,n){var i,o,r;return o="object"==typeof(i=e)?i:{channel:i},r=new t.Subscription(this.consumer,o,n),this.add(r)},n.prototype.add=function(t){return this.subscriptions.push(t),this.consumer.ensureActiveConnection(),this.notify(t,"initialized"),this.sendCommand(t,"subscribe"),t},n.prototype.remove=function(t){return this.forget(t),this.findAll(t.identifier).length||this.sendCommand(t,"unsubscribe"),t},n.prototype.reject=function(t){var e,n,i,o,r;for(o=[],e=0,n=(i=this.findAll(t)).length;e<n;e++)r=i[e],this.forget(r),this.notify(r,"rejected"),o.push(r);return o},n.prototype.forget=function(t){var e;return this.subscriptions=function(){var n,i,o,r;for(r=[],n=0,i=(o=this.subscriptions).length;n<i;n++)(e=o[n])!==t&&r.push(e);return r}.call(this),t},n.prototype.findAll=function(t){var e,n,i,o,r;for(o=[],e=0,n=(i=this.subscriptions).length;e<n;e++)(r=i[e]).identifier===t&&o.push(r);return o},n.prototype.reload=function(){var t,e,n,i,o;for(i=[],t=0,e=(n=this.subscriptions).length;t<e;t++)o=n[t],i.push(this.sendCommand(o,"subscribe"));return i},n.prototype.notifyAll=function(){var t,n,i,o,r,a,s;for(n=arguments[0],t=2<=arguments.length?e.call(arguments,1):[],a=[],i=0,o=(r=this.subscriptions).length;i<o;i++)s=r[i],a.push(this.notify.apply(this,[s,n].concat(e.call(t))));return a},n.prototype.notify=function(){var t,n,i,o,r,a,s;for(a=arguments[0],n=arguments[1],t=3<=arguments.length?e.call(arguments,2):[],r=[],i=0,o=(s="string"==typeof a?this.findAll(a):[a]).length;i<o;i++)a=s[i],r.push("function"==typeof a[n]?a[n].apply(a,t):void 0);return r},n.prototype.sendCommand=function(t,e){var n;return n=t.identifier,this.consumer.send({command:e,identifier:n})},n}()}.call(this),function(){t.Subscription=function(){function t(t,n,i){this.consumer=t,null==n&&(n={}),this.identifier=JSON.stringify(n),e(this,i)}var e;return t.prototype.perform=function(t,e){return null==e&&(e={}),e.action=t,this.send(e)},t.prototype.send=function(t){return this.consumer.send({command:"message",identifier:this.identifier,data:JSON.stringify(t)})},t.prototype.unsubscribe=function(){return this.consumer.subscriptions.remove(this)},e=function(t,e){var n,i;if(null!=e)for(n in e)i=e[n],t[n]=i;return t},t}()}.call(this),function(){t.Consumer=function(){function e(e){this.url=e,this.subscriptions=new t.Subscriptions(this),this.connection=new t.Connection(this)}return e.prototype.send=function(t){return this.connection.send(t)},e.prototype.connect=function(){return this.connection.open()},e.prototype.disconnect=function(){return this.connection.close({allowReconnect:!1})},e.prototype.ensureActiveConnection=function(){if(!this.connection.isActive())return this.connection.open()},e}()}.call(this)}).call(this),"object"==typeof module&&module.exports?module.exports=t:"function"==typeof define&&define.amd&&define(t)}.call(this),function(){this.App||(this.App={}),App.cable=ActionCable.createConsumer()}.call(this),function(){var t;null!=(t=$("#js-cv-id").val())&&(App.room=App.cable.subscriptions.create({channel:"ScoreChannel",id:t},{connected:function(){return console.log("websocket connedted")},disconnected:function(){return console.log("websocket disconnected")},received:function(t){var e;return e=t.score,$('[data-channel="score"]').text(e),$(".resume-score-progress-bar .bar-value").css("width",e+"%")}}))}.call(this),window.hybridEnableTouch=!0,$(".email-js-container").length>0&&(send_email_validate=function(){var t=0===$("#email_to").length||$("#email_to").val().length>0;if(t){if($(".send-email-btn").click(),"ios"===client)return{info:"\u6b63\u5728\u53d1\u9001...",error:""};$("#email-send").prop("disabled",!0),$("#email-send").text("\u6b63\u5728\u53d1\u9001...")}else if(t){if(!verify){if($("#verify-contact-email-modal").modal("show"),"ios"===client)return{info:"",error:""}}}else{if("ios"===client)return{info:"",error:"\u6536\u4ef6\u4eba\u4e0d\u80fd\u4e3a\u7a7a"};$.notify("\u6536\u4ef6\u4eba\u4e0d\u80fd\u4e3a\u7a7a","error")}},send_preview_email_validate=function(){if(0===$("#email_reply_to").val().length){if("ios"===client)return{info:"",error:"\u53d1\u4ef6\u4eba\u4e0d\u80fd\u4e3a\u7a7a"};$.notify("\u53d1\u4ef6\u4eba\u4e0d\u80fd\u4e3a\u7a7a","error")}else{if(JSON.parse($(".send-email").data("contact-email-confirmed"))){if($(".send-email-to-self-mailbox-btn").click(),"ios"===client)return{info:"\u53d1\u9001\u6210\u529f,\u8bf7\u5230\u90ae\u7bb1\u4e2d\u67e5\u770b",error:""}}else if($("#verify-contact-email-modal").modal("show"),"ios"===client)return{info:"",error:""}}}),function(){var t=navigator.userAgent.toLowerCase(),e=null;(t.indexOf("iphone")>=0||t.indexOf("ipad")>=0)&&document.body.addEventListener("touchend",function(t){var n=(new Date).getTime(),i=n-(e=e||n+1);if(i<500&&i>0)return t.preventDefault(),!1;e=n},!1)}(),$("body").tooltip({selector:"[data-toggle=tooltip]"}),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?$.notify.defaults({globalPosition:"top left"}):$.notify.defaults({globalPosition:"top center"}),$(document).on("click",".edit-panel .to-date",function(){const t=$(".edit-panel").data("lang");var e=$(this).find(".to-date-dot-inline"),n=$(this).siblings().find('input[name*="end_at"]'),i=$(this).siblings().find('input[name*="present"]');e.hasClass("active")?(e.removeClass("active"),i.val(""),n.attr("type","text"),i.attr("type","hidden")):(e.addClass("active"),n.val(""),n.attr("type","hidden"),i.attr("type","text"),"cn"===t?i.val("\u81f3\u4eca"):i.val("Present")),$(this).hide()}),$(document).on("click",".today",function(){$(".end-at").val("\u81f3\u4eca")}),$(document).on("click",'input[name*="end_at"], input[name*="present"]',function(){$(this).closest(".form-input").next().show()}),$(document).on("click","#example-hide",function(){$(".example-panel").hide()}),$(document).on("mouseover",".info-title-edit-btn",function(){$(this).prev().css("color","#FF4F4C")}),$(document).on("mouseleave",".info-title-edit-btn",function(){$(this).prev().css("color","#404040")}),$(document).on("change","select.mobile-file-index-select",function(){var t=$(this).find("option:selected");if("choose-cv"==$(this).val()){$("#select-cv-modal").modal("show");var e=$(this).data("lang");$("select#cv_id."+e+"-select").val($(this).data("cv-id"))}else if("continue-edit"==$(this).val())"ios"==client?setupWebViewJavascriptBridge(function(t){t.callHandler("saveSuccess",{successInfo:"\u514d\u8d39\u7248\u4e0d\u53ef\u7f16\u8f91\u66f4\u591a\u7b80\u5386\uff0c\u8bf7\u5347\u7ea7\u4f1a\u5458"},function(){})}):$.notify("\u514d\u8d39\u7248\u4e0d\u53ef\u7f16\u8f91\u66f4\u591a\u7b80\u5386\uff0c\u8bf7\u5347\u7ea7\u4f1a\u5458","info"),$("#resume-robot-modal").modal("show");else if("show-resume-robot"==$(this).val())"ios"==client?setupWebViewJavascriptBridge(function(t){t.callHandler("saveSuccess",{successInfo:"\u5df2\u8fbe\u7b80\u5386\u4e0a\u9650\uff0c\u5347\u7ea7\u4f1a\u5458\u53ef\u521b\u5efa\u591a\u4efd\u7b80\u5386"},function(){})}):$.notify("\u5df2\u8fbe\u7b80\u5386\u4e0a\u9650\uff0c\u5347\u7ea7\u4f1a\u5458\u53ef\u521b\u5efa\u591a\u4efd\u7b80\u5386","info"),$("#resume-robot-modal").modal("show");else if("share-cv"==$(this).val()){var n=t.data("share-url"),i=t.data("name");"ios"==client?setupWebViewJavascriptBridge(function(t){t.callHandler("shareCvMiniprogram",{url:n,name:i},function(){})}):"android"==client?connectWebViewJavascriptBridge(function(t){initAndroidBridge(t),t.callHandler("shareCvMiniprogram",{shareUrl:n,name:i},function(){})}):window.location.href=n}else if("show-cv-rename-modal"==$(this).val())$("#edit-file-name-modal-"+t.data("cv-id")).modal("show");else if("show-cl-rename-modal"==$(this).val())$("#cover-letter-info-modal-"+t.data("cl-id")).modal("show");else if("show-email-rename-modal"==$(this).val())$("#email-info-modal-"+t.data("email-id")).modal("show");else{n=$(this).val();if("post"==t.data("url-type")){if("apply"==t.data("name")&&"ios"==client){if(-1==versionCompare(navigator.userAgent.split("app_version=")[1],"2.2.5"))return void $("#app-missing-function").modal("show");setupWebViewJavascriptBridge(function(t){t.callHandler("applyCv",{},function(){})})}$.ajax({url:n,type:"post",dataType:"script"})}else if("delete"==t.data("url-type"))t.data("apply-count")?($(".modal").modal("hide"),$("#confirm-delete-cv-modal-"+t.data("cv-id")).modal("show")):confirm(t.data("confirm-text"))&&$.ajax({url:n,type:"delete",dataType:"script"});else if(t.data("download"))if("ios"==client){i=t.data("name");var o=t.data("token"),r=t.data("download-type");setupWebViewJavascriptBridge(function(t){t.callHandler("loadPDF",{type:r+"s/",name:i,token:o},function(){})})}else window.location.href=n;else"ios"==client&&-1==versionCompare(navigator.userAgent.split("app_version=")[1],"2.2.5")?$("#app-missing-function").modal("show"):window.location.href=n}$("select.mobile-file-index-select").prop("selectedIndex",0)}),
$(document).on("click",".up",function(){const t=0===$("#cvs-other").length,e=0===$("#cvs-show").length;if(t&&e){var n=$(this).data("url"),i=$(this).closest(".info-content");i.prevAll(".info-content:first").before(i),$(".tag-ahead-btn:first").hide(),$(".tag-ahead-btn:not(:first)").show(),$(".tag-back-btn:last").hide(),$(".tag-back-btn:not(:last)").show();$(this).closest(".info-content-item-tag").attr("id");$.post(n)}}),$(document).on("click",".down",function(){const t=0===$("#cvs-other").length,e=0===$("#cvs-show").length;if(t&&e){var n=$(this).data("url"),i=$(this).closest(".info-content");i.nextAll(".info-content:first").after(i),$(".tag-ahead-btn:first").hide(),$(".tag-ahead-btn:not(:first)").show(),$(".tag-back-btn:last").hide(),$(".tag-back-btn:not(:last)").show();$(this).closest(".info-content-item-tag").attr("id");$.post(n)}}),$(function(){var t=new Swiper("#template-swiper-container",{direction:"horizontal",loop:!1,pagination:".swiper-pagination"});$("#swiper-btn-left").click(function(){t.slidePrev()}),$("#swiper-btn-right").click(function(){t.slideNext()})}),$(function(){new Swiper("#home-swiper-container",{direction:"horizontal",loop:!0,autoplay:3e3,autoplayDisableOnInteraction:!1,pagination:".swiper-pagination"})}),$(function(){cvEditorReloadDataTime();var t=function(){$(".tag-ahead-btn").first().hide(),$(".tag-back-btn").last().hide()};$(document).on("click",".add_fields",function(){initTinymce(),cvEditorReloadDataTime()});var e=function(){var t=$("#mobile-nav-btn"),e=$("#mobile-nav");t.on("click",function(){e.removeClass("hide"),document.documentElement.style.overflow="hidden",$(".mobile-nav-mask").on("click",function(){e.addClass("hide"),document.documentElement.style.overflow="auto"})})},n=function(){navigator.userAgent;var t=!0;is_mobile&&($(document).on("touchmove","input.start_at, input.end_at, input#cv_profile_attributes_birthday",function(){t=!1,$(document).on("touchend","input.start_at, input.end_at, input#cv_profile_attributes_birthday",function(){t=!0})}),$(document).on("click touchstart",".clear-mobile-date-btn",function(){$(this).next("input").val("")}),$(document).on("touchend","input.start_at, input.end_at, input#cv_profile_attributes_birthday",function(){t&&(this.type="month",setTimeout(function(){this.focus()},1e3),$(this).change(function(){this.type="text",myDate=$(this).val().replace("-","/"),$(this).val(myDate)}))}),$("input.start_at, input.end_at, input#cv_profile_attributes_birthday").focusout(function(){this.type="text","cv_profile_attributes_birthday"==$(this).attr("id")&&$(this).val().length>0&&($(this).addClass("hide"),$(".js-age-or-birthday").removeClass("hide"),$(".js-age-or-birthday .dropdown-toggle").click())}))},i=function(){var t=$("#mobile-blog-nav-btn"),e=$("#mobile-nav");t.on("click",function(){e.removeClass("hide"),document.documentElement.style.overflow="hidden",$(".mobile-nav-mask").on("click",function(){e.addClass("hide"),document.documentElement.style.overflow="auto"})})},o=function(){var t;is_mobile&&$(document).on("focus","input[type='text']",function(){var e=this,n=e.scrollWidth/e.value.length,i=$(e).width()/n;clearInterval(t),t=setInterval(function(){var t=e.selectionStart,o=e.selectionEnd;if(!($(e).width()+1>e.scrollWidth)){var r=t-e.scrollLeft/n,a=o-e.scrollLeft/n,s=.1*i;r>s&&a<i-s||r<s&&a>i-s||(r<s?$(e).scrollLeft(e.scrollLeft-2*n):$(e).scrollLeft(e.scrollLeft+2*n),e.setSelectionRange(t,o))}},100)}).blur(function(){clearInterval(t)})},r=function(){$(document).on("click touchstart",".mobile-section-down",function(){var t=$(this).closest(".info-item");t.next().after(t),s()})},a=function(){$(document).on("click touchstart",".mobile-section-up",function(){var t=$(this).closest(".info-item");t.prev().before(t),s()})},s=function(){var t=$("#cv-basic-info").data("position-update"),e={};$(".cv-basic-info .info-item").each(function(){e[this.id]=$(this).index()}),$.post(t,{cv:{sections_position:JSON.stringify(e)}})},l=function(){$(document).ready(function(){if($("#section-position-hash").text().replace(/^\s+/,"").length>0){var t=JSON.parse($("#section-position-hash").text());$.each(t,function(t,e){$("#"+t).attr("data-position",e)}),$("#cv-basic-info").each(function(){var t=$(this);t.append(t.find(".info-item").get().sort(function(t,e){return $(t).data("position")-$(e).data("position")}))})}})},c=function(){$(document).on("click touchstart","#cvs-mobile_choose_module .section-title-edit-btn",function(){$titleText=$(this).parent().parent().parent().find(".item-left .section-title"),$titleInput=$(this).parent().parent().parent().find(".item-left .section-title-input"),$titleText.addClass("hidden"),$titleInput.removeClass("hidden"),$titleInput.focus()})},u=function(){$(document).on("blur",".section-title-input",function(){if($(this).closest(".info-item").children(".item-left").length>0){$titleInput=$(this),$titleText=$(this).prev();const t=$(this).attr("name"),e=$(this).val(),n=$(this).data("url");if(0===$titleInput.closest(".custom-info").children(".item-left").length){const i={};i[t]=e,$titleInput.addClass("hidden"),$titleText.removeClass("hidden"),$titleText.text($titleInput.val()),$.ajax({type:"PUT",url:n,data:{cv:i},success:function(){$.notify("\u4fdd\u5b58\u6210\u529f","success")},error:function(){$.notify("\u50a8\u5b58\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5","error")}})}else{const i={};i[t]=e,$titleInput.addClass("hidden"),$titleText.removeClass("hidden"),$titleText.text($titleInput.val()),$.ajax({type:"PUT",url:n,data:{custom_section:i},success:function(){$.notify("\u4fdd\u5b58\u6210\u529f","success")},error:function(){$.notify("\u50a8\u5b58\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5","error")}})}}})};(function(){$(document).on("click touchstart","#cvs-mobile_choose_module .edit-section",function(){$editBtn=$("#cvs-mobile_choose_module .item-edit"),$enterBtn=$("#cvs-mobile_choose_module #item-enter"),"rgb(156, 156, 156)"==$(this).css("color")?($enterBtn.addClass("hidden"),$editBtn.removeClass("hidden"),$(this).text("\u4fdd\u5b58"),$(this).css("color","#ff4f4c")):($enterBtn.removeClass("hidden"),$editBtn.addClass("hidden"),$(this).text("\u7f16\u8f91"),$(this).css("color","#9c9c9c"))})})(),c(),u(),l(),a(),r(),o(),n(),i(),e(),t()}),$(document).on("change",".verb-select",function(){var t=$("select[name=type]").val(),e=$("select[name=display]").val();$.ajax({url:"/verbs",type:"GET",dataType:"script",data:{type:t,display:e}})}),$(document).on("click","#mobile-nav .mobile-nav-list li a",function(){$(this).closest("li").css("background-color","#F5F5F7"),$(this).closest("li").css("height","50px"),$(this).closest("li").css("line-height","50px")});var is_mobile=$('input[name="is_mobile"]').val();$(document).on("click",".info-content-item-tag",function(t){$(t.target).closest(".tag-ctrl-bar").length>0||("none"!==$(this).siblings(".info-content-item-form").css("display")?($(this).find(".tag-info").removeClass("theme-color"),$(this).siblings(".info-content-item-form").hide()):(is_mobile&&!$(".mce-toolbar-grp").hasClass("hide")&&$(".mce-toolbar-grp").addClass("hide"),$(".info-content-item-tag").siblings(".info-content-item-form").hide(),$(".info-content-item-tag").find(".tag-info").removeClass("theme-color"),$(this).siblings(".info-content-item-form").show(),$(this).find(".tag-info").addClass("theme-color")))}),is_mobile?($('[data-toggle="tooltip"]').on("show.bs.tooltip",function(){$(this).click()}),$(".wechat-share-invite").on("click",function(){$("img.mobile-share-invite-background").removeClass("hide"),$("body").css("overflow","hidden"),window.scrollTo(0,0)})):($(document).on("mouseover",".file-item",function(){$(this).find(".file-operation-btn").removeClass("hide")}),$(document).on("mouseleave",".file-item",function(){$(this).find(".file-operation-btn").addClass("hide")})),$(".recommand-file-item .file-example .example-img").on("mouseover",function(){$(this).find(".use-example-file").removeClass("hidden")}),$(".recommand-file-item .file-example .example-img").on("mouseleave",function(){$(this).find(".use-example-file").addClass("hidden")}),$(".use-template-button a, .use-example-file a").on("click",function(){$(this).addClass("disabled")}),$("li.file-item").on("click",function(t){0===$(t.target).closest(".file-operation-btn").length&&0===$(t.target).closest(".show-operation-btn").length&&$(this).data("url")!=undefined&&""!=$(this).data("url")&&(window.location.href=$(this).data("url"))}),$("#interview-save").on("click",function(){$(".contact-submit").click()}),$(document).on("click","#js-cv-name-tips-title",function(){const t=$(this).find(".title-btn i"),e=$("#js-cv-name-tips-content");e.hasClass("hidden")?(t.addClass("fa-caret-up"),t.removeClass("fa-caret-down"),e.removeClass("hidden")):(t.addClass("fa-caret-down"),t.removeClass("fa-caret-up"),e.addClass("hidden"))}),$(document).ready(function(){$(".tips-item:first").addClass("active"),"ios"==client&&($(".ios-buy-member").on("click",function(){setupWebViewJavascriptBridge(function(t){t.callHandler("shareMember",{title:"\u5347\u7ea7\u8d85\u7ea7\u4f1a\u5458",desc:"\u8d85\u7ea7\u4f1a\u5458\u53ef\u4ee5\u521b\u5efa\u591a\u4efd\u7b80\u5386\u53ca\u6c42\u804c\u4fe1\u7b49\u6587\u4ef6\u3002\u53ef\u4ee5\u65e0\u9650\u7f16\u8f91\u3001\u4e0b\u8f7d\u548c\u590d\u5236\u6587\u4ef6\uff0c\u53ef\u4ee5\u770b\u5230\u5168\u90e8\u5b8c\u6574\u6848\u4f8b\uff0c\u5e76\u4e14\u53ef\u4ee5\u65e0\u9650\u5236\u4f7f\u7528\u7b80\u5386\u667a\u80fd\u4f18\u5316\u529f\u80fd\u3002"},function(){})})}),$(".ios-buy-tutor").on("click",function(){setupWebViewJavascriptBridge(function(t){t.callHandler("shareTutor",{title:"\u8d85\u7ea7\u7b80\u5386 | \u9876\u7ea7\u540d\u4f01\u5bfc\u5e08\u8f85\u5bfc",desc:"\u6765\u81ea\u6295\u884c\u3001\u54a8\u8be2\u3001BAT\u4ee5\u53ca\u5404\u5927\u4e94\u767e\u5f3a\u516c\u53f8\u7684\u9876\u7ea7\u5bfc\u5e08\u4e3a\u4f60\u63d0\u4f9b\u7b80\u5386\u8f85\u5bfc\u3002\u5bfc\u5e08\u9488\u5bf9\u95ee\u9898\u8fdb\u884c\u56de\u590d\uff0c\u5e76\u5bf9\u4e8e\u7b80\u5386\u6574\u4f53\u5185\u5bb9\u548c\u6c42\u804c\u65b9\u5411\u63d0\u4f9b\u70b9\u8bc4\u3002"},function(){})})}),$(".ios-my-order").on("click",function(){setupWebViewJavascriptBridge(function(t){t.callHandler("shareMyOrder",{title:"\u8d85\u7ea7\u7b80\u5386 | \u652f\u4ed8\u6211\u7684\u8ba2\u5355 ",desc:"HR \u63a8\u8350\u7684\u4e13\u4e1a\u7b80\u5386\uff0c\u624b\u673a\u7535\u8111\u540c\u6b65\u7f16\u8f91\uff0c\u4e2d\u82f1\u53cc\u8bed\u6a21\u677f\uff0c\u540d\u4f01\u7cbe\u82f1\u90fd\u5728\u7528"},function(){})})})),$(".android-nav-finish").on("click",function(){connectWebViewJavascriptBridge(function(t){initAndroidBridge(t),t.callHandler("pageFinish",{},function(){})})})}),$(document).on("click",".close-get-free-membership-modal",function(){$("#get-free-membership-modal").modal("hide")}),$(document).on("click",".can-not-dump-file",function(){$.notify("\u5df2\u8fbe\u7b80\u5386\u4e0a\u9650\uff0c\u5347\u7ea7\u4f1a\u5458\u53ef\u521b\u5efa\u591a\u4efd\u7b80\u5386","error")}),$(document).on("click",".cannot-import-cv",function(){var t=$(this).data("error");t==undefined&&(t="\u672a\u6210\u529f\u5bfc\u5165\uff0c\u8d85\u51fa\u7b80\u5386\u6570\u91cf\u9650\u5236"),$.notify(t,"error")}),$(".mobile-share-invite-background").on("click",function(){$(this).addClass("hide")}),$(".wechat-cannot-download-btn").click(function(){}),$(document).on("click",".download-app-btn",function(){$("#download-app-modal").modal("show"),$(".mobile-choose-operation-list").length>0&&($(".mobile-choose-operation-list").slideUp(500),$(".container").css("overflow","auto"),$(".container").css("position","static"),$(".mobile-modal-background").addClass("hide"))}),$(document).on("touchstart",".mobile-cancel-edit-btn",function(){const t=$(".reply-email-widget .post-email-btn");"ios"==client&&setupWebViewJavascriptBridge(function(t){t.callHandler("cancelEmailEdit",{},function(){})}),t.is(":disabled")?$(".cancel-quick-reply-btn").trigger("touchstart"):($(".mobile-choose-save").slideDown(500),$("body").css("overflow","hidden"),$(".mobile-modal-background").removeClass("hide"),navigator.userAgent.indexOf("android_wondercv_app")>-1?$("html, body").animate({scrollTop:$(document).height()},1e3):$("body").css("position","fixed"))}),$(document).on("touchstart",".cancel-choose-btn",function(){$(".mobile-choose-save").slideUp(500),$("body").css("overflow","auto"),-1==navigator.userAgent.indexOf("android_wondercv_app")&&$("body").css("position","initial"),$(".mobile-modal-background").addClass("hide")}),console.log("application js");